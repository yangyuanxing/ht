/*
 * client.js - v0.3.5
 * Compiled Tue Sep 24 2019 17:40:44 GMT+0800 (GMT+08:00)
 * Copyright (c) 2019 www.hightopo.com
 */

var hteditor=function(){"use strict";function t(t,j,C){C.style.cursor="ew-resize";var k=C.innerHTML.charAt(0),i=j.querySelector("input.color_"+k),U=function(j){j.preventDefault();var C=("A"===k?parseFloat(i.value):parseInt(i.value))||0,U=ht.Default.getClientPoint(j).x,K=function(j){j.preventDefault();var K=ht.Default.getClientPoint(j).x-U,y=void 0;"A"===k?(y=C+.01*K,y>1&&(y=1),y<0&&(y=0),i.value=y.toFixed(2)):(y=C+1*K,y>255&&(y=255),y<0&&(y=0),i.value=y),t.updateInputChange()};window.addEventListener("mousemove",K,!1),window.addEventListener("touchmove",K,!1);var y=function(t){t.preventDefault(),window.removeEventListener("mousemove",K,!1),window.removeEventListener("touchmove",K,!1),window.removeEventListener("mouseup",y,!1),window.removeEventListener("touchend",y,!1)};window.addEventListener("mouseup",y,!1),window.addEventListener("touchend",y,!1)};C.addEventListener("mousedown",U,!1),C.addEventListener("touchstart",U,!1)}function j(t){var j=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),C=window.location.search.substr(1).match(j);return null!=C?decodeURIComponent(C[2]):null}function C(t){return ht.Default.clone(t)}function k(t){return parseFloat(t.toFixed(ht.Default.numberDigits))}function i(t,j){if(null!=t)return j||!lj.config.traceMissingI18n||lj.customStrings[t]||lj.strings[t]||console.log("i18n missing:["+t+"]"),j?lj.customStrings[t]||lj.strings[t]:lj.customStrings[t]||lj.strings[t]||t}function U(t,j){var C=t.indexOf(j);C>=0&&t.splice(C,1)}function K(t){return ht.Default.isEmptyObject(t)}function y(t){return t?dt(t)?t:t.__ht__||t.toString():""}function L(t){var j=y(t),C=j.indexOf("{")+1,k=j.lastIndexOf("}");for(j=j.substring(C,k);j.startsWith("\n");)j=j.substr(1);for(;j.endsWith("\n");)j=j.substring(0,j.length-1);return j}function X(t){var j=t.indexOf("function");if(t&&!(j<0)){var C=void 0,k=t.indexOf("{")+1,i=t.lastIndexOf("}"),U=t.indexOf("(")+1,K=t.indexOf(")");return k&&i&&U&&K&&(C=new Function(t.substring(U,K),t.substring(k,i)),C.__ht__=t.substr(j)),C}}function u(t,j){if("s"===t)return function(t){return t.s(j)};if("a"===t)return function(t){return t.a(j)};if("p"===t){var C=ht.Default.getter(j);return function(t){if(t[C])return t[C]()}}}function a(t,j){if("s"===t)return function(t,C){return t.s(j,C)};if("a"===t)return function(t,C){return t.a(j,C)};if("p"===t){var C=ht.Default.setter(j);return function(t,j){if(t[C])return t[C](j)}}}function B(t){return 37===t.keyCode}function c(t){return 38===t.keyCode}function f(t){return 39===t.keyCode}function R(t){return 40===t.keyCode}function d(t){return 13===t.keyCode}function m(t){return 27===t.keyCode}function D(t){return ht.Default.isDelete(t)}function b(t){return ht.Default.isLeftButton(t)}function J(t){return ht.Default.isDoubleClick(t)}function v(t,j){ht.Default.startDragging(t,j)}function H(t){return ht.Default.getClientPoint(t)}function G(t){return ht.Default.getTargetElement(t)}function Z(t){return ht.Default.getPagePoint(t)}function q(){return ht.Default.getWindowInfo()}function A(t,j){return ht.Default.getDistance(t,j)}function z(){return ht.Default.unionPoint.apply(this,arguments)}function T(t){return ht.Default.getImageMap()[t]?(delete ht.Default.getImageMap()[t],!0):!!ht.Default.getCompTypeMap()[t]&&(delete ht.Default.getCompTypeMap()[t],!0)}function E(t,j,C){return ht.Default.getPosition(t,j,C)}function s(t,j){return ht.Default.stringify(t,j)}function e(t){return ht.Default.parse(t)}function x(t){if(!t)return"";var j=t.lastIndexOf(".");return-1===j?t:t.substr(0,j)}function o(t){return t=t.replace(/^.*[\\\/]/,""),x(t)}function n(t,j,C,k,i){ht.Default.layout(t,j,C,k,i)}function w(t,j,C,k){ht.Default.setCanvas(t,j,C,k)}function r(t){ht.Default.removeHTML(t)}function Y(t,j,C){ht.Default.xhrLoad(t,j,C)}function p(t){return ht.Default.isShiftDown(t)}function M(t){return ht.Default.isCtrlDown(t)}function Q(t,j){return ht.Default.createView(t,j)}function N(t){return ht.Default.createCanvas(t)}function O(t,j){return ht.Default.createDiv(j,t)}function F(t,j){return ht.Default.unionRect(t,j)}function S(t,j,C,k,i,U,K,y,L,X){return ht.Default.drawText(t,j,C,k,i,U,K,y,L,X)}function I(t,j,C,k,i,U,K,y,L,X){ht.Default.drawStretchImage(t,j,C,k,i,U,K,y,L,X)}function _(t,j,C,k,i,U,K){ht.Default.drawBorder(t,j,C,k,i,U,K)}function g(t,j,C,k,i,U){var K=t.getContext("2d");return K.save(),j=j||0,C=C||0,k=k||1,U=U||ht.Default.devicePixelRatio,K.translate(j*U,C*U),k*=U,1!==k&&K.scale(k,k),i&&(K.beginPath(),K.rect(i.x,i.y,i.width,i.height),K.clip(),K.clearRect(i.x,i.y,i.width,i.height)),K}function h(t,j){var C=t.prototype,k=ht.Default.getMSMap();for(var i in j)k[i]&&k.hasOwnProperty(i)?k[i](C,j):C[i]=j[i]}function W(t,j){j[t._id]=t,t.eachChild(function(t){j[t._id]=t,W(t,j)})}function V(t){ht.Default.preventDefault(t)}function P(t){return/^displays/.test(t)}function l(t){return/^symbols/.test(t)}function tt(t){return/^components/.test(t)}function jt(t){return/^scenes/.test(t)}function Ct(t){return/^models/.test(t)}function kt(t){return/^assets/.test(t)}function it(t){return/\.(png|jpg|gif|jpeg|bmp|svg)$/i.test(t)}function Ut(t){return/\.json$/i.test(t)}function Kt(t){return/\.mp3$/i.test(t)}function yt(t){return/\.mp4$/i.test(t)}function Lt(t){return/\.svg$/i.test(t)}function Xt(t){return/\.dxf$/i.test(t)}function ut(t){return/\.obj$/i.test(t)}function at(t){return/\.mtl$/i.test(t)}function Bt(t){return/\.ttf$/i.test(t)}function ct(t){return/\.otf$/i.test(t)}function ft(t){return/\.js$/i.test(t)}function Rt(t){return t.substring(0,t.length-5)+".png"}function dt(t){return"string"==typeof t||t instanceof String}function $t(t){return t&&"object"==typeof t}function mt(t){return"function"==typeof t}function Dt(t){return t instanceof Array}function bt(t,j){var C=t.getPosition().x,k=t.getPosition().y,i=t.getWidth(),U=t.getHeight(),K=[C-i*t.getAnchor().x,k-U*t.getAnchor().y,i,U];zt(j,"rect",t.a("rect"),K,void 0)}function Jt(t,j){var C=t.getRotation();zt(j,"rotation",t.a("rotation"),C,0)}function vt(t,j){var C=t.getAnchor().x,k=t.a("anchorX");zt(j,"anchorX",k,C,.5),C=t.getAnchor().y,k=t.a("anchorY"),zt(j,"anchorY",k,C,.5)}function Ht(t,j){var C=t.getScale().x,k=t.a("scaleX");zt(j,"scaleX",k,C,1),C=t.getScale().y,k=t.a("scaleY"),zt(j,"scaleY",k,C,1)}function Gt(t,j){var C=t.isClosePath();zt(j,"closePath",t.a("closePath"),C,!1)}function Zt(t,j,k,i,U){4===arguments.length&&(U=ht.Style[k]);var K=C(t.s(k));zt(j,i,t.a(k),K,U)}function qt(t,j){var C=t.getDisplayName();zt(j,"displayName",t.a("displayName"),C,void 0)}function At(t,j){if(Dt(t)&&Dt(j)){if(t.length===j.length){for(var C=0;C<t.length;C++)if(!At(t[C],j[C]))return!1;return!0}return!1}if($t(t)&&$t(j)){var k=Object.keys(t);if(k.length===Object.keys(j).length){for(var i=0;i<k.length;i++){var U=k[i];if(!At(t[U],j[U]))return!1}return!0}return!1}return t===j}function zt(t,j,C,k,i){C?t[j]={func:C,value:k}:At(k,i)||void 0===k||(t[j]=k)}function Tt(t,j,C,k){st(t,"2d.visible",j.visible),st(t,"2d.selectable",j.selectable),st(t,"2d.movable",j.movable),st(t,"2d.editable",j.editable),st(t,"pixelPerfect",j.pixelPerfect,!1),st(t,"opacity",j.opacity,1),st(t,"clip.percentage",j.clipPercentage,1),st(t,"clip.direction",j.clipDirection,"top"),st(t,"layout.h",j.layoutH),st(t,"layout.v",j.layoutV),st(t,"prefix",j.prefix),st(t,"state",j.state),t instanceof ht.Text||(st(t,"shadow",j.shadow,!1),st(t,"select.color",j.shadowColor,ht.Color.highlight),st(t,"shadow.blur",j.shadowBlur,6),st(t,"shadow.offset.x",j.shadowOffsetX,3),st(t,"shadow.offset.y",j.shadowOffsetY,3)),et(t,j),ot(t,j),nt(t,j),xt(t,j),t instanceof ht.Shape&&!j.rect||rt(t,j,C,k);var i=Yj.customProperties.comp;i&&i.length&&i.forEach(function(C){st(t,C.property,j[C.property],C.defaultValue)}),tC.forEach(function(C){t.a(C,j[C])}),t.a("renderHTML",j.renderHTML)}function Et(t,j){Zt(t,j,"2d.visible","visible"),Zt(t,j,"2d.selectable","selectable"),Zt(t,j,"2d.movable","movable"),Zt(t,j,"2d.editable","editable"),Zt(t,j,"pixelPerfect","pixelPerfect",!1),Zt(t,j,"opacity","opacity",1),Zt(t,j,"clip.percentage","clipPercentage",1),Zt(t,j,"clip.direction","clipDirection","top"),Zt(t,j,"layout.h","layoutH"),Zt(t,j,"layout.v","layoutV"),Zt(t,j,"prefix","prefix"),Zt(t,j,"state","state"),t instanceof ht.Text||(Zt(t,j,"shadow","shadow",!1),Zt(t,j,"select.color","shadowColor",ht.Color.highlight),Zt(t,j,"shadow.blur","shadowBlur",6),Zt(t,j,"shadow.offset.x","shadowOffsetX",3),Zt(t,j,"shadow.offset.y","shadowOffsetY",3)),qt(t,j),vt(t,j),Ht(t,j),Jt(t,j),t instanceof ht.Shape&&!t.a("rect")||bt(t,j);var C=Yj.customProperties.comp,k=!!Yj.saveCompCustomPropertyDefaultValue;C&&C.length&&C.forEach(function(C){k?Zt(t,j,C.property,C.property):Zt(t,j,C.property,C.property,C.defaultValue)}),tC.forEach(function(C){t.a(C)&&(j[C]=t.a(C))}),t.a("renderHTML")&&(j.renderHTML=t.a("renderHTML"))}function st(t,j,k,i){3===arguments.length&&(i=ht.Style[j]);var U=Yt(k);void 0===U&&(U=i),t.s(j,C(U)),t.a(j,pt(k))}function et(t,j){t.setDisplayName(Yt(j.displayName),void 0),t.a("displayName",pt(j.displayName))}function xt(t,j){t.setRotation(Yt(j.rotation,0)),t.a("rotation",pt(j.rotation))}function ot(t,j){var C=Yt(j.anchorX,.5),k=Yt(j.anchorY,.5);.5===C&&.5===k||t.setAnchor(C,k),t.a("anchorX",pt(j.anchorX)),t.a("anchorY",pt(j.anchorY))}function nt(t,j){var C=Yt(j.scaleX,1),k=Yt(j.scaleY,1);t.setScale(C,k),t.a("scaleX",pt(j.scaleX)),t.a("scaleY",pt(j.scaleY))}function wt(t,j){t.setClosePath(Yt(j.closePath,!1)),t.a("closePath",pt(j.closePath))}function rt(t,j,C,k){var i=Yt(j.rect),U=Yt(j.relative);i||(i=[0,0,C,k],U=!1);var K=i.length;if(4===K)i={x:i[0],y:i[1],width:i[2],height:i[3]},U&&(i.x*=C,i.y*=k,i.width*=C,i.height*=k);else if(3===K){var y=i[0];i={width:i[1],height:i[2]},U&&(i.width*=C,i.height*=k),"object"==typeof y?y.length&&(y={x:y[0],y:y[1]}):y=E(y,{x:0,y:0,width:C,height:k},i),i.x=y.x-i.width*t.getAnchor().x,i.y=y.y-i.height*t.getAnchor().y}var L=Yt(j.offsetX);L&&(i.x+=L),L=Yt(j.offsetY),L&&(i.y+=L),i.width<0||i.height<0?t.p(i.x,i.y):t.setRect(i),t.a("rect",pt(j.rect))}function Yt(t,j){var C=void 0;return C=$t(t)&&t.func?t.value:t,void 0===C&&(C=j),C}function pt(t){if($t(t)&&t.func)return t.func}function Mt(t){if(Dt(t)){for(var j=new ht.List,C=t.length,k=0;k<C;k+=2)j.add({x:t[k],y:t[k+1]});t=j}return t}function Qt(t){if(t instanceof ht.List&&(t=t.toArray()),Dt(t)){for(var j=[],C=0;C<t.length;C++){var k=t[C];j.push(k.x,k.y)}t=j}return t}function Nt(t){return{width:16,height:16,comps:[{type:function(j,C,k,i,U){var K=ht.Default.getImage(t.graphView.getImage(i));if(K&&K.snapshotURL)(K=ht.Default.getImage(K.snapshotURL))&&I(j,K,"uniform",C.x,C.y,C.width,C.height,i,U);else{var y=K&&K.boundExtend?i.getRect():t.graphView.getDataUIBounds(i);if(y&&y.width&&y.height){j.save();var L=Math.min(1,16/Math.max(y.width,y.height));j.translate(-y.x*L+(16-y.width*L)/2,-y.y*L+(16-y.height*L)/2),j.scale(L,L),t.graphView.drawData(j,i),j.restore()}}}}]}}function Ot(t,j){var C=t.graphView.getEdgeInfo(j);if(!C)return $C;var k=C.edgeTypeInfo,i=void 0,U=void 0;if(!C.type||C.points){C.sourcePoint.x,C.sourcePoint.y,C.targetPoint.x,C.targetPoint.y;C.type?(i=new ht.List(C.sourcePoint),i.addAll(C.points),i.add(C.targetPoint),U=C.segments):C.looped?(i=DC,U=bC):i=C.center?[C.c1,C.sourcePoint,C.targetPoint,C.c2]:[C.sourcePoint,C.targetPoint]}else k&&(i=k.points,U=k.segments);var K=z(i);if(K&&(K.width||K.height)){var y=Math.max(1,Math.max(K.width,K.height)/16),L=[],X=(16-K.width/y)/2,u=(16-K.height/y)/2;i instanceof ht.List&&(i=i.toArray()),i.forEach(function(t){L.push((t.x-K.x)/y+X,(t.y-K.y)/y+u)});var a=U?U.toArray():null;return{width:16,height:16,comps:[{type:"shape",points:L,segments:a,borderWidth:1,borderColor:C.color,borderCap:C.cap,borderJoin:C.join}]}}return $C}function Ft(t){var j=z(t.getPoints());if(j&&(j.width||j.height)){var C=Math.max(1,Math.max(j.width,j.height)/16),k=[],i=(16-j.width/C)/2,U=(16-j.height/C)/2;t.getPoints().each(function(t){k.push((t.x-j.x)/C+i,(t.y-j.y)/C+U)});var K=t.getSegments()?t.getSegments().toArray():null;return{width:16,height:16,comps:[{type:"shape",points:k,segments:K,rotation:t.getRotation(),background:t.s("shape.background"),repeatImage:t.s("shape.repeat.image"),borderWidth:t.s("shape.border.width")?1:0,borderColor:t.s("shape.border.color"),borderCap:t.s("shape.border.cap"),borderJoin:t.s("shape.border.join"),gradient:t.s("shape.gradient"),gradientColor:t.s("shape.gradient.color"),closePath:t.isClosePath()}]}}return $C}function St(t){return ht.Default.isInput(t)}function It(t,j){var C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},k=C.nullable,U=void 0===k||k,K=C.trim,y=void 0!==K&&K,L=C.cancellable,X=void 0===L||L,u=C.width,a=void 0===u?300:u,B=C.height,c=void 0===B?120:B,f=C.maxLength,R=void 0===f?-1:f,d=C.checkFunc,$=void 0===d?void 0:d,m=arguments[3],D=new Vj;D.addRow([{id:"input",textField:{text:j}}],[.1]);var b=new Wj,J=[],v=null,H=null;v=function(){var t=D.v("input");return y&&t&&t.trim(),!1!==U||t?R>0&&t&&t.length>R?void _t(null,i("editor.inputmax"),function(){}):$&&!(t=$(t))?void _t(null,i("editor.invalidinput"),function(){}):(m(t,"ok"),void b.hide()):void _t(null,i("editor.inputempty"),function(){})},J.push({label:i("editor.ok"),action:v}),X&&(H=function(){m(j,"cancel"),b.hide()},J.push({label:i("editor.cancel"),action:H})),b.setConfig({title:t,draggable:!0,width:a,height:c,contentPadding:10,content:D,buttons:J,buttonsAlign:"right"}),b.$49$=H,b.$48$=v,b.show(),D.getViewById("input").getElement()._ignore=!0,D.getViewById("input").setFocus()}function _t(t,j,C,k){var U=arguments.length>4&&void 0!==arguments[4]?arguments[4]:300,K=[],y=void 0,L=void 0;C&&(y=function(){X.hide(),C()},K.push({label:i("editor.ok"),action:y})),k&&(L=function(){X.hide(),k()},K.push({label:i("editor.cancel"),action:L}));var X=new Wj({title:t||i("editor.prompt"),contentPadding:20,width:U,draggable:!0,content:'<p style="color: '+ht.Default.labelColor+'">'+j+"</p>",buttons:K});X.$49$=L||y,X.$48$=y,X.show()}function gt(t,j,C,k){var i={unfocusable:!0,id:t,toolTip:j},U=ht.Default.getImage(C),K=U?U.width:16,y=U?U.height:16;return i.icon={width:K+8,height:y+8,fitSize:!!U&&U.fitSize,comps:[{type:"rect",background:{func:function(t,j){return j.getCurrentItem()===i?lj.config.color_hover:null}},rect:[0,0,K+8,y+8]},{type:"image",name:C,color:{func:function(t,j){return k&&k()?lj.config.color_select:lj.config.color_dark}},rect:[4,4,K,y]}]},i}function Wt(t,j){var C=ht.Default.createDiv(!0);return C.style.font=ht.Default.labelFont,C.style.color=ht.Default.labelColor,C.style.paddingLeft="4px",C.style.lineHeight=ht.Default.widgetRowHeight+"px",C.style.whiteSpace="nowrap",C.innerHTML=t,j&&(C.style.textAlign=j),C}function Vt(t,j,C,k){var i=new ht.widget.Button;return i.setLabel(t),i.setLabelColor(ht.Default.labelColor),i.setLabelSelectColor(lj.config.color_select),i.setIcon(C),i.setBackground(null),i.setBorderColor(null),k&&(i.onClicked=k),j&&(i.setToolTip(j),i.enableToolTip()),i.getCurrentBackground=function(){return this._hover||this.isPressed()?lj.config.color_hover:null},i.getCurrentBorderColor=function(){return this.isSelected()?lj.config.color_select:null},i.getView().addEventListener("mouseenter",function(){i.isDisabled()||(i._hover=!0,i.iv())},!1),i.getView().addEventListener("mouseleave",function(){i.isDisabled()||(i._hover=!1,i.iv())},!1),i}function Pt(t,j){var C=ht.Default.getImage(t);if(!C)throw t;var k={width:C.width,height:C.height,fitSize:C.fitSize,comps:[{type:"image",name:t,color:{func:function(){return j&&j()?lj.config.color_select:lj.config.color_dark}}}]},i=t+".state";return ht.Default.setImage(i,k),i}function lt(t,j,C){var k=new FileReader;k.onloadend=function(t){j(t.target.result)},C?k.readAsDataURL(t):k.readAsText(t)}function tj(t,j){if(j){j===document.body&&(document.title=i("editor.title"),document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%"),j.appendChild(t.getView());var C=t.getView().style;C.left="0px",C.top="0px",setInterval(function(){if(t.getView()!==(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)){var k=void 0,i=void 0;j===document.body?(k=document.documentElement.clientWidth,window.innerWidth&&window.innerWidth<k&&(k=window.innerWidth),i=document.documentElement.clientHeight,window.innerHeight&&window.innerHeight<i&&(i=window.innerHeight)):(k=j.clientWidth,i=j.clientHeight),k===t._oldWidth&&i===t._oldHeight||(t._oldWidth=k,t._oldHeight=i,C.width=k+"px",C.height=i+"px",t.iv())}},500)}}function jj(t){if(t)for(var j=0;j<t.length;j++)null==t[j]&&(t[j]=0)}function Cj(t){if(t)for(var j=ht.Color.chart,C=0;C<t.length;C++)null==t[C]&&(t[C]=j[C%j.length])}function kj(t,j){j=void 0===j?t?t.length:0:j;for(var C=new Array(j),k=0;k<j;k++)C[k]=t?t[k]:void 0;return C}function ij(t){if(t instanceof ht.graph.GraphView){var j=t.getContentRect(),C=Math.max(j.width,j.height),k=Math.min(1,lj.config.imageSize/C);return C<3&&(k=lj.config.imageSize/C),t.toDataURL(void 0,void 0,k)}if(t instanceof ht.graph3d.Graph3dView){var i=t.getWidth(),U=t.getHeight(),K=Math.max(i,U),y=Math.min(1,lj.config.imageSize/K);K<3&&(y=lj.config.imageSize/K),i=Math.floor(i*y),U=Math.floor(U*y);return t.toCanvas(t.dm().getBackground(),i,U).toDataURL("image/png",1)}var L=ht.Default.getImage(t),X=Math.max(L.width,L.height),u=Math.min(1,lj.config.imageSize/X);return ht.Default.toCanvas(t,L.width*u,L.height*u).toDataURL("image/png",1)}function Uj(t,j,C){if(t instanceof Array)for(var k=0,i=t.length;k<i;k++)Uj(t[k],j,C);else if(t instanceof Object)for(var U in t)if(t.hasOwnProperty(U)){var K=t[U];if(!$t(K))continue;if(dt(K.func)&&cC.test(K.func)){var y=K.func.slice(5);j&&void 0===j[y]&&(j[y]=U),C&&void 0===C[y]&&(C[y]=K.value)}else Uj(K,j,C)}}function Kj(){return new(ht.Default.getClass(lj.config.codeEditorClass)||Pj)}function yj(){var t=arguments[0];if(!t)return"";for(var j=1;j<arguments.length;j++)t=t.replace("{"+(j-1)+"}",arguments[j]);return t}function Lj(t,j){j.forEach(function(j){t.push(C(j))})}function Xj(t){var j=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ht.Shape,k=void 0,i=void 0,U=void 0,K=void 0,y=void 0,L=void 0,X=[],u=[];t.forEach(function(t){Lj(X,t.getPoints());var j=t.getSegments();if(j)j=j.toArray();else{j=[1];for(var a=1,B=t.getPoints().size();a<B;a++)j.push(2)}t.isClosePath()&&j.push(5),u.push.apply(u,j),k||(k=t.dm(),i=t.getThickness(),U=t.getElevation(),K=t.getTall(),y=C(t.getStyleMap()),L=C(t.getAnchor3d())),t.removeFromDataModel()});var a=new j;a.setPoints(X),a.setSegments(u),a.setThickness(i),a.setElevation(U),a.setTall(K),a.setAnchor3d(L),a.s(y),k.add(a),k.sm().ss(a)}function uj(t){var j=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ht.Shape,k=t.dm(),i=t.getSegments();if(i){var U=[],K=t.getPoints(),y=void 0,L=void 0,X=0;i.forEach(function(t){switch(t){case 1:y=[t],L=[C(K.get(X++))],U.push({segments:y,points:L});break;case 2:y.push(t),L.push(C(K.get(X++)));break;case 3:y.push(t),L.push(C(K.get(X++))),L.push(C(K.get(X++)));break;case 4:y.push(t),L.push(C(K.get(X++))),L.push(C(K.get(X++))),L.push(C(K.get(X++)));break;case 5:y.push(t)}});var u=t.getThickness(),a=t.getElevation(),B=t.getTall(),c=C(t.getStyleMap()),f=C(t.getAnchor3d()),R=[];U.forEach(function(t){var C=new j;C.setPoints(t.points),C.setSegments(t.segments),C.setThickness(u),C.setElevation(a),C.setTall(B),C.setAnchor3d(f),C.s(c),k.add(C),R.push(C)}),k.sm().ss(R),t.removeFromDataModel()}}function aj(t){for(var j=0,C=t.length;j<C;j++)if(!(t.get(j)instanceof ht.Shape))return!1;return!0}function Bj(t){var j={clazz:this.getClass(),name:this.getName(),displayName:this.getDisplayName(),toolTip:this.getToolTip(),tag:this.getTag(),icon:this.getIcon(),layer:this.getLayer(),parent:t.$58$(this.getParent()),a:{},s:{},dataBindings:this.getDataBindings()?s(this.getDataBindings()):null},k=this.getStyleMap();for(var i in k)j.s[i]=C(this.s(i));var U=this.getAttrObject();for(var K in U)j.a[K]=C(this.a(K));return j}function cj(t,j){var k=new t.clazz;if(lj.config.cloneName&&k.setName(t.name),lj.config.cloneDisplayName&&k.setDisplayName(t.displayName),lj.config.cloneToolTip&&k.setToolTip(t.toolTip),lj.config.cloneTag&&k.setTag(t.tag),lj.config.cloneIcon&&k.setIcon(t.icon),lj.config.cloneLayer&&k.setLayer(t.layer),lj.config.cloneStyle)for(var i in t.s)k.s(i,C(t.s[i]));if(lj.config.cloneAttr)for(var U in t.a)k.a(U,C(t.a[U]));return lj.config.cloneDataBindings&&t.dataBindings&&k.setDataBindings(e(t.dataBindings)),k}function fj(t,j,C){var k=lj.config.cloneParent?j.$50$(t.parent,C):void 0;this.setParent(k||j.getCurrentSubGraph())}function Rj(t){var j=Bj.call(this,t);return j.rotation=this.getRotation(),j.position=this.p(),j.size={width:this._width,height:this._height},j.scale=this.getScale(),j.anchor=this.getAnchor(),j.image=this.getImage(),j.host=t.$58$(this.getHost()),j}function dj(t,j){var C=cj(t,j);return lj.config.cloneRotation&&C.setRotation(t.rotation),lj.config.clonePosition&&C.setPosition(t.position),lj.config.cloneSize&&C.setSize(t.size),lj.config.cloneScale&&C.setScale(t.scale),.5===t.anchor.x&&.5===t.anchor.y||lj.config.cloneAnchor&&C.setAnchor(t.anchor),lj.config.cloneImage&&C.setImage(t.image),C}function $j(t,j,C){fj.call(this,t,j,C),lj.config.cloneHost&&this.setHost(j.$50$(t.host,C))}function mj(t){var j=Bj.call(this,t);return j.source=t.$58$(this.getSource()),j.target=t.$58$(this.getTarget()),j}function Dj(t,j){return cj(t,j)}function bj(t,j,C){fj.call(this,t,j,C),lj.config.cloneSource&&this.setSource(j.$50$(t.source,C)),lj.config.cloneTarget&&this.setTarget(j.$50$(t.target,C))}function Jj(t){var j=Rj.call(this,t);return j.expanded=this.isExpanded(),j}function vj(t,j){var C=dj(t,j);return lj.config.cloneExpanded&&C.setExpanded(t.expanded),C}function Hj(t){var j=Rj.call(this,t);return j.points=C(this.getPoints()),j.segments=C(this.getSegments()),j.thickness=this.getThickness(),j.closePath=this.isClosePath(),j}function Gj(t,j){var k=dj(t,j);return lj.config.clonePoints&&k.setPoints(C(t.points)),lj.config.cloneSegments&&k.setSegments(C(t.segments)),lj.config.cloneThickness&&k.setThickness(t.thickness),lj.config.cloneClosePath&&k.setClosePath(t.closePath),k}function Zj(t){var j=Rj.call(this,t);return j.clickThroughEnabled=this.isClickThroughEnabled(),j.syncSize=this.isSyncSize(),j}function qj(t,j){var C=dj(t,j);return lj.config.cloneClickThroughEnabled&&C.setClickThroughEnabled(t.clickThroughEnabled),lj.config.cloneSyncSize&&C.setSyncSize(t.syncSize),C}function Aj(t){var j=Zj.call(this,t);return j.ref=this.getRef(),j}function zj(t,j){var C=qj(t,j);return lj.config.cloneRef&&C.setRef(t.ref),C}function Tj(t){if(!(t instanceof ht.Node))return null;if(t instanceof ht.Group||t instanceof ht.Grid||t instanceof ht.Block)return null;var j=void 0;if(t instanceof qC)j={type:"clip",points:C(t.getPoints()),segments:C(t.getSegments()),closePath:t.isClosePath()};else if(t instanceof AC)j={type:"restore"};else if(t instanceof ht.Shape)j={type:"shape",points:C(t.getPoints()),segments:C(t.getSegments()),closePath:t.isClosePath()};else if(t instanceof ht.Text)j={type:"text",text:t.s("text"),align:t.s("text.align"),vAlign:t.s("text.vAlign"),color:t.s("text.color"),font:t.s("text.font"),shadow:t.s("text.shadow"),shadowColor:t.s("text.shadow.color"),shadowBlur:t.s("text.shadow.blur"),shadowOffsetX:t.s("text.shadow.offset.x"),shadowOffsetY:t.s("text.shadow.offset.y")};else if(t instanceof ht.Node){var k=t.s("shape");k?(j={type:"node_shape",shape:t.s("shape")},"rect"===k?j.depth=t.s("shape.depth"):"roundRect"===k?j.polygonSide=t.s("shape.corner.radius"):"polygon"===k?j.polygonSide=t.s("shape.polygon.side"):"arc"===k&&(j.arcFrom=t.s("shape.arc.from"),j.arcTo=t.s("shape.arc.to"),j.arcClose=t.s("shape.arc.close"),j.arcOval=t.s("shape.arc.oval"))):t.getImage()&&(j={type:"node_image",image:t.getImage(),stretch:t.s("image.stretch"),color:t.s("body.color")})}return j&&(j.visible=t.s("2d.visible"),j.displayName=t.getDisplayName(),j.x=t.getPosition().x,j.y=t.getPosition().y,j.anchorX=t.getAnchor().x,j.anchorY=t.getAnchor().y,j.scaleX=t.getScale().x,j.scaleY=t.getScale().y,j.rotation=t.getRotation(),j.width=t._width,j.height=t._height,j.opacity=t.s("opacity"),"shape"!==j.type&&"node_shape"!==j.type||(j.background=t.s("shape.background"),j.repeatImage=t.s("shape.repeat.image"),j.borderWidth=t.s("shape.border.width"),j.borderColor=t.s("shape.border.color"),j.border3d=t.s("shape.border.3d"),j.border3dColor=t.s("shape.border.3d.color"),j.border3dAccuracy=t.s("shape.border.3d.accuracy"),j.borderCap=t.s("shape.border.cap"),j.borderJoin=t.s("shape.border.join"),j.borderPattern=t.s("shape.border.pattern"),j.gradient=t.s("shape.gradient"),j.gradientColor=t.s("shape.gradient.color"),j.dash=t.s("shape.dash"),j.dashPattern=t.s("shape.dash.pattern"),j.dashOffset=t.s("shape.dash.offset"),j.dashColor=t.s("shape.dash.color"),j.dashWidth=t.s("shape.dash.width"),j.dash3d=t.s("shape.dash.3d"),j.dash3dColor=t.s("shape.dash.3d.color"),j.dash3dAccuracy=t.s("shape.dash.3d.accuracy"),j.fillRule=t.s("shape.fill.rule"),j.fillClipDirection=t.s("shape.fill.clip.direction"),j.fillClipPercentage=t.s("shape.fill.clip.percentage"),j.gradientPack=C(t.s("shape.gradient.pack")),j.borderWidthAbsolute=t.s("shape.border.width.absolute"))),j}function Ej(t,j){var k=void 0;if("clip"===t.type)j&&(k=new qC,k.s("type","clip"),k.setPoints(t.points),k.setSegments(t.segments));else if("restore"===t.type)j&&(k=new AC,k.s("type","restore"));else if("shape"===t.type)k=j?new HC:new ht.Shape,k.s("type","shape"),k.setPoints(t.points),k.setSegments(t.segments),k.setClosePath(t.closePath);else if("node_shape"===t.type){k=j?new vC:new ht.Node;var i=t.shape;k.s("shape",i),"rect"===i?k.s("shape.depth",t.depth):"roundRect"===i?k.s("shape.corner.radius",t.polygonSide):"polygon"===i?k.s("shape.polygon.side",t.polygonSide):"arc"===i&&(k.s("shape.arc.from",t.arcFrom),k.s("shape.arc.to",t.arcTo),k.s("shape.arc.close",t.arcClose),k.s("shape.arc.oval",t.arcOval))}else"node_image"===t.type?(j?(k=new GC,k.s("type","image"),k.s("image",t.image)):(k=new ht.Node,k.setImage(t.image)),k.s("body.color",t.color)):"text"===t.type&&(k=j?new ZC:new ht.Text,k.s("type","text"),k.s("text",t.text),k.s("text.align",t.align),k.s("text.vAlign",t.vAlign),k.s("text.color",t.color),k.s("text.font",t.font),k.s("text.shadow",t.shadow),k.s("text.shadow.color",t.shadowColor),k.s("text.shadow.blur",t.shadowBlur),k.s("text.shadow.offset.x",t.shadowOffsetX),k.s("text.shadow.offset.y",t.shadowOffsetY));return k?(k.s("2d.visible",t.visible),k.setDisplayName(t.displayName),k.setPosition(t.x,t.y),.5===t.anchorX&&.5===t.anchorY||k.setAnchor(t.anchorX,t.anchorY),k.setScale(t.scaleX,t.scaleY),k.setRotation(t.rotation),k.setSize(t.width,t.height),k.s("opacity",t.opacity),"shape"!==t.type&&"node_shape"!==t.type||(k.s("shape.background",t.background),k.s("shape.repeat.image",t.repeatImage),k.s("shape.border.width",t.borderWidth),k.s("shape.border.color",t.borderColor),k.s("shape.border.3d",t.border3d),k.s("shape.border.3d.color",t.border3dColor),k.s("shape.border.3d.accuracy",t.border3dAccuracy),k.s("shape.border.cap",t.borderCap),k.s("shape.border.join",t.borderJoin),k.s("shape.border.pattern",t.borderPattern),k.s("shape.gradient",t.gradient),k.s("shape.gradient.color",t.gradientColor),k.s("shape.dash",t.dash),k.s("shape.dash.pattern",t.dashPattern),k.s("shape.dash.offset",t.dashOffset),k.s("shape.dash.color",t.dashColor),k.s("shape.dash.width",t.dashWidth),k.s("shape.dash.3d",t.dash3d),k.s("shape.dash.3d.color",t.dash3dColor),k.s("shape.dash.3d.accuracy",t.dash3dAccuracy),k.s("shape.fill.rule",t.fillRule),k.s("shape.fill.clip.direction",t.fillClipDirection),k.s("shape.fill.clip.percentage",t.fillClipPercentage),k.s("shape.gradient.pack",C(t.gradientPack)),k.s("shape.border.width.absolute",t.borderWidthAbsolute)),k):null}function sj(t,j){var C=void 0,k=j?j.dm:null,i=k?k.a("width"):100,U=k?k.a("height"):100,K=Yt(t.type);if(dt(K)){var y=vk[K];y?C=new y(t,i,U):Ut(K)&&(C=new Uk(t,i,U))}else C=new Jk(t,i,U);return C&&j&&j.addData(C,!0),C}function ej(t,j){t.s("chart.series")||t.s("chart.series",[]);var C=t.s("chart.series");C[0]||(C[0]={});var k=C[0];return k.values||(k.values=[]),k.colors||(k.colors=[]),k[j]}function xj(t,j){return Yt(ej(t,j))}function oj(t,j){return pt(ej(t,j))}function nj(){var t=lj.config.customProperties.display;t&&t.length&&t.forEach(function(t){var j=(t.accessType||"a")+":"+t.property;mC.display[j]=!0}),t=lj.config.customProperties.data,t&&t.length&&t.forEach(function(t){var j=(t.accessType||"a")+":"+t.property;mC.data[j]=!0}),t=lj.config.customProperties.symbol,t&&t.length&&t.forEach(function(t){mC.symbol[t.property]=!0}),t=lj.config.customProperties.comp,t&&t.length&&t.forEach(function(t){mC.comp[t.property]=!0}),t=lj.config.customProperties.scene,t&&t.length&&t.forEach(function(t){var j=(t.accessType||"a")+":"+t.property;mC.scene[j]=!0}),(t=lj.config.customProperties.data3d)&&t.length&&t.forEach(function(t){var j=(t.accessType||"a")+":"+t.property;mC.data3d[j]=!0})}function wj(){var t=lj.config,j=lj.consts,C=function(j,C){void 0===t.valueTypes[j]&&(C.name="editor.valuetype."+j.toLowerCase(),t.valueTypes[j]=C)};C("String",{type:"string"}),C("Image",{type:"image"}),C("URL",{type:"url"}),C("Multiline",{type:"multiline",rows:1}),C("Font",{type:"font"}),C("Angle",{type:"number",angle:!0}),C("Int",{type:"int",step:1}),C("PositiveNumber",{type:"number",step:1,min:0}),C("Number",{type:"number",step:1}),C("Color",{type:"color"}),C("Boolean",{type:"boolean"}),C("Function",{type:"function"}),C("Object",{type:"object"}),C("ObjectArray",{type:"objectArray",rows:3}),C("StringArray",{type:"stringArray",rows:3}),C("NumberArray",{type:"numberArray",rows:3}),C("ColorArray",{type:"colorArray",rows:3}),C("Opacity",{type:"number",min:0,max:1,step:.01}),C("Percentage",{type:"number",min:0,max:1,step:.01}),C("Gradient",{type:"enum",values:t.gradients,icons:t.gradientIcons,dropDownWidth:140}),C("FillRule",{type:"enum",values:j.fillRules,labels:j.fillRuleLabels}),C("ClipDirection",{type:"enum",values:j.clipDirections,labels:j.clipDirectionLabels}),C("CapStyle",{type:"enum",values:j.caps,labels:j.capLabels}),C("JoinStyle",{type:"enum",values:j.joins,labels:j.joinLabels}),C("Align",{type:"enum",values:j.aligns,labels:j.alignLabels}),C("VAlign",{type:"enum",values:j.vAligns,labels:j.vAlignLabels}),C("Stretch",{type:"enum",values:j.stretchs,labels:j.stretchLabels}),C("Direction",{type:"enum",values:j.directions,labels:j.directionLabels}),C("Orientation",{type:"enum",values:j.orientations,labels:j.orientationLabels}),C("ColumnChart",{type:"enum",values:j.columnChartTypes,labels:j.columnChartTypeLabels}),j.valueTypes=[],j.valueTypeLabels=[];for(var k in lj.config.valueTypes)!function(t){var C=lj.config.valueTypes[t];C.type&&(j.valueTypes.push(t),j.valueTypeLabels.push(i(C.name)||i(t)),"enum"===C.type&&C.i18nLabels&&!C.labels&&(C.labels=[],C.i18nLabels.forEach(function(t){C.labels.push(i(t))})))}(k)}function rj(){var t=lj.consts={};t.edgeTypes=[void 0,"points"].concat(Object.keys(ht.Default.getEdgeTypeMap())),t.aligns=["left","center","right"],t.alignLabels=[i("editor.align.left"),i("editor.align.center"),i("editor.align.right")],t.vAligns=["top","middle","bottom"],t.vAlignLabels=[i("editor.valign.top"),i("editor.valign.middle"),i("editor.valign.bottom")],t.stretchs=["fill","uniform","centerUniform"],t.stretchLabels=[i("editor.stretch.fill"),i("editor.stretch.uniform"),i("editor.stretch.centeruniform")],t.fillRules=["nonzero","evenodd"],t.fillRuleLabels=[i("editor.nonzero"),i("editor.evenodd")],t.clipDirections=["top","bottom","left","right"],t.clipDirectionLabels=[i("editor.clipdirection.top"),i("editor.clipdirection.bottom"),i("editor.clipdirection.left"),i("editor.clipdirection.right")],t.caps=["butt","round","square"],t.capLabels=[i("editor.cap.butt"),i("editor.cap.round"),i("editor.cap.square")],t.joins=["bevel","round","miter"],t.joinLabels=[i("editor.join.bevel"),i("editor.join.round"),i("editor.join.miter")],t.directions=["h","v"],t.directionLabels=[i("editor.direction.h"),i("editor.direction.v")],t.orientations=["top","right","bottom","left"],
t.orientationLabels=[i("editor.orientation.top"),i("editor.orientation.right"),i("editor.orientation.bottom"),i("editor.orientation.left")],t.columnChartTypes=["columnChart","stackedColumnChart","percentageColumnChart"],t.columnChartTypeLabels=[i("editor.columncharttype.columnchart"),i("editor.columncharttype.stackedcolumnchart"),i("editor.columncharttype.percentagecolumnchart")],t.gradients=lj.config.gradients,t.shapes=[void 0,"rect","circle","oval","roundRect","star","pentagram","triangle","hexagon","pentagon","diamond","rightTriangle","parallelogram","trapezoid","polygon","arc"],t.shapeLabels=[],t.shapeIcons=[],t.shapes.forEach(function(j){j?(t.shapeLabels.push(i("editor.comptype."+j.toLowerCase())),t.shapeIcons.push({width:16,height:16,comps:[{type:j,rect:[2,4,12,8],borderWidth:1,borderColor:lj.config.color_dark}]})):(t.shapeLabels.push(""),t.shapeIcons.push({width:16,height:16,comps:[]}))}),t.selectTypes=["shadow","rect","circle","oval","roundRect"],t.selectTypeLabels=[],t.selectTypeIcons=[],t.selectTypes.forEach(function(j){"shadow"===j?(t.selectTypeLabels.push(i("editor.shadow")),t.selectTypeIcons.push({width:16,height:16,comps:[]})):(t.selectTypeLabels.push(i("editor.comptype."+j.toLowerCase())),t.selectTypeIcons.push({width:16,height:16,comps:[{type:j,rect:[2,4,12,8],borderWidth:1,borderColor:lj.config.color_dark}]}))}),t.displayConnectActionTypes=lj.config.displayConnectActionTypes,t.displayConnectActionTypeLabels=[],t.displayConnectActionTypes.forEach(function(j){var C=j?j.toLowerCase():"none";t.displayConnectActionTypeLabels.push(i("editor.connectactiontype."+C,!0)||i(j))}),t.symbolConnectActionTypes=lj.config.symbolConnectActionTypes,t.symbolConnectActionTypeLabels=[],t.symbolConnectActionTypes.forEach(function(j){var C=j?j.toLowerCase():"none";t.symbolConnectActionTypeLabels.push(i("editor.connectactiontype."+C,!0)||i(j))}),t.vLayoutValues=[void 0,"top","bottom","topbottom","center","scale"],t.vLayoutLabels=[i("editor.layout.none"),i("editor.layout.top"),i("editor.layout.bottom"),i("editor.layout.topbottom"),i("editor.layout.center"),i("editor.layout.scale")],t.hLayoutValues=[void 0,"left","right","leftright","center","scale"],t.hLayoutLabels=[i("editor.layout.none"),i("editor.layout.left"),i("editor.layout.right"),i("editor.layout.leftright"),i("editor.layout.center"),i("editor.layout.scale")],t.fullscreenValues=[void 0,"fill","uniform"],t.fullscreenLabels=[i("editor.layout.none"),i("editor.stretch.fill"),i("editor.stretch.uniform")],t.fullscreenLockValues=[!1,"h","v"],t.fullscreenLockLabels=[i("editor.layout.none"),i("editor.direction.h"),i("editor.direction.v")]}String.prototype.startsWith||(String.prototype.startsWith=function(t,j){return j=j||0,this.substr(j,t.length)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(t,j){var C=this.toString();("number"!=typeof j||!isFinite(j)||Math.floor(j)!==j||j>C.length)&&(j=C.length),j-=t.length;var k=C.lastIndexOf(t,j);return-1!==k&&k===j});var Yj=window.hteditor_config||{},pj=function(t,j){void 0===Yj[t]&&(Yj[t]=j)};pj("color_select","#45C4F9"),pj("color_select_dark","#39B0E4"),pj("color_pane","#FCFCFC"),pj("color_pane_dark","#F7F7F7"),pj("color_line","#E4E4E4"),pj("color_dark","#2C2C2C"),pj("color_light","white"),pj("color_data_border","#979797"),pj("color_data_background","#D8D8D8"),pj("color_transparent","rgba(70,70,70,0.4)"),pj("color_disabled","#8C8C8C"),pj("color_guide","red"),pj("color_hover","rgba(184,184,184,0.18)"),pj("color_mask","rgba(84,110,125,0.30)");var Mj=function(){var t=navigator.userAgent;return t.indexOf("compatible")>-1&&t.indexOf("MSIE")>-1||t.indexOf("Trident")>-1&&t.indexOf("rv:11.0")>-1}();if(pj("logEditorInfo",!0),pj("host",window.location.hostname),pj("port",window.location.port),pj("locale","en"),pj("serviceClass",void 0),pj("maxUndoRedoSteps",200),pj("inspectorTitleHeight",void 0),pj("inspectorTitleBackground",void 0),pj("smallFont","10px arial, sans-serif"),pj("boldFont","bold 12px arial, sans-serif"),pj("leftSplitViewPosition",240),pj("rightSplitViewPosition",-300),pj("mainSplitViewPosition",-370),pj("explorerSplitViewPosition",.4),pj("requestDelay",100),pj("imageSize",256),pj("fileSize",50),pj("maxFileSize",200),pj("dragImageSize",50),pj("dragImageOpacity",.7),pj("animate",!0),pj("fitPadding",20),pj("fitContentForDisplayView",!0),pj("fitContentForSymbolView",!0),pj("rulerSize",16),pj("edgeLoop",!0),pj("pasteOffset",5),pj("continuousLayout",!0),pj("maxZoom",50),pj("minZoom",.01),pj("detailFilter",{}),pj("compactFilter",{}),pj("customProperties",{}),pj("rulerEnabled",!0),pj("gridEnabled",!1),pj("displayGridBlockSize",40),pj("displayGridThickLinesEvery",10),pj("displayGridThickColor","rgb(191, 191, 191)"),pj("displayGridLightColor","rgba(191, 191, 191, 0.4)"),pj("displayGridAngle",Math.PI/2),pj("displayGridRotation",0),pj("displayGridZoomThreshold",.25),pj("displayGridAlignmentGuideColor",Yj.color_guide),pj("symbolGridBlockSize",1),pj("symbolGridThickLinesEvery",20),pj("symbolGridThickColor","rgb(191, 191, 191)"),pj("symbolGridLightColor","rgba(191, 191, 191, 0.2)"),pj("symbolGridAngle",Math.PI/2),pj("symbolGridRotation",0),pj("symbolGridZoomThreshold",.25),pj("symbolGridAlignmentGuideColor",Yj.color_guide),pj("maxStringLength",1e6),pj("maxFileNameLength",100),pj("traceMissingI18n",!1),pj("container",void 0),pj("continuousCreating",!1),pj("valueTypes",{}),pj("indent",100),pj("indent2","64+0.005"),pj("clearDataBindingsBeforeImporting",!0),pj("insertDisplayViewAsRefGraph",!1),pj("displayPreviewURL","display.html"),pj("symbolPreviewURL","symbol.html"),pj("removeFileByKeyboardEnabled",!1),pj("locateFileEnabled",!0),pj("promptBeforeClosing",!0),pj("displaysVisible",!0),pj("symbolsVisible",!0),pj("componentsVisible",!0),pj("scenesVisible",!1),pj("modelsVisible",!1),pj("assetsVisible",!0),pj("displaysEditable",!0),pj("symbolsEditable",!0),pj("componentsEditable",!0),pj("scenesEditable",!0),pj("modelsEditable",!0),pj("assetsEditable",!0),pj("settingDefaultValueBeforeSaving",!1),pj("svgSegments",20),pj("svgWaitingTime",600),pj("importConfirm",!0),pj("newIfFailToOpen",!0),pj("dataBindings",{}),pj("dataBindingsForSymbol",{}),pj("useCodeEditor",!Mj),pj("codeEditorClass",void 0),pj("fontPreview","Hightopo"),pj("checkForFileChanges",!0),pj("checkForFileChangesInterval",3e3),pj("rotateAsClock",!1),pj("cloneAttr",!0),pj("cloneStyle",!0),pj("cloneName",!0),pj("cloneDisplayName",!0),pj("cloneToolTip",!0),pj("cloneTag",!1),pj("cloneIcon",!0),pj("cloneLayer",!0),pj("cloneParent",!0),pj("cloneDataBindings",!0),pj("cloneSource",!0),pj("cloneTarget",!0),pj("cloneExpanded",!0),pj("cloneClickThroughEnabled",!0),pj("cloneSyncSize",!0),pj("cloneRef",!0),pj("clonePoints",!0),pj("cloneSegments",!0),pj("cloneThickness",!0),pj("cloneClosePath",!0),pj("cloneRotation",!0),pj("clonePosition",!0),pj("cloneSize",!0),pj("cloneScale",!0),pj("cloneAnchor",!0),pj("cloneImage",!0),pj("cloneHost",!0),pj("isOpenable",null),pj("dialogTitleBackground",null),pj("componentViewSize",{width:700,height:500}),pj("eventViewSize",{width:560,height:400}),pj("fontViewSize",{width:500,height:400}),pj("functionViewSize",{width:500,height:400}),pj("objectViewSize",{width:500,height:400}),pj("textViewSize",{width:500,height:400}),pj("attachPointsViewSize",{width:700,height:500}),pj("drawAccordionTitle",null),pj("accordionMutex",!1),pj("importDataBindingsButtonVisible",!0),pj("saveSymbolCustomPropertyDefaultValue",!1),pj("saveCompCustomPropertyDefaultValue",!1),pj("deleteFileConfirm",!0),pj("mixMaskAndBackground",!0),pj("hoverGuideVisible",!0),pj("anchorVisible",!0),pj("connectGuideVisible",!0),pj("guideLineVisible",!0),pj("moveDummyThreshold",32),pj("smartGuideThreshold",8),pj("cadToDisplayBoundingType","Standard"),pj("cadToSymbolBoundingType","Reset"),pj("promptForMovingFile",!1),pj("displayTreeVisibleFunc",null),pj("symbolListVisibleFunc",null),pj("onElementCreated",null),pj("createFileTreeSortFunc",function(t){var j=t.explorer.rootDir,C=j+"/ht",k=j+"/htdesign";return function(j,i){var U=j.url,K=i.url;return U===K?0:U===C?-1:K===C?1:U===k?-1:K===k?1:ht.Default.sortFunc(t.getLabel(j),t.getLabel(i))}}),pj("explorerMode","treeList"),pj("filterDisplayViewEnabled",!1),pj("filterSymbolViewEnabled",!1),pj("customAttachPointsColumns",null),pj("isCopyCompsWhenNewState",!0),pj("codeEditorTheme",null),pj("isDataBound",function(t,j,C){var k=t.getDataBindings();return k&&k[j]&&k[j][C]}),pj("checkFileName",function(t,j){return!!t&&(!!(t=t.trim())&&(!/[!@?#$%^&*\/]/.test(t)&&t))}),pj("paletteColors",[["rgb(51,153,255)","#60ACFC","#32D3EB","rgb(93,217,174)","rgb(125,195,125)","rgb(255,235,195)","rgb(226,250,87)"],["#FEB64D","#FF7C7C","rgb(241,125,164)","rgb(204,104,166)","rgb(135,144,204)","rgb(145,115,205)","rgb(124,145,155)"],["rgb(48,242,120)","rgb(0,199,7)","rgb(242,83,75)","rgb(212,0,0)","rgb(240,225,19)","rgb(247,247,247)","rgb(61,61,61)"]]),pj("gradients",[null,"linear.southwest","linear.southeast","linear.northwest","linear.northeast","linear.north","linear.south","linear.west","linear.east","radial.center","radial.southwest","radial.southeast","radial.northwest","radial.northeast","radial.north","radial.south","radial.west","radial.east","spread.horizontal","spread.vertical","spread.diagonal","spread.antidiagonal","spread.north","spread.south","spread.west","spread.east"]),Yj.gradientIcons||(Yj.gradientIcons=[],Yj.gradients.forEach(function(t){t?Yj.gradientIcons.push({width:20,height:14,comps:[{type:"rect",rect:[0,0,20,14],gradient:t,gradientColor:Yj.color_line,background:Yj.color_dark}]}):Yj.gradientIcons.push({width:20,height:14,comps:[]})})),pj("fontList",["SimSun","NSimSun","FangSong","KaiTi","FangSong_GB2312","Microsoft YaHei","cursive","monospace","serif","sans-serif","fantasy","Arial","Arial Black","Arial Narrow","Arial Rounded MT Bold","Bookman Old Style","Bradley Hand ITC","Century","Century Gothic","Comic Sans MS","Courier","Courier New","Georgia","Gentium","Impact","King","Lucida Console","Lalit","Modena","Monotype Corsiva","Papyrus","Tahoma","TeX","Times","Times New Roman","Trebuchet MS","Verdana","Verona","PingFangSC-Thin"]),pj("expandedTitles",{}),["TitleBasic","TitleCustom","TitleBackground","TitleBorder","TitleText","TitleImage","TitleNode","TitleGroupBasic","TitleEdgeBasic","TitleArc","TitleDataBinding","TitleComponent","TitleShapeBackground","TitleShapeBorder","TitleGroupTitle","TitleEditingPoint","TitleChart","TitleLayout","TitleNodeLayout"].forEach(function(t){null==Yj.expandedTitles[t]&&(Yj.expandedTitles[t]=!0)}),ht.Default.handleUnfoundImage=function(t,j){return ht.Default.getImage("editor.unknown")},pj("displayConnectActionType",null),pj("symbolConnectActionType",null),pj("displayConnectActionTypes",[null,"copyStyle","host","parent"]),pj("symbolConnectActionTypes",[null,"copyStyle"]),pj("appendDisplayConnectActionTypes",null),pj("appendSymbolConnectActionTypes",null),pj("appendConnectActions",null),pj("connectActions",{copyStyle:{action:function(t,j,k){if(k){var i=k.getStyleMap();for(var U in i)"shape"!==U&&"label"!==U&&"label2"!==U&&"note"!==U&&"note2"!==U&&"text"!==U&&j.s(U,C(i[U]))}},extraInfo:{visible:function(t){return!0}}},host:{action:function(t,j,C){j instanceof ht.Node&&C instanceof ht.Node&&j.setHost(C)},extraInfo:{delete:{visible:function(t){return t.sm().ld()instanceof ht.Node&&t.sm().ld().getHost()},action:function(t,j){j instanceof ht.Node&&j.setHost(void 0)}},visible:function(t){return t.sm().ld()instanceof ht.Node}}},parent:{action:function(t,j,C){C&&j.setParent(C)},extraInfo:{delete:{visible:function(t){return t.sm().ld().getParent()},action:function(t,j){j.setParent(void 0)}},visible:function(t){return!0}}}}),Yj.appendDisplayConnectActionTypes&&Yj.appendDisplayConnectActionTypes.forEach(function(t){Yj.displayConnectActionTypes.push(t)}),Yj.appendSymbolConnectActionTypes&&Yj.appendSymbolConnectActionTypes.forEach(function(t){Yj.symbolConnectActionTypes.push(t)}),Yj.appendConnectActions)for(var Qj in Yj.appendConnectActions)Yj.connectActions[Qj]=Yj.appendConnectActions[Qj];for(var Nj in Yj.connectActions){var Oj=Yj.connectActions[Nj];ht.Default.setConnectAction(Nj,Oj.action,Oj.extraInfo)}var Fj=ht.Default.getToolTipDiv();Fj.style.color=Yj.color_dark,Fj.style.background=Yj.color_pane,ht.widget.ColorPicker.prototype._paletteColors=Yj.paletteColors,ht.graph.GraphView.prototype._scrollBarColor=Yj.color_transparent,ht.graph.GraphView.prototype._rectSelectBackground=Yj.color_transparent,ht.graph.GraphView.prototype._rectSelectBorderColor=Yj.color_select,ht.graph.GraphView.prototype.isLabelVisible=function(){return!0},ht.widget.ListView.prototype._scrollBarColor=Yj.color_transparent,ht.widget.TreeView.prototype._scrollBarColor=Yj.color_transparent,ht.widget.TableView.prototype._scrollBarColor=Yj.color_transparent,ht.widget.TreeTableView.prototype._scrollBarColor=Yj.color_transparent,ht.widget.PropertyView.prototype._scrollBarColor=Yj.color_transparent,ht.widget.FormPane.prototype._scrollBarColor=Yj.color_transparent,ht.widget.SplitView.prototype._dividerBackground=Yj.color_line,ht.widget.SplitView.prototype._continuousLayout=Yj.continuousLayout,ht.widget.ListView.prototype._selectBackground=Yj.color_select,ht.widget.TreeView.prototype._selectBackground=Yj.color_select,ht.widget.TableView.prototype._selectBackground=Yj.color_select,ht.widget.TreeTableView.prototype._selectBackground=Yj.color_select,ht.widget.TableHeader.prototype._columnLineColor=Yj.color_line,ht.widget.TableHeader.prototype._insertColor=Yj.color_select_dark,ht.widget.TableView.prototype._columnLineColor=Yj.color_line,ht.widget.Toolbar.prototype._separatorColor=Yj.color_line,ht.widget.Toolbar.prototype._itemGap=4,ht.widget.Button.prototype._labelColor=Yj.color_light,ht.widget.Button.prototype._borderColor=null,ht.widget.Button.prototype._background=Yj.color_select,ht.widget.Button.prototype._selectBackground=Yj.color_select_dark,ht.widget.CheckBox.prototype._pressBackground=Yj.color_pane_dark,ht.widget.ComboBox.prototype._selectBackground=Yj.color_select,ht.widget.TabView.prototype._insertColor=Yj.color_select_dark,ht.widget.TabView.prototype._selectWidth=0,ht.widget.TabView.prototype._selectBackground=Yj.color_select,ht.widget.TabView.prototype._tabBackground=Yj.color_dark;var Sj=ht.widget.TabView.prototype.drawTab;ht.widget.TabView.prototype.drawTab=function(t,j,C,k,i,U,K){return K=j==this.getCurrentTab()?Yj.color_select:Yj.color_dark,Sj.call(this,t,j,C,k,i,U,K)},ht.widget.FormPane.prototype._hPadding=4,ht.widget.FormPane.prototype._vPadding=4,ht.widget.FormPane.prototype._hGap=4,ht.widget.FormPane.prototype._vGap=4,ht.widget.Slider.prototype._background=Yj.color_dark,ht.widget.Slider.prototype._leftBackground=Yj.color_select,ht.widget.Slider.prototype._button={width:14,height:14,comps:[{type:"circle",rect:[0,0,14,14],borderWidth:1,borderColor:Yj.color_dark,background:Yj.color_pane_dark}]},ht.widget.ComboBox.prototype._dropDownIcon=ht.widget.MultiComboBox.prototype._dropDownIcon={width:16,height:16,comps:[{type:"shape",points:[13,6,8,12,3,6],segments:[1,2,2],borderWidth:1,borderColor:Yj.color_dark}]},ht.Default.comboBoxBorderColor=Yj.color_line,ht.Default.textFieldBorderColor=Yj.color_line,ht.Default.contextMenuHoverBackground=Yj.color_select,ht.Default.contextMenuSeparatorColor=Yj.color_line,ht.Default.dialogTitleBackground=Yj.dialogTitleBackground||Yj.color_dark,ht.Default.dialogButtonBackground=Yj.color_select,ht.Default.dialogButtonSelectBackground=Yj.color_select_dark,ht.Default.dialogHeaderBackground=Yj.color_pane_dark,ht.Default.toolbarBackground=Yj.color_pane_dark,ht.Default.tableHeaderBackground=Yj.color_pane_dark,ht.Default.contextMenuLabelFont=ht.Default.labelFont,ht.Default.contextMenuBorderRadius=0,ht.Default.contextMenuBorderColor=Yj.color_line,ht.Default.contextMenuSubmenuMark=">&nbsp;",ht.Default.contextMenuCheckIcon={width:16,height:16,comps:[{type:"shape",points:[13,3,7,12,4,8],borderWidth:1,borderColor:Yj.color_dark}]},ht.Default.setImage("radioOn",{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:ht.Color.widgetIconBorder,background:"#FFF"},{type:"circle",rect:[4,4,8,8],background:Yj.color_select}]}),ht.Default.setImage("expandIcon",{width:16,height:16,comps:[{type:"shape",points:[13,6,8,12,3,6],segments:[1,2,2],borderWidth:1,borderColor:Yj.color_dark}]}),ht.Default.setImage("collapseIcon",{width:16,height:16,comps:[{type:"shape",points:[6,3,12,8,6,13],segments:[1,2,2],borderWidth:1,borderColor:Yj.color_dark}]}),ht.widget.TreeView.prototype._expandIcon="expandIcon",ht.widget.TreeView.prototype._collapseIcon="collapseIcon",ht.widget.TreeTableView.prototype._expandIcon="expandIcon",ht.widget.TreeTableView.prototype._collapseIcon="collapseIcon",ht.widget.TextField.prototype.setEditable=ht.widget.TextArea.prototype.setEditable=function(t){var j=this._element;t?(j.removeAttribute("readonly"),j.style.color=ht.Default.labelColor):(j.setAttribute("readonly",!0),j.style.color=Yj.color_disabled)},ht.Default.onElementCreated=function(t){("INPUT"===t.tagName&&"button"!==t.type||"TEXTAREA"===t.tagName)&&(t.style.border=Yj.color_line+" solid 1px",t.style.outline=0,t.style.padding="2px","TEXTAREA"===t.tagName&&(t.style.whiteSpace="pre",t.setAttribute("spellcheck","false")),t.addEventListener("focus",function(j){t.oldBorder=t.style.border,t.style.border=Yj.color_select+" solid 1px","INPUT"===t.tagName&&requestAnimationFrame(function(){t.select()}),"TEXTAREA"===t.tagName&&(t.style.zIndex="1")},!1),t.addEventListener("blur",function(j){t.style.border=t.oldBorder,"TEXTAREA"===t.tagName&&(t.style.zIndex="")},!1),Yj.onElementCreated&&Yj.onElementCreated(t))},ht.Default.onWidgetColorPickerCreated=function(j){for(var C=Yj.color_line+" solid 1px",k=j.getView(),i=k.querySelectorAll(".colorPalette"),U=0;U<i.length;U++)i[U].style.border=C;k.querySelector(".satval").style.border=C,k.querySelector(".hue_image").style.border=C,k.querySelector(".preview").style.border=C,i=k.querySelectorAll('input[type="button"]');for(var K=0;K<i.length;K++){var y=i[K];y.style.border=C,y.style.background="none",y.style.outline="none",y.style.width="30px",y.addEventListener("mouseover",function(t){t.target.style.background=Yj.color_hover},!1),y.addEventListener("mouseout",function(){event.target.style.background="none"},!1)}i=k.querySelectorAll("span");for(var L=0;L<i.length;L++)t(j,k,i[L])},ht.Default.handleUnfoundImage=function(t,j){return ht.Default.getImage("editor.unknown")},Yj.configStudio&&Yj.configStudio();var Ij=(function(){function t(t){this.value=t}function j(j){function C(t,j){return new Promise(function(C,i){var y={key:t,arg:j,resolve:C,reject:i,next:null};K?K=K.next=y:(U=K=y,k(t,j))})}function k(C,U){try{var K=j[C](U),y=K.value;y instanceof t?Promise.resolve(y.value).then(function(t){k("next",t)},function(t){k("throw",t)}):i(K.done?"return":"normal",K.value)}catch(t){i("throw",t)}}function i(t,j){switch(t){case"return":U.resolve({value:j,done:!0});break;case"throw":U.reject(j);break;default:U.resolve({value:j,done:!1})}U=U.next,U?k(U.key,U.arg):K=null}var U,K;this._invoke=C,"function"!=typeof j.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(j.prototype[Symbol.asyncIterator]=function(){return this}),j.prototype.next=function(t){return this._invoke("next",t)},j.prototype.throw=function(t){return this._invoke("throw",t)},j.prototype.return=function(t){return this._invoke("return",t)}}(),function(t,j){if(!(t instanceof j))throw new TypeError("Cannot call a class as a function")}),_j=function(){function t(t,j){for(var C=0;C<j.length;C++){var k=j[C];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(t,k.key,k)}}return function(j,C,k){return C&&t(j.prototype,C),k&&t(j,k),j}}(),gj=function(t,j){if("function"!=typeof j&&null!==j)throw new TypeError("Super expression must either be null or a function, not "+typeof j);t.prototype=Object.create(j&&j.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(t,j):t.__proto__=j)},hj=function(t,j){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!j||"object"!=typeof j&&"function"!=typeof j?t:j},Wj=function(t){function j(C){return Ij(this,j),hj(this,t.call(this,C))}return gj(j,t),j.prototype.onShown=function(){dC.push(this)},j.prototype.onHidden=function(){U(dC,this)},j}(ht.widget.Dialog),Vj=function(t){function j(C){Ij(this,j);var k=hj(this,t.call(this,C));return k.getView().style.background=lj.config.color_pane,k}return gj(j,t),j.prototype.addLine=function(){this.addRow([],[.1],1.01,{background:lj.config.color_line})},j.prototype.addTitle=function(t){var j=[{element:t,font:lj.config.boldFont}],C={background:lj.config.color_pane_dark};this.addRow(j,[.1],null,C)},j.prototype.getRowIndex=function(t){return this.getRows().indexOf(t)},j}(ht.widget.FormPane),Pj=function(){function t(j){Ij(this,t);var C=this._view=document.createElement("div"),k=this._editableLayer=document.createElement("div"),i=k.style;this.config=j,this._editable=!0,i.backgroundColor=ht.Default.disabledBackground||"rgba( 255, 255, 255, 0.3)",i.position="absolute",i.cursor="not-allow",i.top=0,i.right=0,i.bottom=0,i.left=0,i.pointerEvents="none",lj.config.useCodeEditor||(this._monacoEditor=new ht.widget.TextArea,this._view=this._monacoEditor.getView(),j&&j.value&&this._monacoEditor.setValue(j.value)),C.style.position="absolute"}return t.prototype.getView=function(){return this._view},t.prototype.setValue=function(t){void 0!==t&&null!==t||(t=""),this.monacoEditor&&this.monacoEditor.setValue(t)},t.prototype.getValue=function(){return this.monacoEditor&&this.monacoEditor.getValue()},t.prototype.layout=function(){this.monacoEditor&&(this.monacoEditor.layout(),this.isEditable()||this.getView().appendChild(this._editableLayer))},t.prototype.invalidate=function(){this.layoutLater()},t.prototype.iv=function(){this.invalidate()},t.prototype.layoutLater=function(t){var j=this;setTimeout(function(){j.layout()},t||300)},t.prototype.setEditable=function(t){var j=this;if(this._monacoEditor instanceof ht.widget.TextArea)return void this._monacoEditor.setEditable(t);if(this._editable!==t){this._timer&&(clearTimeout(this._timer),delete this._timer);var C=this._editableLayer;t?C.parentNode&&C.parentNode.removeChild(C):this._timer=setTimeout(function(){delete j._timer,j.getView().appendChild(C)},10),this._editable=t,this._monacoEditor&&this._monacoEditor.updateOptions({readOnly:!t})}},t.prototype.isEditable=function(){return this._monacoEditor instanceof ht.widget.TextArea?this._monacoEditor.isEditable():this._editable},_j(t,[{key:"monacoEditor",get:function(){return!this._monacoEditor&&window.monaco&&(this._monacoEditor=monaco.editor.create(this._view,this.config||{value:"",language:"javascript",theme:lj.config.codeEditorTheme,readOnly:!this._editable,minimap:{enabled:!1}})),this._monacoEditor}}]),t}(),lj={strings:{},customStrings:{},config:Yj},tC=["onClick","onDoubleClick","onContextMenu","onDown","onUp","onMove","onEnter","onHover","onLeave","onBeginDrag","onDrag","onEndDrag","onScroll"],jC="unknow",CC="root",kC="dir",iC="asset",UC="symbol",KC="display",yC="component",LC="model",XC="scene",uC="tile",aC="list",BC="accordion",cC=/^attr@/,fC=/firefox/.test(window.navigator.userAgent.toLowerCase()),RC=/safari/.test(window.navigator.userAgent.toLowerCase()),dC=[],$C={width:16,height:16,comps:[]},mC={display:{},symbol:{},data:{},comp:{},scene:{},data3d:{}},DC=new ht.List([{x:50,y:75},{x:25,y:75},{x:25,y:25},{x:75,y:25},{x:75,y:75},{x:65,y:60},{x:75,y:75},{x:85,y:60}]),bC=new ht.List([1,2,2,2,2,2,1,2]);ht.Default.setImage("check",{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:lj.config.color_line},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:{func:function(t,j){return t&&j&&j.getRowSize&&j.isSelected&&j.isSelected(t)?lj.config.color_line:lj.config.color_select}}}]}),ht.Default.setImage("uncheck",{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:lj.config.color_line}]}),ht.Default.setImage("text_icon",{width:16,height:16,comps:[{type:"shape",points:[3,14,8,2,13,14,5,9,11,9],segments:[1,2,2,1,2],borderColor:lj.config.color_dark,borderWidth:1}]}),ht.Default.setImage("refGraph_icon",{width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:lj.config.color_dark,rotation:.7854,points:[12.90381,7.59615,12.90381,7.59615,12.90381,4.61619,12.90381,3.59619,12.90381,2.57619,11.72047,1.59619,10.40381,1.59619,9.08714,1.59619,7.90381,2.61619,7.90381,3.59619,7.90381,4.35799,7.90381,7.59615,7.90381,7.59615,7.90381,7.59615,7.90381,9.59619,10.40381,9.59619],segments:[1,4,4,4,4,4]},{type:"shape",borderWidth:1,borderColor:lj.config.color_dark,rotation:-2.35619,points:[8.21091,12.28904,8.21091,12.28904,8.21091,9.30909,8.21091,8.28909,8.21091,7.26909,7.02758,6.28909,5.71091,6.28909,4.39425,6.28909,3.21091,7.30909,3.21091,8.28909,3.21091,9.05088,3.21091,12.28904,3.21091,12.28904,3.21091,12.28904,3.21091,14.28909,5.71091,14.28909],segments:[1,4,4,4,4,4]}]}),ht.Default.setImage("editor.unknown",{width:200,height:200,comps:[{type:"roundRect",background:"rgb(247,247,247)",borderColor:"#979797",cornerRadius:20,selectable:!1,rect:[0,0,200,200]},{type:"shape",background:"rgba(255,170,79,0.63)",borderColor:"rgb(124,145,155)",points:[35.92101,125.8927,70.22338,97.87611,96.05685,117.16025,108.79166,106.08902,115.70485,111.45559,92.40971,145.02116,35.92101,145.02116,35.92101,130.19911]},{type:"shape",background:"rgba(255,170,79,0.63)",borderColor:"rgb(124,145,155)",points:[143.94195,74.95345,121.52647,95.32915,136.08054,112.06633,115.341,146.63224,166.86461,146.63224,166.86461,103.69774]},{type:"shape",borderWidth:4,borderColor:"rgb(124,145,155)",displayName:"\u4e0d\u89c4\u5219\u56fe\u5f62",closePath:!0,points:[86.52393,81.40417,110.5868,43.51795,35.32634,43.51795,35.32634,146.93709,93.17962,146.93709,117.24248,111.09877,86.52393,81.40417]},{type:"shape",borderWidth:4,borderColor:"rgb(124,145,155)",closePath:!0,points:[105.77896,81.40417,129.84183,43.51795,168.08039,43.51795,168.08039,146.93709,112.43465,146.93709,136.49752,111.09877,105.77896,81.40417]},{type:"shape",borderWidth:4,borderColor:"rgb(124,145,155)",points:[35.92101,126.00861,70.52846,96.60621,95.13328,116.95012,108.45973,104.311]},{type:"shape",borderWidth:4,borderColor:"rgb(124,145,155)",points:[122.25418,94.2376,144.08528,74.22575,168.32002,106.08902]},{type:"oval",background:"#FF7C7C",borderWidth:4,borderColor:"rgb(124,145,155)",rect:[56.57448,66.67972,14,14]}]}),ht.Default.setImage("editor.root",{width:30,height:30,fitSize:!0,comps:[{type:"shape",points:[23,8,8,23],segments:[1,2],borderWidth:1,borderColor:"white"}]}),ht.Default.setImage("editor.display",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"circle",borderWidth:1,borderColor:lj.config.color_light,rect:[6,1,4,4.00837]},{type:"circle",borderWidth:1,borderColor:lj.config.color_light,rect:[11,10.99163,4,4.00837]},{type:"shape",borderWidth:1,borderColor:lj.config.color_light,points:[2.98235,11.0795,2.98235,8,7.89475,8,7.89475,5.00837,7.89475,8,13,8,13,11]},{type:"circle",borderWidth:1,borderColor:lj.config.color_light,rect:[1,10.99163,4,4.00837]}]}),ht.Default.setImage("editor.symbol",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"circle",borderWidth:1,borderColor:lj.config.color_light,rect:[0,2,10,8]},{type:"rect",borderWidth:1,borderColor:lj.config.color_light,rect:[5,6,10,8]}]}),ht.Default.setImage("editor.filter",{background:"rgb(130,130,130)",width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",closePath:!0,points:[2,1.5,14,1.5,9.50949,5.5,9.50949,9.5,13,9.5,9.50949,9.5,9.50949,11.5,12,11.5,9.50949,11.5,9.50949,14.5,6.5335,12.5,6.5335,5.5,2,1.5]}]}),ht.Default.setImage("editor.bind",{width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"white",borderCap:"round",rotation:.7854,points:[12.5502,6.7981,12.5502,6.7981,12.5502,4.8181,12.5502,3.7981,12.5502,2.7781,11.36687,1.7981,10.0502,1.7981,8.73354,1.7981,7.5502,2.8181,7.5502,3.7981,7.5502,4.55989,7.5502,7.79805,7.5502,7.79805,7.5502,7.79805,7.5502,9.7981,10.0502,9.7981],segments:[1,4,4,4,4,4]},{type:"shape",borderWidth:1,borderColor:"white",borderCap:"round",rotation:-2.35619,points:[8.4498,11.2019,8.4498,11.2019,8.4498,9.2219,8.4498,8.2019,8.4498,7.1819,7.26646,6.2019,5.9498,6.2019,4.63313,6.2019,3.4498,7.2219,3.4498,8.2019,3.4498,8.9637,3.4498,12.20186,3.4498,12.20186,3.4498,12.20186,3.4498,14.2019,5.9498,14.2019],segments:[1,4,4,4,4,4]}]}),ht.Default.setImage("editor.unbind",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:.7854,points:[13.49999,7.03553,13.49999,7.03553,13.49999,5.05554,13.49999,4.03553,13.49999,3.01553,12.31666,2.03553,10.99999,2.03553,9.68333,2.03553,8.49999,3.05553,8.49999,4.03553,8.49999,5.01553,8.49999,7.03553,8.49999,7.03553],segments:[1,4,4,4,4]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:3.92699,points:[7.28554,13.25761,7.28554,13.25761,7.28554,11.27761,7.28554,10.2576,7.28554,9.23761,6.1022,8.25761,4.78554,8.25761,3.46887,8.25761,2.28554,9.2776,2.28554,10.2576,2.28554,11.2376,2.28554,13.25761,2.28554,13.25761],segments:[1,4,4,4,4]}]}),ht.Default.setImage("editor.dircollapsed",{background:"rgb(179,179,179)",width:16,height:16,comps:[{type:"shape",background:"rgb(255,204,153)",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[14.5,14.5,.5,14.5,.5,1.50001,6.5,1.50001,7.5,3.50001,14.5,3.50001,14.5,14.5]},{type:"shape",background:"rgb(255,227,199)",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[.5,5.50001,14.5,5.50001,14.5,14.50001,.5,14.50001,.5,5.50001]}]}),ht.Default.setImage("editor.direxpanded",{background:"rgb(179,179,179)",width:16,height:16,comps:[{type:"shape",background:"rgb(255,255,255)",borderWidth:1,borderColor:"rgb(51,153,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[2.35891,10.47175,3.3125,6.30284,15.5,6.30284,13.625,14.5,.5,14.5,.5,1.5,6.125,1.5,7.0625,3.2289,12.6875,3.2289,12.6875,6.30284]}]}),ht.Default.setImage("editor.dir",{background:"rgb(227,227,227)",width:20,height:20,fitSize:!0,comps:[{type:"shape",background:"#FFCC99",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",points:[19,4,19,18,1,18,1,2,8.71429,2,10,4,19,4]},{type:"rect",shadow:!0,shadowColor:"rgba(0,0,0,0.4)",shadowBlur:2,shadowOffsetX:0,shadowOffsetY:1,background:"rgb(255,255,255)",borderColor:"#979797",rotation:6.28319,rect:[2.98273,5.998,13.98346,9.99004]},{type:"shape",background:"rgba(255,255,153,0.3)",borderColor:"rgb(255,255,255)",borderCap:"round",points:[18,9,18,17,2,17,2,9,18,9]},{type:"rect",shadowColor:"rgb(0,0,0)",shadowBlur:2,shadowOffsetX:0,shadowOffsetY:1,background:"rgb(232,230,230)",borderColor:"#979797",rotation:6.28319,rect:[4,7,11.98532,1.06039]}]}),ht.Default.setImage("editor.dxf",{width:64,height:64,fitSize:!0,comps:[{type:"shape",shadowColor:"#1ABC9C",background:"#000000",points:[25.13334,60.62742,20.38001,60.62742,20.11302,60.62742,19.89504,60.41688,19.89504,60.15453,19.89504,43.31796,19.89504,43.05561,20.11302,42.84507,20.38001,42.84507,25.13334,42.84507,30.66329,42.84507,33.35167,45.67873,33.35167,51.50916,33.35167,57.47593,30.51009,60.62742,25.13334,60.62742,25.13334,60.62742,23.32783,57.5939,25.03463,57.5939,28.43349,57.5939,29.82018,55.90554,29.82018,51.77117,29.82018,47.64415,28.35946,45.88193,24.93627,45.88193,23.32783,45.88193,23.32783,57.5939,23.32783,57.5939],segments:[1,2,4,2,4,2,4,4,2,1,2,4,4,2,2,2]},{type:"shape",shadowColor:"#1ABC9C",background:"#000000",
points:[48.10416,60.62742,45.1488,60.62742,44.97846,60.62742,44.82286,60.54254,44.73581,60.40217,40.95446,54.3465,37.26771,60.39482,37.1786,60.53886,37.01957,60.62776,36.84889,60.62776,34.01657,60.62776,33.84041,60.62776,33.67761,60.53552,33.59227,60.38379,33.50693,60.2324,33.51275,60.04759,33.60735,59.89987,39.05608,51.53522,33.90312,43.56961,33.80853,43.42557,33.8027,43.24076,33.88804,43.08937,33.97338,42.93797,34.13618,42.8454,34.31235,42.8454,37.31706,42.8454,37.4874,42.8454,37.64677,42.93396,37.73382,43.078,41.14399,48.68284,44.48219,43.08168,44.56924,42.93396,44.72861,42.84507,44.90272,42.84507,47.73299,42.84507,47.91121,42.84507,48.074,42.93731,48.15729,43.08903,48.24434,43.24042,48.2368,43.42524,48.14221,43.56928,43.03826,51.48342,48.51339,59.89987,48.60798,60.04759,48.61552,60.2324,48.52847,60.38379,48.44518,60.53485,48.28238,60.62742,48.10416,60.62742,48.10416,60.62742],segments:[1,2,4,2,2,4,2,4,4,2,2,4,4,2,4,2,2,4,2,4,4,2,2,4,4,2]},{type:"shape",shadowColor:"#1ABC9C",background:"#000000",points:[53.17006,60.62742,50.68081,60.62742,50.41177,60.62742,50.19585,60.41688,50.19585,60.15453,50.19585,43.31796,50.19585,43.05561,50.41177,42.84507,50.68081,42.84507,60.09288,42.84507,60.36192,42.84507,60.57784,43.05561,60.57784,43.31796,60.57784,45.40904,60.57784,45.67138,60.36192,45.88193,60.09288,45.88193,53.65537,45.88193,53.65537,50.62587,59.22886,50.62587,59.4979,50.62587,59.71382,50.83642,59.71382,51.09876,59.71382,53.18984,59.71382,53.45219,59.4979,53.66273,59.22886,53.66273,53.65537,53.66273,53.65537,60.1542,53.65537,60.41688,53.43911,60.62742,53.17006,60.62742,53.17006,60.62742],segments:[1,2,4,2,4,2,4,2,4,2,2,2,4,2,4,2,2,4,2]},{type:"shape",shadowColor:"#1ABC9C",background:"#000000",points:[56.21111,19.11398,40.59837,2.34525,40.23096,1.94622,39.70418,1.92216,39.15478,1.92216,8.11505,1.92216,7.04265,1.92216,6.07649,2.35795,6.07649,3.40366,6.07649,60.1542,6.07649,61.1999,7.04299,62.07784,8.11505,62.07784,13.93496,62.07784,15.00736,62.07784,15.87481,61.28546,15.87481,60.23975,15.87481,59.19405,15.00702,58.40166,13.93496,58.40166,9.84618,58.40166,9.84618,5.59867,35.20824,5.59867,35.20824,21.86677,35.20824,22.91248,36.27174,23.64538,37.3438,23.64538,52.6875,23.64538,52.6875,35.56255,52.6875,36.60826,53.67148,37.45412,54.74388,37.45412,55.81629,37.45412,56.80027,36.60793,56.80027,35.56255,56.80027,20.28301,56.80027,19.81747,56.52917,19.46155,56.21111,19.11398,56.21111,19.11398,39.32101,6.67546,51.68947,19.9692,39.32101,19.9692,39.32101,6.67546,39.32101,6.67546],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]}]}),ht.Default.setImage("editor.obj",{width:64,height:64,fitSize:!0,attachStyle:"close",comps:[{type:"shape",background:"rgb(0,0,0)",points:[56.21111,19.11398,40.59837,2.34525,40.23096,1.94622,39.70418,1.92216,39.15478,1.92216,8.11505,1.92216,7.04265,1.92216,6.07649,2.35795,6.07649,3.40366,6.07649,60.1542,6.07649,61.1999,7.04299,62.07784,8.11505,62.07784,13.93496,62.07784,15.00736,62.07784,15.87481,61.28546,15.87481,60.23975,15.87481,59.19405,15.00702,58.40166,13.93496,58.40166,9.84618,58.40166,9.84618,5.59867,35.20824,5.59867,35.20824,21.86677,35.20824,22.91248,36.27174,23.64538,37.3438,23.64538,52.6875,23.64538,52.6875,35.56255,52.6875,36.60826,53.67148,37.45412,54.74388,37.45412,55.81629,37.45412,56.80027,36.60793,56.80027,35.56255,56.80027,20.28301,56.80027,19.81747,56.52917,19.46155,56.21111,19.11398,56.21111,19.11398,39.32101,6.67546,51.68947,19.9692,39.32101,19.9692,39.32101,6.67546,39.32101,6.67546],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]},{type:"shape",background:"#000000",borderWidth:.5,borderColor:"rgb(0,0,0)",pixelPerfect:!0,points:[31.21904,47.49025,32.38182,48.81914,33.04627,50.64637,33.04627,52.80583,33.04627,54.96528,32.38182,56.79251,31.21904,58.12141,29.89014,59.4503,28.22903,60.28086,26.06957,60.28086,23.91012,60.28086,22.249,59.61642,20.9201,58.12141,19.75732,56.79251,19.09287,54.96528,19.09287,52.80583,19.09287,50.64637,19.59121,48.81914,20.9201,47.49025,22.08289,45.99524,23.91012,45.33079,26.06957,45.33079,28.22903,45.33079,30.05626,45.99524,31.21904,47.49025,22.58122,48.81914,21.75066,49.81582,21.41844,51.14471,21.41844,52.80583,21.41844,54.46695,21.75066,55.79584,22.58122,56.79251,23.41178,57.78919,24.57456,58.28752,26.06957,58.28752,27.56458,58.28752,28.72736,57.78919,29.55792,56.79251,30.38848,55.79584,30.7207,54.46695,30.7207,52.80583,30.7207,51.14471,30.22237,49.81582,29.55792,48.81914,28.72736,47.82247,27.56458,47.32414,26.06957,47.32414,24.57456,47.32414,23.41178,47.82247,22.58122,48.81914],segments:[1,4,4,4,4,4,4,4,4,5,1,4,4,4,4,4,4,4,4,5]},{type:"shape",background:"#000000",borderWidth:.5,borderColor:"rgb(0,0,0)",pixelPerfect:!0,points:[41.68409,45.66302,43.01298,45.66302,44.17577,45.99524,45.00633,46.65969,45.83689,47.32414,46.16911,48.1547,46.16911,49.31748,46.16911,50.14804,46.003,50.81249,45.50466,51.31082,45.17244,51.80916,44.50799,52.30749,43.84354,52.47361,44.84021,52.63972,45.50466,52.97194,46.003,53.63639,46.50133,54.13472,46.66745,54.96528,46.66745,55.96195,46.66745,57.45696,46.16911,58.45363,45.17244,59.11808,44.34188,59.61642,43.1791,59.94864,41.68409,59.94864,35.20573,59.94864,35.20573,45.66302,41.68409,45.66302,37.36518,51.64305,41.18575,51.64305,42.18242,51.64305,42.84687,51.47693,43.34521,51.14471,43.84354,50.81249,44.00966,50.14804,44.00966,49.48359,44.00966,48.81914,43.84354,48.32081,43.34521,47.98858,42.84687,47.65636,42.18242,47.49025,41.18575,47.49025,37.36518,47.49025,37.36518,51.64305,37.36518,58.12141,41.35186,58.12141,42.34854,58.12141,43.01298,57.9553,43.51132,57.62307,44.17577,57.29085,44.50799,56.6264,44.50799,55.79584,44.50799,54.96528,44.17577,54.30084,43.67743,53.96861,43.1791,53.63639,42.34854,53.47028,41.35186,53.47028,37.19907,53.47028,37.19907,58.12141],segments:[1,4,4,4,4,4,4,4,4,2,2,2,5,1,2,4,4,4,4,2,2,5,1,2,4,4,4,4,2,2,5]},{type:"shape",background:"#000000",borderWidth:.5,borderColor:"rgb(0,0,0)",pixelPerfect:!0,points:[56.80027,45.66302,56.80027,55.29751,56.80027,56.95863,56.46805,58.12141,55.8036,58.95197,54.97304,59.78253,53.81026,60.28086,52.14914,60.28086,50.65413,60.28086,49.65746,59.94864,48.99301,59.11808,48.16245,58.28752,47.83023,57.29085,47.83023,55.79584,47.83023,55.29751,49.98968,55.29751,49.98968,55.79584,49.98968,57.45696,50.65413,58.28752,52.14914,58.28752,52.9797,58.28752,53.64414,57.9553,53.97637,57.62307,54.30859,57.12474,54.4747,56.46029,54.4747,55.29751,54.4747,45.66302,56.80027,45.66302],segments:[1,2,4,4,4,4,2,2,2,4,4,4,2,2,5]}]}),ht.Default.setImage("editor.mtl",{width:64,height:64,fitSize:!0,attachStyle:"close",comps:[{type:"shape",background:"rgb(0,0,0)",points:[56.21111,19.11398,40.59837,2.34525,40.23096,1.94622,39.70418,1.92216,39.15478,1.92216,8.11505,1.92216,7.04265,1.92216,6.07649,2.35795,6.07649,3.40366,6.07649,60.1542,6.07649,61.1999,7.04299,62.07784,8.11505,62.07784,13.93496,62.07784,15.00736,62.07784,15.87481,61.28546,15.87481,60.23975,15.87481,59.19405,15.00702,58.40166,13.93496,58.40166,9.84618,58.40166,9.84618,5.59867,35.20824,5.59867,35.20824,21.86677,35.20824,22.91248,36.27174,23.64538,37.3438,23.64538,52.6875,23.64538,52.6875,35.56255,52.6875,36.60826,53.67148,37.45412,54.74388,37.45412,55.81629,37.45412,56.80027,36.60793,56.80027,35.56255,56.80027,20.28301,56.80027,19.81747,56.52917,19.46155,56.21111,19.11398,56.21111,19.11398,39.32101,6.67546,51.68947,19.9692,39.32101,19.9692,39.32101,6.67546,39.32101,6.67546],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]},{type:"shape",background:"#000000",borderWidth:.5,borderColor:"rgb(0,0,0)",pixelPerfect:!0,points:[21.55794,45.99697,26.66087,57.7337,26.66087,57.7337,31.7638,45.99697,34.31526,45.99697,34.31526,60.62536,32.10399,60.62536,32.10399,50.24941,32.10399,50.24941,27.68146,60.62536,25.81038,60.62536,21.38785,50.24941,21.38785,50.24941,21.38785,60.62536,19.00648,60.62536,19.00648,45.99697,21.55794,45.99697],segments:[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,5]},{type:"shape",background:"#000000",borderWidth:.5,borderColor:"rgb(0,0,0)",pixelPerfect:!0,points:[48.09317,45.99697,48.09317,47.86804,43.16034,47.86804,43.16034,60.45527,40.94907,60.45527,40.94907,47.86804,36.01624,47.86804,36.01624,45.99697,48.09317,45.99697],segments:[1,2,2,2,2,2,2,2,2,5]},{type:"shape",background:"#000000",borderWidth:.5,borderColor:"rgb(0,0,0)",pixelPerfect:!0,points:[52.00541,45.99697,52.00541,58.58419,60,58.58419,60,60.45527,49.79414,60.45527,49.79414,45.82687,52.00541,45.82687],segments:[1,2,2,2,2,2,2,5]}]}),ht.Default.setImage("editor.ttf",{width:64,height:64,fitSize:!0,comps:[{type:"shape",background:"#000000",points:[53.17006,60.62742,50.68081,60.62742,50.41177,60.62742,50.19585,60.41688,50.19585,60.15453,50.19585,43.31796,50.19585,43.05561,50.41177,42.84507,50.68081,42.84507,60.09288,42.84507,60.36192,42.84507,60.57784,43.05561,60.57784,43.31796,60.57784,45.40904,60.57784,45.67138,60.36192,45.88193,60.09288,45.88193,53.65537,45.88193,53.65537,50.62587,59.22886,50.62587,59.4979,50.62587,59.71382,50.83642,59.71382,51.09876,59.71382,53.18984,59.71382,53.45219,59.4979,53.66273,59.22886,53.66273,53.65537,53.66273,53.65537,60.1542,53.65537,60.41688,53.43911,60.62742,53.17006,60.62742,53.17006,60.62742],segments:[1,2,4,2,4,2,4,2,4,2,2,2,4,2,4,2,2,4,2]},{type:"shape",background:"#000000",points:[56.21111,19.11398,40.59837,2.34525,40.23096,1.94622,39.70418,1.92216,39.15478,1.92216,8.11505,1.92216,7.04265,1.92216,6.07649,2.35795,6.07649,3.40366,6.07649,60.1542,6.07649,61.1999,7.04299,62.07784,8.11505,62.07784,13.93496,62.07784,15.00736,62.07784,15.87481,61.28546,15.87481,60.23975,15.87481,59.19405,15.00702,58.40166,13.93496,58.40166,9.84618,58.40166,9.84618,5.59867,35.20824,5.59867,35.20824,21.86677,35.20824,22.91248,36.27174,23.64538,37.3438,23.64538,52.6875,23.64538,52.6875,35.56255,52.6875,36.60826,53.67148,37.45412,54.74388,37.45412,55.81629,37.45412,56.80027,36.60793,56.80027,35.56255,56.80027,20.28301,56.80027,19.81747,56.52917,19.46155,56.21111,19.11398,56.21111,19.11398,39.32101,6.67546,51.68947,19.9692,39.32101,19.9692,39.32101,6.67546,39.32101,6.67546],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]},{type:"shape",background:"#000000",points:[41.52931,60.62742,39.04006,60.62742,38.77102,60.62742,38.5551,60.41688,38.5551,60.15453,38.5551,42.84507,46.88507,42.84507,47.15411,42.84507,47.37003,43.05561,47.37003,43.31796,47.37003,45.40904,47.37003,45.67138,47.15411,45.88193,46.88507,45.88193,42.01462,45.88193,42.01462,60.1542,42.01462,60.41688,41.79836,60.62742,41.52931,60.62742,41.52931,60.62742],segments:[1,2,4,2,2,4,2,4,2,2,4,2]},{type:"shape",background:"#000000",rotation:3.14159,points:[33.91988,42.84507,39.07014,42.84507,39.33918,42.84507,39.5551,43.05561,39.5551,43.31796,39.5551,45.40904,39.5551,45.67138,39.33918,45.88193,39.07014,45.88193,33.91988,45.88193],segments:[1,2,4,2,4,2]},{type:"shape",background:"#000000",points:[25.11617,60.62742,22.62692,60.62742,22.35788,60.62742,22.14196,60.41688,22.14196,60.15453,22.14196,42.84507,30.47192,42.84507,30.74096,42.84507,30.95688,43.05561,30.95688,43.31796,30.95688,45.40904,30.95688,45.67138,30.74096,45.88193,30.47192,45.88193,25.60148,45.88193,25.60148,60.1542,25.60148,60.41688,25.38522,60.62742,25.11617,60.62742,25.11617,60.62742],segments:[1,2,4,2,2,4,2,4,2,2,4,2]},{type:"shape",background:"#000000",rotation:3.14159,points:[17.50673,42.84507,22.657,42.84507,22.92604,42.84507,23.14196,43.05561,23.14196,43.31796,23.14196,45.40904,23.14196,45.67138,22.92604,45.88193,22.657,45.88193,17.50673,45.88193],segments:[1,2,4,2,4,2]}]}),ht.Default.setImage("editor.otf",{width:64,height:64,fitSize:!0,comps:[{type:"shape",background:"#000000",points:[53.17006,60.62742,50.68081,60.62742,50.41177,60.62742,50.19585,60.41688,50.19585,60.15453,50.19585,43.31796,50.19585,43.05561,50.41177,42.84507,50.68081,42.84507,60.09288,42.84507,60.36192,42.84507,60.57784,43.05561,60.57784,43.31796,60.57784,45.40904,60.57784,45.67138,60.36192,45.88193,60.09288,45.88193,53.65537,45.88193,53.65537,50.62587,59.22886,50.62587,59.4979,50.62587,59.71382,50.83642,59.71382,51.09876,59.71382,53.18984,59.71382,53.45219,59.4979,53.66273,59.22886,53.66273,53.65537,53.66273,53.65537,60.1542,53.65537,60.41688,53.43911,60.62742,53.17006,60.62742,53.17006,60.62742],segments:[1,2,4,2,4,2,4,2,4,2,2,2,4,2,4,2,2,4,2]},{type:"shape",background:"#000000",points:[56.21111,19.11398,40.59837,2.34525,40.23096,1.94622,39.70418,1.92216,39.15478,1.92216,8.11505,1.92216,7.04265,1.92216,6.07649,2.35795,6.07649,3.40366,6.07649,60.1542,6.07649,61.1999,7.04299,62.07784,8.11505,62.07784,13.93496,62.07784,15.00736,62.07784,15.87481,61.28546,15.87481,60.23975,15.87481,59.19405,15.00702,58.40166,13.93496,58.40166,9.84618,58.40166,9.84618,5.59867,35.20824,5.59867,35.20824,21.86677,35.20824,22.91248,36.27174,23.64538,37.3438,23.64538,52.6875,23.64538,52.6875,35.56255,52.6875,36.60826,53.67148,37.45412,54.74388,37.45412,55.81629,37.45412,56.80027,36.60793,56.80027,35.56255,56.80027,20.28301,56.80027,19.81747,56.52917,19.46155,56.21111,19.11398,56.21111,19.11398,39.32101,6.67546,51.68947,19.9692,39.32101,19.9692,39.32101,6.67546,39.32101,6.67546],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]},{type:"shape",background:"#000000",points:[41.52931,60.62742,39.04006,60.62742,38.77102,60.62742,38.5551,60.41688,38.5551,60.15453,38.5551,42.84507,46.88507,42.84507,47.15411,42.84507,47.37003,43.05561,47.37003,43.31796,47.37003,45.40904,47.37003,45.67138,47.15411,45.88193,46.88507,45.88193,42.01462,45.88193,42.01462,60.1542,42.01462,60.41688,41.79836,60.62742,41.52931,60.62742,41.52931,60.62742],segments:[1,2,4,2,2,4,2,4,2,2,4,2]},{type:"shape",background:"#000000",rotation:3.14159,points:[33.91988,42.84507,39.07014,42.84507,39.33918,42.84507,39.5551,43.05561,39.5551,43.31796,39.5551,45.40904,39.5551,45.67138,39.33918,45.88193,39.07014,45.88193,33.91988,45.88193],segments:[1,2,4,2,4,2]},{type:"oval",borderWidth:3.3,borderColor:"rgb(0,0,0)",rect:[18.97543,44.76232,11.82189,13.94784]}]}),ht.Default.setImage("editor.js",{width:64,height:64,fitSize:!0,comps:[{type:"shape",background:"#000000",points:[56.21111,19.11398,40.59837,2.34525,40.23096,1.94622,39.70418,1.92216,39.15478,1.92216,8.11505,1.92216,7.04265,1.92216,6.07649,2.35795,6.07649,3.40366,6.07649,60.1542,6.07649,61.1999,7.04299,62.07784,8.11505,62.07784,13.93496,62.07784,15.00736,62.07784,15.87481,61.28546,15.87481,60.23975,15.87481,59.19405,15.00702,58.40166,13.93496,58.40166,9.84618,58.40166,9.84618,5.59867,35.20824,5.59867,35.20824,21.86677,35.20824,22.91248,36.27174,23.64538,37.3438,23.64538,52.6875,23.64538,52.6875,35.56255,52.6875,36.60826,53.67148,37.45412,54.74388,37.45412,55.81629,37.45412,56.80027,36.60793,56.80027,35.56255,56.80027,20.28301,56.80027,19.81747,56.52917,19.46155,56.21111,19.11398,56.21111,19.11398,39.32101,6.67546,51.68947,19.9692,39.32101,19.9692,39.32101,6.67546,39.32101,6.67546],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]},{type:"text",text:{func:"attr@name",value:"JS"},align:"center",font:"bold 24px Arial Rounded MT Bold",rect:[17.50673,40.58187,46.49327,23.41813]}]}),ht.Default.setImage("editor.sound",{width:64,height:64,fitSize:!0,comps:[{type:"shape",background:"#000000",points:[56.21111,19.11398,40.59837,2.34525,40.23096,1.94622,39.70418,1.92216,39.15478,1.92216,8.11505,1.92216,7.04265,1.92216,6.07649,2.35795,6.07649,3.40366,6.07649,60.1542,6.07649,61.1999,7.04299,62.07784,8.11505,62.07784,13.93496,62.07784,15.00736,62.07784,15.87481,61.28546,15.87481,60.23975,15.87481,59.19405,15.00702,58.40166,13.93496,58.40166,9.84618,58.40166,9.84618,5.59867,35.20824,5.59867,35.20824,21.86677,35.20824,22.91248,36.27174,23.64538,37.3438,23.64538,52.6875,23.64538,52.6875,35.56255,52.6875,36.60826,53.67148,37.45412,54.74388,37.45412,55.81629,37.45412,56.80027,36.60793,56.80027,35.56255,56.80027,20.28301,56.80027,19.81747,56.52917,19.46155,56.21111,19.11398,56.21111,19.11398,39.32101,6.67546,51.68947,19.9692,39.32101,19.9692,39.32101,6.67546,39.32101,6.67546],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]},{type:"shape",background:"#231815",points:[29.93506,40.65719,29.93506,52.11129,29.99768,52.17391,38.01482,58.31199,38.01482,53.06642,38.01482,39.70982,38.01482,34.45641,29.93506,40.65719,29.93506,40.65719,29.93506,40.65719,29.93506,40.65719,44.44257,36.03797,44.44257,36.03797,43.87107,35.70912,43.69881,34.9732,44.02766,34.40163,44.37211,33.84573,45.10803,33.65787,45.66393,33.99448,47.80131,35.26287,49.59417,37.09491,50.81553,39.2714,52.01338,41.37743,52.71019,43.80448,52.71019,46.38028,52.71019,48.95608,52.01338,51.38313,50.81553,53.48924,49.59417,55.65789,47.80131,57.49777,45.66393,58.77392,45.10803,59.1262,44.37211,58.93834,44.02766,58.35901,43.69881,57.79528,43.87107,57.05152,44.44257,56.7305,46.24326,55.65789,47.71518,54.13119,48.7486,52.32266,49.73508,50.57675,50.30665,48.55685,50.30665,46.38812,50.30665,44.23514,49.72724,42.19948,48.7486,40.46141,47.71518,38.63721,46.23542,37.10275,44.44257,36.03797,44.44257,36.03797,44.44257,36.03797,28.49449,40.89991,28.49449,40.89991,23.62472,40.89991,23.62472,51.86073,28.49449,51.86073,28.49449,40.89991,28.49449,40.89991,28.49449,40.89991,28.80767,38.51197,28.80767,38.51197,38.42189,31.14469,38.64118,30.96459,38.91517,30.86286,39.21267,30.86286,39.88597,30.86286,40.41052,31.38741,40.41052,32.05287,40.41052,39.70982,40.41052,39.97605,41.53008,40.43014,42.47745,41.16606,43.21337,42.09776,44.14506,43.28777,44.7088,44.76753,44.7088,46.38812,44.7088,48.00879,44.1529,49.50414,43.21337,50.67856,42.50096,51.61017,41.53008,52.33834,40.41052,52.80027,40.41052,53.07426,40.41052,60.72336,40.41052,60.99743,40.32439,61.24015,40.1678,61.45936,39.76073,61.97607,39.01698,62.07788,38.50019,61.67073,28.82334,54.25651,22.46606,54.25651,22.43471,54.25651,21.77708,54.25651,21.23686,53.72412,21.23686,53.06642,21.23686,39.73333,21.23686,39.70982,21.23686,39.04435,21.76924,38.51197,22.43471,38.51197,28.80767,38.51197,28.80767,38.51197,28.80767,38.51197,40.40269,41.5497,40.40269,41.5497,40.40269,51.21878,41.06823,50.85858,41.62405,50.37322,42.08598,49.79381,42.8219,48.86219,43.26039,47.6721,43.26039,46.38812,43.26039,45.11197,42.81414,43.92196,42.08598,42.98243,41.62405,42.39526,41.06039,41.90982,40.40269,41.5497,40.40269,41.5497,40.40269,41.5497],segments:[1,2,2,2,2,2,2,2,2,2,2,1,2,4,4,4,4,4,4,4,4,4,4,4,4,2,2,1,2,2,2,2,2,2,2,1,2,2,4,4,2,2,4,4,4,4,2,2,4,4,2,2,2,4,2,2,4,2,2,2,1,2,2,4,4,4,4,2,2]}]}),ht.Default.setImage("editor.video",{width:64,height:64,fitSize:!0,comps:[{type:"shape",background:"#000000",points:[56.21111,19.11398,40.59837,2.34525,40.23096,1.94622,39.70418,1.92216,39.15478,1.92216,8.11505,1.92216,7.04265,1.92216,6.07649,2.35795,6.07649,3.40366,6.07649,60.1542,6.07649,61.1999,7.04299,62.07784,8.11505,62.07784,13.93496,62.07784,15.00736,62.07784,15.87481,61.28546,15.87481,60.23975,15.87481,59.19405,15.00702,58.40166,13.93496,58.40166,9.84618,58.40166,9.84618,5.59867,35.20824,5.59867,35.20824,21.86677,35.20824,22.91248,36.27174,23.64538,37.3438,23.64538,52.6875,23.64538,52.6875,35.56255,52.6875,36.60826,53.67148,37.45412,54.74388,37.45412,55.81629,37.45412,56.80027,36.60793,56.80027,35.56255,56.80027,20.28301,56.80027,19.81747,56.52917,19.46155,56.21111,19.11398,56.21111,19.11398,39.32101,6.67546,51.68947,19.9692,39.32101,19.9692,39.32101,6.67546,39.32101,6.67546],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]},{type:"shape",background:"#231815",points:[34.79567,39.50193,35.8771,39.50193,36.86394,39.06777,37.56645,38.36518,38.28485,37.63888,38.7269,36.65212,38.7269,35.57851,38.7269,34.497,38.28485,33.51024,37.56645,32.80765,36.86394,32.08933,35.86927,31.6472,34.79567,31.6472,33.70626,31.6472,32.7274,32.08933,32.0169,32.80765,31.30641,33.51024,30.86435,34.497,30.86435,35.57851,30.86435,36.65212,31.30641,37.63888,32.0169,38.36518,32.7274,39.05987,33.71416,39.50193,34.79567,39.50193,34.79567,39.50193,34.79567,39.50193,33.03527,33.81021,33.03527,33.81021,33.47733,33.36816,34.10098,33.08399,34.79567,33.08399,35.48246,33.08399,36.0982,33.36816,36.54816,33.81021,36.99022,34.26807,37.27438,34.88382,37.27438,35.57061,37.27438,36.2574,36.99022,36.87315,36.54816,37.33101,36.0982,37.76524,35.48246,38.0494,34.79567,38.0494,34.10098,38.0494,33.47733,37.76524,33.03527,37.33101,32.59314,36.87315,32.31687,36.2574,32.31687,35.57061,32.31687,34.88382,32.59314,34.27598,33.03527,33.81021,33.03527,33.81021,33.03527,33.81021,38.719,42.35963,38.719,42.35963,39.05848,43.38583,39.77688,44.19107,40.6768,44.64103,42.60298,45.61989,44.97913,44.84625,45.95008,42.92007,46.40794,42.02015,46.53422,40.94655,46.17901,39.92027,45.86323,38.89408,45.14484,38.08884,44.23702,37.63888,43.33711,37.18892,42.2714,37.06264,41.24513,37.40995,40.21894,37.74943,39.39789,38.46775,38.95583,39.35984,38.49007,40.25185,38.3796,41.32546,38.719,42.35963,38.719,42.35963,38.719,42.35963,40.24257,40.02292,40.24257,40.02292,40.53471,39.44669,41.04781,38.99665,41.68726,38.77563,42.33454,38.5704,43.02923,38.64144,43.58184,38.93351,44.15808,39.22558,44.60803,39.72295,44.82124,40.38604,45.03436,41.03339,44.96332,41.70438,44.67907,42.28851,44.06341,43.50428,42.55557,43.98577,41.33198,43.3543,40.77937,43.07005,40.30578,42.56486,40.10048,41.9175,39.87945,41.25442,39.9663,40.58343,40.24257,40.02292,40.24257,40.02292,40.24257,40.02292,40.13209,46.26716,40.13209,46.26716,39.16114,46.10935,38.09543,46.33828,37.21915,46.96976,36.34286,47.61711,35.80606,48.54073,35.65607,49.5354,35.65607,49.5354,35.50608,50.53006,35.71929,51.57996,36.35076,52.46415,36.98231,53.33245,37.89803,53.86926,38.89269,54.02714,38.9243,54.02714,41.04781,54.38235,43.08447,52.8904,43.42395,50.76689,43.42395,50.75899,43.56604,49.76433,43.34501,48.71435,42.71346,47.84604,42.06618,46.96976,41.14256,46.42505,40.13209,46.26716,40.13209,46.26716,40.13209,46.26716,39.14533,52.60623,39.14533,52.60623,39.12953,52.59833,38.49797,52.49568,37.91384,52.1641,37.51912,51.61157,37.1244,51.05896,36.97441,50.38798,37.07706,49.75642,37.17181,49.13278,37.51912,48.54073,38.07172,48.13021,38.62433,47.73549,39.30322,47.60131,39.93469,47.69606,40.55044,47.79081,41.15046,48.13021,41.5451,48.69072,41.94772,49.24333,42.08981,49.91431,41.98724,50.53796,41.77403,51.87993,40.4794,52.81936,39.14533,52.60623,39.14533,52.60623,39.14533,52.60623,49.24984,57.84791,49.24984,57.84791,41.37939,57.84791,46.82629,55.31388,50.46553,49.76433,50.46553,43.63056,50.46553,39.30453,48.70514,35.38909,45.86323,32.54719,43.03714,29.72109,39.12162,27.9607,34.79567,27.9607,26.1594,27.9607,19.12572,34.99437,19.12572,43.63056,19.12572,47.94079,20.88612,51.87993,23.71222,54.69813,26.54622,57.54003,30.46963,59.30043,34.79567,59.30043,35.20611,59.30043,35.29296,59.30043,49.24984,59.30043,49.64456,59.30043,49.96816,58.96893,49.96816,58.57421,49.96816,58.17158,49.64456,57.84791,49.24984,57.84791,49.24984,57.84791,49.24984,57.84791,34.79567,56.88485,34.79567,56.88485,31.13271,56.88485,27.81723,55.39282,25.42528,53.00087,23.01761,50.5853,21.54138,47.28553,21.54138,43.62266,21.54138,36.34425,27.51725,30.36837,34.79567,30.36837,38.45064,30.36837,41.77403,31.8525,44.15808,34.25227,46.56583,36.64422,48.04206,39.96769,48.04206,43.62266,48.04206,47.28553,46.55793,50.6011,44.16598,53.00087,41.68726,55.48757,38.30856,56.88485,34.79567,56.88485,34.79567,56.88485,34.79567,56.88485,28.91446,44.64103,28.91446,44.64103,29.80655,44.18317,30.54067,43.38583,30.86435,42.35173,31.19593,41.32546,31.08538,40.25976,30.63542,39.35984,29.67237,37.44156,27.25672,36.66002,25.35424,37.63888,23.42015,38.62564,22.64651,41.00178,23.62545,42.92007,24.07541,43.81998,24.88057,44.53838,25.90684,44.86206,26.94884,45.20146,28.02245,45.09889,28.91446,44.64103,28.91446,44.64103,28.91446,44.64103,26.3647,43.51211,26.3647,43.51211,25.71735,43.29108,25.20425,42.82532,24.91218,42.28069,24.29643,41.0492,24.79373,39.54136,26.00942,38.92561,27.22519,38.30986,28.73294,38.79143,29.34869,40.02292,29.63286,40.59134,29.7118,41.25442,29.50658,41.90178,29.28555,42.54905,28.81979,43.06215,28.27509,43.34639,27.69877,43.63056,27.01198,43.71741,26.3647,43.51211,26.3647,43.51211,26.3647,43.51211,29.44344,46.26716,29.44344,46.26716,27.31195,46.59874,25.85153,48.61178,26.17521,50.72738,26.17521,50.75899,26.33309,51.75365,26.8778,52.69308,27.73828,53.32455,28.59876,53.9561,29.66447,54.17713,30.62752,54.02714,30.66703,54.01924,32.80634,53.67194,34.25886,51.66681,33.92728,49.52749,33.60361,47.39609,31.58275,45.94356,29.44344,46.26716,29.44344,46.26716,29.44344,46.26716,32.50637,49.75642,32.50637,49.75642,32.7274,51.1063,31.80378,52.39303,30.44593,52.60623,30.4223,52.61413,29.79865,52.7009,29.13557,52.55091,28.59086,52.14837,28.04616,51.75365,27.69877,51.15371,27.5962,50.53006,27.5962,50.50635,27.3909,49.17229,28.33032,47.90128,29.66447,47.69606,31.00644,47.48293,32.29317,48.40655,32.50637,49.75642,32.50637,49.75642,32.50637,49.75642,32.50637,49.75642,37.44808,43.63056,37.44808,43.63056,37.44808,42.89644,37.1481,42.22537,36.67444,41.75171,36.18497,41.27022,35.52189,40.96235,34.79567,40.96235,34.06147,40.96235,33.39048,41.27022,32.90891,41.75171,32.43525,42.23328,32.14318,42.89644,32.14318,43.63056,32.14318,44.36469,32.43525,45.02785,32.90891,45.50933,33.39838,45.983,34.06147,46.28297,34.79567,46.28297,36.25609,46.28297,37.44808,45.08308,37.44808,43.63056,37.44808,43.63056,37.44808,43.63056,34.79567,44.83835,34.79567,44.83835,34.45619,44.83835,34.14831,44.71207,33.93519,44.49104,33.71416,44.28574,33.5878,43.96997,33.5878,43.63846,33.5878,43.31479,33.71416,42.99901,33.93519,42.77798,34.14831,42.56486,34.45619,42.42277,34.79567,42.42277,35.11927,42.42277,35.42714,42.55695,35.64817,42.77798,35.86927,42.99901,36.01136,43.31479,36.01136,43.63846,36.01136,44.30155,35.46665,44.83835,34.79567,44.83835,34.79567,44.83835,34.79567,44.83835],segments:[1,4,4,4,4,4,4,4,4,2,2,1,2,4,4,4,4,4,4,4,4,2,2,1,2,4,4,4,4,4,4,4,2,2,1,2,4,4,4,4,4,4,4,2,2,1,2,4,4,2,4,4,2,4,2,4,4,2,2,1,2,2,4,4,4,4,4,4,4,2,2,1,2,2,4,4,4,4,4,4,2,2,2,4,4,2,2,1,2,4,4,4,4,4,4,4,2,2,1,2,4,4,4,4,4,4,2,2,1,2,4,4,4,4,4,4,2,2,1,2,4,2,4,4,2,4,4,2,2,1,2,4,2,4,4,2,4,4,2,2,2,1,2,4,4,4,4,4,4,4,2,2,1,2,4,4,4,4,4,4,4,2,2]}]}),ht.Default.setImage("editor.flipx",{width:16,height:16,comps:[{type:"shape",points:[8,1,8,14],segments:[1,2],borderWidth:1,borderColor:lj.config.color_dark},{type:"shape",points:[6,3,6,13,2,13],background:lj.config.color_dark},{type:"shape",points:[10,3,10,13,14,13],background:lj.config.color_select}]}),ht.Default.setImage("editor.flipy",{width:16,height:16,comps:[{type:"shape",points:[2,8,15,8],segments:[1,2],borderWidth:1,borderColor:lj.config.color_dark},{type:"shape",points:[3,6,13,6,3,2],background:lj.config.color_dark},{type:"shape",points:[3,10,13,10,3,14],background:lj.config.color_select}]}),ht.Default.setImage("editor.resetsize",{width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"white",points:[8,1,8,6,6,3,8,1,10,3,8,10,8,15,6,13,8,15,10,13,1,8,6,8,3,6,1,8,3,10,10,8,15,8,13,6,15,8,13,10],segments:[1,2,1,2,2,1,2,1,2,2,1,2,1,2,2,1,2,1,2,2]}]}),ht.Default.setImage("editor.func",{width:16,height:16,comps:[{type:"border",rect:[0,0,16,16],width:1,color:"#E4E4E4"},{type:"text",rect:[0,0,16,16],text:"F",align:"center",color:"black"}]}),ht.Default.setImage("editor.comp",{fitSize:!0,comps:[{type:{func:function(t){return t.compType},isSafeFunc:!0}}]}),ht.Default.setImage("editor.oops",{width:128,height:128,comps:[{type:"oval",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(61,61,61)",rect:[21.53429,22.96531,88.8981,74.69064]},{type:"shape",background:"rgb(237,237,237)",borderColor:"#979797",points:[34.08079,87.52544,34.08079,87.52544,59.57908,97.75645,77.79215,90.58303,96.00522,83.40961,106.8249,68.87436,109.71641,51.69689,109.71641,51.69689,117.89865,74.48774,101.34821,87.52544,84.79777,100.56314,59.50721,102.27801,46.42474,94.29524],segments:[1,4,4,4,4]},{type:"arc",background:"rgb(196,185,185)",borderColor:"rgb(61,61,61)",arcTo:0,arcOval:!0,rotation:3.14159,rect:[32.3979,36.49467,28.49791,18.12387]},{type:"arc",background:"rgb(196,185,185)",borderColor:"rgb(61,61,61)",arcTo:0,arcOval:!0,rotation:3.14159,rect:[68.95508,36.49467,28.49791,18.12387]},{type:"shape",background:"rgb(149,224,245)",borderColor:"#979797",points:[39.9814,51.13901,39.9814,51.13901,32.00842,57.90113,30.56723,66.4088,29.12604,74.91647,34.21664,85.16969,34.21664,85.16969,39.0516,89.44677,39.0516,89.44677,36.05169,79.68945,37.3999,70.48443,38.74811,61.27941,44.44444,52.62669,44.44444,52.62669,39.9814,51.13901,39.9814,51.13901],segments:[1,4,4,2,4,4,2,2]},{type:"shape",background:"rgb(149,224,245)",borderColor:"#979797",scaleX:-1,points:[97.67259,49.56003,97.67259,49.56003,89.6996,57.90113,88.25841,66.4088,86.81722,74.91647,91.8398,85.99598,91.8398,85.99598,96.74279,89.44677,96.74279,89.44677,93.74288,79.68945,95.09109,70.48443,96.4393,61.27941,102.44264,50.50641,102.44264,50.50641,97.67259,49.56003],segments:[1,4,4,2,4,4,2]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",points:[59.61377,32.055,59.61377,32.055,61.61221,36.91182,59.19747,38.71578,56.78274,40.51974,34.08079,42.18493,34.08079,42.18493],segments:[1,4,4]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",scaleX:-1,points:[94.48806,32.055,94.48806,32.055,96.4865,36.91182,94.07177,38.71578,91.65703,40.51974,68.95508,42.18493,68.95508,42.18493],segments:[1,4,4]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",points:[67.02409,33.58143,67.02409,33.58143,64.9426,37.74441,67.02409,39.68714],segments:[1,4]},{type:"arc",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(61,61,61)",arcTo:0,arcOval:!0,rotation:3.14159,rect:[68.95508,40.07324,28.49791,11.89121]},{type:"arc",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(61,61,61)",arcTo:0,arcOval:!0,rotation:3.14159,rect:[32.3979,40.07323,28.49791,11.89121]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",points:[60.89581,46.6003,56.70566,57.66949,39.6779,55.58118,39.6779,55.58118],segments:[1,4]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",scaleX:-1,points:[90.173,46.6003,85.98284,57.66949,68.95508,55.58118,68.95508,55.58118],segments:[1,4]},{type:"shape",background:"rgb(61,61,61)",borderColor:"#979797",points:[40.88134,45.66533,40.88134,50.44931,49.68823,51.31913,49.03586,45.66533,40.99007,45.5566]},{type:"shape",background:"rgb(61,61,61)",borderColor:"#979797",points:[78.31735,45.66533,78.31735,50.44931,87.12423,51.31913,86.47187,45.66533,78.42607,45.5566]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",points:[36.81151,80.08117,46.71402,84.60188,54.03326,76.42155,61.35251,85.46297,73.83828,76.20628,86.96987,83.95607,93.85858,76.85209,99.24038,80.08117]},{type:"shape",background:"rgb(237,237,237)",borderColor:"rgb(61,61,61)",borderCap:"round",points:[95.58345,31.98512,95.58345,31.98512,104.33563,25.53184,105.97087,18.7394,107.6061,11.94695,113.65647,33.63444,105.97087,42.39888],segments:[1,4,4]},{type:"shape",background:"rgb(237,237,237)",borderColor:"rgb(61,61,61)",borderCap:"round",rotation:.2618,points:[44.41276,23.77714,38.68944,23.77714,33.30496,20.23699,28.88983,14.5401,24.47469,8.84321,22.55729,35.68983,32.04166,40.72938],segments:[1,4,4]},{type:"oval",borderWidth:2,borderColor:"rgb(61,61,61)",rect:[21.53429,22.96531,88.8981,74.69064]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",points:[93.19422,30.5138,93.19422,30.5138,96.32695,28.82985,99.04364,25.51534,100.63358,23.57553,102.08422,21.24706,102.68792,18.7394,104.32316,11.94695,112.13179,31.92062,104.44618,40.68506],segments:[1,4,4,4]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",rotation:.2618,points:[40.62881,26.14647,34.90549,26.14647,32.31798,22.75803,27.90285,17.06114,23.48771,11.36426,18.41848,35.24736,27.90285,40.28692],segments:[1,4,4]},{type:"oval",background:"rgb(255,255,255)",borderColor:"#979797",anchorX:.41176,anchorY:.88889,rect:[91.52207,49.98659,1.67215,3.35736]},{type:"oval",background:"rgb(255,255,255)",borderColor:"#979797",anchorX:.41176,anchorY:.88889,
rect:[39.44815,49.46033,2.86639,3.35736]}]}),ht.Default.setImage("editor.block",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",background:"rgb(255,227,199)",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[15,14.5,1,14.5,1,1.50001,7,1.50001,8,3.50001,15,3.50001,15,14.5]},{type:"rect",background:"rgb(255,255,255)",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[5.5,7.22625,6,5]},{type:"circle",background:"rgb(255,255,255)",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[2.5,4.72625,6,5]}]}),ht.Default.setImage("editor.group",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",background:"rgb(255,227,199)",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[15.5,15.5,.5,15.5,.5,.5,6.92857,.5,8.00001,2.80769,15.5,2.80769,15.5,15.5]},{type:"shape",background:"rgb(255,255,255)",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[2.82964,11.54111,13.17036,11.54111,13.17036,13.12467,13.17036,5.20688,2.82964,5.20688,2.82964,13.12467,13.17036,13.12467,7.26137,13.12467,5.78413,15.5,10.21588,15.5,8.84426,13.12467,13.17036,13.12467,13.17036,11.54111]}]}),ht.Default.setImage("editor.subgraph",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",background:"rgb(255,227,199)",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[15.5,15.5,.5,15.5,.5,.5,6.92857,.5,8.00001,2.80769,15.5,2.80769,15.5,15.5]},{type:"shape",background:"rgb(255,255,255)",borderWidth:1,borderColor:"rgb(138,138,138)",closePath:!0,points:[4.90316,8.05737,4.90316,8.05737,4.30121,6.50546,5.25104,5.82166,6.20086,5.13787,7.09165,5.82166,7.09165,5.82166,7.09165,5.82166,7.76857,4.36921,9.6391,4.91013,11.50964,5.45106,11.09684,8.05737,11.09684,8.05737,11.09684,8.05737,12.482,8.53031,12.482,9.79106,12.482,10.86629,11.67411,11.63079,11.09684,11.63079,4.90316,11.63079,4.31315,11.63079,3.518,10.84732,3.518,9.79106,3.518,8.56402,4.90316,8.05737,4.90316,8.05737],segments:[1,4,4,4,4,4,4,2,4,4]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderJoin:"miter",points:[13,13.5,8.02409,13.5,8,9,8.02409,13.5,3,13.5]}]}),ht.Default.setImage("editor.restore",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"triangle",background:"rgb(138,138,138)",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:1.5708,rect:[7.5,1.71892,3,2]},{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",arcFrom:0,arcTo:4.7124,arcClose:!1,shadowColor:"#1ABC9C",rect:[2,2.78108,12,12]}]}),ht.Default.setImage("editor.add",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",rotation:3.14159,points:[9.47991,2.5,13.48953,7.4,9.47991,7.4,9.47991,2.5,2.48953,2.5,2.48953,13.5,13.48953,13.5,13.48953,7.4]}]}),ht.Default.setImage("editor.delete",{background:"rgb(89,89,89)",width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[5.5,5.57173,5.5,12.45709]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[8.05685,5.57173,8.05685,12.45709]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[10.5,5.57173,10.5,12.45709]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[1,3.18902,15,3.16996,5.32652,3.16021,6.32652,1.16021,9.32652,1.16021,10.32652,3.16021]},{type:"rect",borderWidth:1,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rect:[3.33333,3.18902,9.33334,11.65078]}]}),ht.Default.setImage("editor.import",{background:"rgb(179,179,179)",width:16,height:16,comps:[{type:"triangle",borderColor:"rgb(255,255,255)",borderWidth:1,rotation:1.5708,rect:[7.5,1.71892,3,2]},{type:"arc",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",arcFrom:0,arcTo:4.7124,arcClose:!1,rect:[2,2.78108,12,12]}]}),ht.Default.setImage("editor.top",{background:"rgb(145,145,145)",width:16,height:16,comps:[{type:"rightTriangle",borderWidth:1,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rotation:2.35619,rect:[3.86035,6.44002,8.20153,8.2581]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",rotation:3.14159,points:[2.14176,4.58061,13.85824,4.51881]}]}),ht.Default.setImage("editor.up",{background:"rgb(145,145,145)",width:16,height:16,comps:[{type:"rightTriangle",borderWidth:1,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rotation:2.35619,rect:[3.89924,6.05159,8.20153,8.2581]}]}),ht.Default.setImage("editor.down",{background:"rgb(145,145,145)",width:16,height:16,comps:[{type:"rightTriangle",borderWidth:1,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rotation:5.49779,rect:[3.89924,.69031,8.20153,8.2581]}]}),ht.Default.setImage("editor.bottom",{background:"rgb(145,145,145)",width:16,height:16,comps:[{type:"rightTriangle",borderWidth:1,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rotation:5.49779,rect:[3.93812,.69031,8.20153,8.2581]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",rotation:3.14159,points:[2.14176,10.85024,13.85824,10.78844]}]}),ht.Default.setImage("editor.menu",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[.93729,4,14.93729,4]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[1.06271,8,15.06271,8]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[1.06271,12,15.06271,12]}]}),ht.Default.setImage("editor.undo",{background:"rgb(191,191,191)",width:16,height:16,comps:[{type:"shape",background:"rgb(255,255,255)",shadowColor:"#1ABC9C",points:[9.9945,5.006,6.0345,5.006,6.0345,3.527,6.0345,3.336,5.9255,3.162,5.7545,3.078,5.5825,2.994,5.3785,3.015,5.2275,3.132,2.4795,5.264,2.3575,5.359,2.2865,5.505,2.2865,5.659,2.2865,5.813,2.3575,5.959,2.4795,6.054,5.2275,8.186,5.3175,8.256,5.4255,8.292,5.5345,8.292,5.6095,8.292,5.6845,8.275,5.7545,8.241,5.9255,8.157,6.0345,7.983,6.0345,7.792,6.0345,6.006,9.9945,6.006,11.5445,6.006,12.7135,7.296,12.7135,9.006,12.7135,10.689,11.4815,12.006,9.9085,12.006,5.0345,12.006,4.7585,12.006,4.5345,12.23,4.5345,12.506,4.5345,12.782,4.7585,13.006,5.0345,13.006,9.9085,13.006,12.0425,13.006,13.7135,11.249,13.7135,9.006,13.7135,6.763,12.0795,5.006,9.9945,5.006,9.9945,5.006],segments:[1,2,2,4,4,2,4,4,2,4,4,4,2,2,4,4,2,4,4,2,4,4,2]}]}),ht.Default.setImage("editor.redo",{background:"rgb(191,191,191)",width:16,height:16,comps:[{type:"shape",background:"rgb(255,255,255)",shadowColor:"#1ABC9C",scaleX:-1,points:[9.9945,5.006,6.0345,5.006,6.0345,3.527,6.0345,3.336,5.9255,3.162,5.7545,3.078,5.5825,2.994,5.3785,3.015,5.2275,3.132,2.4795,5.264,2.3575,5.359,2.2865,5.505,2.2865,5.659,2.2865,5.813,2.3575,5.959,2.4795,6.054,5.2275,8.186,5.3175,8.256,5.4255,8.292,5.5345,8.292,5.6095,8.292,5.6845,8.275,5.7545,8.241,5.9255,8.157,6.0345,7.983,6.0345,7.792,6.0345,6.006,9.9945,6.006,11.5445,6.006,12.7135,7.296,12.7135,9.006,12.7135,10.689,11.4815,12.006,9.9085,12.006,5.0345,12.006,4.7585,12.006,4.5345,12.23,4.5345,12.506,4.5345,12.782,4.7585,13.006,5.0345,13.006,9.9085,13.006,12.0425,13.006,13.7135,11.249,13.7135,9.006,13.7135,6.763,12.0795,5.006,9.9945,5.006,9.9945,5.006],segments:[1,2,2,4,4,2,4,4,2,4,4,4,2,2,4,4,2,4,4,2,4,4,2]}]}),ht.Default.setImage("editor.edit",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(51,153,255)",shadowColor:"#1ABC9C",rotation:5.49779,closePath:!0,points:[6,-.83884,.5,13.16116,6.04966,10.58206,11.5,13.16116,6,-.83884]}]}),ht.Default.setImage("editor.rulers",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:1.5708,points:[1.50517,1.5,1.5,4.49799,2.47337,4.49798,1.5,4.49799,1.50003,14.5,11.23413,14.48019,11.23413,13.48171,11.23413,14.47896,14.5,14.47897,4.00002,14.47899,4.00001,12.00001,1.50521,12.00002]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[14,6,14,14,6,14]}]}),ht.Default.setImage("editor.grid",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[4.49468,1.49999,4.5,14.49999,4.49468,11.53541,1.5,11.51432,14.5,11.51432,11.52105,11.53541,11.52105,14.49999,11.52105,1.49999,11.5,4.50429,14.5,4.50429,1.5,4.50429]}]}),ht.Default.setImage("editor.save",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",points:[3.66183,14.5,14.5,14.5,14.5,4.83454,10.71984,1.5,3.66183,1.5,3.66183,6.18654,10.71984,6.18654,10.71984,1.5,1.5,1.5,1.5,14.5,3.66183,14.5,3.66183,9.03168,12.17213,9.03168,12.17213,14.5]}]}),ht.Default.setImage("editor.preview",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",points:[1.9869,6.489,2,2,14,8,1.9869,14,2,9.555]}]}),ht.Default.setImage("editor.reload",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"triangle",background:"rgb(138,138,138)",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:1.5708,rect:[7.5,1.71892,3,2]},{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",arcFrom:0,arcTo:4.7124,arcClose:!1,shadowColor:"#1ABC9C",rect:[2,2.78108,12,12]}]}),ht.Default.setImage("editor.zoomout",{width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"white",points:[2,8,14,8]}]}),ht.Default.setImage("editor.zoomin",{width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"white",points:[2,8,14,8,8,2,8,14],segments:[1,2,1,2]}]}),ht.Default.setImage("editor.zoomtofit",{background:"rgb(179,179,179)",gridLightColor:"rgba(0,0,0,0.20)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[8.00001,11.91764,8.00001,15]},{type:"triangle",background:"rgb(138,138,138)",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:-1.5708,rect:[9.75,7.24608,2,1.5]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:-1.5708,points:[13.516,6.484,13.516,9.51599]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:-3.14159,points:[8.00001,.99999,8.00001,4.08236]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:1.5708,points:[2.516,6.4801,2.516,9.51209]},{type:"triangle",background:"rgb(138,138,138)",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:1.5708,rect:[4.25,7.24608,2,1.5]},{type:"triangle",background:"rgb(138,138,138)",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:3.14159,rect:[7.00001,4.5,2,1.5]},{type:"triangle",background:"rgb(138,138,138)",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:6.28319,rect:[7,10,2,1.5]}]}),ht.Default.setImage("editor.toggleleft",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:1.5708,rect:[2.50002,1.00002,10.99995,13.99996]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[3.49001,5.50001,3.51001,10.49999]}]}),ht.Default.setImage("editor.toggleboth",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:1.5708,rect:[2.5,1,11,14]}]}),ht.Default.setImage("editor.toggleright",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:1.5708,rect:[2.50002,1.00002,10.99995,13.99996]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[12.49999,5.50001,12.51999,10.49999]}]}),ht.Default.setImage("editor.layout.helper",ht.Default.parse(JSON.stringify({modified:"Mon Oct 29 2018 09:55:40 GMT+0800 (\u4e2d\u56fd\u6807\u51c6\u65f6\u95f4)",dataBindings:[{attr:"selectColor",valueType:"Color",defaultValue:"#60ACFC"},{attr:"layout.h",valueType:"String"},{attr:"layout.v",valueType:"String"}],width:100,height:100,interactive:!0,disableSelectedBorder:!0,pixelPerfect:!1,comps:[{type:"rect",borderColor:"#979797",displayName:"\u5de6\u4fa7\u4ea4\u4e92",rect:[5.51795,27.5,20.9641,44.5],onDown:"__ht__function(event, data, view, point, width, height) {\nif (ht.Default.isShiftDown()) {\n    data.a('layout.h', 'leftright');\n}\nelse {\n    data.a('layout.h', 'left');\n}\n}"},{type:"rect",borderColor:"#979797",displayName:"\u53f3\u4fa7\u4ea4\u4e92",rect:[74.0359,27.5,20.9641,45],onDown:"__ht__function(event, data, view, point, width, height) {\nif (ht.Default.isShiftDown()) {\n    data.a('layout.h', 'leftright');\n}\nelse {\n    data.a('layout.h', 'right');\n}\n}"},{type:"rect",borderColor:"#979797",displayName:"\u4e0a\u4fa7\u4ea4\u4e92",rect:[27.5,6,45,20],onDown:"__ht__function(event, data, view, point, width, height) {\nif (ht.Default.isShiftDown()) {\n    data.a('layout.v', 'topbottom');\n}\nelse {\n    data.a('layout.v', 'top');\n}\n}"},{type:"rect",borderColor:"#979797",displayName:"\u4e0b\u4fa7\u4ea4\u4e92",rect:[27.5,74,45,20],onDown:"__ht__function(event, data, view, point, width, height) {\nif (ht.Default.isShiftDown()) {\n    data.a('layout.v', 'topbottom');\n}\nelse {\n    data.a('layout.v', 'bottom');\n}\n}"},{type:"rect",borderColor:"#979797",displayName:"\u6a2a\u5411\u4e2d\u5fc3\u4ea4\u4e92",rect:[28.22051,44,16,12],onDown:"__ht__function(event, data, view, point, width, height) {\ndata.a('layout.h', 'center');\n}"},{type:"rect",borderColor:"#979797",displayName:"\u6a2a\u5411\u4e2d\u5fc3\u4ea4\u4e92",rect:[55.77949,44,16,12],onDown:"__ht__function(event, data, view, point, width, height) {\ndata.a('layout.h', 'center');\n}"},{type:"rect",borderColor:"#979797",displayName:"\u7eb5\u5411\u4e2d\u5fc3\u4ea4\u4e92",rect:[44.22051,28,11.55897,16],onDown:"__ht__function(event, data, view, point, width, height) {\ndata.a('layout.v', 'center');\n}"},{type:"rect",borderColor:"#979797",displayName:"\u7eb5\u5411\u4e2d\u5fc3\u4ea4\u4e92",rect:[44.22051,56,11.55897,16],onDown:"__ht__function(event, data, view, point, width, height) {\ndata.a('layout.v', 'center');\n}"},{type:"rect",borderWidth:1,borderColor:"#d4d4d4",rect:[5,5,90,90]},{type:"rect",borderWidth:1,borderColor:"#d4d4d4",borderPattern:[6,6],rect:[27.5,27.5,45,45]},{type:"rect",background:{func:"__ht__function(data, view) {\nvar layoutH = data.a('layout.h');\nif (layoutH === 'left' || layoutH === 'leftright') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D4D4D4"},borderColor:"#979797",rect:[8,48,16,4]},{type:"rect",background:{func:"__ht__function(data, view) {\nvar layoutH = data.a('layout.h');\nif (layoutH === 'right' || layoutH === 'leftright') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D8D8D8"},borderColor:"#979797",rect:[76,48,16,4]},{type:"rect",background:{func:"__ht__function(data, view) {\nvar layoutH = data.a('layout.h');\nif (layoutH === 'center') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D8D8D8"},borderColor:"#979797",rect:[34,48,32,4],onDown:"__ht__function(event, data, view, point, width, height) {\ndata.a('layout.h', 'center');\n}"},{type:"rect",background:{func:"__ht__function(data, view) {\nvar layoutV = data.a('layout.v');\nif (layoutV === 'bottom' || layoutV === 'topbottom') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D8D8D8"},borderColor:"#979797",rect:[48,76,4,16]},{type:"rect",background:{func:"__ht__function(data, view) {\nvar layoutV = data.a('layout.v');\nif (layoutV === 'top' || layoutV === 'topbottom') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D8D8D8"},borderColor:"#979797",rect:[48,8,4,16]},{type:"rect",background:{func:"__ht__function(data, view) {\nvar layoutV = data.a('layout.v');\nif (layoutV === 'center') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D8D8D8"},borderColor:"#979797",rect:[48,34,4,32],onDown:"__ht__function(event, data, view, point, width, height) {\ndata.a('layout.v', 'center');\n}"},{type:"rect",background:{func:"__ht__function(data, view) {\nif (data.a('layout.h') === 'center' || data.a('layout.v')  === 'center') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D8D8D8"},borderColor:"#979797",rect:[48,48,4,4]}]}))),ht.Default.setImage("editor.attachPoint",{width:10,height:10,boundExtend:1,comps:[{type:"shape",borderWidth:1,background:{func:"attr@selectColor",value:"rgb(51,153,255)"},borderColor:{func:"attr@selectColor",value:"rgb(51,153,255)"},closePath:!0,points:[5,0,0,5,5,10,10,5]}]}),ht.Default.setImage("editor.display.rect",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[2.5,1.5,11,13]}]}),ht.Default.setImage("editor.display.oval",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"circle",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[1,1,14,14]}]}),ht.Default.setImage("editor.display.roundrect",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"roundRect",borderWidth:1,borderColor:"rgb(138,138,138)",cornerRadius:2.5,shadowColor:"#1ABC9C",rect:[2.5,1,11,14]}]}),ht.Default.setImage("editor.display.triangle",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",rotation:4.71239,points:[1.00872,1,14.99345,8,.99345,15,1.00872,1]}]}),ht.Default.setImage("editor.display.polygon",{width:16,height:16,comps:[{type:"polygon",rect:[1,1,14,14],borderColor:"white",borderWidth:1}]}),ht.Default.setImage("editor.display.star",{width:16,height:16,comps:[{type:"star",rect:[1,1,14,14],borderColor:"white",borderWidth:1}]}),ht.Default.setImage("editor.display.arc",{width:16,height:16,comps:[{type:"arc",rect:[1,1,14,14],arcFrom:0,arcTo:4.1888,borderColor:"white",borderWidth:1}]}),ht.Default.setImage("editor.display.shape",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:-2.35619,rect:[6.45666,.50222,10,8]},{type:"oval",background:"rgb(138,138,138)",borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:-2.35619,rect:[4.92983,8.48004,2.48323,2.47136]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:-2.35619,points:[.71918,15.84031,-.26373,13.78,4.61411,6.85806,4.66212,13.2497,4.61411,6.85806,9.56535,13.77996,8.58245,15.84028]}]}),ht.Default.setImage("editor.display.node",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[1.5,9.38462,14.5,9.38462,14.5,11.23077,14.5,2,1.5,2,1.5,11.23077,14.5,11.23077,7.07143,11.23077,5,15,11,15,8.92857,11.23077]}]}),ht.Default.setImage("editor.display.group",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[13,12.5,13,10.54,3,10.54,13,10.54,13,5.5,3,5.5,3,12.5,13,12.5,7,12.5,5.85714,15.5,10.14287,15.5,9,12.5]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[15.5,15.5,.5,15.5,.5,.5,6.92857,.5,8,2.19286,15.5,2.19286,15.5,15.5]}]}),ht.Default.setImage("editor.display.edge",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"circle",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[.69044,.97071,4,4.00837]},{type:"circle",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[11.27696,10.99163,4,4.00837]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",points:[4.35933,3.02819,7.84441,2.9749,7.84441,12.99581,11.64067,12.99581]}]}),ht.Default.setImage("editor.display.text",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[1,15,8.06501,1,15,15,12.38059,9.8,4.10171,9.8]}]}),ht.Default.setImage("editor.display.subgraph",{gridThickColor:"rgb(191,191,191)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(207,207,207)",visible:!1,closePath:!0,points:[2.81788,9.09381,2.81788,9.09381,1.38027,6.92868,3.20223,5.43826,5.02418,3.94784,6.51488,5.43826,6.51488,5.43826,6.51488,5.43826,7.61273,3.06338,10.74281,3.94784,13.87289,4.8323,13.18212,9.09381,13.18212,9.09381,13.18212,9.09381,15.5,9.8671,15.5,11.92851,15.5,13.6866,14.14811,14.93662,13.18212,14.93662,2.81788,14.93662,1.83057,14.93662,.5,13.65558,.5,11.92851,.5,9.92221,2.81788,9.09381,2.81788,9.09381],segments:[1,4,4,4,4,4,4,2,4,4]},{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[4.99379,5.52777,6,4.47223]},{type:"circle",background:"rgb(138,138,138)",borderColor:"rgb(138,138,138)",visible:!1,shadowColor:"#1ABC9C",rect:[4,6.43826,2,2]},{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",arcFrom:3.15905,arcTo:5.5676,arcClose:!1,visible:!1,shadowColor:"#1ABC9C",rect:[2.5,3.11794,5,5]},{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",arcFrom:3.57792,arcTo:6.6497,arcClose:!1,visible:!1,shadowColor:"#1ABC9C",rect:[5.63862,1.53868,9.36138,7.15852]},{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",arcFrom:1.5708,arcTo:3.87463,arcClose:!1,visible:!1,shadowColor:"#1ABC9C",rect:[-1,6.56338,8.99379,5.93662]},{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",arcFrom:5.00909,arcTo:1.5708,arcClose:!1,visible:!1,shadowColor:"#1ABC9C",rect:[8.00621,6.56338,8.99379,5.93662]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",visible:!1,points:[3.4969,12.5,12.5031,12.5]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",points:[9.72,12.5,8,10,6.34,12.5]},{type:"circle",background:"rgb(138,138,138)",borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",displayName:"\u5706\u5f62",rect:[0,0,2,2]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderJoin:"miter",points:[15,15.5,8.02409,15.5,8.02409,14,8.02409,15.5,1,15.5]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",closePath:!0,points:[2.81167,6.59481,2.81167,6.59481,1.80439,4.03022,3.39379,2.90023,4.98319,1.77025,6.47379,2.90023,6.47379,2.90023,6.47379,2.90023,7.60652,.5,10.7366,1.3939,13.86668,2.28781,13.17591,6.59481,13.17591,6.59481,13.17591,6.59481,15.49379,7.37636,15.49379,9.45978,15.49379,11.23663,14.1419,12.5,13.17591,12.5,2.81167,12.5,1.82436,12.5,.49379,11.20528,.49379,9.45978,.49379,7.43206,2.81167,6.59481,2.81167,6.59481],segments:[1,4,4,4,4,4,4,2,4,4]}]}),ht.Default.setImage("editor.symbol.rect",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[2.5,1.5,11,13]}]}),ht.Default.setImage("editor.symbol.oval",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"circle",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[1,1,14,14]}]}),ht.Default.setImage("editor.symbol.roundrect",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"roundRect",borderWidth:1,borderColor:"rgb(138,138,138)",cornerRadius:2.5,shadowColor:"#1ABC9C",rect:[2.5,1,11,14]}]}),ht.Default.setImage("editor.symbol.triangle",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",rotation:4.71239,points:[1.00872,1,14.99345,8,.99345,15,1.00872,1]}]}),ht.Default.setImage("editor.symbol.polygon",{width:16,height:16,comps:[{type:"polygon",rect:[1,1,14,14],borderColor:"white",borderWidth:1}]}),ht.Default.setImage("editor.symbol.star",{width:16,height:16,comps:[{type:"star",rect:[1,1,14,14],borderColor:"white",borderWidth:1}]}),ht.Default.setImage("editor.symbol.arc",{width:16,height:16,comps:[{type:"arc",rect:[1,1,14,14],arcFrom:0,arcTo:4.1888,borderColor:"white",borderWidth:1}]}),ht.Default.setImage("editor.symbol.image",{background:"rgb(156,156,156)",width:16,height:16,comps:[{type:"rect",borderWidth:1,borderColor:"rgb(255,255,255)",rect:[.5,1.96,15,12]},{type:"circle",background:"rgb(255,255,255)",borderColor:"rgb(255,255,255)",rect:[3.32103,4.48721,1.5,1.5]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",points:[2.18757,9.112,6.11684,9.112,7.77072,10.39241,9.50807,13.68975,9.69338,14.04145,9.04982,12.34611,7.45717,10.69236,7.45717,10.69236,8.72728,5.98721,14.05092,5.98721],segments:[1,4,4,4]}]}),ht.Default.setImage("editor.symbol.shape",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:-2.35619,rect:[6.45666,.50222,10,8]},{type:"oval",background:"rgb(138,138,138)",borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:-2.35619,rect:[4.92983,8.48004,2.48323,2.47136]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:-2.35619,points:[.71918,15.84031,-.26373,13.78,4.61411,6.85806,4.66212,13.2497,4.61411,6.85806,9.56535,13.77996,8.58245,15.84028]}]}),ht.Default.setImage("editor.symbol.border",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",points:[.5,6.01503,.5,2,15.48868,2,15.5,14,.5,14,.5,10]}]}),ht.Default.setImage("editor.symbol.text",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[1,15,8.06501,1,15,15,12.38059,9.8,4.10171,9.8]}]}),ht.Default.setImage("editor.symbol.piechart",{background:"rgb(97,97,97)",width:16,height:16,comps:[{type:"arc",borderWidth:1,borderColor:"rgb(255,255,255)",arcFrom:.5236,arcTo:4.71239,rect:[.53628,2.06928,13.08634,13.08634]},{type:"arc",borderWidth:1,borderColor:"rgb(255,255,255)",arcFrom:4.71239,arcTo:.5236,rect:[2.37737,1,13.08634,13.08634]}]}),ht.Default.setImage("editor.symbol.onedimensionalcolumnchart",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[3.42625,5.95042,3,9.04958]},{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[10.00543,1,3,14]}]}),ht.Default.setImage("editor.symbol.columnchart",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[1,9,3,6]},{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[4,5.95042,3,9.04958]},{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[9,1,3,14]},{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[12,10.93747,3,4.06253]}]}),ht.Default.setImage("editor.symbol.linechart",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",points:[1,14,5,7,11,8,15,2]}]}),ht.Default.setImage("editor.point.mirrored",{width:30,height:30,fitSize:!1,comps:[{type:"arc",background:"rgb(202,235,248)",borderWidth:2,borderColor:"rgb(17,158,216)",arcClose:!1,rect:[3.5,10.30081203536023,23,25.3726296254234]},{type:"oval",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(51,51,51)",rect:[12,7.300812035360231,6,6]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[17.842265898626422,9.310233818119592,9.826713258365732,2]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[24.713262902082427,8.310233818119592,3,4]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[2.4018068742542837,9.30081203536023,9.826713258365732,2]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[2.286737097917573,8.310233818119592,3,4]}]}),ht.Default.setImage("editor.point.straight",{width:30,height:30,fitSize:!1,comps:[{type:"shape",background:"rgb(200,234,247)",borderWidth:2,borderColor:"rgb(17,160,217)",points:[26.974999999999998,23.185840967335317,15.133692185007973,10.275109094255685,3.0250000000000004,23.185840967335317]},{type:"oval",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(51,51,51)",rect:[12,7.561327956066684,6,6]}]}),ht.Default.setImage("editor.point.disconnected",{width:30,height:30,fitSize:!1,comps:[{type:"shape",background:"rgb(200,234,247)",borderWidth:2,borderColor:"rgb(17,160,217)",points:[3.1940148593724587,22.95774078992803,3.1940148593724587,18.139874123261343,7.6015038461565965,10.497740789928038,14.542032480517832,10.497740789928038,26.80598514062754,22.95774078992803],segments:[1,4,2]},{type:"oval",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(51,51,51)",rect:[12.093814401372779,7.5391087731804305,6,6]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rotation:.7853981633974483,rect:[16.36973009802768,14.555043156001322,9.826713258365732,2]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rotation:.7853981633974483,rect:[22.831111406474626,16.51363217953681,3,4]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[2.2671011430070465,9.53910877318043,9.826713258365732,2]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[2.152031366670336,8.548530555939791,3,4]}]}),ht.Default.setImage("editor.point.asymmetric",{width:30,height:30,fitSize:!1,comps:[{type:"shape",background:"rgb(200,234,247)",borderWidth:2,borderColor:"rgb(17,160,217)",points:[3.5000000000000027,22.974997694265234,3.5000000000000027,17.50768540873153,5.131816608669447,11.637417102180905,12.400695544362113,11.637417102180905,22.516641067164265,11.637417102180905,26.5,22.974997694265234,26.5,22.974997694265234],segments:[1,4,4]},{type:"oval",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(51,51,51)",rect:[9.324670579660944,7.637417102180905,6,6]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[3.405482351035767,9.637417102180905,6.540642002660807,2]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[2.7221578598514142,8.637417102180905,3,4]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[15.278596259040164,9.637417102180905,11.965262549245955,2]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[24.731262324024406,8.637417102180905,3,4]}]}),ht.Default.setImage("editor.layout.circular",{width:16,height:16,comps:[{type:"shape",background:"white",points:[7,2,7,4,9,4,9,2,2,7,2,9,4,9,4,7,12,7,12,9,14,9,14,7,4,12,4,14,6,14,6,12,10,12,10,14,12,14,12,12],
segments:[1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2]},{type:"shape",borderColor:"white",borderWidth:1,points:[8,3,3,8,5,13,11,13,13,8],segments:[1,2,2,2,2,5]}]}),ht.Default.setImage("editor.layout.symmetric",{width:16,height:16,comps:[{type:"shape",background:"white",points:[7,2,7,4,9,4,9,2,2,7,2,9,4,9,4,7,12,7,12,9,14,9,14,7,4,12,4,14,6,14,6,12,10,12,10,14,12,14,12,12],segments:[1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2]},{type:"shape",borderWidth:1,borderColor:"white",points:[8,8,8,3,8,8,3,8,8,8,5,13,8,8,11,13,8,8,13,8],segments:[1,2,1,2,1,2,1,2,1,2]}]}),ht.Default.setImage("editor.layout.hierarchical",{width:16,height:16,comps:[{type:"shape",background:"white",points:[4,3,4,5,6,5,6,3,10,3,10,5,12,5,12,3,1,11,1,13,3,13,3,11,7,11,7,13,9,13,9,11,13,11,13,13,15,13,15,11],segments:[1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2]},{type:"shape",borderColor:"white",borderWidth:1,points:[5,4,2,12,5,4,8,12,5,4,14,12,11,4,2,12,11,4,8,12,11,4,14,12],segments:[1,2,1,2,1,2,1,2,1,2,1,2]}]}),ht.Default.setImage("editor.layout.towardnorth",{width:16,height:16,comps:[{type:"shape",background:"white",points:[7,3,7,5,9,5,9,3,1,11,1,13,3,13,3,11,7,11,7,13,9,13,9,11,13,11,13,13,15,13,15,11],segments:[1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2]},{type:"shape",borderColor:"white",borderWidth:1,points:[8,4,2,12,8,4,8,12,8,4,14,12],segments:[1,2,1,2,1,2]}]}),ht.Default.setImage("editor.layout.towardsouth",{width:16,height:16,comps:[{type:"image",name:"editor.layout.towardnorth",rotation:Math.PI,rect:[0,0,16,16]}]}),ht.Default.setImage("editor.layout.towardeast",{width:16,height:16,comps:[{type:"image",name:"editor.layout.towardnorth",rotation:.5*-Math.PI,rect:[0,0,16,16]}]}),ht.Default.setImage("editor.layout.towardwest",{width:16,height:16,comps:[{type:"image",name:"editor.layout.towardnorth",rotation:.5*Math.PI,rect:[0,0,16,16]}]}),ht.Default.setImage("editor.align.distributehorizontal",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[2,2,2,14,14,2,14,14],segments:[1,2,1,2],borderWidth:1,borderCap:"round",borderColor:{func:function(){return lj.config.color_dark}}},{type:"shape",points:[8,5,8,11],borderWidth:3,borderCap:"round",borderColor:{func:function(){return lj.config.color_select}}}]}),ht.Default.setImage("editor.align.distributevertical",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[2,2,14,2,2,14,14,14],segments:[1,2,1,2],borderWidth:1,borderCap:"round",borderColor:{func:function(){return lj.config.color_dark}}},{type:"shape",points:[5,8,11,8],borderWidth:3,borderCap:"round",borderColor:{func:function(){return lj.config.color_select}}}]}),ht.Default.setImage("editor.align.alignleft",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[2,2,2,14],segments:[1,2],borderWidth:1,borderCap:"round",borderColor:{func:function(){return lj.config.color_dark}}},{type:"shape",points:[5,5,13,5,5,11,8,11],segments:[1,2,1,2],borderWidth:3,borderCap:"round",borderColor:{func:function(){return lj.config.color_select}}}]}),ht.Default.setImage("editor.align.alignhorizontal",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[8,2,8,14],segments:[1,2],borderWidth:1,borderCap:"round",borderColor:{func:function(){return lj.config.color_dark}}},{type:"shape",points:[3,5,13,5,6,11,10,11],segments:[1,2,1,2],borderWidth:3,borderCap:"round",borderColor:{func:function(){return lj.config.color_select}}}]}),ht.Default.setImage("editor.align.alignright",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[14,2,14,14],segments:[1,2],borderWidth:1,borderCap:"round",borderColor:{func:function(){return lj.config.color_dark}}},{type:"shape",points:[3,5,11,5,11,11,8,11],segments:[1,2,1,2],borderWidth:3,borderCap:"round",borderColor:{func:function(){return lj.config.color_select}}}]}),ht.Default.setImage("editor.align.aligntop",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[2,2,14,2],segments:[1,2],borderWidth:1,borderCap:"round",borderColor:{func:function(){return lj.config.color_dark}}},{type:"shape",points:[5,5,5,13,11,5,11,8],segments:[1,2,1,2],borderWidth:3,borderCap:"round",borderColor:{func:function(){return lj.config.color_select}}}]}),ht.Default.setImage("editor.align.alignvertical",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[2,8,14,8],segments:[1,2],borderWidth:1,borderCap:"round",borderColor:{func:function(){return lj.config.color_dark}}},{type:"shape",points:[5,3,5,13,11,6,11,10],segments:[1,2,1,2],borderWidth:3,borderCap:"round",borderColor:{func:function(){return lj.config.color_select}}}]}),ht.Default.setImage("editor.align.alignbottom",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[2,14,14,14],segments:[1,2],borderWidth:1,borderCap:"round",borderColor:{func:function(){return lj.config.color_dark}}},{type:"shape",points:[5,3,5,11,11,11,11,8],segments:[1,2,1,2],borderWidth:3,borderCap:"round",borderColor:{func:function(){return lj.config.color_select}}}]});var JC=function(){return!0};Pt("editor.layout.circular"),Pt("editor.layout.symmetric"),Pt("editor.layout.hierarchical"),Pt("editor.layout.towardnorth"),Pt("editor.layout.towardsouth"),Pt("editor.layout.towardeast"),Pt("editor.layout.towardwest"),Pt("editor.root"),Pt("editor.bind",JC),Pt("editor.unbind"),Pt("editor.dir"),Pt("editor.dxf"),Pt("editor.obj"),Pt("editor.mtl"),Pt("editor.ttf"),Pt("editor.otf"),Pt("editor.sound"),Pt("editor.video"),Pt("editor.resetsize"),Pt("editor.restore"),Pt("editor.js"),ht.Data.prototype.$50$=fj,ht.Data.prototype.$51$=function(t){return this._refGraph?[]:[Bj.call(this,t),cj]},ht.Node.prototype.$50$=$j,ht.Node.prototype.$51$=function(t){return this._refGraph?[]:[Rj.call(this,t),dj]},ht.Edge.prototype.$50$=bj,ht.Edge.prototype.$51$=function(t){return this._refGraph?[]:[mj.call(this,t),Dj]},ht.Group.prototype.$51$=function(t){return this._refGraph?[]:[Jj.call(this,t),vj]},ht.Shape.prototype.$51$=function(t){return this._refGraph?[]:[Hj.call(this,t),Gj]},ht.Block.prototype.$51$=function(t){return this._refGraph?[]:[Zj.call(this,t),qj]},ht.RefGraph.prototype.$51$=function(t){return this._refGraph?[]:[Aj.call(this,t),zj]};var vC=function(t){function j(C,k,i){Ij(this,j);var U=hj(this,t.call(this));return U.parse(C,k,i),U}return gj(j,t),j.prototype.getClass=function(){return j},j.prototype.toLabel=function(){return this.getDisplayName()||i("editor.comptype."+this.s("shape").toLowerCase())},j.prototype.parse=function(t,j,C){t&&(st(this,"shape",t.type,"rect"),st(this,"shape.background",t.background,null),st(this,"shape.repeat.image",t.repeatImage),st(this,"shape.border.width",t.borderWidth),st(this,"shape.border.color",t.borderColor,null),st(this,"shape.border.3d",t.border3d),st(this,"shape.border.3d.color",t.border3dColor),st(this,"shape.border.3d.accuracy",t.border3dAccuracy),st(this,"shape.border.cap",t.borderCap),st(this,"shape.border.join",t.borderJoin),st(this,"shape.border.pattern",t.borderPattern),st(this,"shape.gradient",t.gradient),st(this,"shape.gradient.color",t.gradientColor),st(this,"shape.dash",t.dash),st(this,"shape.dash.pattern",t.dashPattern),st(this,"shape.dash.offset",t.dashOffset),st(this,"shape.dash.color",t.dashColor),st(this,"shape.dash.width",t.dashWidth),st(this,"shape.dash.3d",t.dash3d),st(this,"shape.dash.3d.color",t.dash3dColor),st(this,"shape.dash.3d.accuracy",t.dash3dAccuracy),st(this,"shape.border.width.absolute",t.borderWidthAbsolute),st(this,"shape.fill.clip.direction",t.fillClipDiretion),st(this,"shape.fill.clip.percentage",t.fillClipPercentage),"rect"===this.compType?st(this,"shape.depth",t.depth):"roundRect"===this.compType?st(this,"shape.corner.radius",t.cornerRadius):"polygon"===this.compType?st(this,"shape.polygon.side",t.polygonSide):"arc"===this.compType&&(st(this,"shape.arc.from",t.arcFrom),st(this,"shape.arc.to",t.arcTo),st(this,"shape.arc.close",t.arcClose),st(this,"shape.arc.oval",t.arcOval)),Tt(this,t,j,C))},j.prototype.toJSON=function(){var t={};return Zt(this,t,"shape","type",void 0),Zt(this,t,"shape.background","background",null),Zt(this,t,"shape.repeat.image","repeatImage"),Zt(this,t,"shape.border.width","borderWidth"),Zt(this,t,"shape.border.color","borderColor",null),Zt(this,t,"shape.border.3d","border3d"),Zt(this,t,"shape.border.3d.color","border3dColor"),Zt(this,t,"shape.border.3d.accuracy","border3dAccuracy"),Zt(this,t,"shape.border.cap","borderCap"),Zt(this,t,"shape.border.join","borderJoin"),Zt(this,t,"shape.border.pattern","borderPattern"),Zt(this,t,"shape.gradient","gradient"),Zt(this,t,"shape.gradient.color","gradientColor"),Zt(this,t,"shape.dash","dash"),Zt(this,t,"shape.dash.pattern","dashPattern"),Zt(this,t,"shape.dash.offset","dashOffset"),Zt(this,t,"shape.dash.color","dashColor"),Zt(this,t,"shape.dash.width","dashWidth"),Zt(this,t,"shape.dash.3d","dash3d"),Zt(this,t,"shape.dash.3d.color","dash3dColor"),Zt(this,t,"shape.dash.3d.accuracy","dash3dAccuracy"),Zt(this,t,"shape.border.width.absolute","borderWidthAbsolute"),Zt(this,t,"shape.fill.clip.direction","fillClipDirection"),Zt(this,t,"shape.fill.clip.percentage","fillClipPercentage"),"rect"===this.compType?Zt(this,t,"shape.depth","depth"):"roundRect"===this.compType?Zt(this,t,"shape.corner.radius","cornerRadius"):"polygon"===this.compType?Zt(this,t,"shape.polygon.side","polygonSide"):"arc"===this.compType&&(Zt(this,t,"shape.arc.from","arcFrom"),Zt(this,t,"shape.arc.to","arcTo"),Zt(this,t,"shape.arc.close","arcClose"),Zt(this,t,"shape.arc.oval","arcOval")),Et(this,t),t},_j(j,[{key:"compType",get:function(){return this.s("shape")}}]),j}(ht.Node),HC=function(t){function j(C,k,i){Ij(this,j);var U=hj(this,t.call(this));return U.parse(C,k,i),U}return gj(j,t),j.prototype.getClass=function(){return j},j.prototype.toLabel=function(){return this.getDisplayName()||i("editor.comptype.shape")},j.prototype.parse=function(t,j,C){t&&(st(this,"type",t.type,"shape"),st(this,"shape.background",t.background,null),st(this,"shape.repeat.image",t.repeatImage),st(this,"shape.border.width",t.borderWidth),st(this,"shape.border.color",t.borderColor,null),st(this,"shape.border.3d",t.border3d),st(this,"shape.border.3d.color",t.border3dColor),st(this,"shape.border.3d.accuracy",t.border3dAccuracy),st(this,"shape.border.cap",t.borderCap),st(this,"shape.border.join",t.borderJoin),st(this,"shape.border.pattern",t.borderPattern),st(this,"shape.gradient",t.gradient),st(this,"shape.gradient.color",t.gradientColor),st(this,"shape.dash",t.dash),st(this,"shape.dash.pattern",t.dashPattern),st(this,"shape.dash.offset",t.dashOffset),st(this,"shape.dash.color",t.dashColor),st(this,"shape.dash.width",t.dashWidth),st(this,"shape.dash.3d",t.dash3d),st(this,"shape.dash.3d.color",t.dash3dColor),st(this,"shape.dash.3d.accuracy",t.dash3dAccuracy),st(this,"shape.fill.rule",t.fillRule),st(this,"shape.fill.clip.direction",t.fillClipDiretion),st(this,"shape.fill.clip.percentage",t.fillClipPercentage),st(this,"shape.gradient.pack",t.gradientPack),st(this,"shape.border.width.absolute",t.borderWidthAbsolute),Tt(this,t,j,C),wt(this,t),this.setPoints(Mt(Yt(t.points))),this.setSegments(Yt(t.segments)))},j.prototype.toJSON=function(){var t={};if(Zt(this,t,"type","type",void 0),Zt(this,t,"shape.background","background",null),Zt(this,t,"shape.repeat.image","repeatImage"),Zt(this,t,"shape.border.width","borderWidth"),Zt(this,t,"shape.border.color","borderColor",null),Zt(this,t,"shape.border.3d","border3d"),Zt(this,t,"shape.border.3d.color","border3dColor"),Zt(this,t,"shape.border.3d.accuracy","border3dAccuracy"),Zt(this,t,"shape.border.cap","borderCap"),Zt(this,t,"shape.border.join","borderJoin"),Zt(this,t,"shape.border.pattern","borderPattern"),Zt(this,t,"shape.gradient","gradient"),Zt(this,t,"shape.gradient.color","gradientColor"),Zt(this,t,"shape.dash","dash"),Zt(this,t,"shape.dash.pattern","dashPattern"),Zt(this,t,"shape.dash.offset","dashOffset"),Zt(this,t,"shape.dash.color","dashColor"),Zt(this,t,"shape.dash.width","dashWidth"),Zt(this,t,"shape.dash.3d","dash3d"),Zt(this,t,"shape.dash.3d.color","dash3dColor"),Zt(this,t,"shape.dash.3d.accuracy","dash3dAccuracy"),Zt(this,t,"shape.fill.rule","fillRule"),Zt(this,t,"shape.fill.clip.direction","fillClipDirection"),Zt(this,t,"shape.fill.clip.percentage","fillClipPercentage"),Zt(this,t,"shape.gradient.pack","gradientPack"),Zt(this,t,"shape.border.width.absolute","borderWidthAbsolute"),Et(this,t),Gt(this,t),zt(t,"points",this.a("points"),Qt(this.getPoints())),this.getSegments()){var j=this.getSegments().toArray();if(j.length){var C=1===j[0];if(C)for(var k=1;k<j.length;k++)if(2!==j[k]){C=!1;break}C||zt(t,"segments",this.a("segments"),j)}}return t},_j(j,[{key:"compType",get:function(){return this.s("type")}}]),j}(ht.Shape),GC=function(t){function j(C,k,i){Ij(this,j);var U=hj(this,t.call(this));return U.parse(C,k,i),U}return gj(j,t),j.prototype.getClass=function(){return j},j.prototype.toLabel=function(){if(this.getDisplayName())return this.getDisplayName();var t=this.s("image");return t&&t.length<100?t:i("editor.comptype.image")},j.prototype.onStyleChanged=function(j,C,k){t.prototype.onStyleChanged.call(this,j,C,k),"image"===j&&this.setImage(k)},j.prototype.parse=function(t,j,C){t&&(st(this,"type",t.type,"image"),st(this,"body.color",t.color),st(this,"image.stretch",t.stretch),st(this,"image",t.name,"node_image"),Tt(this,t,j,C))},j.prototype.toJSON=function(){var t={};return Zt(this,t,"type","type",void 0),Zt(this,t,"body.color","color"),Zt(this,t,"image.stretch","stretch"),Zt(this,t,"image","name"),Et(this,t),t},_j(j,[{key:"compType",get:function(){return this.s("type")}}]),j}(ht.Node),ZC=function(t){function j(C,k,i){Ij(this,j);var U=hj(this,t.call(this));return U.parse(C,k,i),U}return gj(j,t),j.prototype.getClass=function(){return j},j.prototype.toLabel=function(){return this.getDisplayName()||this.s("text")||i("editor.comptype.text")},j.prototype.parse=function(t,j,C){t&&(st(this,"type",t.type,"text"),st(this,"text",t.text),st(this,"text.align",t.align),st(this,"text.vAlign",t.vAlign),st(this,"text.color",t.color),st(this,"text.font",t.font),st(this,"text.shadow",t.shadow),st(this,"text.shadow.color",t.shadowColor),st(this,"text.shadow.blur",t.shadowBlur),st(this,"text.shadow.offset.x",t.shadowOffsetX),st(this,"text.shadow.offset.y",t.shadowOffsetY),Tt(this,t,j,C))},j.prototype.toJSON=function(){var t={};return Zt(this,t,"type","type",void 0),Zt(this,t,"text","text"),Zt(this,t,"text.align","align"),Zt(this,t,"text.vAlign","vAlign"),Zt(this,t,"text.color","color"),Zt(this,t,"text.font","font"),Zt(this,t,"text.shadow","shadow"),Zt(this,t,"text.shadow.color","shadowColor"),Zt(this,t,"text.shadow.blur","shadowBlur"),Zt(this,t,"text.shadow.offset.x","shadowOffsetX"),Zt(this,t,"text.shadow.offset.y","shadowOffsetY"),Et(this,t),t},_j(j,[{key:"compType",get:function(){return this.s("type")}}]),j}(ht.Text),qC=function(t){function j(C,k,i){Ij(this,j);var U=hj(this,t.call(this));return U.s({"shape.border.color":"red","shape.border.width":1,"shape.background":null}),U.parse(C,k,i),U.setClosePath(!0),U}return gj(j,t),j.prototype.getClass=function(){return j},j.prototype.toLabel=function(){return this.getDisplayName()||i("editor.comptype.clip")},j.prototype.parse=function(t,j,C){t&&(st(this,"type",t.type,"clip"),Tt(this,t,j,C),this.setPoints(Mt(Yt(t.points))),this.setSegments(Yt(t.segments)))},j.prototype.toJSON=function(){var t={};if(Zt(this,t,"type","type",void 0),Et(this,t),zt(t,"points",this.a("points"),Qt(this.getPoints())),this.getSegments()){var j=this.getSegments().toArray();if(j.length){var C=1===j[0];if(C)for(var k=1;k<j.length;k++)if(2!==j[k]){C=!1;break}C||zt(t,"segments",this.a("segments"),j)}}return t},_j(j,[{key:"compType",get:function(){return this.s("type")}}]),j}(ht.Shape),AC=function(t){function j(C,k,i){return Ij(this,j),hj(this,t.call(this))}return gj(j,t),j.prototype.getClass=function(){return j},j.prototype.toLabel=function(){return this.getDisplayName()||i("editor.comptype.restore")},j.prototype.parse=function(t,j,C){t&&(st(this,"type",t.type,"restore"),Tt(this,t,j,C))},j.prototype.toJSON=function(){var t={};return Zt(this,t,"type","type",void 0),Et(this,t),t},_j(j,[{key:"compType",get:function(){return this.s("type")}}]),j}(ht.Node),zC=function(t){function j(){return Ij(this,j),hj(this,t.call(this))}return gj(j,t),j}(ht.widget.BorderPane),TC=function(t){function j(C){return Ij(this,j),hj(this,t.call(this,C))}return gj(j,t),j}(ht.widget.ContextMenu),EC=function(t){function j(C){return Ij(this,j),hj(this,t.call(this,C))}return gj(j,t),j.prototype.invalidateAll=function(j,C){if("imageLoading"!==C)return"imageLoaded"===C?(this.fpImageLoaded=!0,this.dm().each(function(t){t.fp("imageLoaded",!1,!0)}),void(this.fpImageLoaded=!1)):void t.prototype.invalidateAll.call(this,j,C)},j.prototype.adjustZoom=function(t){return t>lj.config.maxZoom?lj.config.maxZoom:t<lj.config.minZoom?lj.config.minZoom:t},j.prototype.getUnionNodeRect=function(t){var j=this,C=void 0;return t=t._as||t,t.forEach(function(t){t instanceof ht.Node&&(C=F(C,j.getNodeRect(t)))}),C},j.prototype.$64$=function(t){this.validate();var j=this.getViewRect(),C=this.getUnionNodeRect(t);if(!j||!C||ht.Default.intersectsRect(j,C))return null;var k=j.x+j.width/2-C.x-C.width/2,i=j.y+j.height/2-C.y-C.height/2;return this.moveDatas(t,k,i),{x:k,y:i}},j.prototype.getFullscreenDatas=function(){return null},j}(ht.graph.GraphView),sC=function(t){function j(C){return Ij(this,j),hj(this,t.call(this,C))}return gj(j,t),j}(ht.widget.ListView),eC=function(t){function j(C){Ij(this,j);var k=hj(this,t.call(this,C));return k.getView().style.background=lj.config.color_pane_dark,k.setMaskBackground(null),k.setContentBorderColor(null),k.setContentBackground("white"),k.getMask().style.border=lj.config.color_select+" solid 1px",k}return gj(j,t),j}(ht.graph.Overview),xC=function(t){function j(C,k,i,U){Ij(this,j);var K=hj(this,t.call(this,C,k,i,U));return K.setTogglable(!1),K}return gj(j,t),j}(ht.widget.SplitView),oC=function(t){function j(C){return Ij(this,j),hj(this,t.call(this,C))}return gj(j,t),j}(ht.widget.TablePane),nC=function(t){function j(){return Ij(this,j),hj(this,t.call(this))}return gj(j,t),j.prototype.add=function(j,C,k){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],U=t.prototype.add.call(this,j,C,k);return U.setVisible(i),U},j}(ht.widget.TabView),wC=function(t){function j(C){return Ij(this,j),hj(this,t.call(this,C))}return gj(j,t),j}(ht.widget.Toolbar),rC=function(t){function j(C){Ij(this,j);var k=hj(this,t.call(this,C));return k.setDoubleClickToToggle(!1),k}return gj(j,t),j.prototype.getToggleIcon=function(t){if(this._loader&&!this._loader.isLoaded(t))return this._collapseIcon;var j=t.getChildren(),C=j.size();if(C){for(var k=!1,i=0;i<C;i++)if(this.isVisible(j.get(i))){k=!0;break}if(k)return this.isExpanded(t)?this._expandIcon:this._collapseIcon}},j.prototype.hasExpandedChild=function(t){if(!this.isExpanded(t))return!1;var j=t.getChildren(),C=j.size();if(C)for(var k=0;k<C;k++)if(this.isVisible(j.get(k)))return!0;return!1},_j(j,[{key:"expandIds",get:function(){return Object.keys(this._expandMap)},set:function(t){var j=this;t.forEach(function(t){var C=j.dm().getDataById(t);C&&j.expand(C)})}},{key:"selectionIds",get:function(){var t=[];return this.sm().each(function(j){t.push(j.$34$||j._id)}),t},set:function(t){var j=this,C=[];t.forEach(function(t){var k=j.dm().getDataById(t);k&&C.push(k)}),this.sm().ss(C)}}]),j}(ht.widget.TreeView);!function(t,j,C){var k=t.ht,i=k.Default;i.getInternal().addMethod(i,{svgToShape:function(t,j){var C=new k.SvgConverter(j);return{converter:C,output:C.toShape(t)}}});var U=k.Context2dProxy=function(t,j,C){var k=this;k.ctx=t,k.writer=j,k._currentContext={a:1,b:0,c:0,d:1,tx:0,ty:0},k._emptyPath(),k._forceSplitEllipse=!0,k._splitToBezier=C.splitToBezier,k._ellipseSegments=C.segments,k._contextStack=[];for(var i in CanvasRenderingContext2D.prototype)if("webkitImageSmoothingEnabled"!==i){var U=t[i];"function"==typeof U&&(t[i]=function(j,C){return function(){try{var i=C.apply(t,arguments);return k.handleFunc(j,i,arguments),i}catch(t){}}}(i,U))}};U.prototype={},U.prototype.constructor=U,U.prototype.handleFunc=function(t,j,C){var k=this;switch(t){case"save":k._ctxSave();break;case"restore":k._ctxRestore();break;case"translate":k._ctxTranslate.apply(k,C);break;case"rotate":k._ctxRotate.apply(k,C);break;case"scale":k._ctxScale.apply(k,C);break;case"setTransform":k._ctxSetTransform.apply(k,C);break;case"transform":k._ctxTransform.apply(k,C);break;case"fillText":case"strokeText":k._ctxText(C[0],C[1],C[2],"fillText"===t);break;case"rect":k._ctxRect.apply(k,C);break;case"fill":k._ctxFill(C[0]);break;case"fillRect":k._ctxRect.apply(k,C),k._ctxDraw("fill");break;case"stroke":k._ctxDraw("stroke");break;case"moveTo":k._ctxMoveTo(C[0],C[1]);break;case"lineTo":k._ctxLineTo(C[0],C[1]);break;case"beginPath":k._ctxBeginPath();break;case"closePath":k._ctxClosePath();break;case"arc":k._ctxArc.apply(k,C);break;case"ellipse":k._ctxEllipse.apply(k,C);break;case"quadraticCurveTo":k._ctxBezier([{x:C[0],y:C[1]}],C[2],C[3]);break;case"bezierCurveTo":k._ctxBezier([{x:C[0],y:C[1]},{x:C[2],y:C[3]}],C[4],C[5]);break;case"createLinearGradient":k._ctxCreateGradient(j,!0,C);break;case"createRadialGradient":k._ctxCreateGradient(j,!1,C);break;case"createPattern":k._ctxCreatePattern(j,C[0],C[1]);break;case"drawImage":k._ctxDrawImage.apply(k,C);break;case"clip":k._ctxClip()}},U.prototype.handleSetter=function(t,j){},U.prototype._ctxSave=function(){var t=this,j={},C=t._currentContext;for(var k in C)j[k]=C[k],"clip"===k&&C[k]&&delete C[k];t._contextStack.push(j)},U.prototype._ctxRestore=function(){var t=this;t._currentContext.clip&&t.writer.addRestore(),t._currentContext=t._contextStack.pop(),t._transformUpdated()},U.prototype._ctxTranslate=function(t,j){if(t=t||0,j=j||0,0!==t||0!==j){var C=this,k=C._currentContext,i=k.a,U=k.b,K=k.c,y=k.d;k.tx=i*t+K*j+k.tx,k.ty=U*t+y*j+k.ty,C._transformUpdated()}},U.prototype._ctxScale=function(t,j){if(t=t||1,j=j||1,1!==t||1!==j){var C=this,k=C._currentContext;k.a*=t,k.b*=t,k.c*=j,k.d*=j,C._transformUpdated()}},U.prototype._ctxRotate=function(t){var j=Math.cos(t),C=Math.sin(t),k=this,i=k._currentContext,U=i.a,K=i.b,y=i.c,L=i.d;i.a=U*j+y*C,i.b=K*j+L*C,i.c=-U*C+y*j,i.d=-K*C+L*j,k._transformUpdated()},U.prototype._ctxSetTransform=function(t,j,C,k,i,U){var K=this,y=K._currentContext;y.a=t,y.b=j,y.c=C,y.d=k,y.tx=i,y.ty=U,K._transformUpdated()},U.prototype._ctxTransform=function(t,j,C,k,i,U){var K=this,y=K._currentContext,L=y.a,X=y.b,u=y.c,a=y.d;y.a=L*t+u*j,y.b=X*t+a*j,y.c=L*C+u*k,y.d=X*C+a*k,y.tx=L*i+u*U+y.tx,y.ty=X*i+a*U+y.ty,K._transformUpdated()},U.prototype._transformUpdated=function(){},U.prototype._calcCurrentRotation=function(){var t=this._currentContext;return 0===t.b&&0===t.c?0:Math.atan2(t.b,t.a)},U.prototype._calcCurrentScale=function(){var t=this._currentContext;return{x:Math.sqrt(t.a*t.a+t.c*t.c),y:Math.sqrt(t.b*t.b+t.d*t.d)}},U.prototype._transformPoint=function(t){var j=this._currentContext,C=t.x,k=t.y;return{x:j.a*C+j.c*k+j.tx,y:j.b*C+j.d*k+j.ty}},U.prototype._transformPoints=function(t){for(var j=this,C=new Array(t.length),k=0,i=t.length;k<i;k++)C[k]=j._transformPoint(t[k]);return C},U.prototype._transformSize=function(t){var j=this._currentContext;return t*Math.max(Math.sqrt(j.c*j.c+j.d*j.d),Math.sqrt(j.a*j.a+j.b*j.b))},U.prototype._equal=function(t,j){var C=t-j;return C>-1e-5&&C<1e-5},U.prototype._ctxText=function(t,j,C,k){var i,U,K=this,y=K.ctx,L=y.font,X=k?y.fillStyle:y.strokeStyle,u=y.textAlign,a=y.textBaseline,B=1;if("string"==typeof L&&(U=L.match(/\d+/))){i=1*U[0];var c=K._transformSize(i);c<12&&(B=c/12,c=12),L=L.replace(/\d+/,c)}var f=K._calcCurrentRotation();"alphabetic"===a?(a="bottom",C+=.25*y.measureText("e").width):"hanging"===a&&(a="top",C+=.2*y.measureText("e").width),"string"==typeof X&&"rgba(0,0,0,0)"===X.replace(/ /g,"")||t.trim().length&&K.writer.addText(t,K._transformPoint({x:j,y:C}),L,f,u,a,X,B)},U.prototype._ctxDrawImage=function(t,j,k,i,U,K,y,L,X){if(t.width&&t.height){i===C&&U===C?(K=j,y=k,j=0,k=0,i=L=t.width,U=X=t.height):K===C&&y===C&&(K=j,y=k,L=i,X=U,j=0,k=0,i=t.width,U=t.height);var u=this,a=u._currentContext,B=L/i,c=X/U,f=K-B*j,R=y-c*k,d=a.a,$=a.b,m=a.c,D=a.d;a.tx,a.ty}},U.prototype._ctxClip=function(){var t=this;t._currentContext.clip=!0,t._ctxDraw("clip")},U.prototype._ctxCreateGradient=function(t,j,C){t.isLinear=j,t.points=j?[C[0],C[1],C[2],C[3]]:[C[0],C[1],C[2],C[3],C[4],C[5]];var k=this._currentContext;t.trans=[k.a,k.b,k.c,k.d,k.tx,k.ty];var i=t.addColorStop;t.addColorStop=function(j,C){i.apply(this,arguments),t.colorStops||(t.colorStops=[]),t.colorStops.push(j,C)}},U.prototype._ctxCreatePattern=function(t,j,C){},U.prototype._ctxRect=function(t,j,C,k){var i=this,U=i._transformPoints([{x:t,y:j},{x:t+C,y:j},{x:t+C,y:j+k},{x:t,y:j+k}]);i._path.push({type:"rect",points:U})},U.prototype._ctxMoveTo=function(t,j){var C=this,k=C._transformPoint({x:t,y:j});C._headPoint=k,C._path.push({type:"moveTo",x:k.x,y:k.y})},U.prototype._ctxLineTo=function(t,j){var C=this,k=C._transformPoint({x:t,y:j});C._path.push({type:"lineTo",x:k.x,y:k.y})},U.prototype._ctxArc=function(t,j,C,k,i,U){k=k||0,i=i||2*Math.PI,C&&this._ctxEllipse(t,j,C,C,0,k,i,U)},U.prototype._ctxEllipse=function(t,j,C,k,i,U,K,y){var L,X,u,a,B,c,f,R,d,$,m,D,b,J,v=this,H=v._calcCurrentScale(),G=v._transformPoint({x:t,y:j});B=Math.sin(i),c=Math.cos(i);var Z=function(t){return q(Math.cos(-t),Math.sin(-t))},q=function(i,U){var K=C*i,y=k*U;return{x:t+(c*K-B*y),y:j+(B*K+c*y)}},A=[],z=K;if(y)for(;z>=U;)z-=2*Math.PI;else for(;z<=U;)z+=2*Math.PI;for(d=(z-U)/v._ellipseSegments,m=0;m<=v._ellipseSegments;m++)$=U+d*m,D=v._transformPoint(Z(-$)),A.push(D);var T=U,E=z;if(A[0],a=A[A.length-1],L=v._calcaEllipseAngle(U,K,y),U=L.start,K=L.end,f=v._equal(H.x,H.y),R=v._equal(C,k),!v._forceSplitEllipse&&f&&R&&v._equal(Math.abs(U-K),2*Math.PI))v._path.push({type:"circle",x:G.x,y:G.y,end:a,keyPoints:A,radius:C*H.x});else if(!v._forceSplitEllipse&&f&&R)X=v._calcCurrentRotation(),u=Math.cos(X),b=v._currentContext.a*u<0,J=v._currentContext.d*u<0,L=v._transformStartEndAngle(U,K,b,J),U=L.start-X,K=L.end-X,v._path.push({type:"arc",x:G.x,y:G.y,end:a,radius:C*H.x,startAngle:U,endAngle:K,keyPoints:A});else{if(v._forceSplitEllipse||!f){if(v._path.length||v._path.push({type:"moveTo",x:A[0].x,y:A[0].y}),v._splitToBezier){var s,e,x,o=E-T,n=Math.max(Math.ceil(Math.abs(o)/Math.PI*2),1),w=o/n,r=Math.tan(.5*w),Y=Math.sin(w)*(Math.sqrt(4+3*r*r)-1)/3,p=Math.cos(T),M=Math.sin(T);for(m=0;m<n;m++){x=T+(m+1)*w,s=Math.cos(x),e=Math.sin(x);var Q=q(s,e);v._ctxBezier([q(p-M*Y,M+p*Y),q(s+e*Y,e-s*Y)],Q.x,Q.y),p=s,M=e,x}return}for(m=1;m<=v._ellipseSegments;m++)D=A[m],v._path.push({type:"lineTo",x:D.x,y:D.y});return}var N,O,F=v._transformPoint(Z(0)),S=v._transformPoint(Z(Math.PI/2)),I=function(t,j){var C=t.x-j.x,k=t.y-j.y;return Math.sqrt(C*C+k*k)},_=I(F,G),g=I(S,G);g>_?(O=_,_=g,g=O,N=S):N=F,X=v._calcCurrentRotation(),u=Math.cos(X),b=v._currentContext.a*u<0,J=v._currentContext.d*u<0,L=v._transformStartEndAngle(U-Math.PI/2,K-Math.PI/2,b,J),U=L.start,K=L.end,v._path.push({type:"ellipse",x:G.x,y:G.y,end:a,major:{x:N.x-G.x,y:N.y-G.y},ratio:g/_,startAngle:U,endAngle:K,keyPoints:A})}},U.prototype._ctxBezier=function(t,j,C){var k=this,i=k._transformPoint({x:j,y:C});this._path.push({type:"bezier",x:i.x,y:i.y,ctrl:k._transformPoints(t)})},U.prototype._ctxBeginPath=function(){this._emptyPath()},U.prototype._ctxClosePath=function(){var t=this,j=t._headPoint;j&&(t._path.push({type:"lineTo",x:j.x,y:j.y,subType:"closePath"}),t._headPoint=null,t._lastPoint=null)},U.prototype._calcaEllipseAngle=function(t,j,C){t=-t,j=-j;var k,i=t%(2*Math.PI),U=j%(2*Math.PI);for(i<0&&(i+=2*Math.PI),U<0&&(U+=2*Math.PI),C||(k=i,i=U,U=k);U<=i;)U+=2*Math.PI;return{start:i,end:U}},U.prototype._transformStartEndAngle=function(t,j,C,k){var i;return(k||C)&&(C&&k?(t=Math.PI+t,j=Math.PI+j):(i=Math.PI*(C?1:2)-j,j=Math.PI*(C?1:2)-t,t=i)),{start:t,end:j}},U.prototype._ctxFill=function(t){var j=this;return j._fillRule=t||"nonzero",j._ctxDraw("fill")},U.prototype._ctxDraw=function(t){var j=this,C=j._path;if(C.length){var k,i,U,K,y,L=[],X=[];if("clip"===t)y={clip:!0};else{if("stroke"===t){y={stroke:!0,lineWidth:j._transformSize(j.ctx.lineWidth),color:j.ctx.strokeStyle};var u=j.ctx.lineCap;"butt"!==u&&(y.lineCap=u);var a=j.ctx.getLineDash();if(a&&a.length){y.dash=!0;for(var B=0,c=a.length;B<c;B++)a[B]=j._transformSize(a[B]);y.dashPattern=a,y.dashOffset=j._transformSize(j.ctx.lineDashOffset)}}else y={stroke:!1,color:j.ctx.fillStyle},"nonzero"!==j._fillRule&&(y.fillRule=j._fillRule);if(j.ctx.globalAlpha<1&&(y.opacity=j.ctx.globalAlpha),"string"!=typeof y.color)if(y.color instanceof CanvasGradient){var f=y.color,R=[f.isLinear?"L":"R"];R=R.concat(f.points);var d=j._currentContext;R=R.concat([d.a,d.b,d.c,d.d,d.tx,d.ty]),R=R.concat(f.colorStops),y.gradientPack=R}else if(y.color instanceof CanvasPattern&&y.color.gradient){var U=y.color,f=U.gradient,R=[f.isLinear?"L":"R"];R=R.concat(f.points);var $=U.trans,d=j._currentContext,m=d.a,D=d.b,b=d.c,J=d.d,v=d.tx,H=d.ty,G=$[0],Z=$[1],q=$[2],A=$[3],z=$[4],T=$[5];R=R.concat([m*G+b*Z,D*G+J*Z,m*q+b*A,D*q+J*A,m*z+b*T+v,D*z+J*T+H]),R=R.concat(f.colorStops),y.gradientPack=R}else y.trans=[j._currentContext.a,j._currentContext.b,j._currentContext.c,j._currentContext.d,j._currentContext.tx,j._currentContext.ty],y.color=y.color.image?y.color.image:y.color,y.isPattern=!0;if("string"==typeof y.color&&"rgba(0,0,0,0)"===y.color.replace(/ /g,""))return}for(i=0,k=C.length;i<k;i++)switch(U=C[i],U.type){case"moveTo":j._lastPoint={x:U.x,y:U.y},L.push(j._lastPoint),X.push(1);break;case"lineTo":"closePath"===U.subType?X.push(5):(L.push({x:U.x,y:U.y}),X.push(2)),j._lastPoint={x:U.x,y:U.y};break;case"rect":K=U.points,L.push({x:K[0].x,y:K[0].y},{x:K[1].x,y:K[1].y},{x:K[2].x,y:K[2].y},{x:K[3].x,y:K[3].y},{x:K[0].x,y:K[0].y}),X.push(2,2,2,2,2),j._lastPoint=U.points[0];break;case"circle":case"arc":case"ellipse":console.log("split to line",U.type);break;case"arcBegin":L.length&&X.length&&j.writer.addShape(L,X,y),L=[],X=[];break;case"arcClose":j.writer.addShape(L,X,y),L=[],X=[];break;case"bezier":if(!j._lastPoint)break;1===U.ctrl.length?(L.push({x:U.ctrl[0].x,y:U.ctrl[0].y},{x:U.x,y:U.y}),X.push(3)):(L.push({x:U.ctrl[0].x,y:U.ctrl[0].y},{x:U.ctrl[1].x,y:U.ctrl[1].y},{x:U.x,y:U.y}),X.push(4)),j._lastPoint={x:U.x,y:U.y};break;default:L.push({x:U.x,y:U.y}),X.push(2)}j.writer.addShape(L,X,y)}},U.prototype._emptyPath=function(){var t=this;t._path=[],t._lastPoint=null,t._headPoint=null};var K=k.SvgConverter=function(t){var j=this;j.initConfig(t||{}),j.initCanvas()};K.prototype={},K.prototype.constructor=K,K.prototype.initConfig=function(t){var j,k=this;j=k.options={},j.size=t.size||512,j.segments=t.segments||16,j.splitToBezier=t.splitToBezier===C||t.splitToBezier},K.prototype.initCanvas=function(){var t=this,j=document.createElement("canvas");j.width=j.height=t.options.size,j.style.width=j.style.height=t.options.size;var C=j.getContext;j.getContext=function(j){return function(C){var k=j.apply(this,arguments);return"2d"===C&&t.wrapContext2d(k),k}}(C),t._canvas=j,t._segments=[]},K.prototype.toShape=function(t){var j=this;j._canvas;return j._segments=[],canvg(j._canvas,t,{ignoreMouse:!0,ignoreAnimation:!0}),j.write()},K.prototype.wrapContext2d=function(t){var j=this;return new k.Context2dProxy(t,j,j.options)},K.prototype.write=function(){var t=this;return{width:t._canvas.width,height:t._canvas.height,comps:t._segments}},K.prototype.addComponent=function(t){this._segments.push(t)},K.prototype.addText=function(t,j,C,k,i,U,K,y){i=i||"left","start"===i?i="left":"end"===i&&(i="right"),"alphabetic"===U?U="bottom":"hanging"===U&&(U="top");var L=this,X={type:"text",color:K,text:t,rotation:k,rect:[j.x,j.y,.01,.01],align:i,vAlign:U,font:C};y&&1!==y&&(X.scaleX=y,X.scaleY=y),L.addComponent(X)},K.prototype.addShape=function(t,j,k){for(var i=this,U=[],K=0,y=t.length;K<y;K++){var L=t[K];U.push(L.x,L.y)}if(k.clip)return void i.addComponent({type:"clip",points:U,segments:j});var X={
type:"shape",points:U,segments:j};if(k.opacity!=C&&(X.opacity=k.opacity),k.stroke)k.dash?(X.dash=k.dash,X.dashPattern=k.dashPattern,X.dashOffset=k.dashOffset,X.dashColor=k.color,X.dashWidth=k.lineWidth,X.borderColor=null,X.borderWidth=0,X.background=null):(X.borderColor=k.color,X.borderWidth=k.lineWidth,X.background=null),k.lineCap&&(X.borderCap=k.lineCap);else{if(X.borderColor=null,X.borderWidth=0,k.isPattern)X.repeatImage=k.color,X.trans=k.trans,X.background=null;else if(k.gradientPack){var u=k.gradientPack,a="L"===u[0]?[u[5],u[6],u[7],u[8],u[9],u[10]]:[u[7],u[8],u[9],u[10],u[11],u[12]];if(Math.abs(a[4])>1e8||Math.abs(a[5])>1e8){var B=a[0],c=a[1],f=a[2],R=a[3],d=a[4],$=a[5],m=Math.floor((d*R-$*f)/(B*R-c*f)),D=Math.floor((d*c-$*B)/(f*c-B*R));d=-(B*m+f*D),$=-(c*m+R*D),"L"===u[0]?(u[9]+=d,u[10]+=$,u[1]+=m,u[2]+=D,u[3]+=m,u[4]+=D):(u[11]+=d,u[12]+=$,u[1]+=m,u[2]+=D,u[4]+=m,u[5]+=D)}X.gradientPack=u,X.background=null}else X.background=k.color;k.gradient&&(X.gradient=k.gradient,X.gradientColor=k.gradientColor),k.fillRule&&(X.fillRule=k.fillRule)}i.addComponent(X)},K.prototype.addRestore=function(){this.addComponent({type:"restore"})},function(t){function j(t){this.ok=!1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t=t.replace(/ /g,""),t=t.toLowerCase();var C={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var k in C)t==k&&(t=C[k]);for(var i=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],U=0;U<i.length;U++){var K=i[U].re,y=i[U].process,L=K.exec(t);if(L){var X=y(L);this.r=X[0],this.g=X[1],this.b=X[2],this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var t=this.r.toString(16),j=this.g.toString(16),C=this.b.toString(16);return 1==t.length&&(t="0"+t),1==j.length&&(j="0"+j),1==C.length&&(C="0"+C),"#"+t+j+C},this.getHelpXML=function(){for(var t=new Array,k=0;k<i.length;k++)for(var U=i[k].example,K=0;K<U.length;K++)t[t.length]=U[K];for(var y in C)t[t.length]=y;var L=document.createElement("ul");L.setAttribute("id","rgbcolor-examples");for(var k=0;k<t.length;k++)try{var X=document.createElement("li"),u=new j(t[k]),a=document.createElement("div");a.style.cssText="margin: 3px; border: 1px solid black; background:"+u.toHex()+"; color:"+u.toHex(),a.appendChild(document.createTextNode("test"));var B=document.createTextNode(" "+t[k]+" -> "+u.toRGB()+" -> "+u.toHex());X.appendChild(a),X.appendChild(B),L.appendChild(X)}catch(t){}return L}}t.RGBColor=j}(void 0!==t?t:this),function(t){function j(t){for(var j=t.data,C=t.width*t.height*4,k=0;k<C;k+=4){var i=j[k+3]/255;j[k]*=i,j[k+1]*=i,j[k+2]*=i}}function C(t){for(var j=t.data,C=t.width*t.height*4,k=0;k<C;k+=4){var i=j[k+3];0!=i&&(i=255/i,j[k]*=i,j[k+1]*=i,j[k+2]*=i)}}function k(t,j,C,k){var K=document.getElementById(t),y=K.naturalWidth,L=K.naturalHeight,X=document.getElementById(j);X.style.width=y+"px",X.style.height=L+"px",X.width=y,X.height=L;var u=X.getContext("2d");u.clearRect(0,0,y,L),u.drawImage(K,0,0),isNaN(C)||C<1||(k?i(j,0,0,y,L,C):U(j,0,0,y,L,C))}function i(t,k,i,U,X,u){if(!(isNaN(u)||u<1)){u|=0;var a,B=document.getElementById(t),c=B.getContext("2d");try{try{a=c.getImageData(k,i,U,X)}catch(t){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),a=c.getImageData(k,i,U,X)}catch(t){throw alert("Cannot access local image"),new Error("unable to access local image data: "+t)}}}catch(t){throw alert("Cannot access image"),new Error("unable to access image data: "+t)}j(a);var f,R,d,$,m,D,b,J,v,H,G,Z,q,A,z,T,E,s,e,x,o,n,w,r,Y=a.data,p=u+u+1,M=U-1,Q=X-1,N=u+1,O=N*(N+1)/2,F=new K,S=F;for(d=1;d<p;d++)if(S=S.next=new K,d==N)var I=S;S.next=F;var _=null,g=null;b=D=0;var h=y[u],W=L[u];for(R=0;R<X;R++){for(T=E=s=e=J=v=H=G=0,Z=N*(x=Y[D]),q=N*(o=Y[D+1]),A=N*(n=Y[D+2]),z=N*(w=Y[D+3]),J+=O*x,v+=O*o,H+=O*n,G+=O*w,S=F,d=0;d<N;d++)S.r=x,S.g=o,S.b=n,S.a=w,S=S.next;for(d=1;d<N;d++)$=D+((M<d?M:d)<<2),J+=(S.r=x=Y[$])*(r=N-d),v+=(S.g=o=Y[$+1])*r,H+=(S.b=n=Y[$+2])*r,G+=(S.a=w=Y[$+3])*r,T+=x,E+=o,s+=n,e+=w,S=S.next;for(_=F,g=I,f=0;f<U;f++)Y[D]=J*h>>W,Y[D+1]=v*h>>W,Y[D+2]=H*h>>W,Y[D+3]=G*h>>W,J-=Z,v-=q,H-=A,G-=z,Z-=_.r,q-=_.g,A-=_.b,z-=_.a,$=b+(($=f+u+1)<M?$:M)<<2,T+=_.r=Y[$],E+=_.g=Y[$+1],s+=_.b=Y[$+2],e+=_.a=Y[$+3],J+=T,v+=E,H+=s,G+=e,_=_.next,Z+=x=g.r,q+=o=g.g,A+=n=g.b,z+=w=g.a,T-=x,E-=o,s-=n,e-=w,g=g.next,D+=4;b+=U}for(f=0;f<U;f++){for(E=s=e=T=v=H=G=J=0,D=f<<2,Z=N*(x=Y[D]),q=N*(o=Y[D+1]),A=N*(n=Y[D+2]),z=N*(w=Y[D+3]),J+=O*x,v+=O*o,H+=O*n,G+=O*w,S=F,d=0;d<N;d++)S.r=x,S.g=o,S.b=n,S.a=w,S=S.next;for(m=U,d=1;d<=u;d++)D=m+f<<2,J+=(S.r=x=Y[D])*(r=N-d),v+=(S.g=o=Y[D+1])*r,H+=(S.b=n=Y[D+2])*r,G+=(S.a=w=Y[D+3])*r,T+=x,E+=o,s+=n,e+=w,S=S.next,d<Q&&(m+=U);for(D=f,_=F,g=I,R=0;R<X;R++)$=D<<2,Y[$]=J*h>>W,Y[$+1]=v*h>>W,Y[$+2]=H*h>>W,Y[$+3]=G*h>>W,J-=Z,v-=q,H-=A,G-=z,Z-=_.r,q-=_.g,A-=_.b,z-=_.a,$=f+(($=R+N)<Q?$:Q)*U<<2,J+=T+=_.r=Y[$],v+=E+=_.g=Y[$+1],H+=s+=_.b=Y[$+2],G+=e+=_.a=Y[$+3],_=_.next,Z+=x=g.r,q+=o=g.g,A+=n=g.b,z+=w=g.a,T-=x,E-=o,s-=n,e-=w,g=g.next,D+=U}C(a),c.putImageData(a,k,i)}}function U(t,j,C,k,i,U){if(!(isNaN(U)||U<1)){U|=0;var X,u=document.getElementById(t),a=u.getContext("2d");try{try{X=a.getImageData(j,C,k,i)}catch(t){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),X=a.getImageData(j,C,k,i)}catch(t){throw alert("Cannot access local image"),new Error("unable to access local image data: "+t)}}}catch(t){throw alert("Cannot access image"),new Error("unable to access image data: "+t)}var B,c,f,R,d,$,m,D,b,J,v,H,G,Z,q,A,z,T,E,s,e=X.data,x=U+U+1,o=k-1,n=i-1,w=U+1,r=w*(w+1)/2,Y=new K,p=Y;for(f=1;f<x;f++)if(p=p.next=new K,f==w)var M=p;p.next=Y;var Q=null,N=null;m=$=0;var O=y[U],F=L[U];for(c=0;c<i;c++){for(Z=q=A=D=b=J=0,v=w*(z=e[$]),H=w*(T=e[$+1]),G=w*(E=e[$+2]),D+=r*z,b+=r*T,J+=r*E,p=Y,f=0;f<w;f++)p.r=z,p.g=T,p.b=E,p=p.next;for(f=1;f<w;f++)R=$+((o<f?o:f)<<2),D+=(p.r=z=e[R])*(s=w-f),b+=(p.g=T=e[R+1])*s,J+=(p.b=E=e[R+2])*s,Z+=z,q+=T,A+=E,p=p.next;for(Q=Y,N=M,B=0;B<k;B++)e[$]=D*O>>F,e[$+1]=b*O>>F,e[$+2]=J*O>>F,D-=v,b-=H,J-=G,v-=Q.r,H-=Q.g,G-=Q.b,R=m+((R=B+U+1)<o?R:o)<<2,Z+=Q.r=e[R],q+=Q.g=e[R+1],A+=Q.b=e[R+2],D+=Z,b+=q,J+=A,Q=Q.next,v+=z=N.r,H+=T=N.g,G+=E=N.b,Z-=z,q-=T,A-=E,N=N.next,$+=4;m+=k}for(B=0;B<k;B++){for(q=A=Z=b=J=D=0,$=B<<2,v=w*(z=e[$]),H=w*(T=e[$+1]),G=w*(E=e[$+2]),D+=r*z,b+=r*T,J+=r*E,p=Y,f=0;f<w;f++)p.r=z,p.g=T,p.b=E,p=p.next;for(d=k,f=1;f<=U;f++)$=d+B<<2,D+=(p.r=z=e[$])*(s=w-f),b+=(p.g=T=e[$+1])*s,J+=(p.b=E=e[$+2])*s,Z+=z,q+=T,A+=E,p=p.next,f<n&&(d+=k);for($=B,Q=Y,N=M,c=0;c<i;c++)R=$<<2,e[R]=D*O>>F,e[R+1]=b*O>>F,e[R+2]=J*O>>F,D-=v,b-=H,J-=G,v-=Q.r,H-=Q.g,G-=Q.b,R=B+((R=c+w)<n?R:n)*k<<2,D+=Z+=Q.r=e[R],b+=q+=Q.g=e[R+1],J+=A+=Q.b=e[R+2],Q=Q.next,v+=z=N.r,H+=T=N.g,G+=E=N.b,Z-=z,q-=T,A-=E,N=N.next,$+=k}a.putImageData(X,j,C)}}function K(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var y=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],L=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],X={image:k,canvasRGBA:i,canvasRGB:U};t.stackBlur=X}(void 0!==t?t:this),function(j,i){j.canvg=function(j,i){function U(t){var j=[0,0,0],C=function(C,k){var i=t.match(C);null!=i&&(j[k]+=i.length,t=t.replace(C," "))};return t=t.replace(/:not\(([^\)]*)\)/g,"     $1 "),t=t.replace(/{[\s\S]*/gm," "),C(X,1),C(u,0),C(a,1),C(B,2),C(c,1),C(f,1),t=t.replace(/[\*\s\+>~]/g," "),t=t.replace(/[#\.]/g," "),C(R,2),j.join("")}function K(K){var L={opts:K};L.FRAMERATE=30,L.MAX_VIRTUAL_PIXELS=3e4,L.log=function(t){},1==L.opts.log&&"undefined"!=typeof console&&(L.log=function(t){console.log(t)}),L.init=function(t){var j=0;L.UniqueId=function(){return"canvg"+ ++j},L.Definitions={},L.Styles={},L.StylesSpecificity={},L.Animations=[],L.Images=[],L.ctx=t,L.ViewPort=new function(){this.viewPorts=[],this.Clear=function(){this.viewPorts=[]},this.SetCurrent=function(t,j){this.viewPorts.push({width:t,height:j})},this.RemoveCurrent=function(){this.viewPorts.pop()},this.Current=function(){return this.viewPorts[this.viewPorts.length-1]},this.width=function(){var t,j=this.Current();return j&&(t=j.width)?t:100},this.height=function(){var t,j=this.Current();return j&&(t=j.height)?t:100},this.ComputeSize=function(t){return null!=t&&"number"==typeof t?t:"x"==t?this.width():"y"==t?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}},L.init(),L.ImagesLoaded=function(){for(var t=0;t<L.Images.length;t++)if(!L.Images[t].loaded)return!1;return!0},L.trim=function(t){return t.replace(/^\s+|\s+$/g,"")},L.compressSpaces=function(t){return t.replace(/[\s\r\t\n]+/gm," ")},L.ajax=function(t){t=k.Default.beforeLoadURL(t);var j=new k.Request,C={};return C.url=encodeURI(t),C.sync=!0,j.send(C),j.getResponseText()},L.parseXml=function(j){if("undefined"!=typeof Windows&&void 0!==Windows.Data&&void 0!==Windows.Data.Xml){var C=new Windows.Data.Xml.Dom.XmlDocument,k=new Windows.Data.Xml.Dom.XmlLoadSettings;return k.prohibitDtd=!1,C.loadXml(j,k),C}if(t.DOMParser){return(new DOMParser).parseFromString(j,"text/xml")}j=j.replace(/<!DOCTYPE svg[^>]*>/,"");var C=new ActiveXObject("Microsoft.XMLDOM");return C.async="false",C.loadXML(j),C},L.Property=function(t,j){this.name=t,this.value=j},L.Property.prototype.getValue=function(){return this.value},L.Property.prototype.hasValue=function(){return null!=this.value&&""!==this.value},L.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var t=parseFloat(this.value);return(this.value+"").match(/%$/)&&(t/=100),t},L.Property.prototype.valueOrDefault=function(t){return this.hasValue()?this.value:t},L.Property.prototype.numValueOrDefault=function(t){return this.hasValue()?this.numValue():t},L.Property.prototype.addOpacity=function(t){var C=this.value;if(null!=t.value&&""!=t.value&&"string"==typeof this.value){var k=new j(this.value);k.ok&&(C="rgba("+k.r+", "+k.g+", "+k.b+", "+t.numValue()+")")}return new L.Property(this.name,C)},L.Property.prototype.getDefinition=function(){var t=this.value.match(/#([^\)'"]+)/);return t&&(t=t[1]),t||(t=this.value),L.Definitions[t]},L.Property.prototype.isUrlDefinition=function(){return 0==this.value.indexOf("url(")},L.Property.prototype.getFillStyleDefinition=function(t,j){var C=this.getDefinition();if(null!=C&&C.createGradient)return C.createGradient(L.ctx,t,j);if(null!=C&&C.createPattern){if(C.getHrefAttribute().hasValue()){var k=C.attribute("patternTransform");C=C.getHrefAttribute().getDefinition(),k.hasValue()&&(C.attribute("patternTransform",!0).value=k.value)}return C.createPattern(L.ctx,t)}return null},L.Property.prototype.getDPI=function(t){return 96},L.Property.prototype.getEM=function(t){var j=12,C=new L.Property("fontSize",L.Font.Parse(L.ctx.font).fontSize);return C.hasValue()&&(j=C.toPixels(t)),j},L.Property.prototype.getUnits=function(){return(this.value+"").replace(/[0-9\.\-]/g,"")},L.Property.prototype.toPixels=function(t,j){if(!this.hasValue())return 0;var C=this.value+"";if(C.match(/em$/))return this.numValue()*this.getEM(t);if(C.match(/ex$/))return this.numValue()*this.getEM(t)/2;if(C.match(/px$/))return this.numValue();if(C.match(/pt$/))return this.numValue()*this.getDPI(t)*(1/72);if(C.match(/pc$/))return 15*this.numValue();if(C.match(/cm$/))return this.numValue()*this.getDPI(t)/2.54;if(C.match(/mm$/))return this.numValue()*this.getDPI(t)/25.4;if(C.match(/in$/))return this.numValue()*this.getDPI(t);if(C.match(/%$/))return this.numValue()*L.ViewPort.ComputeSize(t);var k=this.numValue();return j&&k<1?k*L.ViewPort.ComputeSize(t):k},L.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var t=this.value+"";return t.match(/s$/)?1e3*this.numValue():(t.match(/ms$/),this.numValue())},L.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var t=this.value+"";return t.match(/deg$/)?this.numValue()*(Math.PI/180):t.match(/grad$/)?this.numValue()*(Math.PI/200):t.match(/rad$/)?this.numValue():this.numValue()*(Math.PI/180)};var X={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};return L.Property.prototype.toTextBaseline=function(){return this.hasValue()?X[this.value]:null},L.Font=new function(){this.Styles="normal|italic|oblique|inherit",this.Variants="normal|small-caps|inherit",this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit",this.CreateFont=function(t,j,C,k,i,U){var K=null!=U?this.Parse(U):this.CreateFont("","","","","",L.ctx.font);return{fontFamily:i||K.fontFamily,fontSize:k||K.fontSize,fontStyle:t||K.fontStyle,fontWeight:C||K.fontWeight,fontVariant:j||K.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var t=this;this.Parse=function(j){for(var C={},k=L.trim(L.compressSpaces(j||"")).split(" "),i={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1},U="",K=0;K<k.length;K++)i.fontStyle||-1==t.Styles.indexOf(k[K])?i.fontVariant||-1==t.Variants.indexOf(k[K])?i.fontWeight||-1==t.Weights.indexOf(k[K])?i.fontSize?"inherit"!=k[K]&&(U+=k[K]):("inherit"!=k[K]&&(C.fontSize=k[K].split("/")[0]),i.fontStyle=i.fontVariant=i.fontWeight=i.fontSize=!0):("inherit"!=k[K]&&(C.fontWeight=k[K]),i.fontStyle=i.fontVariant=i.fontWeight=!0):("inherit"!=k[K]&&(C.fontVariant=k[K]),i.fontStyle=i.fontVariant=!0):("inherit"!=k[K]&&(C.fontStyle=k[K]),i.fontStyle=!0);return""!=U&&(C.fontFamily=U),C}},L.ToNumberArray=function(t){for(var j=L.trim(L.compressSpaces((t||"").replace(/,/g," "))).split(" "),C=0;C<j.length;C++)j[C]=parseFloat(j[C]);return j},L.Point=function(t,j){this.x=t,this.y=j},L.Point.prototype.angleTo=function(t){return Math.atan2(t.y-this.y,t.x-this.x)},L.Point.prototype.applyTransform=function(t){var j=this.x*t[0]+this.y*t[2]+t[4],C=this.x*t[1]+this.y*t[3]+t[5];this.x=j,this.y=C},L.CreatePoint=function(t){var j=L.ToNumberArray(t);return new L.Point(j[0],j[1])},L.CreatePath=function(t){for(var j=L.ToNumberArray(t),C=[],k=0;k<j.length;k+=2)C.push(new L.Point(j[k],j[k+1]));return C},L.BoundingBox=function(t,j,C,k){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.x=function(){return this.x1},this.y=function(){return this.y1},this.width=function(){return this.x2-this.x1},this.height=function(){return this.y2-this.y1},this.addPoint=function(t,j){null!=t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),null!=j&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=j,this.y2=j),j<this.y1&&(this.y1=j),j>this.y2&&(this.y2=j))},this.addX=function(t){this.addPoint(t,null)},this.addY=function(t){this.addPoint(null,t)},this.addBoundingBox=function(t){this.addPoint(t.x1,t.y1),this.addPoint(t.x2,t.y2)},this.addQuadraticCurve=function(t,j,C,k,i,U){var K=t+2/3*(C-t),y=j+2/3*(k-j),L=K+1/3*(i-t),X=y+1/3*(U-j);this.addBezierCurve(t,j,K,L,y,X,i,U)},this.addBezierCurve=function(t,j,C,k,i,U,K,y){var L=[t,j],X=[C,k],u=[i,U],a=[K,y];this.addPoint(L[0],L[1]),this.addPoint(a[0],a[1]);for(var B=0;B<=1;B++){var c=function(t){return Math.pow(1-t,3)*L[B]+3*Math.pow(1-t,2)*t*X[B]+3*(1-t)*Math.pow(t,2)*u[B]+Math.pow(t,3)*a[B]},f=6*L[B]-12*X[B]+6*u[B],R=-3*L[B]+9*X[B]-9*u[B]+3*a[B],d=3*X[B]-3*L[B];if(0!=R){var $=Math.pow(f,2)-4*d*R;if(!($<0)){var m=(-f+Math.sqrt($))/(2*R);0<m&&m<1&&(0==B&&this.addX(c(m)),1==B&&this.addY(c(m)));var D=(-f-Math.sqrt($))/(2*R);0<D&&D<1&&(0==B&&this.addX(c(D)),1==B&&this.addY(c(D)))}}else{if(0==f)continue;var b=-d/f;0<b&&b<1&&(0==B&&this.addX(c(b)),1==B&&this.addY(c(b)))}}},this.isPointInBox=function(t,j){return this.x1<=t&&t<=this.x2&&this.y1<=j&&j<=this.y2},this.addPoint(t,j),this.addPoint(C,k)},L.Transform=function(t){var j=this;this.Type={},this.Type.translate=function(t){this.p=L.CreatePoint(t),this.getMatrix=function(){return[1,0,0,1,this.p.x||0,this.p.y||0]},this.apply=function(t){t.translate(this.p.x||0,this.p.y||0)},this.unapply=function(t){t.translate(-1*this.p.x||0,-1*this.p.y||0)},this.applyToPoint=function(t){t.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}},this.Type.rotate=function(t){var j=L.ToNumberArray(t);this.angle=new L.Property("angle",j[0]),this.cx=j[1]||0,this.cy=j[2]||0,this.apply=function(t){t.translate(this.cx,this.cy),t.rotate(this.angle.toRadians()),t.translate(-this.cx,-this.cy)},this.getMatrix=function(){var t=this.angle.toRadians(),j=Math.sin(t),C=Math.cos(t),k=this.cx,i=this.cy;return[C,j,-j,C,C*-k+j*i+k,j*-k-C*i+i]},this.unapply=function(t){t.translate(this.cx,this.cy),t.rotate(-1*this.angle.toRadians()),t.translate(-this.cx,-this.cy)},this.applyToPoint=function(t){var j=this.angle.toRadians();t.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]),t.applyTransform([Math.cos(j),Math.sin(j),-Math.sin(j),Math.cos(j),0,0]),t.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}},this.Type.scale=function(t){this.p=L.CreatePoint(t),this.getMatrix=function(){return[this.p.x||1,0,0,this.p.y||this.p.x||1,0,0]},this.apply=function(t){t.scale(this.p.x||1,this.p.y||this.p.x||1)},this.unapply=function(t){t.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)},this.applyToPoint=function(t){t.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}},this.Type.matrix=function(t){this.m=L.ToNumberArray(t),this.getMatrix=function(){return this.m},this.apply=function(t){t.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])},this.unapply=function(t){var j=this.m[0],C=this.m[2],k=this.m[4],i=this.m[1],U=this.m[3],K=this.m[5],y=1/(j*(1*U-0*K)-C*(1*i-0*K)+k*(0*i-0*U));t.transform(y*(1*U-0*K),y*(0*K-1*i),y*(0*k-1*C),y*(1*j-0*k),y*(C*K-k*U),y*(k*i-j*K))},this.applyToPoint=function(t){t.applyTransform(this.m)}},this.Type.SkewBase=function(t){this.base=j.Type.matrix,this.base(t),this.angle=new L.Property("angle",t)},this.Type.SkewBase.prototype=new this.Type.matrix,this.Type.skewX=function(t){this.base=j.Type.SkewBase,this.base(t),this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]},this.Type.skewX.prototype=new this.Type.SkewBase,this.Type.skewY=function(t){this.base=j.Type.SkewBase,this.base(t),this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]},this.Type.skewY.prototype=new this.Type.SkewBase,this.transforms=[],this.getMatrix=function(){for(var t=1,j=0,C=0,k=1,i=0,U=0,K=0;K<this.transforms.length;K++){var y=this.transforms[K].getMatrix(),L=t,X=j,u=C,a=k,B=i,c=U;t=L*y[0]+u*y[1],j=X*y[0]+a*y[1],C=L*y[2]+u*y[3],k=X*y[2]+a*y[3],i=L*y[4]+u*y[5]+B,U=X*y[4]+a*y[5]+c}return[t,j,C,k,i,U]},this.apply=function(t){for(var j=0;j<this.transforms.length;j++)this.transforms[j].apply(t)},this.unapply=function(t){for(var j=this.transforms.length-1;j>=0;j--)this.transforms[j].unapply(t)},this.applyToPoint=function(t){for(var j=0;j<this.transforms.length;j++)this.transforms[j].applyToPoint(t)};for(var C=L.trim(L.compressSpaces(t)).replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),k=0;k<C.length;k++){var i=L.trim(C[k].split("(")[0]),U=C[k].split("(")[1].replace(")",""),K=this.Type[i];if(void 0!==K){var y=new K(U);y.type=i,this.transforms.push(y)}}},L.AspectRatio=function(t,j,C,k,i,U,K,y,X,u){j=L.compressSpaces(j),j=j.replace(/^defer\s/,"");var a=j.split(" ")[0]||"xMidYMid",B=j.split(" ")[1]||"meet",c=C/k,f=i/U,R=Math.min(c,f),d=Math.max(c,f);"meet"==B&&(k*=R,U*=R),"slice"==B&&(k*=d,U*=d),X=new L.Property("refX",X),u=new L.Property("refY",u),X.hasValue()&&u.hasValue()?t.translate(-R*X.toPixels("x"),-R*u.toPixels("y")):(a.match(/^xMid/)&&("meet"==B&&R==f||"slice"==B&&d==f)&&t.translate(C/2-k/2,0),a.match(/YMid$/)&&("meet"==B&&R==c||"slice"==B&&d==c)&&t.translate(0,i/2-U/2),a.match(/^xMax/)&&("meet"==B&&R==f||"slice"==B&&d==f)&&t.translate(C-k,0),a.match(/YMax$/)&&("meet"==B&&R==c||"slice"==B&&d==c)&&t.translate(0,i-U)),"none"==a?t.scale(c,f):"meet"==B?t.scale(R,R):"slice"==B&&t.scale(d,d),t.translate(null==K?0:-K,null==y?0:-y)},L.Element={},L.EmptyProperty=new L.Property("EMPTY",""),L.Element.ElementBase=function(t){this.attributes={},this.styles={},this.stylesSpecificity={},this.children=[],this.attribute=function(t,j){var C=this.attributes[t];return null!=C?C:(1==j&&(C=new L.Property(t,""),this.attributes[t]=C),C||L.EmptyProperty)},this.getHrefAttribute=function(){for(var t in this.attributes)if("href"==t||t.match(/:href$/))return this.attributes[t];return L.EmptyProperty},this.style=function(t,j,C){var k=this.styles[t];if(null!=k)return k;var i=this.attribute(t);if(null!=i&&i.hasValue())return this.styles[t]=i,i;if(1!=C){var U=this.parent;if(null!=U){var K=U.style(t);if(null!=K&&K.hasValue())return K}}return 1==j&&(k=new L.Property(t,""),this.styles[t]=k),k||L.EmptyProperty},this.render=function(t){if("none"!=this.style("display").value&&"hidden"!=this.style("visibility").value){if(t.save(),this.style("mask").hasValue()){var j=this.style("mask").getDefinition();null!=j&&j.apply(t,this)}else this.setContext(t),this.renderChildren(t),this.clearContext(t);t.restore()}},this.setContext=function(t){},this.clearContext=function(t){},this.renderChildren=function(t){for(var j=0;j<this.children.length;j++)this.children[j].render(t)},this.addChild=function(t,j){var C=t;j&&(C=L.CreateElement(t)),C.parent=this,"title"!=C.type&&this.children.push(C)},this.addStylesFromStyleDefinition=function(){for(var j in L.Styles)if("@"!=j[0]&&y(t,j)){var C=L.Styles[j],k=L.StylesSpecificity[j];if(null!=C)for(var i in C){var U=this.stylesSpecificity[i];void 0===U&&(U="000"),k>U&&(this.styles[i]=C[i],this.stylesSpecificity[i]=k)}}};var j=new RegExp("^[A-Z-]+$");if(null!=t&&1==t.nodeType){for(var C=0;C<t.attributes.length;C++){var k=t.attributes[C],i=function(t){return j.test(t)?t.toLowerCase():t}(k.nodeName);this.attributes[i]=new L.Property(i,k.value)}if(this.addStylesFromStyleDefinition(),this.attribute("style").hasValue())for(var U=this.attribute("style").value.split(";"),C=0;C<U.length;C++)if(""!=L.trim(U[C])){var K=U[C].split(":"),X=L.trim(K[0]),u=L.trim(K[1]);this.styles[X]=new L.Property(X,u)}this.attribute("id").hasValue()&&null==L.Definitions[this.attribute("id").value]&&(L.Definitions[this.attribute("id").value]=this);for(var C=0;C<t.childNodes.length;C++){var a=t.childNodes[C];if(1==a.nodeType&&this.addChild(a,!0),this.captureTextNodes&&(3==a.nodeType||4==a.nodeType)){var B=a.value||a.text||a.textContent||"";""!=L.compressSpaces(B)&&this.addChild(new L.Element.tspan(a),!1)}}}},L.Element.RenderedElementBase=function(t){this.base=L.Element.ElementBase,this.base(t),this.setContext=function(t){if(this.style("fill").isUrlDefinition()){var j=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity"));null!=j&&(t.fillStyle=j)}else if(this.style("fill").hasValue()){var C=this.style("fill");"currentColor"==C.value&&(C.value=this.style("color").value),"inherit"!=C.value&&(t.fillStyle="none"==C.value?"rgba(0,0,0,0)":C.value)}if(this.style("fill-opacity").hasValue()){var C=new L.Property("fill",t.fillStyle);C=C.addOpacity(this.style("fill-opacity")),t.fillStyle=C.value}if(this.style("stroke").isUrlDefinition()){var j=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity"));null!=j&&(t.strokeStyle=j)}else if(this.style("stroke").hasValue()){var k=this.style("stroke");"currentColor"==k.value&&(k.value=this.style("color").value),"inherit"!=k.value&&(t.strokeStyle="none"==k.value?"rgba(0,0,0,0)":k.value)}if(this.style("stroke-opacity").hasValue()){var k=new L.Property("stroke",t.strokeStyle);k=k.addOpacity(this.style("stroke-opacity")),t.strokeStyle=k.value}if(this.style("stroke-width").hasValue()){var i=this.style("stroke-width").toPixels();t.lineWidth=0==i?.001:i}if(this.style("stroke-linecap").hasValue()&&(t.lineCap=this.style("stroke-linecap").value),this.style("stroke-linejoin").hasValue()&&(t.lineJoin=this.style("stroke-linejoin").value),this.style("stroke-miterlimit").hasValue()&&(t.miterLimit=this.style("stroke-miterlimit").value),this.style("stroke-dasharray").hasValue()&&"none"!=this.style("stroke-dasharray").value){var U=L.ToNumberArray(this.style("stroke-dasharray").value);void 0!==t.setLineDash?t.setLineDash(U):void 0!==t.webkitLineDash?t.webkitLineDash=U:void 0===t.mozDash||1==U.length&&0==U[0]||(t.mozDash=U);var K=this.style("stroke-dashoffset").numValueOrDefault(1);void 0!==t.lineDashOffset?t.lineDashOffset=K:void 0!==t.webkitLineDashOffset?t.webkitLineDashOffset=K:void 0!==t.mozDashOffset&&(t.mozDashOffset=K)}if(void 0!==t.font&&(t.font=L.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString()),this.style("text-align").hasValue()?t.textAlign=this.style("text-align").value:t.textAlign="start",this.style("transform",!1,!0).hasValue()){new L.Transform(this.style("transform",!1,!0).value).apply(t)}if(this.style("clip-path",!1,!0).hasValue()){var y=this.style("clip-path",!1,!0).getDefinition();null!=y&&y.apply(t)}this.style("opacity").hasValue()&&(t.globalAlpha=this.style("opacity").numValue())}},L.Element.RenderedElementBase.prototype=new L.Element.ElementBase,L.Element.PathElementBase=function(t){this.base=L.Element.RenderedElementBase,this.base(t),this.path=function(t){return null!=t&&t.beginPath(),new L.BoundingBox},this.renderChildren=function(t){this.path(t),L.Mouse.checkPath(this,t),""!=t.fillStyle&&("inherit"!=this.style("fill-rule").valueOrDefault("inherit")?t.fill(this.style("fill-rule").value):t.fill()),""!=t.strokeStyle&&t.stroke();var j=this.getMarkers();if(null!=j){if(this.style("marker-start").isUrlDefinition()){var C=this.style("marker-start").getDefinition();C.render(t,j[0][0],j[0][1],"start")}if(this.style("marker-mid").isUrlDefinition())for(var C=this.style("marker-mid").getDefinition(),k=1;k<j.length-1;k++)C.render(t,j[k][0],j[k][1],"mid",j[k-1][1]);if(this.style("marker-end").isUrlDefinition()){var C=this.style("marker-end").getDefinition();C.render(t,j[j.length-1][0],j[j.length-1][1],"end")}}},this.getBoundingBox=function(){return this.path()},this.getMarkers=function(){return null}},L.Element.PathElementBase.prototype=new L.Element.RenderedElementBase,L.Element.svg=function(j){this.base=L.Element.RenderedElementBase,this.base(j),this.baseClearContext=this.clearContext,this.clearContext=function(t){this.baseClearContext(t),L.ViewPort.RemoveCurrent()},this.baseSetContext=this.setContext,this.setContext=function(j){j.strokeStyle="rgba(0,0,0,0)",j.lineCap="butt",j.lineJoin="miter",j.miterLimit=4,void 0!==j.font&&void 0!==t.getComputedStyle&&(j.font=t.getComputedStyle(j.canvas).getPropertyValue("font")),this.baseSetContext(j),this.attribute("x").hasValue()||(this.attribute("x",!0).value=0),this.attribute("y").hasValue()||(this.attribute("y",!0).value=0),j.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var C=L.ViewPort.width(),k=L.ViewPort.height(),i=0,U=0;if(this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%"),this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%"),void 0===this.root&&(C=this.attribute("width").toPixels("x"),k=this.attribute("height").toPixels("y"),
this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(i=-this.attribute("refX").toPixels("x"),U=-this.attribute("refY").toPixels("y")),"visible"!=this.attribute("overflow").valueOrDefault("hidden")&&(j.beginPath(),j.moveTo(i,U),j.lineTo(C,U),j.lineTo(C,k),j.lineTo(i,k),j.closePath(),j.clip())),L.ViewPort.SetCurrent(C,k),this.attribute("viewBox").hasValue()){var K=L.ToNumberArray(this.attribute("viewBox").value),y=K[0],X=K[1];C=K[2],k=K[3],L.AspectRatio(j,this.attribute("preserveAspectRatio").value,L.ViewPort.width(),C,L.ViewPort.height(),k,y,X,this.attribute("refX").value,this.attribute("refY").value),L.ViewPort.RemoveCurrent(),L.ViewPort.SetCurrent(K[2],K[3])}else 0===i&&0===U||j.translate(i,U)}},L.Element.svg.prototype=new L.Element.RenderedElementBase,L.Element.rect=function(t){this.base=L.Element.PathElementBase,this.base(t),this.path=function(t){var j=this.attribute("x").toPixels("x"),C=this.attribute("y").toPixels("y"),k=this.attribute("width").toPixels("x"),i=this.attribute("height").toPixels("y"),U=this.attribute("rx").toPixels("x"),K=this.attribute("ry").toPixels("y");return this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(K=U),this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(U=K),U=Math.min(U,k/2),K=Math.min(K,i/2),null!=t&&(t.beginPath(),t.moveTo(j+U,C),t.lineTo(j+k-U,C),t.quadraticCurveTo(j+k,C,j+k,C+K),t.lineTo(j+k,C+i-K),t.quadraticCurveTo(j+k,C+i,j+k-U,C+i),t.lineTo(j+U,C+i),t.quadraticCurveTo(j,C+i,j,C+i-K),t.lineTo(j,C+K),t.quadraticCurveTo(j,C,j+U,C),t.closePath()),new L.BoundingBox(j,C,j+k,C+i)}},L.Element.rect.prototype=new L.Element.PathElementBase,L.Element.circle=function(t){this.base=L.Element.PathElementBase,this.base(t),this.path=function(t){var j=this.attribute("cx").toPixels("x"),C=this.attribute("cy").toPixels("y"),k=this.attribute("r").toPixels();return null!=t&&(t.beginPath(),t.arc(j,C,k,0,2*Math.PI,!0),t.closePath()),new L.BoundingBox(j-k,C-k,j+k,C+k)}},L.Element.circle.prototype=new L.Element.PathElementBase,L.Element.ellipse=function(t){this.base=L.Element.PathElementBase,this.base(t),this.path=function(t){var j=(Math.sqrt(2)-1)/3*4,C=this.attribute("rx").toPixels("x"),k=this.attribute("ry").toPixels("y"),i=this.attribute("cx").toPixels("x"),U=this.attribute("cy").toPixels("y");return null!=t&&(t.beginPath(),t.moveTo(i,U-k),t.bezierCurveTo(i+j*C,U-k,i+C,U-j*k,i+C,U),t.bezierCurveTo(i+C,U+j*k,i+j*C,U+k,i,U+k),t.bezierCurveTo(i-j*C,U+k,i-C,U+j*k,i-C,U),t.bezierCurveTo(i-C,U-j*k,i-j*C,U-k,i,U-k),t.closePath()),new L.BoundingBox(i-C,U-k,i+C,U+k)}},L.Element.ellipse.prototype=new L.Element.PathElementBase,L.Element.line=function(t){this.base=L.Element.PathElementBase,this.base(t),this.getPoints=function(){return[new L.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new L.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]},this.path=function(t){var j=this.getPoints();return null!=t&&(t.beginPath(),t.moveTo(j[0].x,j[0].y),t.lineTo(j[1].x,j[1].y)),new L.BoundingBox(j[0].x,j[0].y,j[1].x,j[1].y)},this.getMarkers=function(){var t=this.getPoints(),j=t[0].angleTo(t[1]);return[[t[0],j],[t[1],j]]}},L.Element.line.prototype=new L.Element.PathElementBase,L.Element.polyline=function(t){this.base=L.Element.PathElementBase,this.base(t),this.points=L.CreatePath(this.attribute("points").value),this.path=function(t){var j=new L.BoundingBox(this.points[0].x,this.points[0].y);null!=t&&(t.beginPath(),t.moveTo(this.points[0].x,this.points[0].y));for(var C=1;C<this.points.length;C++)j.addPoint(this.points[C].x,this.points[C].y),null!=t&&t.lineTo(this.points[C].x,this.points[C].y);return j},this.getMarkers=function(){for(var t=[],j=0;j<this.points.length-1;j++)t.push([this.points[j],this.points[j].angleTo(this.points[j+1])]);return t.length>0&&t.push([this.points[this.points.length-1],t[t.length-1][1]]),t}},L.Element.polyline.prototype=new L.Element.PathElementBase,L.Element.polygon=function(t){this.base=L.Element.polyline,this.base(t),this.basePath=this.path,this.path=function(t){var j=this.basePath(t);return null!=t&&(t.lineTo(this.points[0].x,this.points[0].y),t.closePath()),j}},L.Element.polygon.prototype=new L.Element.polyline,L.Element.path=function(t){this.base=L.Element.PathElementBase,this.base(t);var j=this.attribute("d").value;j=j.replace(/,/gm," ");for(var C=0;C<2;C++)j=j.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2");j=j.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),j=j.replace(/([0-9])([+\-])/gm,"$1 $2");for(var C=0;C<2;C++)j=j.replace(/(\.[0-9]*)(\.)/gm,"$1 $2");j=j.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),j=L.compressSpaces(j),j=L.trim(j),this.PathParser=new function(t){this.tokens=t.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new L.Point(0,0),this.control=new L.Point(0,0),this.current=new L.Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return!!this.isEnd()||null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i++,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var t=new L.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(t)},this.getAsControlPoint=function(){var t=this.getPoint();return this.control=t,t},this.getAsCurrentPoint=function(){var t=this.getPoint();return this.current=t,t},this.getReflectedControlPoint=function(){return"c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase()&&"q"!=this.previousCommand.toLowerCase()&&"t"!=this.previousCommand.toLowerCase()?this.current:new L.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y)},this.makeAbsolute=function(t){return this.isRelativeCommand()&&(t.x+=this.current.x,t.y+=this.current.y),t},this.addMarker=function(t,j,C){null!=C&&this.angles.length>0&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(C)),this.addMarkerAngle(t,null==j?null:j.angleTo(t))},this.addMarkerAngle=function(t,j){this.points.push(t),this.angles.push(j)},this.getMarkerPoints=function(){return this.points},this.getMarkerAngles=function(){for(var t=0;t<this.angles.length;t++)if(null==this.angles[t])for(var j=t+1;j<this.angles.length;j++)if(null!=this.angles[j]){this.angles[t]=this.angles[j];break}return this.angles}}(j),this.path=function(t){var j=this.PathParser;j.reset();var C=new L.BoundingBox;for(null!=t&&t.beginPath();!j.isEnd();)switch(j.nextCommand(),j.command){case"M":case"m":var k=j.getAsCurrentPoint();for(j.addMarker(k),C.addPoint(k.x,k.y),null!=t&&t.moveTo(k.x,k.y),j.start=j.current;!j.isCommandOrEnd();){var k=j.getAsCurrentPoint();j.addMarker(k,j.start),C.addPoint(k.x,k.y),null!=t&&t.lineTo(k.x,k.y)}break;case"L":case"l":for(;!j.isCommandOrEnd();){var i=j.current,k=j.getAsCurrentPoint();j.addMarker(k,i),C.addPoint(k.x,k.y),null!=t&&t.lineTo(k.x,k.y)}break;case"H":case"h":for(;!j.isCommandOrEnd();){var U=new L.Point((j.isRelativeCommand()?j.current.x:0)+j.getScalar(),j.current.y);j.addMarker(U,j.current),j.current=U,C.addPoint(j.current.x,j.current.y),null!=t&&t.lineTo(j.current.x,j.current.y)}break;case"V":case"v":for(;!j.isCommandOrEnd();){var U=new L.Point(j.current.x,(j.isRelativeCommand()?j.current.y:0)+j.getScalar());j.addMarker(U,j.current),j.current=U,C.addPoint(j.current.x,j.current.y),null!=t&&t.lineTo(j.current.x,j.current.y)}break;case"C":case"c":for(;!j.isCommandOrEnd();){var K=j.current,y=j.getPoint(),X=j.getAsControlPoint(),u=j.getAsCurrentPoint();j.addMarker(u,X,y),C.addBezierCurve(K.x,K.y,y.x,y.y,X.x,X.y,u.x,u.y),null!=t&&t.bezierCurveTo(y.x,y.y,X.x,X.y,u.x,u.y)}break;case"S":case"s":for(;!j.isCommandOrEnd();){var K=j.current,y=j.getReflectedControlPoint(),X=j.getAsControlPoint(),u=j.getAsCurrentPoint();j.addMarker(u,X,y),C.addBezierCurve(K.x,K.y,y.x,y.y,X.x,X.y,u.x,u.y),null!=t&&t.bezierCurveTo(y.x,y.y,X.x,X.y,u.x,u.y),j.previousCommand=j.command}break;case"Q":case"q":for(;!j.isCommandOrEnd();){var K=j.current,X=j.getAsControlPoint(),u=j.getAsCurrentPoint();j.addMarker(u,X,X),C.addQuadraticCurve(K.x,K.y,X.x,X.y,u.x,u.y),null!=t&&t.quadraticCurveTo(X.x,X.y,u.x,u.y)}break;case"T":case"t":for(;!j.isCommandOrEnd();){var K=j.current,X=j.getReflectedControlPoint();j.control=X;var u=j.getAsCurrentPoint();j.addMarker(u,X,X),C.addQuadraticCurve(K.x,K.y,X.x,X.y,u.x,u.y),null!=t&&t.quadraticCurveTo(X.x,X.y,u.x,u.y),j.previousCommand=j.command}break;case"A":case"a":for(;!j.isCommandOrEnd();){var K=j.current,a=j.getScalar(),B=j.getScalar(),c=j.getScalar()*(Math.PI/180),f=j.getScalar(),R=j.getScalar(),u=j.getAsCurrentPoint(),d=new L.Point(Math.cos(c)*(K.x-u.x)/2+Math.sin(c)*(K.y-u.y)/2,-Math.sin(c)*(K.x-u.x)/2+Math.cos(c)*(K.y-u.y)/2),$=Math.pow(d.x,2)/Math.pow(a,2)+Math.pow(d.y,2)/Math.pow(B,2);$>1&&(a*=Math.sqrt($),B*=Math.sqrt($));var m=(f==R?-1:1)*Math.sqrt((Math.pow(a,2)*Math.pow(B,2)-Math.pow(a,2)*Math.pow(d.y,2)-Math.pow(B,2)*Math.pow(d.x,2))/(Math.pow(a,2)*Math.pow(d.y,2)+Math.pow(B,2)*Math.pow(d.x,2)));isNaN(m)&&(m=0);var D=new L.Point(m*a*d.y/B,m*-B*d.x/a),b=new L.Point((K.x+u.x)/2+Math.cos(c)*D.x-Math.sin(c)*D.y,(K.y+u.y)/2+Math.sin(c)*D.x+Math.cos(c)*D.y),J=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},v=function(t,j){return(t[0]*j[0]+t[1]*j[1])/(J(t)*J(j))},H=function(t,j){return(t[0]*j[1]<t[1]*j[0]?-1:1)*Math.acos(v(t,j))},G=H([1,0],[(d.x-D.x)/a,(d.y-D.y)/B]),Z=[(d.x-D.x)/a,(d.y-D.y)/B],q=[(-d.x-D.x)/a,(-d.y-D.y)/B],A=H(Z,q);v(Z,q)<=-1&&(A=Math.PI),v(Z,q)>=1&&(A=0);var z=1-R?1:-1,T=G+z*(A/2),E=new L.Point(b.x+a*Math.cos(T),b.y+B*Math.sin(T));if(j.addMarkerAngle(E,T-z*Math.PI/2),j.addMarkerAngle(u,T-z*Math.PI),C.addPoint(u.x,u.y),null!=t){var v=a>B?a:B,s=a>B?1:a/B,e=a>B?B/a:1;t.translate(b.x,b.y),t.rotate(c),t.scale(s,e),t.arc(0,0,v,G,G+A,1-R),t.scale(1/s,1/e),t.rotate(-c),t.translate(-b.x,-b.y)}}break;case"Z":case"z":null!=t&&t.closePath(),j.current=j.start}return C},this.getMarkers=function(){for(var t=this.PathParser.getMarkerPoints(),j=this.PathParser.getMarkerAngles(),C=[],k=0;k<t.length;k++)C.push([t[k],j[k]]);return C}},L.Element.path.prototype=new L.Element.PathElementBase,L.Element.pattern=function(t){this.base=L.Element.ElementBase,this.base(t),this.createPattern=function(t,j){var C=this.attribute("width").toPixels("x",!0),k=this.attribute("height").toPixels("y",!0),i=new L.Element.svg;i.attributes.viewBox=new L.Property("viewBox",this.attribute("viewBox").value),i.attributes.width=new L.Property("width",C+"px"),i.attributes.height=new L.Property("height",k+"px"),i.attributes.transform=new L.Property("transform",this.attribute("patternTransform").value),i.children=this.children;var U=document.createElement("canvas");U.width=C,U.height=k;var K=U.getContext("2d");this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&K.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0));for(var y=-1;y<=1;y++)for(var X=-1;X<=1;X++)K.save(),i.attributes.x=new L.Property("x",y*U.width),i.attributes.y=new L.Property("y",X*U.height),i.render(K),K.restore();return t.createPattern(U,"repeat")}},L.Element.pattern.prototype=new L.Element.ElementBase,L.Element.marker=function(t){this.base=L.Element.ElementBase,this.base(t),this.baseRender=this.render,this.render=function(t,j,k,i,U){if(U!==C){k=(k+U)/2;var K=(k-U)%(2*Math.PI);Math.abs(K)>Math.PI&&(k+=Math.PI)}t.save(),t.translate(j.x,j.y);var y=this.attribute("orient").valueOrDefault("auto")||"";"auto"===y?t.rotate(k):"auto-start-reverse"===y?t.rotate("start"===i?k+Math.PI:k):y&&t.rotate(new L.Property("angle",y).toRadians()),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&t.scale(t.lineWidth,t.lineWidth);var X=new L.Element.svg;X.attributes.viewBox=new L.Property("viewBox",this.attribute("viewBox").value),X.attributes.refX=new L.Property("refX",this.attribute("refX").value),X.attributes.refY=new L.Property("refY",this.attribute("refY").value),X.attributes.width=new L.Property("width",this.attribute("markerWidth").value),X.attributes.height=new L.Property("height",this.attribute("markerHeight").value),X.attributes.fill=new L.Property("fill",this.attribute("fill").valueOrDefault("black")),X.attributes.stroke=new L.Property("stroke",this.attribute("stroke").valueOrDefault("none")),X.children=this.children,X.render(t),t.restore()}},L.Element.marker.prototype=new L.Element.ElementBase,L.Element.defs=function(t){this.base=L.Element.ElementBase,this.base(t),this.render=function(t){}},L.Element.defs.prototype=new L.Element.ElementBase,L.Element.GradientBase=function(t){this.base=L.Element.ElementBase,this.base(t),this.stops=[];for(var j=0;j<this.children.length;j++){var C=this.children[j];"stop"==C.type&&this.stops.push(C)}this.getGradient=function(){},this.gradientUnits=function(){return this.attribute("gradientUnits").valueOrDefault("objectBoundingBox")},this.attributesToInherit=["gradientUnits"],this.inheritStopContainer=function(t){for(var j=0;j<this.attributesToInherit.length;j++){var C=this.attributesToInherit[j];!this.attribute(C).hasValue()&&t.attribute(C).hasValue()&&(this.attribute(C,!0).value=t.attribute(C).value)}},this.createGradient=function(t,j,C){var k=this;this.getHrefAttribute().hasValue()&&(k=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(k));var i=function(t){if(C.hasValue()){return new L.Property("color",t).addOpacity(C).value}return t},U=this.getGradient(t,j);if(null==U)return i(k.stops[k.stops.length-1].color);for(var K=0;K<k.stops.length;K++)U.addColorStop(k.stops[K].offset,i(k.stops[K].color));if(this.attribute("gradientTransform").hasValue()){var y=L.ViewPort.viewPorts[0],X=new L.Element.rect;X.attributes.x=new L.Property("x",-L.MAX_VIRTUAL_PIXELS/3),X.attributes.y=new L.Property("y",-L.MAX_VIRTUAL_PIXELS/3),X.attributes.width=new L.Property("width",L.MAX_VIRTUAL_PIXELS),X.attributes.height=new L.Property("height",L.MAX_VIRTUAL_PIXELS);var u=new L.Element.g;u.attributes.transform=new L.Property("transform",this.attribute("gradientTransform").value),u.children=[X];var a=new L.Element.svg;a.attributes.x=new L.Property("x",0),a.attributes.y=new L.Property("y",0),a.attributes.width=new L.Property("width",y.width),a.attributes.height=new L.Property("height",y.height),a.children=[u];var B=document.createElement("canvas");B.width=y.width,B.height=y.height;var c=B.getContext("2d");c.fillStyle=U,a.render(c);var f=c.createPattern(B,"no-repeat");return f.gradient=U,f.gradientTransform=this.attribute("gradientTransform").value,f.trans=new L.Transform(this.attribute("gradientTransform").value).getMatrix(),f}return U}},L.Element.GradientBase.prototype=new L.Element.ElementBase,L.Element.linearGradient=function(t){this.base=L.Element.GradientBase,this.base(t),this.attributesToInherit.push("x1"),this.attributesToInherit.push("y1"),this.attributesToInherit.push("x2"),this.attributesToInherit.push("y2"),this.getGradient=function(t,j){var C="objectBoundingBox"==this.gradientUnits()?j.getBoundingBox():null;this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var k="objectBoundingBox"==this.gradientUnits()?C.x()+C.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),i="objectBoundingBox"==this.gradientUnits()?C.y()+C.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),U="objectBoundingBox"==this.gradientUnits()?C.x()+C.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),K="objectBoundingBox"==this.gradientUnits()?C.y()+C.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return k==U&&i==K?null:t.createLinearGradient(k,i,U,K)}},L.Element.linearGradient.prototype=new L.Element.GradientBase,L.Element.radialGradient=function(t){this.base=L.Element.GradientBase,this.base(t),this.attributesToInherit.push("cx"),this.attributesToInherit.push("cy"),this.attributesToInherit.push("r"),this.attributesToInherit.push("fx"),this.attributesToInherit.push("fy"),this.getGradient=function(t,j){var C=j.getBoundingBox();this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%"),this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%"),this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var k="objectBoundingBox"==this.gradientUnits()?C.x()+C.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),i="objectBoundingBox"==this.gradientUnits()?C.y()+C.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),U=k,K=i;this.attribute("fx").hasValue()&&(U="objectBoundingBox"==this.gradientUnits()?C.x()+C.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")),this.attribute("fy").hasValue()&&(K="objectBoundingBox"==this.gradientUnits()?C.y()+C.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"));var y="objectBoundingBox"==this.gradientUnits()?(C.width()+C.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return t.createRadialGradient(U,K,0,k,i,y)}},L.Element.radialGradient.prototype=new L.Element.GradientBase,L.Element.stop=function(t){this.base=L.Element.ElementBase,this.base(t),this.offset=this.attribute("offset").numValue(),this.offset<0&&(this.offset=0),this.offset>1&&(this.offset=1);var j=this.style("stop-color",!0);""===j.value&&(j.value="#000"),this.style("stop-opacity").hasValue()&&(j=j.addOpacity(this.style("stop-opacity"))),this.color=j.value},L.Element.stop.prototype=new L.Element.ElementBase,L.Element.AnimateBase=function(t){this.base=L.Element.ElementBase,this.base(t),L.Animations.push(this),this.duration=0,this.begin=this.attribute("begin").toMilliseconds(),this.maxDuration=this.begin+this.attribute("dur").toMilliseconds(),this.getProperty=function(){var t=this.attribute("attributeType").value,j=this.attribute("attributeName").value;return"CSS"==t?this.parent.style(j,!0):this.parent.attribute(j,!0)},this.initialValue=null,this.initialUnits="",this.removed=!1,this.calcValue=function(){return""},this.update=function(t){if(null==this.initialValue&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits()),this.duration>this.maxDuration){if("indefinite"==this.attribute("repeatCount").value||"indefinite"==this.attribute("repeatDur").value)this.duration=0;else if("freeze"!=this.attribute("fill").valueOrDefault("remove")||this.frozen){if("remove"==this.attribute("fill").valueOrDefault("remove")&&!this.removed)return this.removed=!0,this.getProperty().value=this.parent.animationFrozen?this.parent.animationFrozenValue:this.initialValue,!0}else this.frozen=!0,this.parent.animationFrozen=!0,this.parent.animationFrozenValue=this.getProperty().value;return!1}this.duration=this.duration+t;var j=!1;if(this.begin<this.duration){var C=this.calcValue();if(this.attribute("type").hasValue()){C=this.attribute("type").value+"("+C+")"}this.getProperty().value=C,j=!0}return j},this.from=this.attribute("from"),this.to=this.attribute("to"),this.values=this.attribute("values"),this.values.hasValue()&&(this.values.value=this.values.value.split(";")),this.progress=function(){var t={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var j=t.progress*(this.values.value.length-1),C=Math.floor(j),k=Math.ceil(j);t.from=new L.Property("from",parseFloat(this.values.value[C])),t.to=new L.Property("to",parseFloat(this.values.value[k])),t.progress=(j-C)/(k-C)}else t.from=this.from,t.to=this.to;return t}},L.Element.AnimateBase.prototype=new L.Element.ElementBase,L.Element.animate=function(t){this.base=L.Element.AnimateBase,this.base(t),this.calcValue=function(){var t=this.progress();return t.from.numValue()+(t.to.numValue()-t.from.numValue())*t.progress+this.initialUnits}},L.Element.animate.prototype=new L.Element.AnimateBase,L.Element.animateColor=function(t){this.base=L.Element.AnimateBase,this.base(t),this.calcValue=function(){var t=this.progress(),C=new j(t.from.value),k=new j(t.to.value);if(C.ok&&k.ok){var i=C.r+(k.r-C.r)*t.progress,U=C.g+(k.g-C.g)*t.progress,K=C.b+(k.b-C.b)*t.progress;return"rgb("+parseInt(i,10)+","+parseInt(U,10)+","+parseInt(K,10)+")"}return this.attribute("from").value}},L.Element.animateColor.prototype=new L.Element.AnimateBase,L.Element.animateTransform=function(t){this.base=L.Element.AnimateBase,this.base(t),this.calcValue=function(){for(var t=this.progress(),j=L.ToNumberArray(t.from.value),C=L.ToNumberArray(t.to.value),k="",i=0;i<j.length;i++)k+=j[i]+(C[i]-j[i])*t.progress+" ";return k}},L.Element.animateTransform.prototype=new L.Element.animate,L.Element.font=function(t){this.base=L.Element.ElementBase,this.base(t),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.isRTL=!1,this.isArabic=!1,this.fontFace=null,this.missingGlyph=null,this.glyphs=[];for(var j=0;j<this.children.length;j++){var C=this.children[j];"font-face"==C.type?(this.fontFace=C,C.style("font-family").hasValue()&&(L.Definitions[C.style("font-family").value]=this)):"missing-glyph"==C.type?this.missingGlyph=C:"glyph"==C.type&&(""!=C.arabicForm?(this.isRTL=!0,this.isArabic=!0,void 0===this.glyphs[C.unicode]&&(this.glyphs[C.unicode]=[]),this.glyphs[C.unicode][C.arabicForm]=C):this.glyphs[C.unicode]=C)}},L.Element.font.prototype=new L.Element.ElementBase,L.Element.fontface=function(t){this.base=L.Element.ElementBase,this.base(t),this.ascent=this.attribute("ascent").value,this.descent=this.attribute("descent").value,this.unitsPerEm=this.attribute("units-per-em").numValue()},L.Element.fontface.prototype=new L.Element.ElementBase,L.Element.missingglyph=function(t){this.base=L.Element.path,this.base(t),this.horizAdvX=0},L.Element.missingglyph.prototype=new L.Element.path,L.Element.glyph=function(t){this.base=L.Element.path,this.base(t),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.unicode=this.attribute("unicode").value,this.arabicForm=this.attribute("arabic-form").value},L.Element.glyph.prototype=new L.Element.path,L.Element.text=function(t){this.captureTextNodes=!0,this.base=L.Element.RenderedElementBase,this.base(t),this.baseSetContext=this.setContext,this.setContext=function(t){this.baseSetContext(t);var j=this.style("dominant-baseline").toTextBaseline();null==j&&(j=this.style("alignment-baseline").toTextBaseline()),null!=j&&(t.textBaseline=j)},this.getBoundingBox=function(){var t=this.attribute("x").toPixels("x"),j=this.attribute("y").toPixels("y"),C=this.parent.style("font-size").numValueOrDefault(L.Font.Parse(L.ctx.font).fontSize);return new L.BoundingBox(t,j-C,t+Math.floor(2*C/3)*this.children[0].getText().length,j)},this.renderChildren=function(t){this.x=this.attribute("x").toPixels("x"),this.y=this.attribute("y").toPixels("y"),this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x")),this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),this.x+=this.getAnchorDelta(t,this,0);for(var j=0;j<this.children.length;j++)this.renderChild(t,this,this,j)},this.getAnchorDelta=function(t,j,C){var k=this.style("text-anchor").valueOrDefault("start");if("start"!=k){for(var i=0,U=C;U<j.children.length;U++){var K=j.children[U];if(U>C&&K.attribute("x").hasValue())break;K.measureTextRecursive&&(i+=K.measureTextRecursive(t))}return-1*("end"==k?i:i/2)}return 0},this.renderChild=function(t,j,C,k){var i=C.children[k];i.attribute("x").hasValue()?(i.x=i.attribute("x").toPixels("x")+j.getAnchorDelta(t,C,k),i.attribute("dx").hasValue()&&(i.x+=i.attribute("dx").toPixels("x"))):(i.attribute("dx").hasValue()&&(j.x+=i.attribute("dx").toPixels("x")),i.x=j.x),j.x=i.x+(i.measureText?i.measureText(t):0),i.attribute("y").hasValue()?(i.y=i.attribute("y").toPixels("y"),i.attribute("dy").hasValue()&&(i.y+=i.attribute("dy").toPixels("y"))):(i.attribute("dy").hasValue()&&(j.y+=i.attribute("dy").toPixels("y")),i.y=j.y),j.y=i.y,i.render(t);for(var k=0;k<i.children.length;k++)j.renderChild(t,j,i,k)}},L.Element.text.prototype=new L.Element.RenderedElementBase,L.Element.TextElementBase=function(t){this.base=L.Element.RenderedElementBase,this.base(t),this.getGlyph=function(t,j,C){var k=j[C],i=null;if(t.isArabic){var U="isolated";(0==C||" "==j[C-1])&&C<j.length-2&&" "!=j[C+1]&&(U="terminal"),C>0&&" "!=j[C-1]&&C<j.length-2&&" "!=j[C+1]&&(U="medial"),C>0&&" "!=j[C-1]&&(C==j.length-1||" "==j[C+1])&&(U="initial"),void 0!==t.glyphs[k]&&null==(i=t.glyphs[k][U])&&"glyph"==t.glyphs[k].type&&(i=t.glyphs[k])}else i=t.glyphs[k];return null==i&&(i=t.missingGlyph),i},this.renderChildren=function(t){var j=this.parent.style("font-family").getDefinition();if(null==j)""!=t.fillStyle&&t.fillText(L.compressSpaces(this.getText()),this.x,this.y),""!=t.strokeStyle&&t.strokeText(L.compressSpaces(this.getText()),this.x,this.y);else{var C=this.parent.style("font-size").numValueOrDefault(L.Font.Parse(L.ctx.font).fontSize),k=this.parent.style("font-style").valueOrDefault(L.Font.Parse(L.ctx.font).fontStyle),i=this.getText();j.isRTL&&(i=i.split("").reverse().join(""));for(var U=L.ToNumberArray(this.parent.attribute("dx").value),K=0;K<i.length;K++){var y=this.getGlyph(j,i,K),X=C/j.fontFace.unitsPerEm;t.translate(this.x,this.y),t.scale(X,-X);var u=t.lineWidth;t.lineWidth=t.lineWidth*j.fontFace.unitsPerEm/C,"italic"==k&&t.transform(1,0,.4,1,0,0),y.render(t),"italic"==k&&t.transform(1,0,-.4,1,0,0),t.lineWidth=u,t.scale(1/X,-1/X),t.translate(-this.x,-this.y),this.x+=C*(y.horizAdvX||j.horizAdvX)/j.fontFace.unitsPerEm,void 0===U[K]||isNaN(U[K])||(this.x+=U[K])}}},this.getText=function(){},this.measureTextRecursive=function(t){for(var j=this.measureText(t),C=0;C<this.children.length;C++)j+=this.children[C].measureTextRecursive(t);return j},this.measureText=function(t){var j=this.parent.style("font-family").getDefinition();if(null!=j){var C=this.parent.style("font-size").numValueOrDefault(L.Font.Parse(L.ctx.font).fontSize),k=0,i=this.getText();j.isRTL&&(i=i.split("").reverse().join(""));for(var U=L.ToNumberArray(this.parent.attribute("dx").value),K=0;K<i.length;K++){k+=(this.getGlyph(j,i,K).horizAdvX||j.horizAdvX)*C/j.fontFace.unitsPerEm,void 0===U[K]||isNaN(U[K])||(k+=U[K])}return k}var y=L.compressSpaces(this.getText());if(!t.measureText)return 10*y.length;t.save(),this.setContext(t);var X=t.measureText(y).width;return t.restore(),X}},L.Element.TextElementBase.prototype=new L.Element.RenderedElementBase,L.Element.tspan=function(t){this.captureTextNodes=!0,this.base=L.Element.TextElementBase,this.base(t),this.text=L.compressSpaces(t.value||t.text||t.textContent||""),this.getText=function(){return this.children.length>0?"":this.text}},L.Element.tspan.prototype=new L.Element.TextElementBase,L.Element.tref=function(t){this.base=L.Element.TextElementBase,this.base(t),this.getText=function(){var t=this.getHrefAttribute().getDefinition();if(null!=t)return t.children[0].getText()}},L.Element.tref.prototype=new L.Element.TextElementBase,L.Element.a=function(j){this.base=L.Element.TextElementBase,this.base(j),this.hasText=j.childNodes.length>0;for(var C=0;C<j.childNodes.length;C++)3!=j.childNodes[C].nodeType&&(this.hasText=!1);this.text=this.hasText?j.childNodes[0].value:"",this.getText=function(){return this.text},this.baseRenderChildren=this.renderChildren,this.renderChildren=function(t){if(this.hasText){this.baseRenderChildren(t);var j=new L.Property("fontSize",L.Font.Parse(L.ctx.font).fontSize);L.Mouse.checkBoundingBox(this,new L.BoundingBox(this.x,this.y-j.toPixels("y"),this.x+this.measureText(t),this.y))}else if(this.children.length>0){var C=new L.Element.g;C.children=this.children,C.parent=this,C.render(t)}},this.onclick=function(){t.open(this.getHrefAttribute().value)},this.onmousemove=function(){L.ctx.canvas.style.cursor="pointer"}},L.Element.a.prototype=new L.Element.TextElementBase,L.Element.image=function(t){this.base=L.Element.RenderedElementBase,this.base(t);var j=this.getHrefAttribute().value;if(""!=j){var C=j.match(/\.svg$/);if(L.Images.push(this),this.loaded=!1,C)this.img=L.ajax(j),this.loaded=!0;else{this.img=document.createElement("img"),1==L.opts.useCORS&&(this.img.crossOrigin="Anonymous");var k=this;this.img.onload=function(){k.loaded=!0},this.img.onerror=function(){L.log('ERROR: image "'+j+'" not found'),k.loaded=!0},this.img.src=j}this.renderChildren=function(t){var j=this.attribute("x").toPixels("x"),k=this.attribute("y").toPixels("y"),i=this.attribute("width").toPixels("x"),U=this.attribute("height").toPixels("y");0!=i&&0!=U&&(t.save(),C?t.drawSvg(this.img,j,k,i,U):(t.translate(j,k),L.AspectRatio(t,this.attribute("preserveAspectRatio").value,i,this.img.width,U,this.img.height,0,0),t.drawImage(this.img,0,0)),t.restore())},this.getBoundingBox=function(){var t=this.attribute("x").toPixels("x"),j=this.attribute("y").toPixels("y"),C=this.attribute("width").toPixels("x"),k=this.attribute("height").toPixels("y");return new L.BoundingBox(t,j,t+C,j+k)}}},L.Element.image.prototype=new L.Element.RenderedElementBase,L.Element.g=function(t){this.base=L.Element.RenderedElementBase,this.base(t),this.getBoundingBox=function(){for(var t=new L.BoundingBox,j=0;j<this.children.length;j++)t.addBoundingBox(this.children[j].getBoundingBox());return t}},L.Element.g.prototype=new L.Element.RenderedElementBase,L.Element.symbol=function(t){this.base=L.Element.RenderedElementBase,this.base(t),this.render=function(t){}},L.Element.symbol.prototype=new L.Element.RenderedElementBase,L.Element.switch=function(t){this.base=L.Element.RenderedElementBase,this.base(t)},L.Element.switch.prototype=new L.Element.symbol,L.Element.style=function(t){this.base=L.Element.ElementBase,this.base(t);for(var j="",C=0;C<t.childNodes.length;C++)j+=t.childNodes[C].data;j=j.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,""),j=L.compressSpaces(j);for(var k=j.split("}"),C=0;C<k.length;C++)if(""!=L.trim(k[C]))for(var i=k[C].split("{"),K=i[0].split(","),y=i[1].split(";"),X=0;X<K.length;X++){var u=L.trim(K[X]);if(""!=u){for(var a=L.Styles[u]||{},B=0;B<y.length;B++){var c=y[B].indexOf(":"),f=y[B].substr(0,c),R=y[B].substr(c+1,y[B].length-c);null!=f&&null!=R&&(a[L.trim(f)]=new L.Property(L.trim(f),L.trim(R)))}if(L.Styles[u]=a,L.StylesSpecificity[u]=U(u),"@font-face"==u)for(var d=a["font-family"].value.replace(/"/g,""),$=a.src.value.split(","),m=0;m<$.length;m++)if($[m].indexOf('format("svg")')>0)for(var D=$[m].indexOf("url"),b=$[m].indexOf(")",D),J=$[m].substr(D+5,b-D-6),v=L.parseXml(L.ajax(J)),H=v.getElementsByTagName("font"),G=0;G<H.length;G++){var Z=L.CreateElement(H[G]);L.Definitions[d]=Z}}}},L.Element.style.prototype=new L.Element.ElementBase,L.Element.use=function(t){this.base=L.Element.RenderedElementBase,this.base(t),this.baseSetContext=this.setContext,this.setContext=function(t){this.baseSetContext(t),this.attribute("x").hasValue()&&t.translate(this.attribute("x").toPixels("x"),0),this.attribute("y").hasValue()&&t.translate(0,this.attribute("y").toPixels("y"))};var j=this.getHrefAttribute().getDefinition();this.path=function(t){null!=j&&j.path(t)},this.getBoundingBox=function(){if(null!=j)return j.getBoundingBox()},this.renderChildren=function(t){if(null!=j){var C=j;"symbol"==j.type&&(C=new L.Element.svg,C.type="svg",C.attributes.viewBox=new L.Property("viewBox",j.attribute("viewBox").value),C.attributes.preserveAspectRatio=new L.Property("preserveAspectRatio",j.attribute("preserveAspectRatio").value),C.attributes.overflow=new L.Property("overflow",j.attribute("overflow").value),C.children=j.children),
"svg"==C.type&&(this.attribute("width").hasValue()&&(C.attributes.width=new L.Property("width",this.attribute("width").value)),this.attribute("height").hasValue()&&(C.attributes.height=new L.Property("height",this.attribute("height").value)));var k=C.parent;C.parent=null,C.render(t),C.parent=k}}},L.Element.use.prototype=new L.Element.RenderedElementBase,L.Element.mask=function(t){this.base=L.Element.ElementBase,this.base(t),this.apply=function(t,j){var C=this.attribute("x").toPixels("x"),k=this.attribute("y").toPixels("y"),i=this.attribute("width").toPixels("x"),U=this.attribute("height").toPixels("y"),K=1;if(0==i&&0==U){for(var y=new L.BoundingBox,X=0;X<this.children.length;X++)this.children[X].getBoundingBox&&y.addBoundingBox(this.children[X].getBoundingBox());C=Math.floor(y.x1),k=Math.floor(y.y1),i=Math.floor(y.width()),U=Math.floor(y.height())}if(i&&U){var u=C+i,a=k+U;(u>2048||a>2048)&&(K=Math.min(2048/u,2048/a),u*=K,a*=K);var B=j.style("mask").value;j.style("mask").value="";var c=document.createElement("canvas");c.width=u,c.height=a;var f=c.getContext("2d");if(f.save(),1!==K&&f.scale(K,K),this.renderChildren(f),f.restore(),c.width&&c.height){var R=document.createElement("canvas");R.width=u,R.height=a;var d=R.getContext("2d");d.save(),1!==K&&d.scale(K,K),j.render(d),d.restore(),d.globalCompositeOperation="destination-in",d.fillStyle=f.createPattern(c,"no-repeat"),d.fillRect(0,0,u,a),t.save(),1!==K&&t.scale(1/K,1/K),t.fillStyle=d.createPattern(R,"no-repeat"),t.fillRect(0,0,u,a),t.restore(),j.style("mask").value=B}}},this.render=function(t){}},L.Element.mask.prototype=new L.Element.ElementBase,L.Element.clipPath=function(t){this.base=L.Element.ElementBase,this.base(t),this.apply=function(t){var j=t.beginPath;t.beginPath=function(){};var C=t.closePath;t.closePath=function(){};var k;this.style("transform",!1,!0).hasValue()&&(k=new L.Transform(this.style("transform",!1,!0).value),k.apply(t)),j.call(t);for(var i=0;i<this.children.length;i++){var U=this.children[i];if(void 0!==U.path){var K=null;U.style("transform",!1,!0).hasValue()&&(K=new L.Transform(U.style("transform",!1,!0).value),K.apply(t)),U.path(t),t.closePath=C,K&&K.unapply(t)}}C.call(t),t.clip(),k&&k.unapply(t),t.beginPath=j,t.closePath=C},this.render=function(t){}},L.Element.clipPath.prototype=new L.Element.ElementBase,L.Element.filter=function(t){this.base=L.Element.ElementBase,this.base(t),this.apply=function(t,j){return},this.render=function(t){}},L.Element.filter.prototype=new L.Element.ElementBase,L.Element.feMorphology=function(t){this.base=L.Element.ElementBase,this.base(t),this.apply=function(t,j,C,k,i){}},L.Element.feMorphology.prototype=new L.Element.ElementBase,L.Element.feComposite=function(t){this.base=L.Element.ElementBase,this.base(t),this.apply=function(t,j,C,k,i){}},L.Element.feComposite.prototype=new L.Element.ElementBase,L.Element.feColorMatrix=function(t){function j(t,j,C,k,i,U){return t[C*k*4+4*j+U]}function C(t,j,C,k,i,U,K){t[C*k*4+4*j+U]=K}function k(t,j){var C=i[t];return C*(C<0?j-255:j)}this.base=L.Element.ElementBase,this.base(t);var i=L.ToNumberArray(this.attribute("values").value);switch(this.attribute("type").valueOrDefault("matrix")){case"saturate":var U=i[0];i=[.213+.787*U,.715-.715*U,.072-.072*U,0,0,.213-.213*U,.715+.285*U,.072-.072*U,0,0,.213-.213*U,.715-.715*U,.072+.928*U,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":var K=i[0]*Math.PI/180,y=function(t,j,C){return t+Math.cos(K)*j+Math.sin(K)*C};i=[y(.213,.787,-.213),y(.715,-.715,-.715),y(.072,-.072,.928),0,0,y(.213,-.213,.143),y(.715,.285,.14),y(.072,-.072,-.283),0,0,y(.213,-.213,-.787),y(.715,-.715,.715),y(.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1]}this.apply=function(t,i,U,K,y){if(K&&y){for(var L=t.getImageData(0,0,K,y),U=0;U<y;U++)for(var i=0;i<K;i++){var X=j(L.data,i,U,K,y,0),u=j(L.data,i,U,K,y,1),a=j(L.data,i,U,K,y,2),B=j(L.data,i,U,K,y,3);C(L.data,i,U,K,y,0,k(0,X)+k(1,u)+k(2,a)+k(3,B)+k(4,1)),C(L.data,i,U,K,y,1,k(5,X)+k(6,u)+k(7,a)+k(8,B)+k(9,1)),C(L.data,i,U,K,y,2,k(10,X)+k(11,u)+k(12,a)+k(13,B)+k(14,1)),C(L.data,i,U,K,y,3,k(15,X)+k(16,u)+k(17,a)+k(18,B)+k(19,1))}t.clearRect(0,0,K,y),t.putImageData(L,0,0)}}},L.Element.feColorMatrix.prototype=new L.Element.ElementBase,L.Element.feGaussianBlur=function(t){this.base=L.Element.ElementBase,this.base(t),this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue()),this.extraFilterDistance=this.blurRadius,this.apply=function(t,j,C,k,U){if(void 0===i.canvasRGBA)return void L.log("ERROR: StackBlur.js must be included for blur to work");t.canvas.id=L.UniqueId(),t.canvas.style.display="none",document.body.appendChild(t.canvas),i.canvasRGBA(t.canvas.id,j,C,k,U,this.blurRadius),document.body.removeChild(t.canvas)}},L.Element.feGaussianBlur.prototype=new L.Element.ElementBase,L.Element.title=function(t){},L.Element.title.prototype=new L.Element.ElementBase,L.Element.desc=function(t){},L.Element.desc.prototype=new L.Element.ElementBase,L.Element.MISSING=function(t){L.log("ERROR: Element '"+t.nodeName+"' not yet implemented.")},L.Element.MISSING.prototype=new L.Element.ElementBase,L.CreateElement=function(t){var j=t.nodeName.replace(/^[^:]+:/,"");j=j.replace(/\-/g,"");var C=null;return C=void 0!==L.Element[j]?new L.Element[j](t):new L.Element.MISSING(t),C.type=t.nodeName,C},L.load=function(t,j){L.loadXml(t,L.ajax(j))},L.loadXml=function(t,j){L.loadXmlDoc(t,L.parseXml(j))},L.loadXmlDoc=function(j,C){L.init(j);var k=function(C){for(var k=j.canvas;k;)C.x-=k.offsetLeft,C.y-=k.offsetTop,k=k.offsetParent;return t.scrollX&&(C.x+=t.scrollX),t.scrollY&&(C.y+=t.scrollY),C};1!=L.opts.ignoreMouse&&(j.canvas.onclick=function(t){var j=k(new L.Point(null!=t?t.clientX:event.clientX,null!=t?t.clientY:event.clientY));L.Mouse.onclick(j.x,j.y)},j.canvas.onmousemove=function(t){var j=k(new L.Point(null!=t?t.clientX:event.clientX,null!=t?t.clientY:event.clientY));L.Mouse.onmousemove(j.x,j.y)});var i=L.CreateElement(C.documentElement);i.root=!0,i.addStylesFromStyleDefinition();var U=!0,K=function(){var t=!1;j.canvas.parentElement||(t=!0,document.body.appendChild(j.canvas)),L.ViewPort.Clear(),j.canvas.parentNode&&L.ViewPort.SetCurrent(j.canvas.parentNode.clientWidth,j.canvas.parentNode.clientHeight),1!=L.opts.ignoreDimensions&&(i.style("width").hasValue()&&(j.canvas.width=i.style("width").toPixels("x"),j.canvas.style.width=j.canvas.width+"px"),i.style("height").hasValue()&&(j.canvas.height=i.style("height").toPixels("y"),j.canvas.style.height=j.canvas.height+"px"));var k=j.canvas.clientWidth||j.canvas.width,K=j.canvas.clientHeight||j.canvas.height;if(1==L.opts.ignoreDimensions&&i.style("width").hasValue()&&i.style("height").hasValue()&&(k=i.style("width").toPixels("x"),K=i.style("height").toPixels("y")),L.ViewPort.SetCurrent(k,K),null!=L.opts.offsetX&&(i.attribute("x",!0).value=L.opts.offsetX),null!=L.opts.offsetY&&(i.attribute("y",!0).value=L.opts.offsetY),null!=L.opts.scaleWidth||null!=L.opts.scaleHeight){var y=null,X=null,u=L.ToNumberArray(i.attribute("viewBox").value);null!=L.opts.scaleWidth&&(i.attribute("width").hasValue()?y=i.attribute("width").toPixels("x")/L.opts.scaleWidth:isNaN(u[2])||(y=u[2]/L.opts.scaleWidth)),null!=L.opts.scaleHeight&&(i.attribute("height").hasValue()?X=i.attribute("height").toPixels("y")/L.opts.scaleHeight:isNaN(u[3])||(X=u[3]/L.opts.scaleHeight)),null==y&&(y=X),null==X&&(X=y),i.attribute("width",!0).value=L.opts.scaleWidth,i.attribute("height",!0).value=L.opts.scaleHeight,i.style("transform",!0,!0).value+=" scale("+1/y+","+1/X+")"}1!=L.opts.ignoreClear&&j.clearRect(0,0,k,K),i.render(j),U&&(U=!1,"function"==typeof L.opts.renderCallback&&L.opts.renderCallback(C)),t&&j.canvas.parentElement&&j.canvas.parentElement.removeChild(j.canvas)},y=!0;L.ImagesLoaded()&&(y=!1,K()),L.intervalID=setInterval(function(){var t=!1;if(y&&L.ImagesLoaded()&&(y=!1,t=!0),1!=L.opts.ignoreMouse&&(t|=L.Mouse.hasEvents()),1!=L.opts.ignoreAnimation)for(var j=0;j<L.Animations.length;j++)t|=L.Animations[j].update(1e3/L.FRAMERATE);"function"==typeof L.opts.forceRedraw&&1==L.opts.forceRedraw()&&(t=!0),t&&(K(),L.Mouse.runEvents())},1e3/L.FRAMERATE)},L.stop=function(){L.intervalID&&clearInterval(L.intervalID)},L.Mouse=new function(){this.events=[],this.hasEvents=function(){return 0!=this.events.length},this.onclick=function(t,j){this.events.push({type:"onclick",x:t,y:j,run:function(t){t.onclick&&t.onclick()}})},this.onmousemove=function(t,j){this.events.push({type:"onmousemove",x:t,y:j,run:function(t){t.onmousemove&&t.onmousemove()}})},this.eventElements=[],this.checkPath=function(t,j){for(var C=0;C<this.events.length;C++){var k=this.events[C];j.isPointInPath&&j.isPointInPath(k.x,k.y)&&(this.eventElements[C]=t)}},this.checkBoundingBox=function(t,j){for(var C=0;C<this.events.length;C++){var k=this.events[C];j.isPointInBox(k.x,k.y)&&(this.eventElements[C]=t)}},this.runEvents=function(){L.ctx.canvas.style.cursor="";for(var t=0;t<this.events.length;t++)for(var j=this.events[t],C=this.eventElements[t];C;)j.run(C),C=C.parent;this.events=[],this.eventElements=[]}},L}var y,L=function(t,j,C){if(null!=t||null!=j||null!=C){"string"==typeof t&&(t=document.getElementById(t)),null!=t.svg&&t.svg.stop();var k=K(C||{});1==t.childNodes.length&&"OBJECT"==t.childNodes[0].nodeName||(t.svg=k);var i=t.getContext("2d");void 0!==j.documentElement?k.loadXmlDoc(i,j):"<"==j.substr(0,1)?k.loadXml(i,j):k.load(i,j)}else for(var U=document.querySelectorAll("svg"),y=0;y<U.length;y++){var X=U[y],u=document.createElement("canvas");u.width=X.clientWidth,u.height=X.clientHeight,X.parentNode.insertBefore(u,X),X.parentNode.removeChild(X);var a=document.createElement("div");a.appendChild(X),L(u,a.innerHTML)}};void 0!==Element.prototype.matches?y=function(t,j){return t.matches(j)}:void 0!==Element.prototype.webkitMatchesSelector?y=function(t,j){return t.webkitMatchesSelector(j)}:void 0!==Element.prototype.mozMatchesSelector?y=function(t,j){return t.mozMatchesSelector(j)}:void 0!==Element.prototype.msMatchesSelector?y=function(t,j){return t.msMatchesSelector(j)}:void 0!==Element.prototype.oMatchesSelector?y=function(t,j){return t.oMatchesSelector(j)}:("function"!=typeof jQuery&&"function"!=typeof Zepto||(y=function(t,j){return $(t).is(j)}),void 0===y&&(y=Sizzle.matchesSelector));var X=/(\[[^\]]+\])/g,u=/(#[^\s\+>~\.\[:]+)/g,a=/(\.[^\s\+>~\.\[:]+)/g,B=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,c=/(:[\w-]+\([^\)]*\))/gi,f=/(:[^\s\+>~\.\[:]+)/g,R=/([^\s\+>~\.\[:]+)/g;return"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.drawSvg=function(t,j,C,k,i,U){var K={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:j,offsetY:C,scaleWidth:k,scaleHeight:i};for(var y in U)U.hasOwnProperty(y)&&(K[y]=U[y]);L(this.canvas,t,K)}),L}(j.RGBColor,j.stackBlur)}(void 0!==t?t:this)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object),function(t,j,C){function k(t){this._pointer=0,this._data=t,this._eof=!1}function i(t,j){return t<=9?j:t>=10&&t<=59?parseFloat(j):t>=60&&t<=99?parseInt(j):t>=100&&t<=109?j:t>=110&&t<=149?parseFloat(j):t>=160&&t<=179?parseInt(j):t>=210&&t<=239?parseFloat(j):t>=270&&t<=289?parseInt(j):t>=290&&t<=299?U(j):t>=300&&t<=369?j:t>=370&&t<=389?parseInt(j):t>=390&&t<=399?j:t>=400&&t<=409?parseInt(j):t>=410&&t<=419?j:t>=420&&t<=429?parseInt(j):t>=430&&t<=439?j:t>=440&&t<=459?parseInt(j):t>=460&&t<=469?parseFloat(j):t>=470&&t<=481?j:999===t?j:t>=1e3&&t<=1009?j:t>=1010&&t<=1059?parseFloat(j):t>=1060&&t<=1071?parseInt(j):(console.log("WARNING: Group code does not have a defined type: %j",{code:t,value:j}),j)}function U(t){if("0"===t)return!1;if("1"===t)return!0;throw TypeError("String '"+t+"' cannot be cast to Boolean type")}function K(t){t&&t.sanitize!==C&&(this.sanitize=t.sanitize)}function y(t){c.debug("unhandled group "+L(t))}function L(t){return t.code+":"+t.value}function X(t){return f[t]}var u=t.ht,a=u.Default;a.getInternal().addMethod(a,{cadToShape:function(t,j){return new u.DxfViewer(j).toShape(t)},shapeToCad:function(t,j,C){return new u.DxfWriter(C).toDxf(t,j)}});var B=function(){},c={debug:B,warn:B,error:B},f=[0,16711680,16776960,65280,65535,255,16711935,16777215,8421504,12632256,16711680,16744319,13369344,13395558,10027008,10046540,8323072,8339263,4980736,4990502,16727808,16752511,13382400,13401958,10036736,10051404,8331008,8343359,4985600,4992806,16744192,16760703,13395456,13408614,10046464,10056268,8339200,8347455,4990464,4995366,16760576,16768895,13408512,13415014,10056192,10061132,8347392,8351551,4995328,4997670,16776960,16777087,13421568,13421670,10000384,10000460,8355584,8355647,5000192,5000230,12582656,14679935,10079232,11717734,7510016,8755276,6258432,7307071,3755008,4344870,8388352,12582783,6736896,10079334,5019648,7510092,4161280,6258495,2509824,3755046,4194048,10485631,3394560,8375398,2529280,6264908,2064128,5209919,1264640,3099686,65280,8388479,52224,6736998,38912,5019724,32512,4161343,19456,2509862,65343,8388511,52275,6737023,38950,5019743,32543,4161359,19475,2509871,65407,8388543,52326,6737049,38988,5019762,32575,4161375,19494,2509881,65471,8388575,52377,6737074,39026,5019781,32607,4161391,19513,2509890,65535,8388607,52428,6737100,39064,5019800,32639,4161407,19532,2509900,49151,8380415,39372,6730444,29336,5014936,24447,4157311,14668,2507340,32767,8372223,26316,6724044,19608,5010072,16255,4153215,9804,2505036,16383,8364031,13260,6717388,9880,5005208,8063,4149119,4940,2502476,255,8355839,204,6710988,152,5000344,127,4145023,76,2500172,4129023,10452991,3342540,8349388,2490520,6245528,2031743,5193599,1245260,3089996,8323327,12550143,6684876,10053324,4980888,7490712,4128895,6242175,2490444,3745356,12517631,14647295,10027212,11691724,7471256,8735896,6226047,7290751,3735628,4335180,16711935,16744447,13369548,13395660,9961624,9981080,8323199,8339327,4980812,4990540,16711871,16744415,13369497,13395634,9961586,9981061,8323167,8339311,4980793,4990530,16711807,16744383,13369446,13395609,9961548,9981042,8323135,8339295,4980774,4990521,16711743,16744351,13369395,13395583,9961510,9981023,8323103,8339279,4980755,4990511,3355443,5987163,8684676,11382189,14079702,16777215];k.prototype.next=function(){var t;if(!this.hasNext())throw this._eof?new Error("Cannot call 'next' after EOF group has been read"):new Error("Unexpected end of input: EOF group not read before end of file. Ended on code "+this._data[this._pointer]);return t={code:parseInt(this._data[this._pointer])},this._pointer++,t.value=i(t.code,this._data[this._pointer].trim()),this._pointer++,0===t.code&&"EOF"===t.value&&(this._eof=!0),t},k.prototype.hasNext=function(){return!this._eof&&!(this._pointer>this._data.length-2)},k.prototype.isEOF=function(){return this._eof},K.prototype.parse=function(t,j){throw new Error("read() not implemented. Use readSync()")},K.prototype.parseSync=function(t){return"string"==typeof t?this._parse(t):(console.error("Cannot read dxf source of type `"+typeof t),null)},K.prototype.parseStream=function(t,j){function C(t){U+=t}function k(){try{var t=K._parse(U)}catch(t){return j(t)}j(null,t)}function i(t){j(t)}var U="",K=this;t.on("data",C),t.on("end",k),t.on("error",i)},K.prototype.sanitizeFileName=function(){var t=/[\/\?<>\\:\*\|":]/g,j=/[\x00-\x1f\x80-\x9f]/g,C=/^\.+$/,k=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,i=/[\. ]+$/;return function(U){var K=this.sanitize;return null==K?U:U.replace(t,K).replace(j,K).replace(C,K).replace(k,K).replace(i,K)}}(),K.prototype._parse=function(t){var i,U,K=this,u={},a=0,B=t.split(/\r\n|\r|\n/g);if(i=new k(B),!i.hasNext())throw Error("Empty file");var f=function(t,j){return U.code===t&&U.value===j},R=function(){var t=null,j=null,C={};for(U=i.next();;){if(f(0,"ENDSEC")){t&&(C[t]=j);break}9===U.code?(t&&(C[t]=j),t=U.value):10===U.code?j={x:U.value}:20===U.code?j.y=U.value:30===U.code?j.z=U.value:j=U.value,U=i.next()}return U=i.next(),C},d=function(){var t,j={};for(U=i.next();"EOF"!==U.value&&!f(0,"ENDSEC");)f(0,"BLOCK")?(c.debug("block {"),t=$(),c.debug("}"),I(t),t.name?j[t.name]=t:c.error('block with handle "'+t.handle+'" is missing a name.')):(y(U),U=i.next());return j},$=function(){var t={};for(U=i.next();"EOF"!==U.value;){switch(U.code){case 1:t.xrefPath=U.value,U=i.next();break;case 2:t.name=K.sanitizeFileName(U.value),U=i.next();break;case 3:t.name2=K.sanitizeFileName(U.value),U=i.next();break;case 5:t.handle=U.value,U=i.next();break;case 8:t.layer=U.value,U=i.next();break;case 10:t.position=z();break;case 67:t.paperSpace=!(!U.value||1!=U.value),U=i.next();break;case 70:0!=U.value&&(t.type=U.value),U=i.next();break;case 100:U=i.next();break;case 330:t.ownerHandle=U.value,U=i.next();break;case 0:if("ENDBLK"==U.value)break;i._pointer-=2,t.entities=G(!0);break;default:y(U),U=i.next()}if(f(0,"ENDBLK")){U=i.next();break}}return t},m=function(){var t={};for(U=i.next();"EOF"!==U.value&&!f(0,"ENDSEC");)if(f(0,"TABLE")){U=i.next();var j=H[U.value];j?(c.debug(U.value+" Table {"),t[H[U.value].tableName]=D(),c.debug("}")):c.debug("Unhandled Table "+U.value)}else U=i.next();return U=i.next(),t},D=function(){var t,C=H[U.value],k={},K=0;for(U=i.next();!f(0,"ENDTAB");)switch(U.code){case 5:k.handle=U.value,U=i.next();break;case 330:k.ownerHandle=U.value,U=i.next();break;case 100:"AcDbSymbolTable"===U.value?U=i.next():(y(U),U=i.next());break;case 70:K=U.value,U=i.next();break;case 0:U.value===C.dxfSymbolName?k[C.tableRecordsProperty]=C.parseTableRecords():(y(U),U=i.next());break;default:y(U),U=i.next()}var L=k[C.tableRecordsProperty];return L&&(L.constructor===Array?t=L.length:"object"==typeof L&&(t=j.keys(L).length),K!==t&&c.warn("Parsed "+t+" "+C.dxfSymbolName+"'s but expected "+K)),U=i.next(),k},b=function(){var t=[],j={};for(c.debug("ViewPort {"),U=i.next();!f(0,"ENDTAB");)switch(U.code){case 2:j.name=U.value,U=i.next();break;case 10:j.lowerLeftCorner=z();break;case 11:j.upperRightCorner=z();break;case 12:j.center=z();break;case 13:j.snapBasePoint=z();break;case 14:j.snapSpacing=z();break;case 15:j.gridSpacing=z();break;case 16:j.viewDirectionFromTarget=z();break;case 17:j.viewTarget=z();break;case 40:j.viewHeight=U.value,j.aspectRatio!==C&&(j.viewWidth=U.value*j.aspectRatio),U=i.next();break;case 41:j.aspectRatio=U.value,j.viewHeight!==C&&(j.viewWidth=U.value*j.viewHeight),U=i.next();break;case 42:j.lensLength=U.value,U=i.next();break;case 43:j.frontClippingPlane=U.value,U=i.next();break;case 44:j.backClippingPlane=U.value,U=i.next();break;case 45:j.viewHeight=U.value,U=i.next();break;case 50:j.snapRotationAngle=U.value,U=i.next();break;case 51:j.viewTwistAngle=U.value,U=i.next();break;case 79:j.orthographicType=U.value,U=i.next();break;case 110:j.ucsOrigin=z();break;case 111:j.ucsXAxis=z();break;case 112:j.ucsYAxis=z();break;case 110:j.ucsOrigin=z();break;case 281:j.renderMode=U.value,U=i.next();break;case 281:j.defaultLightingType=U.value,U=i.next();break;case 292:j.defaultLightingOn=U.value,U=i.next();break;case 330:j.ownerHandle=U.value,U=i.next();break;case 63:case 421:case 431:j.ambientColor=U.value,U=i.next();break;case 0:"VPORT"===U.value&&(c.debug("}"),t.push(j),c.debug("ViewPort {"),j={},U=i.next());break;default:y(U),U=i.next()}return c.debug("}"),t.push(j),t},J=function(){var t,j,C={},k={};for(c.debug("LType {"),U=i.next();!f(0,"ENDTAB");)switch(U.code){case 2:k.name=U.value,t=U.value,U=i.next();break;case 3:k.description=U.value,U=i.next();break;case 73:j=U.value,j>0&&(k.pattern=[]),U=i.next();break;case 40:k.patternLength=U.value,U=i.next();break;case 49:k.pattern.push(U.value),U=i.next();break;case 0:c.debug("}"),j>0&&j!==k.pattern.length&&c.warn("lengths do not match on LTYPE pattern"),C[t]=k,k={},c.debug("LType {"),U=i.next();break;default:U=i.next()}return c.debug("}"),C[t]=k,C},v=function(){var t,j={},k={};for(c.debug("Layer {"),U=i.next();!f(0,"ENDTAB");)switch(U.code){case 2:k.name=U.value,t=U.value,U=i.next();break;case 62:k.visible=U.value>=0,k.color=X(Math.abs(U.value)),U=i.next();break;case 6:k.lineType=U.value,U=i.next();break;case 0:"LAYER"===U.value&&(c.debug("}"),j[t]=k,c.debug("Layer {"),k={},t=C,U=i.next());break;default:y(U),U=i.next()}return c.debug("}"),j[t]=k,j},H={VPORT:{tableRecordsProperty:"viewPorts",tableName:"viewPort",dxfSymbolName:"VPORT",parseTableRecords:b},LTYPE:{tableRecordsProperty:"lineTypes",tableName:"lineType",dxfSymbolName:"LTYPE",parseTableRecords:J},LAYER:{tableRecordsProperty:"layers",tableName:"layer",dxfSymbolName:"LAYER",parseTableRecords:v}},G=function(t){var j=[],C=t?"ENDBLK":"ENDSEC";for(U=i.next();;)if(0===U.code){if(U.value===C)break;var k;if("LWPOLYLINE"===U.value)c.debug("LWPOLYLINE {"),k=o(),c.debug("}");else if("POLYLINE"===U.value)c.debug("POLYLINE {"),k=n(),c.debug("}");else if("LINE"===U.value)c.debug("LINE {"),k=w(),c.debug("}");else if("CIRCLE"===U.value)c.debug("CIRCLE {"),k=r(),c.debug("}");else if("ARC"===U.value)c.debug("ARC {"),k=r(),c.debug("}");else if("ELLIPSE"===U.value)c.debug("ELLIPSE {"),k=Y(),c.debug("}");else if("SPLINE"===U.value)c.debug("SPLINE {"),k=Q(),c.debug("}");else if("TEXT"===U.value)c.debug("TEXT {"),k=N(),c.debug("}");else if("DIMENSION"===U.value)c.debug("DIMENSION {"),k=O(),c.debug("}");else if("INSERT"===U.value)c.debug("INSERT {"),k=p(),c.debug("}");else if("HATCH"===U.value)c.debug("HATCH {"),k=M(),c.debug("}");else if("SOLID"===U.value)c.debug("SOLID {"),k=F(),c.debug("}");else if("POINT"===U.value)c.debug("POINT {"),k=S(),c.debug("}");else if("MTEXT"===U.value)c.debug("MTEXT {"),k=e(),c.debug("}");else{if("ATTDEF"!==U.value){c.warn("Unhandled entity "+U.value),U=i.next();continue}c.debug("ATTDEF {"),k=x(),c.debug("}")}I(k),j.push(k)}else U=i.next();return"ENDSEC"==C&&(U=i.next()),j},Z=function(t){switch(U.code){case 0:t.type=U.value,U=i.next();break;case 5:t.handle=U.value,U=i.next();break;case 6:t.lineType=U.value,U=i.next();break;case 8:t.layer=U.value,U=i.next();break;case 48:t.lineTypeScale=U.value,U=i.next();break;case 60:t.visible=0===U.value,U=i.next();break;case 62:t.colorIndex=U.value,t.color=X(Math.abs(U.value)),U=i.next();break;case 67:t.inPaperSpace=0!==U.value,U=i.next();break;case 210:t.extrusionDirection=z();break;case 230:t.extrusionDirection={x:0,y:0,z:U.value},U=i.next();break;case 330:t.ownerHandle=U.value,U=i.next();break;case 347:t.materialObjectHandle=U.value,U=i.next();break;case 370:t.lineweight=U.value,U=i.next();break;case 420:t.color=U.value,U=i.next();break;case 100:if("AcDbEntity"==U.value){U=i.next();break}default:y(U),U=i.next()}},q=function(){var t={type:U.value};for(U=i.next();"EOF"!==U&&0!==U.code;)switch(U.code){case 10:t.x=U.value,U=i.next();break;case 20:t.y=U.value,U=i.next();break;case 30:t.z=U.value,U=i.next();break;case 40:case 41:case 42:U=i.next();break;case 70:t.curveFittingVertex=0!=(1|U.value),t.curveFitTangent=0!=(2|U.value),t.splineVertex=0!=(8|U.value),t.splineControlPoint=0!=(16|U.value),t.ThreeDPolylineVertex=0!=(32|U.value),t.ThreeDPolylineMesh=0!=(64|U.value),t.polyfaceMeshVertex=0!=(128|U.value),U=i.next();break;case 50:case 71:case 72:case 73:case 74:U=i.next();break;default:Z(t)}return t},A=function(){var t={type:U.value};for(U=i.next();"EOF"!=U&&0!=U.code;)Z(t);return t},z=function(){var t={},j=U.code;if(t.x=U.value,j+=10,U=i.next(),U.code!=j)throw new Error("Expected code for point value to be "+j+" but got "+U.code+".");return t.y=U.value,j+=10,U=i.next(),U.code!=j?t:(t.z=U.value,U=i.next(),t)},T=function(){var t={},j=U.code;return t.x=U.value,j+=1,U=i.next(),U.code!=j?(i._pointer-=2,t.y=1):t.y=U.value,j+=1,U=i.next(),U.code!=j?(i._pointer-=2,t.z=1):t.z=U.value,U=i.next(),t},E=function(t){if(!t||t<=0)throw Error("n must be greater than 0 verticies");var j,C=[],k=!1,K=!1;for(j=0;j<t;j++){for(var y={};"EOF"!==U&&0!==U.code&&!K;){switch(U.code){case 10:if(k){K=!0;continue}y.x=U.value,k=!0;break;case 20:y.y=U.value;break;case 30:y.z=U.value;break;case 40:y.startWidth=U.value;break;case 41:y.endWidth=U.value;break;case 42:0!=U.value&&(y.bulge=U.value);break;default:if(k){K=!0;continue}}U=i.next()}C.push(y),k=!1,K=!1}return C},s=function(){for(var t=[];"EOF"!==U;)if(0===U.code)if("VERTEX"===U.value)t.push(q());else if("SEQEND"===U.value){A();break}return t},e=function(){var t={type:U.value};for(U=i.next();"EOF"!==U&&0!==U.code;)switch(U.code){case 1:t.text=U.value,U=i.next();break;case 3:t.text+=U.value,U=i.next();break;case 10:t.position=z();break;case 40:t.height=U.value,U=i.next();break;case 41:t.width=U.value,U=i.next();break;case 71:t.attachmentPoint=U.value,U=i.next();break;case 72:t.drawingDirection=U.value,U=i.next();break;case 50:t.angle=2*U.value*Math.PI/360,U=i.next();break;case 11:t.directionX=U.value,U=i.next();break;case 21:t.directionY=U.value,U=i.next();break;default:Z(t)}return t},x=function(){var t={type:U.value,scale:1,textStyle:"STANDARD"};for(U=i.next();"EOF"!==U&&0!==U.code;)switch(U.code){case 1:t.text=U.value,U=i.next();break;case 2:t.tag=U.value,U=i.next();break;case 3:t.prompt=U.value,U=i.next();break;case 7:t.textStyle=U.value,U=i.next();break;case 10:t.x=U.value,U=i.next();break;case 20:t.y=U.value,U=i.next();break;case 30:t.z=U.value,U=i.next();break;case 39:t.thickness=U.value,U=i.next();break;case 40:t.textHeight=U.value,U=i.next();break;case 41:t.scale=U.value,U=i.next();break;case 50:t.rotation=U.value,U=i.next();break;case 51:t.obliqueAngle=U.value,U=i.next();break;case 70:t.invisible=!!(1&U.value),t.constant=!!(2&U.value),t.verificationRequired=!!(4&U.value),t.preset=!!(8&U.value),U=i.next();break;case 71:t.backwards=!!(2&U.value),t.mirrored=!!(4&U.value),U=i.next();break;case 72:t.horizontalJustification=U.value,U=i.next();break;case 73:t.fieldLength=U.value,U=i.next();break;case 74:t.verticalJustification=U.value,U=i.next();break;case 100:U=i.next();break;case 210:t.extrusionDirectionX=U.value,U=i.next();break;case 220:t.extrusionDirectionY=U.value,U=i.next();break;case 230:t.extrusionDirectionZ=U.value,U=i.next();break;default:Z(t)}return t},o=function(){var t={type:U.value,vertices:[]},j=0;for(U=i.next();"EOF"!==U&&0!==U.code;)switch(U.code){case 38:t.elevation=U.value,U=i.next();break;case 39:t.depth=U.value,U=i.next();break;case 70:t.shape=1===U.value,U=i.next();break;case 90:j=U.value,U=i.next();break;case 10:t.vertices=E(j);break;case 40:0!==U.value&&(t.startWidth=U.value),U=i.next();break;case 41:0!==U.value&&(t.endWidth=U.value),U=i.next();break;case 43:0!==U.value&&(t.width=U.value),U=i.next();break;default:Z(t)}return t},n=function(){var t={type:U.value,vertices:[]};for(U=i.next();"EOF"!==U&&0!==U.code;)switch(U.code){case 10:case 20:case 30:case 39:U=i.next();break;case 40:0!==U.value&&(t.startWidth=U.value),U=i.next();break;case 41:0!==U.value&&(t.endWidth=U.value),U=i.next();break;case 70:t.shape=1===U.value,U=i.next();break;case 71:case 72:case 73:case 74:case 75:case 100:U=i.next();break;default:Z(t)}return t.vertices=s(),t},w=function(){var t={type:U.value,vertices:[]};for(U=i.next();"EOF"!==U&&0!==U.code;)switch(U.code){case 10:t.vertices.unshift(z());break;case 11:t.vertices.push(z());break;case 100:if("AcDbLine"==U.value){U=i.next();break}default:Z(t)}return t},r=function(){var t,j;for(t={type:U.value},U=i.next();"EOF"!==U&&0!==U.code;)switch(U.code){case 10:t.center=z();break;case 40:t.radius=U.value,U=i.next();break;case 50:t.startAngle=Math.PI/180*U.value,U=i.next();break;case 51:j=Math.PI/180*U.value,j<t.startAngle?t.angleLength=j+2*Math.PI-t.startAngle:t.angleLength=j-t.startAngle,t.endAngle=j,U=i.next();break;default:Z(t)}return t},Y=function(){var t,j;for(t={type:U.value},U=i.next();"EOF"!==U&&0!==U.code;)switch(U.code){case 10:t.center=z();break;case 11:t.major=z();break;case 40:t.ratio=U.value,U=i.next();break;case 41:t.startAngle=U.value,U=i.next();break;case 42:j=U.value,j<t.startAngle?t.angleLength=j+2*Math.PI-t.startAngle:t.angleLength=j-t.startAngle,t.endAngle=j,U=i.next();break;default:Z(t)}return t},p=function(){var t;for(t={type:U.value},U=i.next();"EOF"!==U&&0!==U.code;)switch(U.code){case 2:t.block=K.sanitizeFileName(U.value),U=i.next();break;case 10:t.center=z();break;case 41:t.scale=T();break;case 50:t.deg=U.value,U=i.next();break;default:Z(t)}return t},M=function(){var t;for(t={type:U.value},U=i.next();"EOF"!==U&&0!==U.code;)switch(U.code){case 2:t.block=K.sanitizeFileName(U.value),U=i.next();break;case 10:t.center=z();break;case 41:t.scale=T();break;case 50:t.deg=U.value,U=i.next();break;default:Z(t)}return t},Q=function(){var t,j;for(t={type:U.value},U=i.next();"EOF"!==U&&0!==U.code;)switch(U.code){case 10:t.center=z();break;case 11:t.major=z();break;case 40:t.ratio=U.value,U=i.next();break;case 41:t.startAngle=U.value,U=i.next();break;case 42:j=U.value,j<t.startAngle?t.angleLength=j+2*Math.PI-t.startAngle:t.angleLength=j-t.startAngle,t.endAngle=j,U=i.next();break;default:Z(t)}return t},N=function(){var t;for(t={type:U.value},U=i.next();"EOF"!==U&&0!==U.code;)switch(U.code){case 10:t.startPoint=z();break;case 11:t.endPoint=z();break;case 40:t.textHeight=U.value,U=i.next();break;case 41:t.xScale=U.value,U=i.next();break;case 1:t.text=U.value,U=i.next();break;case 7:t.font=U.value,U=i.next();break;case 71:t.generationFlags=U.value,U=i.next();break;case 72:t.halign=U.value,U=i.next();break;case 73:t.valign=U.value,U=i.next();break;case 50:t.rotation=2*U.value*Math.PI/360,U=i.next();break;default:Z(t)}return t},O=function(){var t;for(t={type:U.value},U=i.next();"EOF"!==U&&0!==U.code;)switch(U.code){case 2:t.block=K.sanitizeFileName(U.value),U=i.next();break;case 10:t.anchorPoint=z();break;case 11:t.middleOfText=z();break;case 71:t.attachmentPoint=U.value,U=i.next();break;case 42:t.actualMeasurement=U.value,U=i.next();break;case 1:t.text=U.value,U=i.next();break;case 50:t.angle=U.value,U=i.next();break;default:Z(t)}return t},F=function(){var t;for(t={type:U.value},t.points=[],U=i.next();"EOF"!==U&&0!==U.code;)switch(U.code){case 10:t.points[0]=z();break;case 11:t.points[1]=z();break;case 12:t.points[2]=z();break;case 13:t.points[3]=z();break;default:Z(t)}return t},S=function(){var t;for(t={type:U.value},U=i.next();"EOF"!==U&&0!==U.code;)switch(U.code){case 10:t.position=z();break;case 39:t.thickness=U.value,U=i.next();break;case 100:if("AcDbPoint"==U.value){U=i.next();break}default:Z(t)}return t},I=function(t){if(!t)throw new TypeError("entity cannot be undefined or null");t.handle||(t.handle=a++)};return function(){for(U=i.next();!i.isEOF();)if(0===U.code&&"SECTION"===U.value){if(U=i.next(),2!==U.code){console.error("Unexpected code %s after 0:SECTION",L(U)),U=i.next();continue}"HEADER"===U.value?(c.debug("> HEADER"),u.header=R(),c.debug("<")):"BLOCKS"===U.value?(c.debug("> BLOCKS"),u.blocks=d(),c.debug("<")):"ENTITIES"===U.value?(c.debug("> ENTITIES"),u.entities=G(!1),c.debug("<")):"TABLES"===U.value?(c.debug("> TABLES"),u.tables=m(),c.debug("<")):"EOF"===U.value?c.debug("EOF"):c.warn("Skipping section '%s'",U.value)}else U=i.next()}(),u};var R=u.DxfViewer=function(t){this.init(t)};R.prototype={},R.prototype.constructor=R;var d={LINE:["LINE","POLYLINE","LWPOLYLINE"],CIRCLE:["CIRCLE","ARC"],ELLIPSE:["ELLIPSE"],TEXT:["TEXT","MTEXT"],SOLID:["SOLID"],POINT:["POINT"]};j.defineProperties(R.prototype,{dxf:{get:function(){return this._dxf}}}),R.prototype.init=function(t){var j=this,C=j.options={};t=t||{},C.font=t.font||"Standard",C.textScaleRatio=t.textScaleRatio||1,C.size=t.size,C.scale=t.scale,C.blockSize=t.blockSize||256,C.filter=t.filter,C.defaultColor=t.defaultColor||0,C.edgeLayer=t.edgeLayer,C.showText=t.showText||!0,C.mapColor=t.mapColor,C.circleSegments=t.circleSegments||72,C.browserMinFontSize=t.browserMinFontSize||8,C.boundingType=t.boundingType||"Reset",C.convertArcToBezier=t.convertArcToBezier,!1!==t.sanitize&&(C.sanitize=t.sanitize||"_")},R.prototype.toShape=function(t){var j=this;j.parseFile(t);var C,k,i,U=j._dxf.blocks,K=j.sortBlocks(U);j._blockDef={};for(var y=K.length-1;y>=0;y--)k=K[y],i=U[k],i.entities&&(j._blockDef[k]||(C=j.entitiesToShape(i.entities,i.position,null,!1))&&(C.flag=i.type,j._blockDef[k]=C))
;return C=j.entitiesToShape(j._dxf.entities,null,j.options.size,!0,j.options.scale),C.sortedBlockName=K,C.blockDef=j._blockDef,C.layers=j._dxf.tables.layer.layers,C},R.prototype.entitiesToShape=function(t,j,C,k,i){var U=this;U._minFontSize=12,U._bound={xMin:1/0,yMin:1/0,xMax:-1/0,yMax:-1/0},j=j||{x:0,y:0,z:0};var K,y,L,X=U._models={},u=U._dxf;for(K=0,y=t.length;K<y;K++)L=t[K],U._groupEntity(X,L,u);if(k)switch(U.options.boundingType){case"Viewport":var a=U._dxfViewport;!a||isNaN(a.x)||isNaN(a.y)||isNaN(a.width)||isNaN(a.height)||(U._bound={xMin:a.x-a.width/2,xMax:a.x+a.width/2,yMin:a.y-a.height/2,yMax:a.y+a.height/2});break;case"Standard":U._bound={xMin:0,xMax:1,yMin:0,yMax:1}}U._shiftX=U._bound.xMin,U._shiftY=U._bound.yMax;var B=U._bound.xMax-U._bound.xMin,c=U._bound.yMax-U._bound.yMin;if(!(B<0||c<0)){if(B=B||1,c=c||1,U._bound.pos=j,i)U._scale=i;else{if(C){var f=C/B,R=C/c;U._scale=Math.min(f,R)}else U._scale=1;U._scale*=Math.max(1,Math.ceil(U.options.browserMinFontSize/U._minFontSize))}U.shapeComps=[],U.drawLine(),U.drawSolid(),U.drawCircle(),U.drawEllipse(),U.options.showText&&U.drawText(),U.drawBlock();var d={width:B*U._scale,height:c*U._scale,comps:U.shapeComps,scale:U._scale,anchorX:-(U._bound.xMin-j.x)/B,anchorY:(U._bound.yMax-j.y)/c,bound:U._bound};return U._calcBoundExtend(d),d}},R.prototype._calcBoundExtend=function(t){var j=1,C=!1;t.comps.forEach(function(t){j=Math.max(j,t.borderWidth||0),t.borderWidthAbsolute&&(C=!0)}),t.boundExtend=j,C&&(t.boundExtendAbsolute=!0)},R.prototype._bulgesAt=function(t,j){return t[j].bulge},R.prototype._isStraightLine=function(t){return!t||Math.abs(t)<1e-6},R.prototype._getDistance=function(t,j){var C=t.x-j.x,k=t.y-j.y;return Math.sqrt(C*C+k*k)},R.prototype._getBulgeSegment=function(t,j,C){var k=this,i=C<0,U=4*Math.atan(C);if(Math.abs(U)>2*Math.PI-1e-6)return[j];var K={x:(t.x+j.x)/2,y:(t.y+j.y)/2},y=k._getDistance(t,j)/2,L=Math.atan2(j.y-t.y,j.x-t.x),X=Math.abs(y/Math.sin(U/2)),u=Math.abs(X*X-y*y),a=Math.sqrt(u);C>0?L+=Math.PI/2:L-=Math.PI/2,Math.abs(U)>Math.PI&&(a*=-1);var B,L,c=a*Math.cos(L)+K.x,f=a*Math.sin(L)+K.y,R=Math.atan2(t.y-f,t.x-c),d=Math.atan2(j.y-f,j.x-c),$=[];if(B=2*Math.PI/k.options.circleSegments,L=R,i){for(;d>R;)d-=2*Math.PI;for(;L>d;)L-=B,L<d&&(L=d),$.push({x:c+X*Math.cos(L),y:f+X*Math.sin(L)})}else{for(;d<R;)d+=2*Math.PI;for(;L<d;)L+=B,L>d&&(L=d),$.push({x:c+X*Math.cos(L),y:f+X*Math.sin(L)})}return $},R.prototype.drawLine=function(){var t,j,k,i,U,K,y,L,X,u,a,B,c,f,R,$,m,D,b,J,v=this,H=v._models;for(t=d.LINE,i=0,U=t.length;i<U;i++){j=t[i],k=H[j];for(L in k)for(X=k[L],K=0,y=X.length;K<y;K++)if(u=X[K],(a=u.vertices)&&a.length){for(R=v.toLocal(a[0].x,1),$=v.toLocal(a[0].y,2),D={type:"shape",cadType:j,cadLayer:u.layer,maybeEdge:u.layer===v.options.edgeLayer,borderColor:L,points:[R,$],segments:[1]},J=C,u.startWidth?J=(u.startWidth+(u.endWidth?u.endWidth:u.startWidth))/2:u.width&&(J=u.width),J?D.borderWidth=v.toLocal(J):(D.borderWidthAbsolute=!0,D.borderWidth=1),c=1,f=a.length;c<f;c++)B=a[c],m=v._bulgesAt(a,c-1),v._isStraightLine(m)?(D.points.push(v.toLocal(B.x,1),v.toLocal(B.y,2)),D.segments.push(2)):(b=v._getBulgeSegment(a[c-1],B,m),b.forEach(function(t){D.points.push(v.toLocal(t.x,1),v.toLocal(t.y,2)),D.segments.push(2)}));u.shape&&(m=v._bulgesAt(a,a.length-1),v._isStraightLine(m)?D.segments.push(5):(b=v._getBulgeSegment(a[a.length-1],a[0],m),b.forEach(function(t){D.points.push(v.toLocal(t.x,1),v.toLocal(t.y,2)),D.segments.push(2)}))),D.handle=u.handle,v.shapeComps.push(D)}}},R.prototype.drawBlock=function(){var t,j,C,k,i,U,K,y,L,X,u,a,B=this,c=B._models.BLOCK;if(c)for(t=0,j=c.length;t<j;t++)C=c[t],k=C.block,i=B._blockDef[k],u=C.transform,U=Math.atan2(u.b,u.a),U===Math.PI||0===U?(L=Math.cos(U),K=u.a/L,y=u.d/L):(X=Math.sin(U),K=u.b/X,y=-u.c/X),a={type:"image",cadType:"block",cadLayer:C.layer,handle:C.handle,name:k,rect:[[B.toLocal(u.tx,1),B.toLocal(u.ty,2)],B.toLocal(i.width/i.scale),B.toLocal(i.height/i.scale)],rotation:U},1===K&&1===y||(a.scaleX=K,a.scaleY=y),B.shapeComps.push(a)},R.prototype.drawSolid=function(){var t,j,C,k,i,U,K,y,L,X,u,a=this,B=a._models;for(t=d.SOLID,k=0,i=t.length;k<i;k++){j=t[k],C=B[j];for(y in C)for(L=C[y],U=0,K=L.length;U<K;U++)X=L[U],u=X.points,a.shapeComps.push({type:"shape",cadType:j,cadLayer:X.layer,handle:X.handle,background:y,points:[a.toLocal(u[0].x,1),a.toLocal(u[0].y,2),a.toLocal(u[1].x,1),a.toLocal(u[1].y,2),a.toLocal(u[3].x,1),a.toLocal(u[3].y,2),a.toLocal(u[2].x,1),a.toLocal(u[2].y,2)],segments:[1,2,2,2,5]})}},R.prototype.extrusionZNagative=function(t){var j=t.extrusionDirection;return!!j&&Math.abs(j.z+1)<1e-5},R.prototype.drawCircle=function(){var t,j,C,k,i,U,K,y,L,X,u,a,B,c,f,R,$,m,D,b,J=this,v=J._models;for(t=d.CIRCLE,k=0,i=t.length;k<i;k++){j=t[k],C=v[j];for(y in C)for(L=C[y],U=0,K=L.length;U<K;U++){if(X=L[U],u=X.startAngle||0,a=X.angleLength||2*Math.PI,B=u+a,c=J.toLocal(X.radius),f=X.addonAngle||0,R=J.toLocal(X.center.x,1),$=J.toLocal(X.center.y,2),b=X.xInvert^J.extrusionZNagative(X),D=X.yInvert,D||b?b&&D?(u=Math.PI+u,B=Math.PI+B,m=!1):(u=Math.PI*(b?1:2)-u,B=Math.PI*(b?1:2)-B,m=!0):m=!1,m=!m,u=2*Math.PI-u-f,B=2*Math.PI-B-f,m){var H=u;u=B,B=H}var G={type:"arc",cadType:j,cadLayer:X.layer,handle:X.handle,borderColor:y,borderWidth:1,borderWidthAbsolute:!0,rect:[R-c,$-c,2*c,2*c],arcFrom:u,arcTo:B,arcClose:!1};J.options.convertArcToBezier?J.shapeComps.push(J._convertArcToBezier(G)):J.shapeComps.push(G)}}},R.prototype.drawText=function(){var t,j,C,k,i,U,K,y,L,X,u,a,B,c,f,R,$,m,D,b,J,v,H,G,Z=this,q=Z._models;for(t=d.TEXT,G=Z.options.textScaleRatio,k=0,i=t.length;k<i;k++){j=t[k],C=q[j];for(y in C)for(L=C[y],U=0,K=L.length;U<K;U++)if(X=L[U],(u=X.text)&&u.length){if("MTEXT"===j)a=Z.toLocal(X.height||12),B=Z.toLocal(X.position.x,1),c=Z.toLocal(X.position.y,2),b=X.angle?X.angle:X.directionX?Math.atan2(X.directionY,X.directionX):0,b+=X.addonAngle||0,H=1,D=X.attachmentPoint||1,$=D%3,m=Math.floor(D/3),m=1===m?"middle":0===m?"top":"bottom",R=0===$?"right":2===$?"center":"left";else{a=Z.toLocal(X.textHeight||12);var A=X.endPoint;A||(A=X.startPoint),B=A.x,c=A.y,b=X.rotation||0,H=X.xScale||1,2===X.generationFlags?b=2*Math.PI-b:4===X.generationFlags?b=Math.PI-b:6===X.generationFlags&&(b=Math.PI+b),B=Z.toLocal(B,1),c=Z.toLocal(c,2),$=X.halign,m=X.valign,R=2===$?"right":1===$?"center":"left",m=3===m?"top":2===m?"middle":"bottom"}c+=a/4;if(b=2*Math.PI-b,f=a*G+"px "+(X.font||Z.options.font),"MTEXT"===j)for(u=u.replace(/\\{/g,"#@#"),u=u.replace(/\\}/g,"#@@"),u=u.replace(/({|})/g,""),u=u.replace(/#@#/g,"{"),u=u.replace(/#@@/g,"}"),u=u.replace(/\\[FfLIOoKkNXQHWSACT~][^;]*;/g,""),c-=a/6,J=u.split("\\P"),v=0;v<J.length;v++)Z.shapeComps.push({type:"text",cadType:j,cadLayer:X.layer,handle:X.handle,color:y,text:J[v],rotation:b,rect:[B,c+v*a*1.5,0,0],align:R,vAlign:m,font:f});else Z.shapeComps.push({type:"text",cadType:j,cadLayer:X.layer,handle:X.handle,color:y,text:u,scaleX:H,rotation:b,rect:[B,c,1e-5,1e-5],align:R,vAlign:m,font:f})}}},R.prototype.drawEllipse=function(){var t,j,C,k,i,U,K,y,L,X,u,a,B,c,f,R,$,m,D,b,J,v,H=this,G=H._models;for(t=d.ELLIPSE,k=0,i=t.length;k<i;k++){j=t[k],C=G[j];for(y in C)for(L=C[y],U=0,K=L.length;U<K;U++){if(X=L[U],u=X.major,a=Math.atan2(u.y,u.x),B=H.toLocal(Math.sqrt(u.x*u.x+u.y*u.y)),c=B*X.ratio,f=X.startAngle||0,R=X.angleLength||2*Math.PI,$=f+R,m=H.toLocal(X.center.x,1),D=H.toLocal(X.center.y,2),b=X.xInvert,J=X.yInvert^H.extrusionZNagative(X),J^=1,J||b?b&&J?(f=Math.PI+f,$=Math.PI+$,v=!1):(f=Math.PI*(b?1:2)-f,$=Math.PI*(b?1:2)-$,v=!0):v=!1,v){var Z=f;f=$,$=Z}a=2*Math.PI-a;var q={type:"arc",cadType:j,cadLayer:X.layer,handle:X.handle,borderColor:y,borderWidth:1,borderWidthAbsolute:!0,rotation:a,rect:[m-B,D-c,2*B,2*c],arcFrom:f,arcTo:$,arcClose:!1,arcOval:!0};H.options.convertArcToBezier?H.shapeComps.push(H._convertArcToBezier(q)):H.shapeComps.push(q)}}},R.prototype._convertArcToBezier=function(t){var j=t.arcFrom,C=t.arcTo;if(j===C)return t;j>C&&(C+=2*Math.PI);var k={type:"shape"},i=t.rect,U="type,rect,arcFrom,arcTo,arcClose,arcOval,rotation".split(",");for(var K in t)U.indexOf(K)>=0||(k[K]=t[K]);var y,L,X,u,a,B=k.points=[],c=k.segments=[1],f=C-j,R=Math.max(Math.ceil(Math.abs(f)/Math.PI*2),1),d=f/R,$=Math.tan(.5*d),m=Math.sin(d)*(Math.sqrt(4+3*$*$)-1)/3,D=Math.cos(j),b=Math.sin(j),J=i[2]/2,v=i[3]/2,H=i[0]+J,G=i[1]+v,Z=Math.sin(t.rotation||0),q=Math.cos(t.rotation||0),A=function(t,j){var C=J*t,k=v*j;return{x:H+(q*C-Z*k),y:G+(Z*C+q*k)}},z=A(D,b);B.push(z.x,z.y);for(var T=0;T<R;T++)X=j+(T+1)*d,y=Math.cos(X),L=Math.sin(X),z=A(D-b*m,b+D*m),u=A(y+L*m,L-y*m),a=A(y,L),D=y,b=L,B.push(z.x,z.y,u.x,u.y,a.x,a.y),c.push(4);return k},R.prototype._transformPoint=function(t,j,C){if(t){var k=t.x,i=t.y;return C=C||1,{x:k*C*j.a+i*j.c+j.tx,y:k*C*j.b+i*j.d+j.ty}}},R.prototype._groupEntity=function(t,j,C,k,i){var U=this,K=U.getColor(j,C);if(K&&(!U.options.filter||!U.options.filter(j,i))){var y,L,X,u=U._transformPoint,a=j.type;if("DIMENSION"===a||"INSERT"===a){if(!j.block)return;var B=C.blocks[j.block];if(!B||!B.entities)return;if(!(X=U._blockDef[j.block]))return void console.log("no entity ",j.block);var c=k||{a:1,b:0,c:0,d:1,tx:0,ty:0};if("INSERT"===a){var f=j.scale?j.scale.x:1,R=j.scale?j.scale.y:1,d=0,$=1,m=0;if(j.deg&&(d=j.deg*Math.PI/180,d=2*Math.PI-d,$=Math.cos(d),m=Math.sin(d)),k){var D=f*$,b=f*m,J=-R*m,v=R*$,H=j.center.x,G=j.center.y;c={a:k.a*D+k.c*b,b:k.b*D+k.d*b,c:k.a*J+k.c*v,d:k.b*J+k.d*v,tx:k.a*H+k.c*G+k.tx,ty:k.b*H+k.d*G+k.ty}}else c={a:f*$,b:f*m,c:-R*m,d:R*$,tx:j.center.x,ty:j.center.y}}U.extrusionZNagative(j)&&(c.a*=-1,c.c*=-1,c.tx*=-1);var Z=X.bound,q=(Z.pos.x,Z.pos.y,u({x:Z.xMin,y:Z.yMin},c)),A=u({x:Z.xMax,y:Z.yMax},c),z=u({x:Z.xMin,y:Z.yMax},c),T=u({x:Z.xMax,y:Z.yMin},c),E=U._bound;E.xMin=Math.min(E.xMin,q.x,A.x,z.x,T.x),E.yMin=Math.min(E.yMin,q.y,A.y,z.y,T.y),E.xMax=Math.max(E.xMax,q.x,A.x,z.x,T.x),E.yMax=Math.max(E.yMax,q.y,A.y,z.y,T.y);var s;return(s=U._models.BLOCK)||(U._models.BLOCK=s=[]),void s.push({handle:j.handle,block:j.block,transform:c})}(y=t[a])||(y=t[a]={}),(L=y[K])||(L=y[K]=[]);var e=U.extrusionZNagative(j)&&["POINT","LINE","ELLIPSE"].indexOf(a)<0;if(k||e){k||(k={a:1,b:0,c:0,d:1,tx:0,ty:0});var x={};for(var o in j)x[o]=j[o];x.radius&&(x.radius*=Math.sqrt(k.a*k.a+k.b*k.b)),x.textHeight&&(x.textHeight*=Math.sqrt(k.a*k.a+k.b*k.b));var n=e?-1:1;if(x.position=u(x.position,k,n),x.startPoint=u(x.startPoint,k,n),x.center=u(x.center,k,n),"ELLIPSE"===a){var w;w=u({x:j.major.x+j.center.x,y:j.major.y+j.center.y},k,n),x.major={x:w.x-x.center.x,y:w.y-x.center.y},U.extrusionZNagative(j)&&(x.major.x*=-1)}var r;x.vertices&&(r=[],x.vertices.forEach(function(t){var j=u(t,k,n);t.bulge&&(j.bulge=t.bulge),r.push(j)}),x.vertices=r),x.points&&(r=[],x.points.forEach(function(t){var j=u(t,k,n);t.bulge&&(j.bulge=t.bulge),r.push(j)}),x.points=r);var Y=Math.atan2(k.b,k.a),p=Math.cos(Y);x.yInvert=k.d*p<0,x.xInvert=k.a*p<0,0!==Y&&(x.addonAngle=Y),j=x}U.mergeBound(j),L.push(j)}},R.prototype.getPointsBound=function(t){for(var j=1/0,C=1/0,k=-1/0,i=-1/0,U=0,K=t.length;U<K;U++){var y=t[U];j=Math.min(j,y.x),C=Math.min(C,y.y),k=Math.max(k,y.x),i=Math.max(i,y.y)}return{xMin:j,yMin:C,xMax:k,yMax:i}},R.prototype.mergeBound=function(t){var j,C,k=this;C=t.type;for(j in d)if(d[j].indexOf(C)>=0)break;var i,U,K,y,L,X,u,a,B,c,f,R,$,m,D,b,J,v,H,G,Z,q=k.getPointsBound;switch(j){case"LINE":for(i=q(t.vertices),G=t.vertices.length,v=0;v<G;v++)H=t.vertices[v],k._isStraightLine(H.bulge)||(v!==G-1||t.shape)&&(Z=q(k._getBulgeSegment(H,t.vertices[(v+1)%G],H.bulge)),i.xMin=Math.min(i.xMin,Z.xMin),i.yMin=Math.min(i.yMin,Z.yMin),i.xMax=Math.max(i.xMax,Z.xMax),i.yMax=Math.max(i.yMax,Z.yMax));break;case"SOLID":i=q(t.points);break;case"POINT":if(!t.position)return;U=t.position.x,K=t.position.y,i={xMin:U,yMin:K,xMax:U,yMax:K};break;case"TEXT":if(!t.text||!t.text.length)return;U=t.position?t.position.x:t.startPoint.x,K=t.position?t.position.y:t.startPoint.y,J=t.height||t.textHeight||12,k._minFontSize=Math.min(k._minFontSize,J),i={xMin:U,yMin:K,xMax:U+J*t.text.length,yMax:K+J};break;case"CIRCLE":for(U=t.center.x,K=t.center.y,y=t.radius,L=[],X=t.startAngle||0,u=X+(t.angleLength||2*Math.PI),a=t.xInvert^k.extrusionZNagative(t),B=t.yInvert,c=a?-1:1,f=B?-1:1,R=X;R<u+Math.PI/30;R+=Math.PI/30)R=Math.min(R,u),L.push({x:U+c*y*Math.cos(R),y:K+f*y*Math.sin(R)});i=q(L);break;case"ELLIPSE":for(U=t.center.x,K=t.center.y,L=[],$=Math.sqrt(t.major.x*t.major.x+t.major.y*t.major.y),m=$*t.ratio,y=Math.atan2(t.major.y,t.major.x),D=Math.sin(y),b=Math.cos(y),X=t.startAngle||0,u=X+(t.angleLength||2*Math.PI),a=t.xInvert,B=t.yInvert^k.extrusionZNagative(t),c=a?-1:1,f=B?-1:1,R=X;R<u+Math.PI/30;R+=Math.PI/30){R=Math.min(R,u);var A=c*$*Math.cos(R),z=f*m*Math.sin(R);L.push({x:U+(b*A-D*z),y:K+(D*A+b*z)})}i=q(L);break;default:return}var T=k._bound;T.xMin=Math.min(T.xMin,i.xMin),T.yMin=Math.min(T.yMin,i.yMin),T.xMax=Math.max(T.xMax,i.xMax),T.yMax=Math.max(T.yMax,i.yMax)},R.prototype.parseFile=function(t){var j=this,C="string"==typeof j.options.sanitize?{sanitize:j.options.sanitize}:null,k=new K(C),i=k.parseSync(t);j._dxf=i,j._isAc2015="AC1015"===i.header.$ACADVER,j._dxfViewport=j.getCameraParametersFromDxf(i)},R.prototype.toLocal=function(t,j){var C=this;return(2===j?-(t-C._shiftY):1===j?t-C._shiftX:t)*C._scale},R.prototype.getCameraParametersFromDxf=function(t){var j,C,k,i,U,K,y,L,X,u,a,B;if(!j&&t.tables&&t.tables.viewPort){u=t.tables.viewPort.viewPorts;for(X in u)if(a=u[X],B=a.viewDirectionFromTarget,a.center&&(0===a.renderMode||B&&0===B.x&&0===B.y&&1===B.z)){k=a.center,i=a.upperRightCorner,U=a.lowerLeftCorner,j={x:i.x,y:i.y},C={x:U.x,y:U.y},K=a.viewWidth||0,y=a.viewHeight||0,a.viewTarget&&(k={x:k.x+a.viewTarget.x,y:k.y+a.viewTarget.y});break}}return!j&&t.header&&(L=t.header,L.$EXTMIN&&L.$EXTMAX&&(j=L.$EXTMAX,C=L.$EXTMIN)),K=Math.max(K,j.x-C.x),y=Math.max(y,j.y-C.y),k=k||{x:K/2+C.x,y:y/2+C.y},{width:K,height:y,x:k.x,y:k.y}},R.prototype.getColor=function(t,j){var k,i=this;if(t||console.log("no entity",t),j.tables&&j.tables.layer&&(k=j.tables.layer.layers[t.layer]),!k||k.visible){var U;t.color!==C?0===(U=t.color)&&(U=i.options.defaultColor):k&&(U=k.color),U&&16777215!==U||(U=i.options.defaultColor);var U="#"+((1<<24)+U).toString(16).slice(1);return i.options.mapColor&&(U=i.options.mapColor(U)),U}},R.prototype.sortBlocks=function(t){var C,k,i,U,K=j.keys(t),y={};for(C in t)if(k=t[C],k.entities)for(var L=0,X=k.entities.length;L<X;L++)i=k.entities[L],"DIMENSION"!==(U=i.type)&&"INSERT"!==U||i.block&&(y[C]||(y[C]=[]),y[C].push(i.block));for(var u=K.length,a=u,B={},c=new Array(u),f=!1,R=function(t,j,C){if(C.indexOf(t)>=0)return void(f=!0);if(!B[j]){B[j]=!0;var k=y[t],i=k?k.length:0;if(i){var U=C.concat(t);do{var L=k[--i];if(R(L,K.indexOf(L),U),f)break}while(i)}c[--u]=t}};a--;)B[a]||R(K[a],a,[]);return f?[]:c};var $=u.DxfWriter=function(t){this.init(t)};$.prototype={},$.prototype.constructor=$,j.defineProperties($.prototype,{}),$.prototype.init=function(t){var C=this,k=u.DxfWriter.template;k.converted||(j.keys(k).forEach(function(t){k[t]=k[t].join("\n")}),k.converted=!0),C._transformFunc=t.transformFunc||function(t){return t},C._drawingScale=t.scale,C._matchFunc=t.matchFunc||function(){return!0},C._maxHandleId=262128},$.prototype.toDxf=function(t,j){var C=this;return C.dxfContent=t,C.gv=j,C.outputEntityLines=["ENTITIES","  0","ENDSEC"],C._fetchEntityContent(),C._collectGvEntity(),C._insertEntities(),C._write()},$.prototype._collectGvEntity=function(){var t=this;t.gv.dm().toDatas(t._matchFunc).each(function(j){var C=j.a("handle");C&&t._recordMaxHandleId(C)})},$.prototype._fetchEntityContent=function(){var t=this,j=t.dxfContent,C=t.entitiesStartIndex=j.indexOf("ENTITIES"),k=t.entitiesEndIndex=j.indexOf("ENDSEC",C)+"ENDSEC".length;t.entitiesContent=j.slice(C,k),t.dxfEntityLines=t.entitiesContent.split(/\r\n|\n/)},$.prototype._updateEntities=function(){var t=this,j=t.outputEntityLines,k=t.dxfEntityLines,i=t.gvEntities;j.push(k[0]);for(var U,K,y,L,X,u,a,B,c,f,R,d,$,m,D=1,b=1e5,J=t._findCode,v=t._toFloat;b--;){if("ENDSEC"===(L=k[D+1].trim())){j.push(k[D]),j.push(k[D+1]);break}for(U=D+2;b--&&"0"!==k[U].trim();)U+=2;if(X=k[J("5",k,D,U)],t._recordMaxHandleId(X),u=i[X]){for(K=j.length,R=D;R<U;R++)j.push(k[R]);if(y=j.length,D=U,"edge"!==u.a("shapeType")){if("image"===u.a("shapeType")){for(a=t._getNodeRealScale(u),c=2*Math.PI-u.getRotation();c>=2*Math.PI;)c-=2*Math.PI;for(;c<0;)c+=2*Math.PI;B=t._transformFunc(u.getPosition()),Math.abs(a.x-1)<1e-5&&Math.abs(a.y+1)<1e-5&&(a.x=-1,a.y=1,c=2*Math.PI-c);var H={};[{key:"10",value:B.x},{key:"20",value:B.y},{key:"42",value:a.y,default:1,before:["50"]},{key:"41",value:a.x,default:1,dependOn:"42",before:["42","50"]},{key:"50",value:180*c/Math.PI,default:0}].forEach(function(t){if(d=t.key,$=t.value,m=t.default!==C&&Math.abs($-t.default)<1e-5,$=v($,"10"===d||"20"===d||"50"===d),f=J(d,j,K,y))$!==j[f].trim()&&(j[f]=$);else{if(m&&(!t.dependOn||H[t.dependOn]))return void(H[d]=!0);var k=!1;do{if(!t.before)break;if(f=C,t.before.forEach(function(t){var C=J(t,j,K,y);C&&(!f||C<f)&&(f=C)}),!f)break;j.splice(f-1,0," "+d,$),k=!0}while(!1);k||(j.push(" "+d),j.push($)),y+=2}})}}else t._tryUpdateEdge(j,K,y,L,u)}else console.log("have no entity with handle "+X+" "+L),D=U}},$.prototype._recordMaxHandleId=function(t){var j=parseInt("0x"+t),C=this;C._maxHandleId=Math.max(C._maxHandleId,j)},$.prototype._nextHandleId=function(){return(++this._maxHandleId).toString(16).toUpperCase()},$.prototype._getNodeRealScale=function(t){var j=this,C=t.getScale(),k=t.getSize(),i=u.Default.getImage(t.getImage());return{x:C.x*k.width*i.scale/(i.width*j._drawingScale),y:C.y*k.height*i.scale/(i.height*j._drawingScale)}},$.template={INSERT:["  0","INSERT","  5","$HANDLE","330","1F","100","AcDbEntity","  8","0","100","AcDbBlockReference","  2","$BLOCK"," 10","$POSITION.X"," 20","$POSITION.Y"," 30","0.0"," 41","$SCALE.X"," 42","$SCALE.Y"," 50","$ROTATION"]},$.prototype._insertEntities=function(){var t,j=this;j.gv.dm().toDatas(j._matchFunc).each(function(C){if(t=null,C.a("addonBlock"))t=j._addonBlock(C);else if(C.a("addonText"))t=j._addonText(C);else if(C.a("addonARC")&&!C.s("shape.arc.oval")){var k=C.s("shape.arc.to"),i=C.s("shape.arc.from")||0;t=!k||Math.abs(k-i)>=2*Math.PI?j._addonCircle(C):j._addonARC(C)}else C.a("addonARC")&&C.s("shape.arc.oval")?t=j._addonEllipse(C):C.a("addonLine")?t=j._addonLine(C):C.a("addonRect")&&(t=j._addonRect(C));if(t){var U=t.length,K=j.outputEntityLines.length,y=K+U;j.outputEntityLines.length=y,j.outputEntityLines[y-1]=j.outputEntityLines[K-1],j.outputEntityLines[y-2]=j.outputEntityLines[K-2];for(var L=0,X=K-2;L<U;++L,++X)j.outputEntityLines[X]=t[L]}})};var m=function(t){if(t instanceof u.Shape){var j=new u.Matrix,C=t.getPosition();return j.translate(-C.x,-C.y).scale(t.getScaleX(),t.getScaleY()).rotate(t.getRotation()).translate(C.x,C.y),j}return t.getMatrix?t.getMatrix():new u.Matrix};$.prototype._addonRect=function(t){var j=this,C=t.getPoints(),k=t.getSegments(),i=!0;k&&(i=5===k.get(k.size()-1));var U,K=["  0","LWPOLYLINE","  5",t.a("handle")||j._nextHandleId(),"330","1F","100","AcDbEntity","  8","0","100","AcDbPolyline"," 90","        "+C.size()," 70","     "+(i?1:0)," 43","0.0"],y=j._toFloat,L=m(t);return C.each(function(t){U=j._transformFunc(L.tf(t)),K.push.apply(K,[" 10",y(U.x,!0)," 20",y(U.y,!0)])}),K},$.prototype._addonCircle=function(t){var j=this,C=["  0","CIRCLE","  5",t.a("handle")||j._nextHandleId(),"330","1F","100","AcDbEntity","  8","0","100","AcDbCircle"],k=j._toFloat,i=j._transformFunc(t.getPosition());C.push.apply(C,[" 10",k(i.x,!0)," 20",k(i.y,!0)," 30","0.0"]);var U=t.getScale(),K=t.getWidth()*U.x,y=t.getHeight()*U.y;return C.push.apply(C,[" 40",.5*Math.min(K,y)/j._drawingScale]),C},$.prototype._addonLine=function(t){var j,C=this,k=[],i=C._toFloat,U=t.getPoints(),K=m(t),y=C._transformFunc(K.tf(U.get(0))),L=t.a("handle")||C._nextHandleId();return U.each(function(t,U){0!==U&&(k.push.apply(k,["  0","LINE","  5",L,"330","1F","100","AcDbEntity","  8","0","100","AcDbLine"]),k.push.apply(k,[" 10",i(y.x,!0)," 20",i(y.y,!0)," 30","0.0"]),j=C._transformFunc(K.tf(t)),k.push.apply(k,[" 11",i(j.x,!0)," 21",i(j.y,!0)," 31","0.0"]),y=j,L=C._nextHandleId())}),k},$.prototype._addonEllipse=function(t){var j=this,C=["  0","ELLIPSE","  5",t.a("handle")||j._nextHandleId()];C.push.apply(C,["330","1F","100","AcDbEntity","  8","0","100","AcDbEllipse"]);var k=j._toFloat,i=j._transformFunc(t.getPosition());C.push(" 10");C.push(k(i.x,!0));C.push(" 20");C.push(k(i.y,!0)),C.push.apply(C,[" 30","0.0"]);var U,K=t.getScale(),y=t.getWidth()*K.x/j._drawingScale,L=t.getHeight()*K.y/j._drawingScale,X=.5*Math.max(y,L),u=0;y>L?U={x:X,y:0}:(U={x:0,y:X},u=.5*-Math.PI);var a=-t.getRotation(),B=Math.sin(a),c=Math.cos(a),f=c*U.x-B*U.y,R=B*U.x+c*U.y;C.push.apply(C,[" 11",k(f,!0)," 21",k(R,!0)," 31","0.0"]),C.push.apply(C,["210","0.0","220","0.0","230","1.0"]);var d=y/L;d>1&&(d=1/d),C.push.apply(C,[" 40",k(d,!0)]);var $=t.s("shape.arc.from"),m=t.s("shape.arc.to"),D=2*Math.PI-m+u,b=(D+m-$)%(2*Math.PI);return C.push.apply(C,[" 41",D," 42",b||2*Math.PI]),C},$.prototype._addonARC=function(t){var j=this,C=["  0","ARC","  5",t.a("handle")||j._nextHandleId()];C.push.apply(C,["330","1F","100","AcDbEntity","  8","0","100","AcDbCircle"]);var k=j._toFloat,i=j._transformFunc(t.getPosition());C.push(" 10");C.push(k(i.x,!0));C.push(" 20");C.push(k(i.y,!0)),C.push.apply(C,[" 30","0.0"]);var U=t.getScale(),K=t.getWidth()*U.x,y=t.getHeight()*U.y,L=.5*Math.min(K,y);C.push.apply(C,[" 40",k(L/j._drawingScale,!0)]),C.push.apply(C,["100","AcDbArc"]);var X=t.getRotation(),u=t.s("shape.arc.from"),a=t.s("shape.arc.to"),B=2*Math.PI,c=(B-a-X)%B,f=(c+a-u)%B;return f=f||2*Math.PI,C.push.apply(C,[" 50",k(180*c/Math.PI,!0)," 51",k(180*f/Math.PI,!0)]),C};var D={left:0,center:1,right:2},b={top:3,middle:2,bottom:1};$.prototype._addonText=function(t){var j=this,C=["  0","TEXT","  5",t.a("handle")||j._nextHandleId()];C.push.apply(C,["330","1F","100","AcDbEntity","  8","0","100","AcDbText"]);var k=t.s("text.font")||"16px Standard",i=t.s("text"),U=u.Default.getTextSize(k,i),K=t.getScale(),y=parseFloat(k)/j._drawingScale*K.y,L=y/U.height*U.width,X=j._toFloat,a=j._transformFunc(t.getPosition());a.y+=y/4;var B=C.push(" 10");C.push(X(a.x,!0));var c=C.push(" 20");C.push(X(a.y,!0)),C.push.apply(C,[" 30","0.0"]),C.push(" 40"),C.push(y),C.push("  1"),C.push(i);var f=2*Math.PI-t.getRotation();C.push(" 50"),C.push(X(180*f/Math.PI%360,!0)),C.push(" 41"),C.push(K.x/K.y),k=k.substr(k.indexOf("px")+3).split(","),C.push("  7"),C.push(k[0]);var R=t.s("text.align")||"left",d=t.s("text.vAlign")||"bottom";if("left"!==R&&(C.push(" 72"),C.push("     "+D[R])),"bottom"!==d||"left"!==R){C.push(" 11"),C.push(X(a.x,!0)),C.push(" 21"),C.push(X(a.y,!0)),C.push.apply(C,[" 31","0.0"]);var $=0,m=0;"center"===R?$=.5*L:"right"===R&&($=L),$*=K.x,"top"===d?m=y:"middle"===d&&(m=.5*y),m*=K.y;var J=Math.cos(f+Math.PI),v=Math.sin(f+Math.PI);C[B]=J*$-v*m+a.x,C[c]=v*$+J*m+a.y}return C.push.apply(C,["100","AcDbText"]),"bottom"!==d&&(C.push(" 73"),C.push("     "+b[d])),C},$.prototype._addonBlock=function(t){var j=this,C=u.DxfWriter.template.INSERT;C=C.replace("$HANDLE",t.a("handle")||j._nextHandleId()),C=C.replace("$BLOCK",t.getImage());for(var k=j._getNodeRealScale(t),i=2*Math.PI-t.getRotation();i>=2*Math.PI;)i-=2*Math.PI;for(;i<0;)i+=2*Math.PI;var U=j._transformFunc(t.getPosition());Math.abs(k.x-1)<1e-5&&Math.abs(k.y+1)<1e-5&&(k.x=-1,k.y=1,i=2*Math.PI-i);var K=j._toFloat;return C=C.replace("$POSITION.X",K(U.x,!0)),C=C.replace("$POSITION.Y",K(U.y,!0)),C=C.replace("$SCALE.X",K(k.x)),C=C.replace("$SCALE.Y",K(k.y)),C=C.replace("$ROTATION",K(180*i/Math.PI,!0)),C.split(/\r\n|\n/)},$.prototype._tryUpdateEdge=function(t,j,C,k,i){var U=this,K=u.Default.getInternal(),y=K.getEdgeAgentPosition(U.gv,i.getSourceAgent(),i.s("edge.source.position"),i.s("edge.source.offset.x"),i.s("edge.source.offset.y"),i.s("edge.source.anchor.x"),i.s("edge.source.anchor.y")),L=K.getEdgeAgentPosition(U.gv,i.getTargetAgent(),i.s("edge.target.position"),i.s("edge.target.offset.x"),i.s("edge.target.offset.y"),i.s("edge.target.anchor.x"),i.s("edge.target.anchor.y"));y=U._transformFunc(y),L=U._transformFunc(L);var X=U._findCode;if("LINE"===k)t[X("10",t,j,C)]=y.x,t[X("20",t,j,C)]=y.y,t[X("11",t,j,C)]=L.x,t[X("21",t,j,C)]=L.y;else if("LWPOLYLINE"===k){for(var a,B=X("10",t,j,C),c=B;a=X("10",t,c+1,C);)c=a;c=(a=X("30",t,c+1,C))?a:X("20",t,c+1,C),t.splice(B-1,c-B+2);var f=[y];i.s("edge.points").each(function(t){f.push(U._transformFunc(t))}),f.push(L);var R=B-1;f.forEach(function(j){t.splice(R,0,"10",j.x,"20",j.y),R+=4})}},$.prototype._findCode=function(t,j,C,k){for(var i=C,U=!1;i<k;){if(t===j[i].trim()){U=!0;break}i+=2}if(U)return i+1},$.prototype._toFloat=function(t,j){return j||(t=Math.round(1e8*t)/1e8),t=""+t,t.indexOf(".")<0&&(t+=".0"),t},$.prototype._write=function(){var t=this,j=t.dxfContent,C=t.outputEntityLines.join("\n"),k=t.entitiesStartIndex,i=t.entitiesEndIndex;return j.slice(0,k)+C+j.slice(i)}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object),function(t,j,C){var k=t.ht,i=k.Default;i.getInternal().addMethod(i,{fontToShape:function(t,j,C){return new k.FontConverter(j).toShape(t,C)}}),function(j){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=j();else if("function"==typeof define&&define.amd)define([],j);else{var C;C=void 0!==t?t:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,C.opentype=j()}}(function(){return function t(j,C,k){function i(K,y){if(!C[K]){if(!j[K]){var L="function"==typeof require&&require;if(!y&&L)return L(K,!0);if(U)return U(K,!0);var X=new Error("Cannot find module '"+K+"'");throw X.code="MODULE_NOT_FOUND",X}var u=C[K]={exports:{}};j[K][0].call(u.exports,function(t){var C=j[K][1][t];return i(C||t)},u,u.exports,t,j,C,k)}return C[K].exports}for(var U="function"==typeof require&&require,K=0;K<k.length;K++)i(k[K]);return i}({1:[function(t,j,C){C.argument=function(t,j){if(!t)throw new Error(j)},C.assert=C.argument},{}],2:[function(t,j,C){function k(t,j,C,k,i){t.beginPath(),t.moveTo(j,C),t.lineTo(k,i),t.stroke()}C.line=k},{}],3:[function(t,C,k){function i(t){this.font=t}function U(t){this.cmap=t}function K(t,j){this.encoding=t,this.charset=j}function y(t){var j;switch(t.version){case 1:this.names=k.standardNames.slice();break;case 2:for(this.names=new Array(t.numberOfGlyphs),j=0;j<t.numberOfGlyphs;j++)t.glyphNameIndex[j]<k.standardNames.length?this.names[j]=k.standardNames[t.glyphNameIndex[j]]:this.names[j]=t.names[t.glyphNameIndex[j]-k.standardNames.length];break;case 2.5:for(this.names=new Array(t.numberOfGlyphs),j=0;j<t.numberOfGlyphs;j++)this.names[j]=k.standardNames[j+t.glyphNameIndex[j]];break;case 3:this.names=[]}}function L(t){var C,k,i,U,K,y;if(t.tables.cmap)for(C=t.tables.cmap.glyphIndexMap,k=j.keys(C),i=0;i<k.length;i+=1)U=k[i],K=C[U],y=t.glyphs[K],y.addUnicode(parseInt(U));for(i=0;i<t.glyphs.length;i+=1)y=t.glyphs[i],t.cffEncoding?y.name=t.cffEncoding.charset[i]:y.name=t.glyphNames.glyphIndexToName(i)}
var X=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],u=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],a=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],B=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];i.prototype.charToGlyphIndex=function(t){var j,C,k,i,U;if(j=t.charCodeAt(0),!(C=this.font.glyphs))return null;for(k=0;k<C.length;k+=1)for(i=C[k],U=0;U<i.unicodes.length;U+=1)if(i.unicodes[U]===j)return k},U.prototype.charToGlyphIndex=function(t){return this.cmap.glyphIndexMap[t.charCodeAt(0)]||0},K.prototype.charToGlyphIndex=function(t){var j,C;return j=t.charCodeAt(0),C=this.encoding[j],this.charset.indexOf(C)},y.prototype.nameToGlyphIndex=function(t){return this.names.indexOf(t)},y.prototype.glyphIndexToName=function(t){return this.names[t]},k.cffStandardStrings=X,k.cffStandardEncoding=u,k.cffExpertEncoding=a,k.standardNames=B,k.DefaultEncoding=i,k.CmapEncoding=U,k.CffEncoding=K,k.GlyphNames=y,k.addGlyphNames=L},{}],4:[function(j,i,U){function K(t){t=t||{},this.familyName=t.familyName||" ",this.styleName=t.styleName||" ",this.designer=t.designer||" ",this.designerURL=t.designerURL||" ",this.manufacturer=t.manufacturer||" ",this.manufacturerURL=t.manufacturerURL||" ",this.license=t.license||" ",this.licenseURL=t.licenseURL||" ",this.version=t.version||"Version 0.1",this.description=t.description||" ",this.copyright=t.copyright||" ",this.trademark=t.trademark||" ",this.unitsPerEm=t.unitsPerEm||1e3,this.supported=!0,this.glyphs=t.glyphs||[],this.encoding=new X.DefaultEncoding(this),this.tables={}}var y=j("./path"),L=j("./tables/sfnt"),X=j("./encoding");K.prototype.hasChar=function(t){return null!==this.encoding.charToGlyphIndex(t)},K.prototype.charToGlyphIndex=function(t){return this.encoding.charToGlyphIndex(t)},K.prototype.charToGlyph=function(t){var j,C;return j=this.charToGlyphIndex(t),C=this.glyphs[j],C||(C=this.glyphs[0]),C},K.prototype.stringToGlyphs=function(t){var j,C,k;for(k=[],j=0;j<t.length;j+=1)C=t[j],k.push(this.charToGlyph(C));return k},K.prototype.nameToGlyphIndex=function(t){return this.glyphNames.nameToGlyphIndex(t)},K.prototype.nameToGlyph=function(t){var j,C;return j=this.nametoGlyphIndex(t),C=this.glyphs[j],C||(C=this.glyphs[0]),C},K.prototype.glyphIndexToName=function(t){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(t):""},K.prototype.getKerningValue=function(t,j){t=t.index||t,j=j.index||j;var C=this.getGposKerningValue;return C?C(t,j):this.kerningPairs[t+","+j]||0},K.prototype.forEachGlyph=function(t,j,k,i,U,K){var y,L,X,u,a,B;if(this.supported)for(j=j!==C?j:0,k=k!==C?k:0,i=i!==C?i:72,U=U||{},y=U.kerning===C||U.kerning,L=1/this.unitsPerEm*i,X=this.stringToGlyphs(t),u=0;u<X.length;u+=1)a=X[u],K(a,j,k,i,U),a.advanceWidth&&(j+=a.advanceWidth*L),y&&u<X.length-1&&(B=this.getKerningValue(a,X[u+1]),j+=B*L)},K.prototype.getPath=function(t,j,C,k,i){var U=new y.Path;return this.forEachGlyph(t,j,C,k,i,function(t,j,C,k){var i=t.getPath(j,C,k);U.extend(i)}),U},K.prototype.draw=function(t,j,C,k,i,U){this.getPath(j,C,k,i,U).draw(t)},K.prototype.drawPoints=function(t,j,C,k,i,U){this.forEachGlyph(j,C,k,i,U,function(j,C,k,i){j.drawPoints(t,C,k,i)})},K.prototype.drawMetrics=function(t,j,C,k,i,U){this.forEachGlyph(j,C,k,i,U,function(j,C,k,i){j.drawMetrics(t,C,k,i)})},K.prototype.validate=function(){function t(t,j){t||C.push(j)}function j(j){t(k[j]&&k[j].trim().length>0,"No "+j+" specified.")}var C=[],k=this;j("familyName"),j("weightName"),j("manufacturer"),j("copyright"),j("version"),t(this.unitsPerEm>0,"No unitsPerEm specified.")},K.prototype.toTables=function(){return L.fontToTable(this)},K.prototype.toBuffer=function(){for(var t=this.toTables(),j=t.encode(),C=new ArrayBuffer(j.length),k=new Uint8Array(C),i=0;i<j.length;i++)k[i]=j[i];return C},K.prototype.download=function(){var j=this.familyName.replace(/\s/g,"")+"-"+this.styleName+".otf",C=this.toBuffer();t.requestFileSystem=t.requestFileSystem||t.webkitRequestFileSystem,t.requestFileSystem(t.TEMPORARY,C.byteLength,function(t){t.root.getFile(j,{create:!0},function(t){t.createWriter(function(j){var i=new DataView(C),U=new Blob([i],{type:"font/opentype"});j.write(U),j.addEventListener("writeend",function(){location.href=t.toURL()},k.Default.eventListenerOptionsFalse)})})},function(t){throw t})},U.Font=K},{"./encoding":3,"./path":8,"./tables/sfnt":23}],5:[function(t,j,k){function i(t){this.font=t.font||null,this.index=t.index||0,this.name=t.name||null,this.unicode=t.unicode||C,this.unicodes=t.unicodes||t.unicode!==C?[t.unicode]:[],this.xMin=t.xMin||0,this.yMin=t.yMin||0,this.xMax=t.xMax||0,this.yMax=t.yMax||0,this.advanceWidth=t.advanceWidth||0,this.path=t.path||null}var U=t("./check"),K=t("./draw"),y=t("./path");i.prototype.addUnicode=function(t){0===this.unicodes.length&&(this.unicode=t),this.unicodes.push(t)},i.prototype.getPath=function(t,j,k){var i,U,K,L;t=t!==C?t:0,j=j!==C?j:0,k=k!==C?k:72,i=1/this.font.unitsPerEm*k,U=new y.Path,K=this.path.commands;for(var X=0;X<K.length;X+=1)L=K[X],"M"===L.type?U.moveTo(t+L.x*i,j+-L.y*i):"L"===L.type?U.lineTo(t+L.x*i,j+-L.y*i):"Q"===L.type?U.quadraticCurveTo(t+L.x1*i,j+-L.y1*i,t+L.x*i,j+-L.y*i):"C"===L.type?U.curveTo(t+L.x1*i,j+-L.y1*i,t+L.x2*i,j+-L.y2*i,t+L.x*i,j+-L.y*i):"Z"===L.type&&U.closePath();return U},i.prototype.getContours=function(){var t,j,k,i;if(this.points===C)return[];for(t=[],j=[],k=0;k<this.points.length;k+=1)i=this.points[k],j.push(i),i.lastPointOfContour&&(t.push(j),j=[]);return U.argument(0===j.length,"There are still points left in the current contour."),t},i.prototype.getMetrics=function(){for(var t=this.path.commands,j=[],C=[],k=0;k<t.length;k+=1){var i=t[k];"Z"!==i.type&&(j.push(i.x),C.push(i.y)),"Q"!==i.type&&"C"!==i.type||(j.push(i.x1),C.push(i.y1)),"C"===i.type&&(j.push(i.x2),C.push(i.y2))}var U={xMin:Math.min.apply(null,j),yMin:Math.min.apply(null,C),xMax:Math.max.apply(null,j),yMax:Math.max.apply(null,C),leftSideBearing:0};return U.rightSideBearing=this.advanceWidth-U.leftSideBearing-(U.xMax-U.xMin),U},i.prototype.draw=function(t,j,C,k){this.getPath(j,C,k).draw(t)},i.prototype.drawPoints=function(t,j,k,i){function U(j,C,k,i){var U,K=2*Math.PI;for(t.beginPath(),U=0;U<j.length;U+=1)t.moveTo(C+j[U].x*i,k+j[U].y*i),t.arc(C+j[U].x*i,k+j[U].y*i,2,0,K,!1);t.closePath(),t.fill()}var K,y,L,X,u,a;for(j=j!==C?j:0,k=k!==C?k:0,i=i!==C?i:24,K=1/this.font.unitsPerEm*i,L=[],X=[],u=this.path,y=0;y<u.commands.length;y+=1)a=u.commands[y],a.x!==C&&L.push({x:a.x,y:-a.y}),a.x1!==C&&X.push({x:a.x1,y:-a.y1}),a.x2!==C&&X.push({x:a.x2,y:-a.y2});t.fillStyle="blue",U(L,j,k,K),t.fillStyle="red",U(X,j,k,K)},i.prototype.drawMetrics=function(t,j,k,i){var U;j=j!==C?j:0,k=k!==C?k:0,i=i!==C?i:24,U=1/this.font.unitsPerEm*i,t.lineWidth=1,t.strokeStyle="black",K.line(t,j,-1e4,j,1e4),K.line(t,-1e4,k,1e4,k),t.strokeStyle="blue",K.line(t,j+this.xMin*U,-1e4,j+this.xMin*U,1e4),K.line(t,j+this.xMax*U,-1e4,j+this.xMax*U,1e4),K.line(t,-1e4,k+-this.yMin*U,1e4,k+-this.yMin*U),K.line(t,-1e4,k+-this.yMax*U,1e4,k+-this.yMax*U),t.strokeStyle="green",K.line(t,j+this.advanceWidth*U,-1e4,j+this.advanceWidth*U,1e4)},k.Glyph=i},{"./check":1,"./draw":2,"./path":8}],6:[function(j,C,k){function i(t){var j,C=new ArrayBuffer(t.length),k=new Uint8Array(C);for(j=0;j<t.length;j+=1)k[j]=t[j];return C}function U(t,C){j("fs").readFile(t,function(t,j){if(t)return C(t.message);C(null,i(j))})}function K(t,j){var C=new XMLHttpRequest;C.open("get",t,!0),C.responseType="arraybuffer",C.onload=function(){return 200!==C.status?j("Font could not be loaded: "+C.statusText):j(null,C.response||C.responseText)},C.send()}function y(t){var j,C,k,i,U,K,y,L,a,c,A,z,T,E,s,e,x,o;if(j=new u.Font,C=new DataView(t,0),1===(k=B.getFixed(C,0)))j.outlinesFormat="truetype";else{if("OTTO"!==(k=B.getTag(C,0)))throw new Error("Unsupported OpenType version "+k);j.outlinesFormat="cff"}for(i=B.getUShort(C,4),K=12,U=0;U<i;U+=1){switch(y=B.getTag(C,K),L=B.getULong(C,K+8),y){case"cmap":j.tables.cmap=f.parse(C,L),j.encoding=new X.CmapEncoding(j.tables.cmap),j.encoding||(j.supported=!1);break;case"head":j.tables.head=m.parse(C,L),j.unitsPerEm=j.tables.head.unitsPerEm,s=j.tables.head.indexToLocFormat;break;case"hhea":j.tables.hhea=D.parse(C,L),j.ascender=j.tables.hhea.ascender,j.descender=j.tables.hhea.descender,j.numberOfHMetrics=j.tables.hhea.numberOfHMetrics;break;case"hmtx":a=L;break;case"maxp":j.tables.maxp=H.parse(C,L),j.numGlyphs=e=j.tables.maxp.numGlyphs;break;case"name":j.tables.name=G.parse(C,L),j.familyName=j.tables.name.fontFamily,j.styleName=j.tables.name.fontSubfamily;break;case"OS/2":j.tables.os2=Z.parse(C,L);break;case"post":j.tables.post=q.parse(C,L),j.glyphNames=new X.GlyphNames(j.tables.post);break;case"glyf":c=L;break;case"loca":A=L;break;case"CFF ":z=L;break;case"kern":T=L;break;case"GPOS":E=L}K+=16}return c&&A?(o=0===s,x=v.parse(C,A,e,o),j.glyphs=d.parse(C,c,x,j),b.parse(C,a,j.numberOfHMetrics,j.numGlyphs,j.glyphs),X.addGlyphNames(j)):z?(R.parse(C,z,j),X.addGlyphNames(j)):j.supported=!1,j.supported&&(j.kerningPairs=T?J.parse(C,T):{},E&&$.parse(C,E,j)),j}function L(j,C){(void 0===t?U:K)(j,function(t,j){if(t)return C(t);var k=y(j);return k.supported?C(null,k):C("Font is not supported (is this a Postscript font?)")})}var X=j("./encoding"),u=j("./font"),a=j("./glyph"),B=j("./parse"),c=j("./path"),f=j("./tables/cmap"),R=j("./tables/cff"),d=j("./tables/glyf"),$=j("./tables/gpos"),m=j("./tables/head"),D=j("./tables/hhea"),b=j("./tables/hmtx"),J=j("./tables/kern"),v=j("./tables/loca"),H=j("./tables/maxp"),G=j("./tables/name"),Z=j("./tables/os2"),q=j("./tables/post");k._parse=B,k.Font=u.Font,k.Glyph=a.Glyph,k.Path=c.Path,k.parse=y,k.load=L},{"./encoding":3,"./font":4,"./glyph":5,"./parse":7,"./path":8,"./tables/cff":10,"./tables/cmap":11,"./tables/glyf":12,"./tables/gpos":13,"./tables/head":14,"./tables/hhea":15,"./tables/hmtx":16,"./tables/kern":17,"./tables/loca":18,"./tables/maxp":19,"./tables/name":20,"./tables/os2":21,"./tables/post":22,fs:C}],7:[function(t,j,k){function i(t,j){this.data=t,this.offset=j,this.relativeOffset=0}k.getByte=function(t,j){return t.getUint8(j)},k.getCard8=k.getByte,k.getUShort=function(t,j){return t.getUint16(j,!1)},k.getCard16=k.getUShort,k.getShort=function(t,j){return t.getInt16(j,!1)},k.getULong=function(t,j){return t.getUint32(j,!1)},k.getFixed=function(t,j){var C,k;return C=t.getInt16(j,!1),k=t.getUint16(j+2,!1),C+k/65535},k.getTag=function(t,j){var C,k="";for(C=j;C<j+4;C+=1)k+=String.fromCharCode(t.getInt8(C));return k},k.getOffset=function(t,j,C){var k,i;for(i=0,k=0;k<C;k+=1)i<<=8,i+=t.getUint8(j+k);return i},k.getBytes=function(t,j,C){var k,i;for(k=[],i=j;i<C;i+=1)k.push(t.getUint8(i));return k},k.bytesToString=function(t){var j,C;for(j="",C=0;C<t.length;C+=1)j+=String.fromCharCode(t[C]);return j};var U={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};i.prototype.parseByte=function(){var t=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,t},i.prototype.parseChar=function(){var t=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,t},i.prototype.parseCard8=i.prototype.parseByte,i.prototype.parseUShort=function(){var t=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,t},i.prototype.parseCard16=i.prototype.parseUShort,i.prototype.parseSID=i.prototype.parseUShort,i.prototype.parseOffset16=i.prototype.parseUShort,i.prototype.parseShort=function(){var t=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,t},i.prototype.parseF2Dot14=function(){var t=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,t},i.prototype.parseULong=function(){var t=k.getULong(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,t},i.prototype.parseFixed=function(){var t=k.getFixed(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,t},i.prototype.parseOffset16List=i.prototype.parseUShortList=function(t){for(var j=new Array(t),C=this.data,i=this.offset+this.relativeOffset,U=0;U<t;U++)j[U]=k.getUShort(C,i),i+=2;return this.relativeOffset+=2*t,j},i.prototype.parseString=function(t){var j=this.data,C=this.offset+this.relativeOffset,k="";this.relativeOffset+=t;for(var i=0;i<t;i++)k+=String.fromCharCode(j.getUint8(C+i));return k},i.prototype.parseTag=function(){return this.parseString(4)},i.prototype.parseLongDateTime=function(){var t=k.getULong(this.data,this.offset+this.relativeOffset+4);return this.relativeOffset+=8,t},i.prototype.parseFixed=function(){var t=k.getULong(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,t/65536},i.prototype.parseVersion=function(){var t=k.getUShort(this.data,this.offset+this.relativeOffset),j=k.getUShort(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,t+j/4096/10},i.prototype.skip=function(t,j){j===C&&(j=1),this.relativeOffset+=U[t]*j},k.Parser=i},{}],8:[function(t,j,k){function i(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}i.prototype.moveTo=function(t,j){this.commands.push({type:"M",x:t,y:j})},i.prototype.lineTo=function(t,j){this.commands.push({type:"L",x:t,y:j})},i.prototype.curveTo=i.prototype.bezierCurveTo=function(t,j,C,k,i,U){this.commands.push({type:"C",x1:t,y1:j,x2:C,y2:k,x:i,y:U})},i.prototype.quadTo=i.prototype.quadraticCurveTo=function(t,j,C,k){this.commands.push({type:"Q",x1:t,y1:j,x:C,y:k})},i.prototype.close=i.prototype.closePath=function(){this.commands.push({type:"Z"})},i.prototype.extend=function(t){t.commands&&(t=t.commands),Array.prototype.push.apply(this.commands,t)},i.prototype.draw=function(t){var j,C;for(t.beginPath(),j=0;j<this.commands.length;j+=1)C=this.commands[j],"M"===C.type?t.moveTo(C.x,C.y):"L"===C.type?t.lineTo(C.x,C.y):"C"===C.type?t.bezierCurveTo(C.x1,C.y1,C.x2,C.y2,C.x,C.y):"Q"===C.type?t.quadraticCurveTo(C.x1,C.y1,C.x,C.y):"Z"===C.type&&t.closePath();this.fill&&(t.fillStyle=this.fill,t.fill()),this.stroke&&(t.strokeStyle=this.stroke,t.lineWidth=this.strokeWidth,t.stroke())},i.prototype.toPathData=function(t){function j(j){return Math.round(j)===j?""+Math.round(j):j.toFixed(t)}function k(){for(var t="",C=0;C<arguments.length;C+=1){var k=arguments[C];k>=0&&C>0&&(t+=" "),t+=j(k)}return t}t=t!==C?t:2;for(var i="",U=0;U<this.commands.length;U+=1){var K=this.commands[U];"M"===K.type?i+="M"+k(K.x,K.y):"L"===K.type?i+="L"+k(K.x,K.y):"C"===K.type?i+="C"+k(K.x1,K.y1,K.x2,K.y2,K.x,K.y):"Q"===K.type?i+="Q"+k(K.x1,K.y1,K.x,K.y):"Z"===K.type&&(i+="Z")}return i},i.prototype.toSVG=function(t){var j='<path d="';return j+=this.toPathData(t),j+='"',this.fill&"black"!==this.fill&&(null===this.fill?j+=' fill="none"':j+=' fill="'+this.fill+'"'),this.stroke&&(j+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),j+="/>"},k.Path=i},{}],9:[function(t,k,i){function U(t,k,i){var U;for(U=0;U<k.length;U+=1){var K=k[U];this[K.name]=K.value}if(this.tableName=t,this.fields=k,i){var y=j.keys(i);for(U=0;U<y.length;U+=1){var L=y[U],X=i[L];this[L]!==C&&(this[L]=X)}}}var K=t("./check"),y=t("./types").encode,L=t("./types").sizeOf;U.prototype.sizeOf=function(){for(var t=0,j=0;j<this.fields.length;j+=1){var k=this.fields[j],i=this[k.name];if(i===C&&(i=k.value),"function"==typeof i.sizeOf)t+=i.sizeOf();else{var U=L[k.type];K.assert("function"==typeof U,"Could not find sizeOf function for field"+k.name),t+=U(i)}}return t},U.prototype.encode=function(){return y.TABLE(this)},i.Table=U},{"./check":1,"./types":24}],10:[function(t,j,k){function i(t,j){if(t===j)return!0;if(Array.isArray(t)&&Array.isArray(j)){if(t.length!==j.length)return!1;for(var C=0;C<t.length;C+=1)if(!i(t[C],j[C]))return!1;return!0}return!1}function U(t,j,C){var k,i,U,K,y,L,X,u,a;if(k=[],i=[],0!==(U=w.getCard16(t,j))){for(y=w.getByte(t,j+2),L=j+(U+1)*y+2,X=j+3,u=0;u<U+1;u+=1)k.push(w.getOffset(t,X,y)),X+=y;K=L+k[U]}else K=j+2;for(u=0;u<k.length-1;u+=1)a=w.getBytes(t,L+k[u],L+k[u+1]),C&&(a=C(a)),i.push(a);return{objects:i,startOffset:j,endOffset:K}}function K(t){var j,C,k,i,U,K;for(j="",C=15,k=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];(i=t.parseByte(),U=i>>4,K=15&i,U!==C)&&(j+=k[U],K!==C);)j+=k[K];return parseFloat(j)}function y(t,j){var C,k,i,U;if(28===j)return C=t.parseByte(),k=t.parseByte(),C<<8|k;if(29===j)return C=t.parseByte(),k=t.parseByte(),i=t.parseByte(),U=t.parseByte(),C<<24|k<<16|i<<8|U;if(30===j)return K(t);if(j>=32&&j<=246)return j-139;if(j>=247&&j<=250)return C=t.parseByte(),256*(j-247)+C+108;if(j>=251&&j<=254)return C=t.parseByte(),256*-(j-251)-C-108;throw new Error("Invalid b0 "+j)}function L(t){var j,C,k,i,U;for(j={},i=0;i<t.length;i+=1){if(C=t[i][0],k=t[i][1],U=1===k.length?k[0]:k,j.hasOwnProperty(C))throw new Error("Object "+j+" already has key "+C);j[C]=U}return j}function X(t,j,k){var i,U,K,X;for(j=j!==C?j:0,i=new w.Parser(t,j),U=[],K=[],k=k!==C?k:t.length;i.relativeOffset<k;)X=i.parseByte(),X<=21?(12===X&&(X=1200+i.parseByte()),U.push([X,K]),K=[]):K.push(y(i,X));return L(U)}function u(t,j){return j=j<=390?o.cffStandardStrings[j]:t[j-391]}function a(t,j,k){var i,U,K,y;for(y={},i=0;i<j.length;i+=1)U=j[i],K=t[U.op],K===C&&(K=U.value!==C?U.value:null),"SID"===U.type&&(K=u(k,K)),y[U.name]=K;return y}function B(t,j){var C={};return C.formatMajor=w.getCard8(t,j),C.formatMinor=w.getCard8(t,j+1),C.size=w.getCard8(t,j+2),C.offsetSize=w.getCard8(t,j+3),C.startOffset=j,C.endOffset=j+4,C}function c(t,j){var C;return C=X(t,0,t.byteLength),a(C,p,j)}function f(t,j,C,k){var i;return i=X(t,j,C),a(i,M,k)}function R(t,j,C,k){var i,U,K,y,L,X;if(i=new w.Parser(t,j),C-=1,K=[".notdef"],0===(U=i.parseCard8()))for(y=0;y<C;y+=1)L=i.parseSID(),K.push(u(k,L));else if(1===U)for(;K.length<=C;)for(L=i.parseSID(),X=i.parseCard8(),y=0;y<=X;y+=1)K.push(u(k,L)),L+=1;else{if(2!==U)throw new Error("Unknown charset format "+U);for(;K.length<=C;)for(L=i.parseSID(),X=i.parseCard16(),y=0;y<=X;y+=1)K.push(u(k,L)),L+=1}return K}function d(t,j,C){var k,i,U,K,y,L,X,u,a,B;if(k={},i=new w.Parser(t,j),0===(U=i.parseCard8()))for(K=i.parseCard8(),y=0;y<K;y+=1)L=i.parseCard8(),k[L]=y;else{if(1!==U)throw new Error("Unknown encoding format "+U);for(X=i.parseCard8(),L=1,y=0;y<X;y+=1)for(u=i.parseCard8(),a=i.parseCard8(),B=u;B<=u+a;B+=1)k[B]=L,L+=1}return new o.CffEncoding(k,C)}function $(t,j,C){function k(t,j){B&&K.closePath(),K.moveTo(t,j),B=!0}function i(){var t;t=L.length%2!=0,t&&!u&&(a=L.shift()+j.nominalWidthX),X+=L.length>>1,L.length=0,u=!0}function U(t){var y,b,J,v,H,G,Z;for(y=0;y<t.length;)switch(D=t[y],y+=1,D){case 1:case 3:i();break;case 4:L.length>1&&!u&&(a=L.shift()+j.nominalWidthX,u=!0),f+=L.pop(),k(c,f);break;case 5:for(;L.length>0;)c+=L.shift(),f+=L.shift(),K.lineTo(c,f);break;case 6:for(;L.length>0&&(c+=L.shift(),K.lineTo(c,f),0!==L.length);)f+=L.shift(),K.lineTo(c,f);break;case 7:for(;L.length>0&&(f+=L.shift(),K.lineTo(c,f),0!==L.length);)c+=L.shift(),K.lineTo(c,f);break;case 8:for(;L.length>0;)R=c+L.shift(),d=f+L.shift(),$=R+L.shift(),m=d+L.shift(),c=$+L.shift(),f=m+L.shift(),K.curveTo(R,d,$,m,c,f);break;case 10:G=L.pop()+j.subrsBias,(Z=j.subrs[G])&&U(Z);break;case 11:return;case 12:D=t[y],y+=1;var q,A,z,T,E,s;switch(D){case 35:R=c+L.shift(),d=f+L.shift(),$=R+L.shift(),m=d+L.shift(),q=$+L.shift(),A=m+L.shift(),z=q+L.shift(),T=A+L.shift(),E=z+L.shift(),s=T+L.shift(),c=E+L.shift(),f=s+L.shift(),L.shift(),K.curveTo(R,d,$,m,q,A),K.curveTo(z,T,E,s,c,f);break;case 34:R=c+L.shift(),d=f,$=R+L.shift(),m=d+L.shift(),q=$+L.shift(),A=m,z=q+L.shift(),T=m,E=z+L.shift(),s=f,c=E+L.shift(),K.curveTo(R,d,$,m,q,A),K.curveTo(z,T,E,s,c,f);break;case 36:R=c+L.shift(),d=f+L.shift(),$=R+L.shift(),m=d+L.shift(),q=$+L.shift(),A=m,z=q+L.shift(),T=m,E=z+L.shift(),s=T+L.shift(),c=E+L.shift(),K.curveTo(R,d,$,m,q,A),K.curveTo(z,T,E,s,c,f);break;case 37:R=c+L.shift(),d=f+L.shift(),$=R+L.shift(),m=d+L.shift(),q=$+L.shift(),A=m+L.shift(),z=q+L.shift(),T=A+L.shift(),E=z+L.shift(),s=T+L.shift(),Math.abs(E-c)>Math.abs(s-f)?c=E+L.shift():f=s+L.shift(),K.curveTo(R,d,$,m,q,A),K.curveTo(z,T,E,s,c,f);break;default:console.log("Glyph "+C+": unknown operator 1200"+D),L.length=0}break;case 14:L.length>0&&!u&&(a=L.shift()+j.nominalWidthX,u=!0),B&&(K.closePath(),B=!1);break;case 18:i();break;case 19:case 20:i(),y+=X+7>>3;break;case 21:L.length>2&&!u&&(a=L.shift()+j.nominalWidthX,u=!0),f+=L.pop(),c+=L.pop(),k(c,f);break;case 22:L.length>1&&!u&&(a=L.shift()+j.nominalWidthX,u=!0),c+=L.pop(),k(c,f);break;case 23:i();break;case 24:for(;L.length>2;)R=c+L.shift(),d=f+L.shift(),$=R+L.shift(),m=d+L.shift(),c=$+L.shift(),f=m+L.shift(),K.curveTo(R,d,$,m,c,f);c+=L.shift(),f+=L.shift(),K.lineTo(c,f);break;case 25:for(;L.length>6;)c+=L.shift(),f+=L.shift(),K.lineTo(c,f);R=c+L.shift(),d=f+L.shift(),$=R+L.shift(),m=d+L.shift(),c=$+L.shift(),f=m+L.shift(),K.curveTo(R,d,$,m,c,f);break;case 26:for(L.length%2&&(c+=L.shift());L.length>0;)R=c,d=f+L.shift(),$=R+L.shift(),m=d+L.shift(),c=$,f=m+L.shift(),K.curveTo(R,d,$,m,c,f);break;case 27:for(L.length%2&&(f+=L.shift());L.length>0;)R=c+L.shift(),d=f,$=R+L.shift(),m=d+L.shift(),c=$+L.shift(),f=m,K.curveTo(R,d,$,m,c,f);break;case 28:b=t[y],J=t[y+1],L.push((b<<24|J<<16)>>16),y+=2;break;case 29:G=L.pop()+j.gsubrsBias,(Z=j.gsubrs[G])&&U(Z);break;case 30:for(;L.length>0&&(R=c,d=f+L.shift(),$=R+L.shift(),m=d+L.shift(),c=$+L.shift(),f=m+(1===L.length?L.shift():0),K.curveTo(R,d,$,m,c,f),0!==L.length);)R=c+L.shift(),d=f,$=R+L.shift(),m=d+L.shift(),f=m+L.shift(),c=$+(1===L.length?L.shift():0),K.curveTo(R,d,$,m,c,f);break;case 31:for(;L.length>0&&(R=c+L.shift(),d=f,$=R+L.shift(),m=d+L.shift(),f=m+L.shift(),c=$+(1===L.length?L.shift():0),K.curveTo(R,d,$,m,c,f),0!==L.length);)R=c,d=f+L.shift(),$=R+L.shift(),m=d+L.shift(),c=$+L.shift(),
f=m+(1===L.length?L.shift():0),K.curveTo(R,d,$,m,c,f);break;default:D<32?console.log("Glyph "+C+": unknown operator "+D):D<247?L.push(D-139):D<251?(b=t[y],y+=1,L.push(256*(D-247)+b+108)):D<255?(b=t[y],y+=1,L.push(256*-(D-251)-b-108)):(b=t[y],J=t[y+1],v=t[y+2],H=t[y+3],y+=4,L.push((b<<24|J<<16|v<<8|H)/65536))}}var K,y,L,X,u,a,B,c,f,R,d,$,m,D;return K=new r.Path,L=[],X=0,u=!1,a=j.defaultWidthX,B=!1,c=f=0,U(t),y=new n.Glyph({font:j,index:C}),y.path=K,y.advanceWidth=a,y}function m(t){return t.length<1240?107:t.length<33900?1131:32768}function D(t,j,C){var k,i,K,y,L,X,u,a,D,b,J,v,H,G;C.tables.cff={},k=B(t,j),i=U(t,k.endOffset,w.bytesToString),K=U(t,i.endOffset),y=U(t,K.endOffset,w.bytesToString),L=U(t,y.endOffset),C.gsubrs=L.objects,C.gsubrsBias=m(C.gsubrs);var Z=new DataView(new Uint8Array(K.objects[0]).buffer);for(X=c(Z,y.objects),C.tables.cff.topDict=X,u=j+X.private[1],a=f(t,u,X.private[0],y.objects),C.defaultWidthX=a.defaultWidthX,C.nominalWidthX=a.nominalWidthX,0!==a.subrs?(D=u+a.subrs,b=U(t,D),C.subrs=b.objects,C.subrsBias=m(C.subrs)):(C.subrs=[],C.subrsBias=0),v=U(t,j+X.charStrings),C.nGlyphs=v.objects.length,H=R(t,j+X.charset,C.nGlyphs,y.objects),0===X.encoding?C.cffEncoding=new o.CffEncoding(o.cffStandardEncoding,H):1===X.encoding?C.cffEncoding=new o.CffEncoding(o.cffExpertEncoding,H):C.cffEncoding=d(t,j+X.encoding,H),C.encoding=C.encoding||C.cffEncoding,C.glyphs=[],G=0;G<C.nGlyphs;G+=1)J=v.objects[G],C.glyphs.push($(J,C,G))}function b(t,j){var C,k;return C=o.cffStandardStrings.indexOf(t),C>=0&&(k=C),C=j.indexOf(t),C>=0?k=C+o.cffStandardStrings.length:(k=o.cffStandardStrings.length+j.length,j.push(t)),k}function J(){return new Y.Table("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}function v(t){var j=new Y.Table("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);j.names=[];for(var C=0;C<t.length;C+=1)j.names.push({name:"name_"+C,type:"NAME",value:t[C]});return j}function H(t,j,k){var U,K,y,L={};for(U=0;U<t.length;U+=1)K=t[U],(y=j[K.name])===C||i(y,K.value)||("SID"===K.type&&(y=b(y,k)),L[K.op]={name:K.name,type:K.type,value:y});return L}function G(t,j){var C=new Y.Table("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return C.dict=H(p,t,j),C}function Z(t){var j=new Y.Table("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return j.topDicts=[{name:"topDict_0",type:"TABLE",value:t}],j}function q(t){var j=new Y.Table("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);j.strings=[];for(var C=0;C<t.length;C+=1)j.strings.push({name:"string_"+C,type:"STRING",value:t[C]});return j}function A(){return new Y.Table("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}function z(t,j){for(var C=new Y.Table("Charsets",[{name:"format",type:"Card8",value:0}]),k=0;k<t.length;k+=1){var i=t[k],U=b(i,j);C.fields.push({name:"glyph_"+k,type:"SID",value:U})}return C}function T(t){var j,C,k,i,U,K,y,L,X,u,a=[],B=t.path;for(a.push({name:"width",type:"NUMBER",value:t.advanceWidth}),j=0,C=0,k=0;k<B.commands.length;k+=1)i=B.commands[k],"Q"===i.type&&(i={type:"C",x:i.x,y:i.y,x1:1/3*j+2/3*i.x1,y1:1/3*C+2/3*i.y1,x2:1/3*i.x+2/3*i.x1,y2:1/3*i.y+2/3*i.y1}),"M"===i.type?(U=Math.round(i.x-j),K=Math.round(i.y-C),a.push({name:"dx",type:"NUMBER",value:U}),a.push({name:"dy",type:"NUMBER",value:K}),a.push({name:"rmoveto",type:"OP",value:21}),j=Math.round(i.x),C=Math.round(i.y)):"L"===i.type?(U=Math.round(i.x-j),K=Math.round(i.y-C),a.push({name:"dx",type:"NUMBER",value:U}),a.push({name:"dy",type:"NUMBER",value:K}),a.push({name:"rlineto",type:"OP",value:5}),j=Math.round(i.x),C=Math.round(i.y)):"C"===i.type?(y=Math.round(i.x1-j),L=Math.round(i.y1-C),X=Math.round(i.x2-i.x1),u=Math.round(i.y2-i.y1),U=Math.round(i.x-i.x2),K=Math.round(i.y-i.y2),a.push({name:"dx1",type:"NUMBER",value:y}),a.push({name:"dy1",type:"NUMBER",value:L}),a.push({name:"dx2",type:"NUMBER",value:X}),a.push({name:"dy2",type:"NUMBER",value:u}),a.push({name:"dx",type:"NUMBER",value:U}),a.push({name:"dy",type:"NUMBER",value:K}),a.push({name:"rrcurveto",type:"OP",value:8}),j=Math.round(i.x),C=Math.round(i.y)):i.type;return a.push({name:"endchar",type:"OP",value:14}),a}function E(t){for(var j=new Y.Table("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),C=0;C<t.length;C+=1){var k=t[C],i=T(k);j.charStrings.push({name:k.name,type:"CHARSTRING",value:i})}return j}function s(t,j){var C=new Y.Table("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return C.dict=H(M,t,j),C}function e(t){var j=new Y.Table("Private DICT INDEX",[{name:"privateDicts",type:"INDEX",value:[]}]);return j.privateDicts=[{name:"privateDict_0",type:"TABLE",value:t}],j}function x(t,j){var C=new Y.Table("CFF ",[{name:"header",type:"TABLE"},{name:"nameIndex",type:"TABLE"},{name:"topDictIndex",type:"TABLE"},{name:"stringIndex",type:"TABLE"},{name:"globalSubrIndex",type:"TABLE"},{name:"charsets",type:"TABLE"},{name:"charStringsIndex",type:"TABLE"},{name:"privateDictIndex",type:"TABLE"}]),k={version:j.version,fullName:j.fullName,familyName:j.familyName,weight:j.weightName,charset:999,encoding:0,charStrings:999};k.private=[0,999];for(var i={},U=[],K=1;K<t.length;K+=1)U.push(t[K].name);var y=[];C.header=J(),C.nameIndex=v([j.postScriptName]);var L=G(k,y);C.topDictIndex=Z(L),C.globalSubrIndex=A(),C.charsets=z(U,y),C.charStringsIndex=E(t);var X=s(i,y);C.privateDictIndex=e(X),C.stringIndex=q(y);var u=C.header.sizeOf()+C.nameIndex.sizeOf()+C.topDictIndex.sizeOf()+C.stringIndex.sizeOf()+C.globalSubrIndex.sizeOf();return k.charset=u,k.encoding=0,k.charStrings=k.charset+C.charsets.sizeOf(),k.private[1]=k.charStrings+C.charStringsIndex.sizeOf(),L=G(k,y),C.topDictIndex=Z(L),C}var o=t("../encoding"),n=t("../glyph"),w=t("../parse"),r=t("../path"),Y=t("../table"),p=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]}],M=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];k.parse=D,k.make=x},{"../encoding":3,"../glyph":5,"../parse":7,"../path":8,"../table":9}],11:[function(t,j,k){function i(t,j){var C,k,i,U,K,y,u,a,B,c,f,R,d,$,m,D,b,J,v,H,G={};for(G.version=C=X.getUShort(t,j),L.argument(0===C,"cmap table version should be 0."),G.numtables=k=X.getUShort(t,j+2),i=-1,m=0;m<k;m+=1)if(U=X.getUShort(t,j+4+8*m),K=X.getUShort(t,j+4+8*m+2),3===U&&(1===K||0===K)){i=X.getULong(t,j+4+8*m+4);break}if(-1===i)return null;for(v=new X.Parser(t,j+i),G.format=y=v.parseUShort(),L.argument(4===y,"Only format 4 cmap tables are supported."),G.length=v.parseUShort(),G.language=v.parseUShort(),G.segCount=u=v.parseUShort()>>1,v.skip("uShort",3),G.glyphIndexMap={},a=new X.Parser(t,j+i+14),B=new X.Parser(t,j+i+16+2*u),c=new X.Parser(t,j+i+16+4*u),f=new X.Parser(t,j+i+16+6*u),R=j+i+16+8*u,m=0;m<u-1;m+=1)for(d=a.parseUShort(),$=B.parseUShort(),b=c.parseShort(),J=f.parseUShort(),D=$;D<=d;D+=1)0!==J?(R=f.offset+f.relativeOffset-2,R+=J,R+=2*(D-$),0!==(H=X.getUShort(t,R))&&(H=H+b&65535)):H=D+b&65535,G.glyphIndexMap[D]=H;return G}function U(t,j,C){t.segments.push({end:j,start:j,delta:-(j-C),offset:0})}function K(t){t.segments.push({end:65535,start:65535,delta:1,offset:0})}function y(t){var j,k,i,y=new u.Table("cmap",[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:1},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:12},{name:"format",type:"USHORT",value:4},{name:"length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);for(y.segments=[],j=0;j<t.length;j+=1){for(i=t[j],k=0;k<i.unicodes.length;k+=1)U(y,i.unicodes[k],j);y.segments=y.segments.sort(function(t,j){return t.start-j.start})}K(y);var L;L=y.segments.length,y.segCountX2=2*L,y.searchRange=2*Math.pow(2,Math.floor(Math.log(L)/Math.log(2))),y.entrySelector=Math.log(y.searchRange/2)/Math.log(2),y.rangeShift=y.segCountX2-y.searchRange;var X=[],a=[],B=[],c=[],f=[];for(j=0;j<L;j+=1){var R=y.segments[j];X=X.concat({name:"end_"+j,type:"USHORT",value:R.end}),a=a.concat({name:"start_"+j,type:"USHORT",value:R.start}),B=B.concat({name:"idDelta_"+j,type:"SHORT",value:R.delta}),c=c.concat({name:"idRangeOffset_"+j,type:"USHORT",value:R.offset}),R.glyphId!==C&&(f=f.concat({name:"glyph_"+j,type:"USHORT",value:R.glyphId}))}return y.fields=y.fields.concat(X),y.fields.push({name:"reservedPad",type:"USHORT",value:0}),y.fields=y.fields.concat(a),y.fields=y.fields.concat(B),y.fields=y.fields.concat(c),y.fields=y.fields.concat(f),y.length=14+2*X.length+2+2*a.length+2*B.length+2*c.length+2*f.length,y}var L=t("../check"),X=t("../parse"),u=t("../table");k.parse=i,k.make=y},{"../check":1,"../parse":7,"../table":9}],12:[function(t,j,C){function k(t,j,C,k,i){var U;return(j&k)>0?(U=t.parseByte(),0==(j&i)&&(U=-U),U=C+U):U=(j&i)>0?C:C+t.parseShort(),U}function i(t,j,C,i){var U,K,y,L,B,c,f,R,d,$,m,D,b,J,v;if(U=new a.Parser(t,j),K=new u.Glyph({font:i,index:C}),K.numberOfContours=U.parseShort(),K.xMin=U.parseShort(),K.yMin=U.parseShort(),K.xMax=U.parseShort(),K.yMax=U.parseShort(),K.numberOfContours>0){for(f=K.endPointIndices=[],L=0;L<K.numberOfContours;L+=1)f.push(U.parseUShort());for(K.instructionLength=U.parseUShort(),K.instructions=[],L=0;L<K.instructionLength;L+=1)K.instructions.push(U.parseByte());for(R=f[f.length-1]+1,c=[],L=0;L<R;L+=1)if(y=U.parseByte(),c.push(y),(8&y)>0)for(d=U.parseByte(),B=0;B<d;B+=1)c.push(y),L+=1;if(X.argument(c.length===R,"Bad flags."),f.length>0){if($=[],R>0){for(L=0;L<R;L+=1)y=c[L],m={},m.onCurve=!!(1&y),m.lastPointOfContour=f.indexOf(L)>=0,$.push(m);for(D=0,L=0;L<R;L+=1)y=c[L],m=$[L],m.x=k(U,y,D,2,16),D=m.x;for(b=0,L=0;L<R;L+=1)y=c[L],m=$[L],m.y=k(U,y,b,4,32),b=m.y}K.points=$}else K.points=[]}else if(0===K.numberOfContours)K.points=[];else for(K.isComposite=!0,K.points=[],K.components=[],v=!0;v;)c=U.parseUShort(),J={glyphIndex:U.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0},(1&c)>0?(J.dx=U.parseShort(),J.dy=U.parseShort()):(J.dx=U.parseChar(),J.dy=U.parseChar()),(8&c)>0?J.xScale=J.yScale=U.parseF2Dot14():(64&c)>0?(J.xScale=U.parseF2Dot14(),J.yScale=U.parseF2Dot14()):(128&c)>0&&(J.xScale=U.parseF2Dot14(),J.scale01=U.parseF2Dot14(),J.scale10=U.parseF2Dot14(),J.yScale=U.parseF2Dot14()),K.components.push(J),v=!!(32&c);return K}function U(t,j){var C,k,i,U;for(C=[],k=0;k<t.length;k+=1)i=t[k],U={x:j.xScale*i.x+j.scale01*i.y+j.dx,y:j.scale10*i.x+j.yScale*i.y+j.dy,onCurve:i.onCurve,lastPointOfContour:i.lastPointOfContour},C.push(U);return C}function K(t){var j,C,k,i;for(j=[],C=[],k=0;k<t.length;k+=1)i=t[k],C.push(i),i.lastPointOfContour&&(j.push(C),C=[]);return X.argument(0===C.length,"There are still points left in the current contour."),j}function y(t){var j,C,k,i,U,y,L,X,u,a,c,f;if(j=new B.Path,!t)return j;for(C=K(t),k=0;k<C.length;k+=1){for(y=C[k],X=y[0],f=y[y.length-1],X.onCurve?(c=null,i=!0):(X=f.onCurve?f:{x:(X.x+f.x)/2,y:(X.y+f.y)/2},c=X,i=!1),j.moveTo(X.x,X.y),U=i?1:0;U<y.length;U+=1)if(L=y[U],u=0===U?X:y[U-1],u.onCurve&&L.onCurve)j.lineTo(L.x,L.y);else if(u.onCurve&&!L.onCurve)c=L;else if(u.onCurve||L.onCurve){if(u.onCurve||!L.onCurve)throw new Error("Invalid state.");j.quadraticCurveTo(c.x,c.y,L.x,L.y),c=null}else a={x:(u.x+L.x)/2,y:(u.y+L.y)/2},j.quadraticCurveTo(u.x,u.y,a.x,a.y),c=L;X!==f&&(c?j.quadraticCurveTo(c.x,c.y,X.x,X.y):j.lineTo(X.x,X.y))}return j.closePath(),j}function L(t,j,C,k){var K,L,X,a,B,c,f,R,d;for(K=[],L=0;L<C.length-1;L+=1)a=C[L],B=C[L+1],a!==B?K.push(i(t,j+a,L,k)):K.push(new u.Glyph({font:k,index:L}));for(L=0;L<K.length;L+=1){if(c=K[L],c.isComposite)for(X=0;X<c.components.length;X+=1)f=c.components[X],R=K[f.glyphIndex],R.points&&(d=U(R.points,f),c.points=c.points.concat(d));c.path=y(c.points)}return K}var X=t("../check"),u=t("../glyph"),a=t("../parse"),B=t("../path");C.parse=L},{"../check":1,"../glyph":5,"../parse":7,"../path":8}],13:[function(t,j,k){function i(t,j){for(var C=new a.Parser(t,j),k=C.parseUShort(),i=[],U=0;U<k;U++)i[C.parseTag()]={offset:C.parseUShort()};return i}function U(t,j){var C=new a.Parser(t,j),k=C.parseUShort(),i=C.parseUShort();if(1===k)return C.parseUShortList(i);if(2===k){for(var U,K,y,L,X=[];i--;)for(K=C.parseUShort(),y=C.parseUShort(),L=C.parseUShort(),U=K;U<=y;U++)X[L++]=U;return X}}function K(t,j){var C=new a.Parser(t,j),k=C.parseUShort();if(1===k){var i=C.parseUShort(),U=C.parseUShort(),K=C.parseUShortList(U);return function(t){return K[t-i]||0}}if(2===k){for(var y=C.parseUShort(),L=[],X=[],u=[],B=0;B<y;B++)L[B]=C.parseUShort(),X[B]=C.parseUShort(),u[B]=C.parseUShort();return function(t){var j,C,k;for(j=0,k=L.length-1;j<k;)C=j+k+1>>1,t<L[C]?k=C-1:j=C;return L[j]<=t&&t<=X[j]?u[j]||0:0}}}function y(t,j){var C,k,i,y,L,X,u,B,c,f=new a.Parser(t,j);if(C=f.parseUShort(),k=f.parseUShort(),i=U(t,j+k),y=f.parseUShort(),L=f.parseUShort(),4===y&&0===L){if(X={},1===C){var R,d,$,m,D,b;for(R=f.parseUShort(),b=[],d=f.parseOffset16List(R),u=0;u<R;u++){if($=d[u],!(m=X[$]))for(m={},f.relativeOffset=$,D=f.parseUShort();D--;)B=f.parseUShort(),y&&(c=f.parseShort()),L&&f.parseShort(),m[B]=c;b[i[u]]=m}return function(t,j){var C=b[t];if(C)return C[j]}}if(2===C){var J,v,H,G,Z,q,A,z,T,E,s;for(J=f.parseUShort(),v=f.parseUShort(),H=f.parseUShort(),G=f.parseUShort(),A=K(t,j+J),z=K(t,j+v),T=[],Z=0;Z<H;Z++)for(E=T[Z]=[],q=0;q<G;q++)y&&(c=f.parseShort()),L&&f.parseShort(),E[q]=c;for(s={},Z=0;Z<i.length;Z++)s[i[Z]]=1;return function(t,j){if(s[t]){var C=A(t),k=z(j),i=T[C];return i?i[k]:void 0}}}}}function L(t,j){var k,i,U,K,L,X,u,B,c=new a.Parser(t,j);if(i=c.parseUShort(),U=c.parseUShort(),K=16&U,L=c.parseUShort(),X=c.parseOffset16List(L),k={lookupType:i,lookupFlag:U,markFilteringSet:K?c.parseUShort():-1},2===i){for(u=[],B=0;B<L;B++)u.push(y(t,j+X[B]));k.getKerningValue=function(t,j){for(var k=u.length;k--;){var i=u[k](t,j);if(i!==C)return i}return 0}}return k}function X(t,j,C){var k,U,K,y,X,B,c,f;for(k=new a.Parser(t,j),U=k.parseFixed(),u.argument(1===U,"Unsupported GPOS table version."),i(t,j+k.parseUShort()),i(t,j+k.parseUShort()),K=k.parseUShort(),k.relativeOffset=K,X=k.parseUShort(),B=k.parseOffset16List(X),c=j+K,y=0;y<X;y++)f=L(t,c+B[y]),2!==f.lookupType||C.getGposKerningValue||(C.getGposKerningValue=f.getKerningValue)}var u=t("../check"),a=t("../parse");k.parse=X},{"../check":1,"../parse":7}],14:[function(t,j,C){function k(t,j){var C={},k=new K.Parser(t,j);return C.version=k.parseVersion(),C.fontRevision=Math.round(1e3*k.parseFixed())/1e3,C.checkSumAdjustment=k.parseULong(),C.magicNumber=k.parseULong(),U.argument(1594834165===C.magicNumber,"Font header has wrong magic number."),C.flags=k.parseUShort(),C.unitsPerEm=k.parseUShort(),C.created=k.parseLongDateTime(),C.modified=k.parseLongDateTime(),C.xMin=k.parseShort(),C.yMin=k.parseShort(),C.xMax=k.parseShort(),C.yMax=k.parseShort(),C.macStyle=k.parseUShort(),C.lowestRecPPEM=k.parseUShort(),C.fontDirectionHint=k.parseShort(),C.indexToLocFormat=k.parseShort(),C.glyphDataFormat=k.parseShort(),C}function i(t){return new y.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:0},{name:"modified",type:"LONGDATETIME",value:0},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],t)}var U=t("../check"),K=t("../parse"),y=t("../table");C.parse=k,C.make=i},{"../check":1,"../parse":7,"../table":9}],15:[function(t,j,C){function k(t,j){var C={},k=new U.Parser(t,j);return C.version=k.parseVersion(),C.ascender=k.parseShort(),C.descender=k.parseShort(),C.lineGap=k.parseShort(),C.advanceWidthMax=k.parseUShort(),C.minLeftSideBearing=k.parseShort(),C.minRightSideBearing=k.parseShort(),C.xMaxExtent=k.parseShort(),C.caretSlopeRise=k.parseShort(),C.caretSlopeRun=k.parseShort(),C.caretOffset=k.parseShort(),k.relativeOffset+=8,C.metricDataFormat=k.parseShort(),C.numberOfHMetrics=k.parseUShort(),C}function i(t){return new K.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],t)}var U=t("../parse"),K=t("../table");C.parse=k,C.make=i},{"../parse":7,"../table":9}],16:[function(t,j,C){function k(t,j,C,k,i){var K,y,L,X,u;for(K=new U.Parser(t,j),y=0;y<k;y+=1)y<C&&(X=K.parseUShort(),u=K.parseShort()),L=i[y],L.advanceWidth=X,L.leftSideBearing=u}function i(t){for(var j=new K.Table("hmtx",[]),C=0;C<t.length;C+=1){var k=t[C],i=k.advanceWidth||0,U=k.leftSideBearing||0;j.fields.push({name:"advanceWidth_"+C,type:"USHORT",value:i}),j.fields.push({name:"leftSideBearing_"+C,type:"SHORT",value:U})}return j}var U=t("../parse"),K=t("../table");C.parse=k,C.make=i},{"../parse":7,"../table":9}],17:[function(t,j,C){function k(t,j){var C,k,K,y,L,X,u,a,B;for(C={},k=new U.Parser(t,j),K=k.parseUShort(),i.argument(0===K,"Unsupported kern table version."),k.skip("uShort",1),y=k.parseUShort(),i.argument(0===y,"Unsupported kern sub-table version."),k.skip("uShort",2),L=k.parseUShort(),k.skip("uShort",3),X=0;X<L;X+=1)u=k.parseUShort(),a=k.parseUShort(),B=k.parseShort(),C[u+","+a]=B;return C}var i=t("../check"),U=t("../parse");C.parse=k},{"../check":1,"../parse":7}],18:[function(t,j,C){function k(t,j,C,k){var U,K,y,L,X;for(U=new i.Parser(t,j),K=k?U.parseUShort:U.parseULong,y=[],X=0;X<C+1;X+=1)L=K.call(U),k&&(L*=2),y.push(L);return y}var i=t("../parse");C.parse=k},{"../parse":7}],19:[function(t,j,C){function k(t,j){var C={},k=new U.Parser(t,j);return C.version=k.parseVersion(),C.numGlyphs=k.parseUShort(),1===C.version&&(C.maxPoints=k.parseUShort(),C.maxContours=k.parseUShort(),C.maxCompositePoints=k.parseUShort(),C.maxCompositeContours=k.parseUShort(),C.maxZones=k.parseUShort(),C.maxTwilightPoints=k.parseUShort(),C.maxStorage=k.parseUShort(),C.maxFunctionDefs=k.parseUShort(),C.maxInstructionDefs=k.parseUShort(),C.maxStackElements=k.parseUShort(),C.maxSizeOfInstructions=k.parseUShort(),C.maxComponentElements=k.parseUShort(),C.maxComponentDepth=k.parseUShort()),C}function i(t){return new K.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:t}])}var U=t("../parse"),K=t("../table");C.parse=k,C.make=i},{"../parse":7,"../table":9}],20:[function(t,j,k){function i(t,j){var C={},k=new u.Parser(t,j);C.format=k.parseUShort();var i,U,K,y,L,X,a,c,f,R,d,$=k.parseUShort(),m=k.offset+k.parseUShort(),D=0;for(f=0;f<$;f++)if(i=k.parseUShort(),U=k.parseUShort(),K=k.parseUShort(),y=k.parseUShort(),L=B[y],X=k.parseUShort(),a=k.parseUShort(),3===i&&1===U&&1033===K){d=[];var b=X/2;for(R=0;R<b;R++,a+=2)d[R]=u.getShort(t,m+a);c=String.fromCharCode.apply(null,d),L?C[L]=c:(D++,C["unknown"+D]=c)}return 1===C.format&&(C.langTagCount=k.parseUShort()),C}function U(t,j,C,k,i,U){return new a.Table("NameRecord",[{name:"platformID",type:"USHORT",value:t},{name:"encodingID",type:"USHORT",value:j},{name:"languageID",type:"USHORT",value:C},{name:"nameID",type:"USHORT",value:k},{name:"length",type:"USHORT",value:i},{name:"offset",type:"USHORT",value:U}])}function K(t,j,C,k){var i=X.STRING(C);return t.records.push(U(1,0,0,j,i.length,k)),t.strings.push(i),k+=i.length}function y(t,j,C,k){var i=X.UTF16(C);return t.records.push(U(3,1,1033,j,i.length,k)),t.strings.push(i),k+=i.length}function L(t){var j,k,i=new a.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:0},{name:"stringOffset",type:"USHORT",value:0}]);i.records=[],i.strings=[];var U=0;for(j=0;j<B.length;j+=1)t[B[j]]!==C&&(k=t[B[j]],U=K(i,j,k,U));for(j=0;j<B.length;j+=1)t[B[j]]!==C&&(k=t[B[j]],U=y(i,j,k,U));for(i.count=i.records.length,i.stringOffset=6+12*i.count,j=0;j<i.records.length;j+=1)i.fields.push({name:"record_"+j,type:"TABLE",value:i.records[j]});for(j=0;j<i.strings.length;j+=1)i.fields.push({name:"string_"+j,type:"LITERAL",value:i.strings[j]});return i}var X=t("../types").encode,u=t("../parse"),a=t("../table"),B=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","licence","licenceURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"];k.parse=i,k.make=L},{"../parse":7,"../table":9,"../types":24}],21:[function(t,j,C){function k(t){for(var j=0;j<L.length;j+=1){var C=L[j];if(t>=C.begin&&t<C.end)return j}return-1}function i(t,j){var C={},k=new K.Parser(t,j);C.version=k.parseUShort(),C.xAvgCharWidth=k.parseShort(),C.usWeightClass=k.parseUShort(),C.usWidthClass=k.parseUShort(),C.fsType=k.parseUShort(),C.ySubscriptXSize=k.parseShort(),C.ySubscriptYSize=k.parseShort(),C.ySubscriptXOffset=k.parseShort(),C.ySubscriptYOffset=k.parseShort(),C.ySuperscriptXSize=k.parseShort(),C.ySuperscriptYSize=k.parseShort(),C.ySuperscriptXOffset=k.parseShort(),C.ySuperscriptYOffset=k.parseShort(),C.yStrikeoutSize=k.parseShort(),C.yStrikeoutPosition=k.parseShort(),C.sFamilyClass=k.parseShort(),C.panose=[];for(var i=0;i<10;i++)C.panose[i]=k.parseByte();return C.ulUnicodeRange1=k.parseULong(),C.ulUnicodeRange2=k.parseULong(),C.ulUnicodeRange3=k.parseULong(),C.ulUnicodeRange4=k.parseULong(),C.achVendID=String.fromCharCode(k.parseByte(),k.parseByte(),k.parseByte(),k.parseByte()),C.fsSelection=k.parseUShort(),C.usFirstCharIndex=k.parseUShort(),C.usLastCharIndex=k.parseUShort(),C.sTypoAscender=k.parseShort(),C.sTypoDescender=k.parseShort(),C.sTypoLineGap=k.parseShort(),C.usWinAscent=k.parseUShort(),C.usWinDescent=k.parseUShort(),C.version>=1&&(C.ulCodePageRange1=k.parseULong(),C.ulCodePageRange2=k.parseULong()),C.version>=2&&(C.sxHeight=k.parseShort(),C.sCapHeight=k.parseShort(),C.usDefaultChar=k.parseUShort(),C.usBreakChar=k.parseUShort(),C.usMaxContent=k.parseUShort()),C}function U(t){return new y.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],t)}var K=t("../parse"),y=t("../table"),L=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];C.unicodeRanges=L,C.getUnicodeRange=k,C.parse=i,C.make=U},{"../parse":7,"../table":9}],22:[function(t,j,C){function k(t,j){var C,k,i={},y=new K.Parser(t,j);switch(i.version=y.parseVersion(),i.italicAngle=y.parseFixed(),i.underlinePosition=y.parseShort(),i.underlineThickness=y.parseShort(),i.isFixedPitch=y.parseULong(),i.minMemType42=y.parseULong(),i.maxMemType42=y.parseULong(),i.minMemType1=y.parseULong(),i.maxMemType1=y.parseULong(),i.version){case 1:i.names=U.standardNames.slice();break;case 2:for(i.numberOfGlyphs=y.parseUShort(),i.glyphNameIndex=new Array(i.numberOfGlyphs),C=0;C<i.numberOfGlyphs;C++)i.glyphNameIndex[C]=y.parseUShort();for(i.names=[],C=0;C<i.numberOfGlyphs;C++)i.glyphNameIndex[C]>=U.standardNames.length&&(k=y.parseChar(),i.names.push(y.parseString(k)));break;case 2.5:for(i.numberOfGlyphs=y.parseUShort(),i.offset=new Array(i.numberOfGlyphs),C=0;C<i.numberOfGlyphs;C++)i.offset[C]=y.parseChar()}return i}function i(){return new y.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}var U=t("../encoding"),K=t("../parse"),y=t("../table");C.parse=k,C.make=i},{"../encoding":3,"../parse":7,"../table":9}],23:[function(t,j,k){function i(t){return Math.log(t)/Math.log(2)|0}function U(t){for(;t.length%4!=0;)t.push(0);for(var j=0,C=0;C<t.length;C+=4)j+=(t[C]<<24)+(t[C+1]<<16)+(t[C+2]<<8)+t[C+3];return j%=Math.pow(2,32)}function K(t,j,k,i){return new B.Table("Table Record",[{name:"tag",type:"TAG",value:t!==C?t:""},{name:"checkSum",type:"ULONG",value:j!==C?j:0},{name:"offset",type:"ULONG",value:k!==C?k:0},{name:"length",type:"ULONG",value:i!==C?i:0}])}function y(t){var j=new B.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);j.tables=t,j.numTables=t.length;var C=Math.pow(2,i(j.numTables));j.searchRange=16*C,j.entrySelector=i(C),j.rangeShift=16*j.numTables-j.searchRange;for(var k=[],y=[],L=j.sizeOf()+K().sizeOf()*j.numTables;L%4!=0;)L+=1,y.push({name:"padding",type:"BYTE",value:0});for(var X=0;X<t.length;X+=1){var u=t[X];a.argument(4===u.tableName.length,"Table name"+u.tableName+" is invalid.");var c=u.sizeOf(),f=K(u.tableName,U(u.encode()),L,c);for(k.push({name:f.tag+" Table Record",type:"TABLE",value:f}),y.push({name:u.tableName+" table",type:"TABLE",value:u}),L+=c,a.argument(!isNaN(L),"Something went wrong calculating the offset.");L%4!=0;)L+=1,y.push({name:"padding",type:"BYTE",value:0})}return k.sort(function(t,j){return t.value.tag>j.value.tag?1:-1}),j.fields=j.fields.concat(k),j.fields=j.fields.concat(y),j}function L(t,j,C){for(var k=0;k<j.length;k+=1){var i=t.charToGlyphIndex(j[k]);if(i>0)return t.glyphs[i].getMetrics()}return C}function X(t){for(var j=0,C=0;C<t.length;C+=1)j+=t[C]
;return j/t.length}function u(t){for(var j=[],C=[],k=[],i=[],K=[],u=[],a=[],B=null,v=0,H=0,G=0,Z=0,q=0,A=0;A<t.glyphs.length;A+=1){var z=t.glyphs[A],T=0|z.unicode;(B>T||null===B)&&(B=T),v<T&&(v=T);var E=b.getUnicodeRange(T);if(E<32)H|=1<<E;else if(E<64)G|=1<<E-32;else if(E<96)Z|=1<<E-64;else{if(!(E<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");q|=1<<E-96}if(".notdef"!==z.name){var s=z.getMetrics();j.push(s.xMin),C.push(s.yMin),k.push(s.xMax),i.push(s.yMax),u.push(s.leftSideBearing),a.push(s.rightSideBearing),K.push(z.advanceWidth)}}var e={xMin:Math.min.apply(null,j),yMin:Math.min.apply(null,C),xMax:Math.max.apply(null,k),yMax:Math.max.apply(null,i),advanceWidthMax:Math.max.apply(null,K),advanceWidthAvg:X(K),minLeftSideBearing:Math.min.apply(null,u),maxLeftSideBearing:Math.max.apply(null,u),minRightSideBearing:Math.min.apply(null,a)};e.ascender=e.yMax,e.descender=e.yMin;var x=R.make({unitsPerEm:t.unitsPerEm,xMin:e.xMin,yMin:e.yMin,xMax:e.xMax,yMax:e.yMax}),o=d.make({ascender:e.ascender,descender:e.descender,advanceWidthMax:e.advanceWidthMax,minLeftSideBearing:e.minLeftSideBearing,minRightSideBearing:e.minRightSideBearing,xMaxExtent:e.maxLeftSideBearing+(e.xMax-e.xMin),numberOfHMetrics:t.glyphs.length}),n=m.make(t.glyphs.length),w=b.make({xAvgCharWidth:Math.round(e.advanceWidthAvg),usWeightClass:500,usWidthClass:5,usFirstCharIndex:B,usLastCharIndex:v,ulUnicodeRange1:H,ulUnicodeRange2:G,ulUnicodeRange3:Z,ulUnicodeRange4:q,sTypoAscender:e.ascender,sTypoDescender:e.descender,sTypoLineGap:0,usWinAscent:e.ascender,usWinDescent:-e.descender,sxHeight:L(t,"xyvw",{yMax:0}).yMax,sCapHeight:L(t,"HIKLEFJMNTZBDPRAGOQSUVWXY",e).yMax,usBreakChar:t.hasChar(" ")?32:0}),r=$.make(t.glyphs),Y=c.make(t.glyphs),p=t.familyName+" "+t.styleName,M=t.familyName.replace(/\s/g,"")+"-"+t.styleName,Q=D.make({copyright:t.copyright,fontFamily:t.familyName,fontSubfamily:t.styleName,uniqueID:t.manufacturer+":"+p,fullName:p,version:t.version,postScriptName:M,trademark:t.trademark,manufacturer:t.manufacturer,designer:t.designer,description:t.description,manufacturerURL:t.manufacturerURL,designerURL:t.designerURL,license:t.license,licenseURL:t.licenseURL,preferredFamily:t.familyName,preferredSubfamily:t.styleName}),N=J.make(),O=f.make(t.glyphs,{version:t.version,fullName:p,familyName:t.familyName,weightName:t.styleName,postScriptName:M}),F=[x,o,n,w,Q,Y,N,O,r],S=y(F),I=S.encode(),_=U(I),g=S.fields,h=!1;for(A=0;A<g.length;A+=1)if("head table"===g[A].name){g[A].value.checkSumAdjustment=2981146554-_,h=!0;break}if(!h)throw new Error("Could not find head table with checkSum to adjust.");return S}var a=t("../check"),B=t("../table"),c=t("./cmap"),f=t("./cff"),R=t("./head"),d=t("./hhea"),$=t("./hmtx"),m=t("./maxp"),D=t("./name"),b=t("./os2"),J=t("./post");k.computeCheckSum=U,k.make=y,k.fontToTable=u},{"../check":1,"../table":9,"./cff":10,"./cmap":11,"./head":14,"./hhea":15,"./hmtx":16,"./maxp":19,"./name":20,"./os2":21,"./post":22}],24:[function(t,k,i){function U(t){return function(){return t}}var K=t("./check"),y={},L={},X={};L.BYTE=function(t){return K.argument(t>=0&&t<=255,"Byte value should be between 0 and 255."),[t]},X.BYTE=U(1),L.CHAR=function(t){return[t.charCodeAt(0)]},X.BYTE=U(1),L.CHARARRAY=function(t){for(var j=[],C=0;C<t.length;C+=1)j.push(t.charCodeAt(C));return j},X.CHARARRAY=function(t){return t.length},L.USHORT=function(t){return[t>>8&255,255&t]},X.USHORT=U(2),L.SHORT=function(t){return t>=32768&&(t=-(65536-t)),[t>>8&255,255&t]},X.SHORT=U(2),L.UINT24=function(t){return[t>>16&255,t>>8&255,255&t]},X.UINT24=U(3),L.ULONG=function(t){return[t>>24&255,t>>16&255,t>>8&255,255&t]},X.ULONG=U(4),L.LONG=function(t){return t>=2147483648&&(t=-(4294967296-t)),[t>>24&255,t>>16&255,t>>8&255,255&t]},X.LONG=U(4),L.FIXED=L.ULONG,X.FIXED=X.ULONG,L.FWORD=L.SHORT,X.FWORD=X.SHORT,L.UFWORD=L.USHORT,X.UFWORD=X.USHORT,L.LONGDATETIME=function(){return[0,0,0,0,0,0,0,0]},X.LONGDATETIME=U(8),L.TAG=function(t){return K.argument(4===t.length,"Tag should be exactly 4 ASCII characters."),[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]},X.TAG=U(4),L.Card8=L.BYTE,X.Card8=X.BYTE,L.Card16=L.USHORT,X.Card16=X.USHORT,L.OffSize=L.BYTE,X.OffSize=X.BYTE,L.SID=L.USHORT,X.SID=X.USHORT,L.NUMBER=function(t){return t>=-107&&t<=107?[t+139]:t>=108&&t<=1131?(t-=108,[247+(t>>8),255&t]):t>=-1131&&t<=-108?(t=-t-108,[251+(t>>8),255&t]):t>=-32768&&t<=32767?L.NUMBER16(t):L.NUMBER32(t)},X.NUMBER=function(t){return L.NUMBER(t).length},L.NUMBER16=function(t){return[28,t>>8&255,255&t]},X.NUMBER16=U(2),L.NUMBER32=function(t){return[29,t>>24&255,t>>16&255,t>>8&255,255&t]},X.NUMBER32=U(4),L.NAME=L.CHARARRAY,X.NAME=X.CHARARRAY,L.STRING=L.CHARARRAY,X.STRING=X.CHARARRAY,L.UTF16=function(t){for(var j=[],C=0;C<t.length;C+=1)j.push(0),j.push(t.charCodeAt(C));return j},X.UTF16=function(t){return 2*t.length},L.INDEX=function(t){var j,k,i,U,K,y,X,u,a,B;for(k=1,i=[k],X=[],u=0,a=0;a<t.length;a+=1)B=L.OBJECT(t[a]),Array.prototype.push.apply(X,B),u+=B.length,k+=B.length,i.push(k);if(0===X.length)return[0,0];for(K=[],j=1+Math.floor(Math.log(u)/Math.log(2))/8|0,U=[C,L.BYTE,L.USHORT,L.UINT24,L.ULONG][j],a=0;a<i.length;a+=1)y=U(i[a]),Array.prototype.push.apply(K,y);return Array.prototype.concat(L.Card16(t.length),L.OffSize(j),K,X)},X.INDEX=function(t){return L.INDEX(t).length},L.DICT=function(t){for(var C=[],k=j.keys(t),i=k.length,U=0;U<i;U+=1){var K=parseInt(k[U],0),y=t[K];C=C.concat(L.OPERAND(y.value,y.type)),C=C.concat(L.OPERATOR(K))}return C},X.DICT=function(t){return L.DICT(t).length},L.OPERATOR=function(t){return t<1200?[t]:[12,t-1200]},L.OPERAND=function(t,j){var C,k;if(C=[],Array.isArray(j))for(k=0;k<j.length;k+=1)K.argument(t.length===j.length,"Not enough arguments given for type"+j),C=C.concat(L.OPERAND(t[k],j[k]));else C="SID"===j?C.concat(L.NUMBER(t)):"offset"===j?C.concat(L.NUMBER32(t)):C.concat(L.NUMBER(t));return C},L.OP=L.BYTE,X.OP=X.BYTE;var u="function"==typeof WeakMap&&new WeakMap;L.CHARSTRING=function(t){if(u&&u.has(t))return u.get(t);var j,C,k=[],i=t.length;for(C=0;C<i;C+=1)j=t[C],k=k.concat(L[j.type](j.value));return u&&u.set(t,k),k},X.CHARSTRING=function(t){return L.CHARSTRING(t).length},L.OBJECT=function(t){var j=L[t.type];return K.argument(j!==C,"No encoding function for type "+t.type),j(t.value)},L.TABLE=function(t){var j,k=[],i=t.fields.length;for(j=0;j<i;j+=1){var U=t.fields[j],y=L[U.type];K.argument(y!==C,"No encoding function for field type "+U.type);var X=t[U.name];X===C&&(X=U.value);var u=y(X);k=k.concat(u)}return k},L.LITERAL=function(t){return t},X.LITERAL=function(t){return t.length},i.decode=y,i.encode=L,i.sizeOf=X},{"./check":1}]},{},[6])(6)});var U=k.FontConverter=function(t){var j=this;j._objPool=[],j.initConfig(t||{})};U.prototype={},U.prototype.constructor=U,U.prototype.initConfig=function(t){var j,C=this;j=C.options={},j.texts=t.texts,j.color=t.color||"black",j.width=t.width||100,j.height=t.height||100},U.prototype.toShape=function(t,j){var C=this;return"string"==typeof t?(k.Default.xhrLoad(t,function(t){C.toShapeImpl(t,j)},{responseType:"arraybuffer"}),null):C.toShapeImpl(t,j)},U.prototype.toShapeImpl=function(t,C){var k=this,i=opentype.parse(t);i.styleName||(i.styleName="");var U,K,y,L,X,u,a=k.convertToTypeface(i),B=[],c=a.glyphs,f=k.options,R=0,d=f.texts,$=f.width,m=f.height;for(d||(d=j.keys(c)),U=0,K=d.length;U<K;U++)y=d[U],(L=k.createShape(y,c[y]))&&(B.push(L),R++);for(var D=Math.ceil(Math.sqrt(R*$*m)/$),b=0;b<R;b++)X=b%D,u=Math.floor(b/D),k.fitPointsToRect(B[b].points,X*$,u*m,$,m);var J={width:D*$,height:Math.ceil(R/D)*m,comps:B,familyName:i.familyName,styleName:i.styleName};return C&&C(J),J},U.prototype.createShape=function(t,j){if(!j)return!1;if(!j.o)return!1;var C,k=this,i=j.o.split(" "),U=i.length,K=[],y=[];for(C=0;C<U;)switch(i[C++]){case"m":K.push(1*i[C++]),K.push(1*i[C++]),y.push(1);break;case"l":K.push(1*i[C++]),K.push(1*i[C++]),y.push(2);break;case"q":K.push(1*i[C+2]),K.push(1*i[C+3]),K.push(1*i[C+0]),K.push(1*i[C+1]),C+=4,y.push(3);break;case"b":K.push(1*i[C+2]),K.push(1*i[C+3]),K.push(1*i[C+4]),K.push(1*i[C+5]),K.push(1*i[C+0]),K.push(1*i[C+1]),C+=6,y.push(4)}return{type:"shape",points:K,segments:y,borderColor:null,borderWidth:0,background:k.options.color,displayName:t}},U.prototype.fitPointsToRect=function(t,j,C,k,i){var U,K,y,L,X,u={x:1/0,y:1/0},a={x:-1/0,y:-1/0},B=t.length;for(U=0;U<B;U+=2)K=t[U],y=t[U+1],u.x=Math.min(u.x,K),u.y=Math.min(u.y,y),a.x=Math.max(a.x,K),a.y=Math.max(a.y,y);for(L=a.x-u.x,X=a.y-u.y,U=0;U<B;U+=2)t[U]=(t[U]-u.x)*k/L+j,t[U+1]=(a.y-t[U+1])*i/X+C},U.prototype.convertToTypeface=function(t){var j=1e5/(72*(t.unitsPerEm||2048)),k={};k.glyphs={};var i=this.options.texts;return t.glyphs.forEach(function(t){if(t.unicode!=C){var U=String.fromCharCode(t.unicode);if(!(i&&i.indexOf(U)<0)){var K={};K.ha=Math.round(t.advanceWidth*j),K.x_min=Math.round(t.xMin*j),K.x_max=Math.round(t.xMax*j),K.o="",t.path.commands.forEach(function(t,k){"c"===t.type.toLowerCase()&&(t.type="b"),K.o+=t.type.toLowerCase(),K.o+=" ",t.x!==C&&t.y!==C&&(K.o+=Math.round(t.x*j),K.o+=" ",K.o+=Math.round(t.y*j),K.o+=" "),t.x1!==C&&t.y1!==C&&(K.o+=Math.round(t.x1*j),K.o+=" ",K.o+=Math.round(t.y1*j),K.o+=" "),t.x2!==C&&t.y2!==C&&(K.o+=Math.round(t.x2*j),K.o+=" ",K.o+=Math.round(t.y2*j),K.o+=" ")}),k.glyphs[U]=K}}}),k.familyName=t.familyName,k.ascender=Math.round(t.ascender*j),k.descender=Math.round(t.descender*j),k.underlinePosition=t.tables.post.underlinePosition,k.underlineThickness=t.tables.post.underlineThickness,k.boundingBox={yMin:t.tables.head.yMin,xMin:t.tables.head.xMin,yMax:t.tables.head.yMax,xMax:t.tables.head.xMax},k.resolution=1e3,k.original_font_information=t.tables.name,t.styleName.toLowerCase().indexOf("bold")>-1?k.cssFontWeight="bold":k.cssFontWeight="normal",t.styleName.toLowerCase().indexOf("italic")>-1?k.cssFontStyle="italic":k.cssFontStyle="normal",k},U.prototype.reverseCommands=function(t){var j,k=[];t.forEach(function(t){"m"===t.type.toLowerCase()?(j=[t],k.push(j)):"z"!==t.type.toLowerCase()&&j.push(t)});var i=[];return k.forEach(function(t){var j={type:"m",x:t[t.length-1].x,y:t[t.length-1].y};i.push(j);for(var k=t.length-1;k>0;k--){var U=t[k];j={type:U.type},U.x2!==C&&U.y2!==C?(j.x1=U.x2,j.y1=U.y2,j.x2=U.x1,j.y2=U.y1):U.x1!==C&&U.y1!==C&&(j.x1=U.x1,j.y1=U.y1),j.x=t[k-1].x,j.y=t[k-1].y,i.push(j)}}),i}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);var YC=function(){function t(j,C){var k=this;Ij(this,t),this.editor=C,this.handler=j,this.cookie=0,this.callbacks={},this.cmds={};var i=lj.config.host||window.location.hostname,U=lj.config.port||window.location.port,K=window.location.protocol+"//"+i+":"+U;this.socket=io.connect(K),this.socket.on("connect",function(){k.handler({type:"connected",message:K})}),this.socket.on("disconnect",function(){k.handler({type:"disconnected",message:K})}),this.socket.on("fileChanged",function(t){k.handler({type:"fileChanged",path:t.path,event:t.event})}),this.socket.on("operationDone",function(t,j){k.handleRespone(t,j)}),this.socket.on("download",function(t){k.handler({type:"download",path:t})}),this.socket.on("confirm",function(t,j){k.handler({type:"confirm",path:t,datas:j})})}return t.prototype.request=function(t,j,C){var k=++this.cookie;this.callbacks[k]=C,this.cmds[k]=t;var i=this.editor.sid;this.socket.emit(t,k,j,i?{sid:i}:null);var U=t;j&&(dt(j)?U=t+": "+j:j.path&&(U=t+": "+j.path)),this.handler({type:"request",message:U,cmd:t,data:j})},t.prototype.handleRespone=function(t,j){var C=this.callbacks[t],k=this.cmds[t];delete this.callbacks[t],delete this.cmds[t],this.handler({type:"response",message:k,cmd:k,data:j}),C&&C(j)},t}(),pC=function(t){function j(C,k){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Ij(this,j);var U=hj(this,t.call(this,k));return U.editor=C,U.editable=i,U.dragToIndexEnabled=!0,U.addTopPainter(U.$1$.bind(U)),U}return gj(j,t),j.prototype.getLabelColor=function(j){return j!==this.draggingData||this.isSelected(j)?t.prototype.getLabelColor.call(this,j):lj.config.color_select},j.prototype.handleDelete=function(){this.editable&&this.removeSelection()},j.prototype.isDroppable=function(t,j){return!1},j.prototype._clearDragInfo=function(){this.editor.dnd.hideTip(),this._dragInfo&&(this._dragInfo=null,this.redraw())},j.prototype._endDrag=function(t,j){},j.prototype._endCrossDrag=function(t,j){},j.prototype.$1$=function(t){t.texureImage2D=!0;var j=void 0;if(this._dragInfo&&this._dragInfo.inView?j=this._dragInfo:this._crossDragInfo&&(j=this._crossDragInfo),j){var C=this.getWidth(),k=this.getRowHeight(),i=j.type,U=j.parent,K=U?this.getRowDatas().indexOf(U):-1,y=lj.config.color_select_dark;if(j.refData){if(_(t,y,0,K*k,C,k,2),"up"===i||"down"===i){var L=j.x,X=j.y;t.beginPath(),t.arc(L-3,X,3,0,2*Math.PI,!0),t.moveTo(L,X),t.lineTo(C,X),t.lineWidth=2,t.strokeStyle=y,t.stroke()}}else{var u=this.getViewRect();_(t,y,u.x,u.y,u.width,u.height,2)}}},j.prototype._dragging=function(t,j){var C=this.getRowHeight(),k=this.lp(t),i=k.y/C,U=Math.floor(i);if(U>this.getRowSize()-1)j.refData=null,j.type="parent",j.parent=null;else{var K=k.y-U*C;this.dragToIndexEnabled?j.type=K<.25*C?"up":K>.75*C?"down":"parent":j.type="parent";var y=j.refData=this.getRowDatas().get(U);"up"===j.type?(j.parent=y.getParent(),j.x=(this.getLevel(y)+1)*this.getIndent(),j.y=U*C):"down"===j.type?(this.getToggleIcon(y)===this.getExpandIcon()?(j.parent=y,j.x=(this.getLevel(y)+2)*this.getIndent()):(j.parent=y.getParent(),j.x=(this.getLevel(y)+1)*this.getIndent()),j.y=(U+1)*C):j.parent=y}this.autoScroll(t),this.redraw()},j.prototype.$2$=function(){var t="";if(this.draggingData&&(t=this.getLabel(this.draggingData),this.isSelected(this.draggingData))){var j=this.sm().size();t+=j>1?" (+"+j+") ":""}return t},j.prototype.handleDragAndDrop=function(t,j){if(this.editable){if("prepare"===j)return void this._clearDragInfo();"begin"===j&&(this._dragInfo={tip:this.$2$(),view:this});var C=this._dragInfo;if(C){var k=this.editor.dnd;if("begin"===j||"between"===j){return this.getView().contains(G(t))?(C.inView=!0,this._dragging(t,C),k.clearDropView(t,C)):(C.inView&&this.redraw(),C.inView=!1,k.crossDrag(t,C)),void k.showTip(C.tip,t)}return"end"===j?(C.inView?this._endDrag(t,C):k.crossDrop(t,C),void this._clearDragInfo()):"cancel"===j?(C.inView||k.crossCancel(t,C),void this._clearDragInfo()):void 0}}},j.prototype.handleCrossDrag=function(t,j,C){if("exit"===j||"cancel"===j)return this._crossDragInfo=null,void this.redraw();if("enter"===j||"over"===j)return this._crossDragInfo||(this._crossDragInfo={}),void this._dragging(t,this._crossDragInfo);if("drop"===j){if(this.explorer){var k=this._crossDragInfo.parent?this._crossDragInfo.parent.url:this.explorer.currentDir,i={url:k,event:t};this.editor.fireEvent("explorerCrossDrop",i),i.preventDefault||this._endCrossDrag(t,C)}else this._endCrossDrag(t,C);return this._crossDragInfo=null,void this.redraw()}},j.prototype.isEditable=function(t){return this.editable},j.prototype.rename=function(t,j){t.setName(j)},j.prototype.handleDataDoubleSelect=function(t,j){if(this.isEditable(j)){var C=this.getLevel(j);C+=this.getIcon(j)?2:1,this.lp(t).x>C*this.getIndent()&&this.beginEditing(j)}},j.prototype.getEditingLabel=function(t){return this.getLabel(t)},j.prototype.beginEditing=function(t){var j=this;this.cancelEditing(),this.makeVisible(t),this.validate();var C=this.getLevel(t);C+=this.getIcon(t)?2:1;var k=this.getIndent()*C,i=this.ty()+this.getRowIndex(t)*this.getRowHeight(),U=Math.max(1,this.getWidth()-k),K=this.getRowHeight();this._currentEditor=new ht.widget.TextField,this._currentEditor.data=t;var y=this._currentEditor.getElement(),L=this.getEditingLabel(t);y.value=null==L?"":L,y.onblur=function(t){j.endEditing()},y.onkeydown=function(t){d(t)?j.endEditing():m(t)&&j.cancelEditing()},this.getView().appendChild(this._currentEditor.getView()),n(this._currentEditor,k,i,U,K),this._currentEditor.setFocus(),ht.Default.callLater(y.select,y)},j.prototype.endEditing=function(){var t=this._currentEditor;t&&(this.rename(t.data,t.getValue()),delete this._currentEditor,r(t.getView()),this.redraw())},j.prototype.cancelEditing=function(){var t=this._currentEditor;t&&(delete this._currentEditor,r(t.getView()),this.redraw())},j}(rC),MC=function(t){function j(C){var k=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Ij(this,j);var i=hj(this,t.call(this,C.editor,C.dataModel,k));return i.explorer=C,i.dragToIndexEnabled=!1,i.setSortFunc(lj.config.createFileTreeSortFunc(i)),i}return gj(j,t),j.prototype.isVisible=function(t){return!1!==t.a("visible")&&((!this._visibleFunc||!1!==this._visibleFunc(t))&&(t.fileType===kC||t.fileType===CC))},j.prototype.getLabel=function(t){return i("url:"+t.url,!0)||this.getEditingLabel(t)},j.prototype.getEditingLabel=function(t){return t.getName()},j.prototype.handleBackgroundClick=function(t){},j.prototype.handleDelete=function(){this.editable&&lj.config.removeFileByKeyboardEnabled&&this.explorer.deleteSelection(this)},j.prototype.isDroppable=function(t,j){return!(!this.editable||j.view!==this.explorer.list)||j.view===this.editor.dndFromOutside},j.prototype._endCrossDrag=function(t,j){var C=this;if(this._crossDragInfo){var k=j.view,U=this._crossDragInfo.parent;if(U||(U=this.explorer.rootNode),k===this.explorer.list){var K=k.draggingData,y=function(){k.isSelected(K)?k.sm().toSelection().each(function(t){C.editor.moveFile(t,U)}):C.editor.moveFile(K,U)};lj.config.promptForMovingFile?_t(i("editor.move"),i("editor.confirmmovefile"),y,function(){}):y()}else k===this.editor.dndFromOutside&&this.editor.dropLocalFileOnDir(t,U)}},j.prototype._endDrag=function(t,j){var C=this,k=j.parent;k||(k=this.explorer.rootNode);var U=this.draggingData,K=function(){if(C.isSelected(U)){C.getTopRowOrderSelection().each(function(t){C.editor.moveFile(t,k)})}else C.editor.moveFile(U,k),C.sm().ss(U);k&&C.expand(k)};lj.config.promptForMovingFile?_t(i("editor.move"),i("editor.confirmmovefile"),K,function(){}):K()},j.prototype.isEditable=function(t){return this.editable&&!1!==t.a("editable")},j.prototype.beginEditing=function(j){var C={data:j,url:j.url};this.editor.fireEvent("fileRenaming",C),C.preventDefault||t.prototype.beginEditing.call(this,j)},j.prototype.rename=function(t,j){this.editor.renameFile(t,j,function(){t.s("label")?t.s("label",j):t.setName(j)})},j.prototype.getIcon=function(t){return void 0!==t.getIcon()?t.getIcon():t.fileType===kC?this.hasExpandedChild(t)?"editor.direxpanded":"editor.dircollapsed":t.fileType===CC?"editor.root.state":null},j}(pC),QC=function(t){function j(C){Ij(this,j);var k=hj(this,t.call(this,C));return k._lastSelectDataTime=Date.now(),k}return gj(j,t),j.prototype.isVScrollable=function(){return this.gv.getViewRect().height<this.gv.getScrollRect().height},j.prototype.isV=function(t){var j=this.gv.getViewRect();return this.isVScrollable()&&(j.x+j.width-this.gv.lp(t).x)*this.gv.getZoom()<ht.Default.scrollBarInteractiveSize},j.prototype.clear=function(t){t&&this._dragging&&!this._dragCancel&&this.gv.handleDragAndDrop(t,"end"),this.gv.draggingData&&(this.gv.draggingData.iv(),this.gv.draggingData=null,this.gv.redraw()),this._dragging=this._dragCancel=this._clientPoint=null},j.prototype.handle_mousedown=function(t){this.handle_touchstart(t)},j.prototype.handle_touchstart=function(t){if(!this.isV(t)&&!St(t.target)){V(t),this.clear(t),this._clientPoint=H(t);var j=this.gv.getDataAt(t);b(t)?j?(this.gv.draggingData=j,j.iv(),this.gv.redraw(),this.gv.handleDragAndDrop(t,"prepare"),v(this,t)):this.gv.sm().cs():(j&&this.handleSelection(t,j),this.clear(t))}},j.prototype.handle_mouseup=function(t){this.handle_touchend(t)},j.prototype.handle_touchend=function(t){if(this._clientPoint&&!this._dragging&&!this.gv._justDoubleClickData){var j=this.gv.getDataAt(t);j&&this.handleSelection(t,j)}this.gv._justDoubleClickData=!1,this.clear(t)},j.prototype.handleWindowMouseMove=function(t){this.handleWindowTouchMove(t)},j.prototype.handleWindowMouseUp=function(t){this.handleWindowTouchEnd(t)},j.prototype.handleWindowTouchMove=function(t){V(t),this._dragging?this._dragCancel||this.gv.handleDragAndDrop(t,"between"):this._clientPoint&&this.gv.draggingData&&A(H(t),this._clientPoint)>2&&(this._dragging=!0,this.gv.handleDragAndDrop(t,"begin"))},j.prototype.handleWindowTouchEnd=function(t){V(t),this.clear(t)},j.prototype.handleSelection=function(t,j){var C=this.gv.sm();if(M(t))this.gv.isSelected(j)?C.removeSelection(j):C.appendSelection(j);else if(p(t)){var k=C.ld();if(k)for(var i=this.gv.nodes,U=i.indexOf(k),K=i.indexOf(j);U!==K;)U+=K>U?1:-1,C.as(i[U]);else C.ss(j)}else if(b(t)){var y=Date.now();if(C.contains(j)){var L=y-this._lastSelectDataTime;L>500&&L<1500&&this.gv.handleDataDoubleSelect(t,j)}C.ss(j),this._lastSelectDataTime=y}else C.contains(j)||C.ss(j)},j.prototype.handle_keydown=function(t){if(!St(t.target))if(m(t))this._dragging&&!this._dragCancel&&(this.gv.handleDragAndDrop(t,"cancel"),this._dragCancel=!0);else if(c(t)||R(t)||B(t)||f(t)){var j=this.gv.sm(),C=this.gv.nodes,k=j.ld();if(C.length){var i=void 0;if(k){var U=C.indexOf(k);c(t)||B(t)?0!==U&&(i=C[U-1]):U!==C.length-1&&(i=C[U+1])}else i=C[0];i&&(p(t)?j.as(i):j.ss(i))}}},j}(ht.graph.Interactor),NC=function(t){function j(C){Ij(this,j);var k=hj(this,t.call(this,C.editor,C.dm));return k.displayView=C,k.graphView=C.graphView,k.nodeIcon=Nt(k),k.initMenu(),C.dm.addDataPropertyChangeListener(function(t){var j=t.data;(j instanceof ht.Shape||j instanceof ht.Edge)&&(j.editorIcon=null)}),k}return gj(j,t),j.prototype.getBorderColor=function(t){return null},j.prototype.onDataDoubleClicked=function(t,j){j.altKey?this.graphView.fitData(t,!0,lj.config.fitPadding):this.graphView.makeCenter(t,!0)},j.prototype.onPropertyChanged=function(j){"filter"===j.property&&(this.visibleMap=null,this.ivm()),t.prototype.onPropertyChanged.call(this,j)},j.prototype.handleDataPropertyChange=function(j){!this._filter||"name"!==j.property&&"displayName"!==j.property?t.prototype.handleDataPropertyChange.call(this,j):(this.visibleMap=null,this.ivm())},j.prototype.checkVisible=function(t){if(!this._filter)return!0;if(lj.config.displayTreeVisibleFunc)return lj.config.displayTreeVisibleFunc(t,this._filter);var j=this.getLabel(t),C=(this._filter+"").toLowerCase();return null!=j&&(j=(j+"").toLowerCase(),j.indexOf(C)>=0)},j.prototype.validateModel=function(){var j=this;this._filter&&!this.visibleMap&&(this.visibleMap={},this.getDataModel().each(function(t){if(j.checkVisible(t)){j.visibleMap[t._id]=!0;for(var C=t.getParent();C&&!j.visibleMap[C._id];)j.visibleMap[C._id]=!0,C=C.getParent()}})),t.prototype.validateModel.call(this),lj.config.filterDisplayViewEnabled&&this.graphView.setVisibleFunc(function(t){return j.isVisible(t)})},j.prototype.isVisible=function(t){if(t._refGraph)return!1;var j=this.getVisibleFunc();return!(j&&!j(t))&&(!this._filter||this.visibleMap&&this.visibleMap[t._id])},j.prototype.validate=function(){this.graphView.validate(),t.prototype.validate.call(this)},j.prototype.getLabel=function(t){return null==t.toLabel()&&t.s("editor.folder")?i("ht.Folder"):t.toLabel()||i(t.getClassName())},j.prototype.getIcon=function(t){return t instanceof ht.SubGraph?"editor.subgraph":t instanceof ht.Group?"editor.group":t instanceof ht.RefGraph||t instanceof ht.Text?t.getIcon():t instanceof ht.Block?"editor.block":t instanceof ht.Shape?(t.editorIcon||(t.editorIcon=Ft(t)),t.editorIcon):t instanceof ht.Edge?(t.editorIcon||(t.editorIcon=Ot(this,t)),t.editorIcon):t instanceof ht.Node?this.nodeIcon:t.s("editor.folder")?this.hasExpandedChild(t)?"editor.direxpanded":"editor.dircollapsed":null},j.prototype.isDroppable=function(t,j){return!!this.editor.editable&&(j.view===this.editor.symbols.getFileListView()||(j.view===this.editor.assets.getFileListView()||j.view===this.editor.displays.getFileListView()))},j.prototype._endCrossDrag=function(t,j){var C=this;if(this.editor.editable&&this._crossDragInfo){this.editor.beginTransaction();var k=[],i=j.view,U=this._crossDragInfo.type,K=this._crossDragInfo.parent,y=this._crossDragInfo.refData;i!==this.editor.symbols.getFileListView()&&i!==this.editor.assets.getFileListView()||i.toDraggingDatas("down"===U).forEach(function(t){var j=new ht.Node;j.setImage(t.getFileUUID()),j.setDisplayName(x(t.getName())),k.push(j),C.displayView.addData(j,!0),C.editor.gv.$64$([j]),C._dropData(j,U,K,y)}),i===this.editor.displays.getFileListView()&&i.toDraggingDatas("down"===U).forEach(function(t){if(t.url!==C.editor.url){var j=new ht.RefGraph;j.setRef(t.getFileUUID()),j.setDisplayName(x(t.getName())),k.push(j),C.displayView.addData(j,!0),C._dropData(j,U,K,y)}}),k.length&&this.sm().ss(k),this.editor.endTransaction()}},j.prototype._endDrag=function(t,j){var C=this;if(this.editor.editable){this.editor.beginTransaction();var k=j.type,i=j.parent,U=j.refData;if(this.isSelected(this.draggingData)){var K=this.getTopRowOrderSelection();"down"===k&&K.reverse(),K.each(function(t){C._dropData(t,k,i,U)})}else this._dropData(this.draggingData,k,i,U),this.sm().ss(this.draggingData);i&&this.expand(i),this.editor.endTransaction()}},j.prototype._dropData=function(t,j,C,k){if(this.editor.editable)if(t.setParent(C),"down"===j||"up"===j){var i=C?C.getChildren():this.dm().getRoots(),U=i.indexOf(k);"down"===j&&U++,i.indexOf(t)<U&&U--,this.dm().moveTo(t,U)}else C||this.dm().moveToBottom(t)},j.prototype.rename=function(t,j){t.setDisplayName(j)},j.prototype.initMenu=function(){var t=this,j=function(){for(var j=t.editor.selection,C=0;C<j.length;C++)if(j[C].s("editor.folder"))return!0;return!1};this.menu=new TC;var C=[{id:"folder",label:i("editor.folder"),action:function(){t.editor.folder()},visible:function(){return t.editable&&!!t.editor.ld}},{id:"unfolder",label:i("editor.unfolder"),action:function(){t.editor.unfolder()},visible:function(){return t.editable&&j()}},{separator:!0,visible:function(){return t.editable&&!!t.editor.ld}},{id:"copy",label:i("editor.copy"),action:function(){t.editor.copy()},visible:function(){return t.editable&&!!t.editor.ld}},{id:"paste",label:i("editor.paste"),action:function(){t.editor.paste()},visible:function(){return t.editable&&t.editor.hasCopyInfo()}},{id:"delete",label:i("editor.delete"),action:function(){t.editor.delete()},visible:function(){return t.editable&&!!t.editor.ld}},{separator:!0,visible:function(){return t.editable&&!!t.editor.ld}},{id:"bringToFront",label:i("editor.bringtofront"),action:function(){t.editor.bringToFront()},visible:function(){return t.editable&&!!t.editor.ld}},{id:"bringForward",label:i("editor.bringforward"),action:function(){t.editor.bringForward()},visible:function(){return t.editable&&!!t.editor.ld}},{id:"sendBackward",label:i("editor.sendbackward"),action:function(){t.editor.sendBackward()},visible:function(){return t.editable&&!!t.editor.ld}},{id:"sendToBack",label:i("editor.sendtoback"),action:function(){t.editor.sendToBack()},visible:function(){return t.editable&&!!t.editor.ld}},{separator:!0,visible:function(){return t.editable&&!!t.editor.ld}},{id:"expandAll",label:i("editor.expandall"),action:function(){t.expandAll()}},{id:"collapseAll",label:i("editor.collapseall"),action:function(){t.collapseAll()}},"separator",{id:"combined",label:i("editor.combineshapes"),action:function(){t.editor.beginTransaction(),Xj(t.editor.sm.getSelection().toArray()),t.editor.endTransaction()},visible:function(){return t.editable&&t.editor.sm.size()>1&&aj(t.editor.sm.getSelection())}},{id:"splitShape",label:i("editor.splitshape"),action:function(){t.editor.beginTransaction(),uj(t.editor.ld),t.editor.endTransaction()},visible:function(){return t.editable&&1===t.editor.sm.size()&&t.editor.ld instanceof ht.Shape}}];this.menu.setItems(C),this.menu.addTo(this.getView()),this.editor.menus.push(this.menu)},j.prototype.onClosed=function(){U(this.editor.menus,this.menu)},_j(j,[{key:"editable",get:function(){return this.editor.editable},set:function(t){}}]),j}(pC);h(NC,{ms_ac:["filter"]});var OC=function(t){function j(C){var k=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Ij(this,j);var i=hj(this,t.call(this,C.dataModel));return i.explorer=C,i.editable=k,i.editor=C.editor,i.getHScrollBar().style.display="none",i.setMaxFileSize(lj.config.imageSize),i.enableToolTip(),i.setPannable(!1),i.setInteractors([new ht.graph.ScrollBarInteractor(i),new QC(i),new ht.graph.DefaultInteractor(i),new ht.graph.TouchInteractor(i,{editable:!1})]),i}return gj(j,t),j.prototype.getToolTip=function(t){var j=this.getDataAt(t);return j?this._filter?j.url:this.getLabel(j):null},j.prototype.getLabel=function(t){return i("url:"+t.url,!0)||this.getEditingLabel(t)},j.prototype.isEditable=function(t){return this.editable&&!1!==t.a("editable")},j.prototype.getEditingLabel=function(t){return t.s("label")||t.getName()},j.prototype.rename=function(t,j){this.editor.renameFile(t,j,function(){t.s("label")?t.s("label",j):t.setName(j)})},j.prototype.handleDelete=function(){this.editable&&lj.config.removeFileByKeyboardEnabled&&this.explorer.deleteSelection(this)},j.prototype.beginEditing=function(t){var j=this,C={data:t,url:t.url};if(this.editor.fireEvent("fileRenaming",C),!C.preventDefault){this.cancelEditing(),this.makeVisible(t),this.validate();var k=this.getDataUI(t),i=!1,U=void 0;if(this.explorer.isAccordionMode()&&t.fileType===kC?(U=t.getRect(),i=!0):k&&k.labelInfo&&(U=k.labelInfo.rect),U){var K=void 0,y=void 0,L=void 0,X=void 0;if(i)K=U.x,y=U.y,L=U.width,X=U.height;else if(this._layoutType===aC)K=this._rowHeight,y=t.p().y-this._rowHeight/2,L=this.getWidth()-K,X=this._rowHeight;else{var u=k.labelInfo.rect||t.getRect();K=t.p().x-t.getWidth()/2,y=u.y,L=t.getWidth(),X=u.height}y+=this.ty(),this._currentEditor=new ht.widget.TextField,this._currentEditor.data=t;var a=this._currentEditor.getElement(),B=this.getEditingLabel(t);a.value=null==B?"":B,a.onblur=function(t){j.endEditing()},a.onkeydown=function(t){d(t)?j.endEditing():m(t)&&j.cancelEditing()},this.getView().appendChild(this._currentEditor.getView()),n(this._currentEditor,K,y,L,X),this._currentEditor.setFocus(),ht.Default.callLater(a.select,a)}}},j.prototype.endEditing=function(){var t=this._currentEditor;t&&(this.rename(t.data,t.getValue()),delete this._currentEditor,r(t.getView()),this.redraw())},j.prototype.cancelEditing=function(){var t=this._currentEditor;t&&(delete this._currentEditor,r(t.getView()),this.redraw())},j.prototype._clearDragInfo=function(){this.editor.dnd.hideTip(),this._dragInfo&&(this._dragInfo=null,this.redraw())},j.prototype.handleDragAndDrop=function(t,j){if("prepare"===j)return void this._clearDragInfo();"begin"===j&&(this._dragInfo={tip:this.$2$(),view:this});var C=this._dragInfo;if(C){var k=this.editor.dnd;if("begin"===j||"between"===j){return this.getView().contains(G(t))?(C.inView=!0,this._dragging(t,C),k.clearDropView(t,C)):(C.inView&&this.redraw(),C.inView=!1,k.crossDrag(t,C)),void k.showTip(C.tip,t)}return"end"===j?(C.inView?this._endDrag(t,C):k.crossDrop(t,C),void this._clearDragInfo()):"cancel"===j?(C.inView||k.crossCancel(t,C),void this._clearDragInfo()):void 0}},j.prototype._dragging=function(t,j){if(this.editable){var C=this.getDataAt(t);C&&C.fileType===kC?j.targetData=C:j.targetData=null,this.autoScroll(t),this.redraw()}},j.prototype.$2$=function(){var t="";if(this.draggingData&&(t=this.getLabel(this.draggingData),this.isSelected(this.draggingData))){var j=this.sm().size();t+=j>1?" (+"+j+") ":""}return t},j.prototype._endDrag=function(t,j){},j.prototype.handleSelectionChange=function(j){t.prototype.handleSelectionChange.call(this,j),this.redraw()},j.prototype.handleCrossDrag=function(t,j,C){if(this.editable){if("exit"===j||"cancel"===j)return this._crossDragInfo=null,void this.redraw();if("enter"===j||"over"===j)return this._crossDragInfo||(this._crossDragInfo={}),void this._dragging(t,this._crossDragInfo);if("drop"===j){var k=this._crossDragInfo.targetData?this._crossDragInfo.targetData.url:this.explorer.currentDir,i={url:k,event:t};return this.editor.fireEvent("explorerCrossDrop",i),i.preventDefault||this._endCrossDrag(t,C),this._crossDragInfo=null,void this.redraw()}}},
j.prototype._endCrossDrag=function(t,j){if(this.editable&&this._crossDragInfo){var C=this._crossDragInfo.targetData;if(C&&C.fileType===kC||(C=this.dm().sm().ld()),C){var k=j.view;"displays"===this.explorer.rootDir&&k instanceof NC&&this.handleDisplayTreeDrop(k,C),k===this.editor.dndFromOutside&&this.editor.dropLocalFileOnDir(t,C)}}},j}(EC);h(OC,{ms_ac:["layoutType","fileSize","fileGap","rowHeight","maxFileSize","filter"],_fileRect:{x:0,y:0,width:0,height:0},_layoutType:uC,_fileSize:50,_fileGap:6,_rowHeight:21,_maxFileSize:200});var FC={filter:!0,layoutType:!0,fileSize:!0,fileGap:!0,rowHeight:!0,visibleFunc:!0},SC=function(t){function j(C){var k=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Ij(this,j);var i=hj(this,t.call(this,C,k));return i.nodes=[],i.doLayoutBind=i.doLayout.bind(i),i.dm().sm().ms(function(){i.sm().cs(),i.doLayoutLater()}),i.dm().mm(function(){i.doLayoutLater()}),i.addInteractorListener(i.handleInteraction.bind(i)),i.addBottomPainter(i.paintBottom.bind(i)),i.addTopPainter(i.paintTop.bind(i)),i}return gj(j,t),j.prototype.getDataAt=function(j){if(this._layoutType===aC){var C=Math.floor(this.lp(j).y/this._rowHeight);return this.nodes[C]}return t.prototype.getDataAt.call(this,j)},j.prototype.paintBottom=function(t){var j=this,C=this._rowHeight,k=this.getWidth();this.nodes.forEach(function(i){if(j.isSelected(i))if(j._layoutType===aC)t.beginPath(),t.rect(0,i.p().y-C/2,k,C),t.fillStyle=lj.config.color_select,t.fill();else{var U=i.getRect();_(t,lj.config.color_select,U.x-2,U.y-2,U.width+4,U.height+4,1)}})},j.prototype.paintTop=function(t){t.texureImage2D=!0;var j=void 0;if(this._dragInfo&&this._dragInfo.inView?j=this._dragInfo:this._crossDragInfo&&(j=this._crossDragInfo),j){var C=lj.config.color_select_dark,k=j.targetData;if(t.texureImage2D=!0,k)if(this._layoutType===aC){var i=k.p().y-this._rowHeight/2,U=this.getWidth(),K=this._rowHeight;_(t,C,0,i,U,K,2)}else{var y=k.getRect();t.beginPath(),t.rect(y.x,y.y,y.width,y.height),t.lineWidth=2,t.strokeStyle=lj.config.color_select_dark,t.stroke()}else{var L=this.getViewRect();_(t,C,L.x,L.y,L.width,L.height,2)}}},j.prototype.toDraggingDatas=function(t){var j=[];return this.isSelected(this.draggingData)?(this.sm().toSelection().each(function(t){t.fileType!==kC&&j.push(t)}),t&&j.reverse()):this.draggingData.fileType!==kC&&j.push(this.draggingData),j},j.prototype.isDroppable=function(t,j){return"displays"===this.explorer.rootDir&&j.view instanceof NC||j.view===this.editor.dndFromOutside},j.prototype._endDrag=function(t,j){var C=this,k=j.targetData;if(k){var U=this.draggingData,K=function(){C.isSelected(U)?C.sm().toSelection().each(function(t){C.editor.moveFile(t,k)}):C.editor.moveFile(U,k)};lj.config.promptForMovingFile?_t(i("editor.move"),i("editor.confirmmovefile"),K,function(){}):K()}},j.prototype.handleDisplayTreeDrop=function(t,j){var C=this,k=void 0;k=t.isSelected(t.draggingData)?t.getTopRowOrderSelection().toArray():[t.draggingData];var U={};k.forEach(function(t){W(t,U)});var K=new ht.JSONSerializer(t.getDataModel(),!0);K.isSerializable=function(t){return U[t._id]};var y=K.serialize();It(i("editor.inputnewdisplayname")+" ["+j.url+"]",t.getLabel(t.draggingData),{nullable:!1,trim:!0,maxLength:lj.config.maxFileNameLength,checkFunc:lj.config.checkFileName},function(t,k){if("ok"===k){Ut(t)||(t+=".json");var i=j.url+"/"+t,K={path:i,content:y};C.editor.request("upload",K,function(t){if(!0===t){var j=C.editor.gv,k=j.isVisible;j.isVisible=function(t){return k.call(j,t)&&U[t._id]},C.editor.saveImage(j,i.substr(0,i.length-5)+".png"),j.isVisible=k,j.redraw()}C.editor.fireEvent("displayViewSaved",{url:i})})}})},j.prototype.handleDataDoubleSelect=function(t,j){if(this.isEditable(j)){var C=this.lp(t);if(this._layoutType===aC)C.x>this._rowHeight&&this.beginEditing(j);else{var k=this.getDataUI(j);k&&k.labelInfo&&k.labelInfo.rect&&ht.Default.containsPoint(k.labelInfo.rect,C)&&this.beginEditing(j)}}},j.prototype.getLabelColor=function(t){return t!==this.draggingData||this.isSelected(t)?this._layoutType===aC?this.isSelected(t)?lj.config.color_light:ht.Default.labelColor:this.isSelected(t)?lj.config.color_select:ht.Default.labelColor:lj.config.color_select},j.prototype.handleInteraction=function(t){var j=t.kind,C=t.data,k=t.event;if("clickData"===j&&this._filter)this.dm().sm().ss(C.getParent());else if("doubleClickData"===j)1===this.sm().size()&&(this.setFilter(""),this._justDoubleClickData=!0,C.fileType===kC?this.dm().sm().ss(C):this.editor.open(C,p(k)));else if("doubleClickBackground"===t.kind&&!this._filter){var i=this.dm().sm().ld();i&&i.getParent()&&this.dm().sm().ss(i.getParent())}},j.prototype.handleScroll=function(t,j){V(t),p(t)?j>0?this.setFileSize(Math.min(this.getFileSize()+2,this.getMaxFileSize())):this.setFileSize(Math.max(this.getFileSize()-2,1)):(fC||t.wheelDelta!==t.wheelDeltaX)&&(j=fC?-t.detail:t.wheelDelta/40,this.translate(0,20*j))},j.prototype.handlePinch=function(t,j,C){C<j?this.setFileSize(Math.min(this.getFileSize()+2,this.getMaxFileSize())):this.setFileSize(Math.max(this.getFileSize()-2,1))},j.prototype.onPropertyChanged=function(t){OC.prototype.onPropertyChanged.apply(this,arguments),FC[t.property]&&this.doLayoutLater()},j.prototype.isVisible=function(t){if(!1===t.a("visible"))return!1;if(this._visibleFunc&&!1===this._visibleFunc(t))return!1;if(this._filter){var j=this.getLabel(t);if(!j||j.indexOf(this._filter)<0)return!1}else{var C=this.dm().sm().ld();if(!C||t.getParent()!==C)return!1}return t.fileType!==jC},j.prototype.isMovable=function(){return!1},j.prototype.onValidated=function(){this._lastWidth===this.getWidth()&&this._lastHeight===this.getHeight()||this.doLayoutLater()},j.prototype.adjustTranslateX=function(){return 0},j.prototype.adjustTranslateY=function(t){var j=this.getHeight()-this._fileRect.height;return t<j&&(t=j),t>0?0:Math.round(t)},j.prototype.getContentRect=function(){return this._fileRect},j.prototype.doLayoutLater=function(){this._doLayoutLater||(this._doLayoutLater=!0,requestAnimationFrame(this.doLayoutBind))},j.prototype.doLayout=function(){var t=this;this._doLayoutLater=!1,this.redraw();var j=this.nodes=[];this.dm().getDatas().each(function(C){t.isVisible(C)&&j.push(C)});var C=this._lastWidth=this.getWidth();this._lastHeight=this.getHeight();var k=this._fileGap;if(this._layoutType===aC){for(var i=this._rowHeight,U=Math.max(i-4,2),K=0;K<j.length;K++){var y=j[K];y.setPosition(k+U/2,i*K+2+U/2),y.setSize(U,U),y.s({"label.position":20,"label.offset.x":3,"label.offset.y":0,"label.max":void 0})}this._fileRect={x:0,y:0,width:C,height:i*j.length}}else{for(var L=this._fileSize,X=L+k,u=L+k+16,a=k,B=k,c=0,f=0;f<j.length;f++){var R=j[f];R.setPosition(a+L/2,B+L/2),R.setSize(L,L),R.s({"label.position":31,"label.offset.x":0,"label.offset.y":2,"label.max":L}),(c+2)*X+k>C?(a=k,f!==j.length-1&&(B+=u),c=0):(a+=X,c++)}this._fileRect={x:0,y:0,width:C,height:B+u}}this.tx(this.tx()),this.ty(this.ty()),this.showScrollBar()},j}(OC),IC=function(t){function j(C,k,i,U){Ij(this,j);var K=hj(this,t.call(this));K.setSize(20,20),K._id=K.url=k?k+"/"+i:i,K.path=k,K.value=U,K.rootDir=C,K.uuid=$t(U)&&dt(U.fileType)&&null!=U.uuid?U.uuid:K.url,K.postfix=U?U.postfix:"";var y=jC,L=void 0,X=void 0;return K.s({"select.width":0,pixelPerfect:!1,"image.stretch":"centerUniform"}),""===k?(y=CC,X="editor.root.state"):"assets"===C&&(X=K.getFileImage(i))?y=iC:Ut(i)&&"displays"===C?(y=KC,X=Rt(K.url),K.s("label",x(i))):Ut(i)&&"symbols"===C?(y=UC,X=Rt(K.url),K.s("label",x(i))):Ut(i)&&"components"===C?(y=yC,X=Rt(K.url),K.s("label",x(i))):Ut(i)&&"scenes"===C?(y=XC,X=Rt(K.url),K.s("label",x(i))):Ut(i)&&"models"===C&&(y=LC,X=Rt(K.url),K.s("label",x(i))),$t(U)&&(dt(U.fileType)?(y=U.fileType,L=U.fileIcon,X=U.fileImage||X||L,X||U.fileType!==kC||(X="editor.dir"),K.a(U.attrs),K.s(U.styles)):(y=kC,X="editor.dir")),X||(X="editor.unknown"),K.fileType=y,K.setIcon(L),K.setImage(X),K.setName(i),K}return gj(j,t),j.prototype.getFileUUID=function(){return this.postfix?this.uuid+"."+this.postfix:this.uuid},j.prototype.getFileImage=function(t){return it(t)?this.url:Xt(t)?"editor.dxf.state":ut(t)?"editor.obj.state":at(t)?"editor.mtl.state":Bt(t)?"editor.ttf.state":ct(t)?"editor.otf.state":Kt(t)?"editor.sound.state":yt(t)?"editor.video.state":ft(t)?"editor.js.state":void 0},j}(ht.Node);ht.Default.setCompType("accordion-title-comp",function(t,j,C,k,i){var U=lj.config.drawAccordionTitle;if(U)return void U(t,j,k,i,{isHover:k.__hover,isExpanded:k.expanded,hoverColor:lj.config.color_hover,selectColor:lj.config.color_select});var K=k.__hover,y=j.x,L=j.y,X=j.width,u=j.height,a=i.getLabel(k),B=i.getFileGap();t.save(),(K||i.isSelected(k))&&(t.fillStyle=lj.config.color_hover,t.fillRect(y,L,X,u)),t.fillStyle=lj.config.color_select,t.fillRect(y+B,L+(u-8)/2,8,8),a&&ht.Default.drawText(t,a,"bold 14px Arial",ht.Default.labelColor,y+B+8+8,L,200,u,"left","middle"),t.restore()}),ht.Default.setImage("accordion-title",{width:160,height:24,fitSize:!0,pixelPerfect:!1,interactive:!0,boundExtend:2,onDown:function(t,j,C,k,i,U){ht.Default.isLeftButton(t)&&(C.getMutex()&&!j.expanded&&C.dirs.forEach(function(t){t!==j&&(t.expanded=!1)}),j.expanded=!j.expanded,C.ivm())},onEnter:function(t,j,C,k,i,U){j.__hover=!0,j.iv()},onLeave:function(t,j,C,k,i,U){j.__hover=!1,j.iv()},comps:[{type:"accordion-title-comp",displayName:"clock-pointer",rect:[0,0,160,24]}]});var _C={layoutType:!0,fileSize:!0,fileGap:!0,rowHeight:!0,filePadding:!0,titleHeight:!0},gC=function(t){function j(C){var k=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Ij(this,j);var i=hj(this,t.call(this,C,k));return i.setFileGap(10),i.setMutex(lj.config.accordionMutex),i.nodes=[],i.dirs=[],i.bottomRects=[],i.addViewListener(function(t){"beginValidate"===t.kind&&i.doLayout()}),i.setSelectionModelShared(!1),i.dm().sm().ms(function(){i.sm().cs()}),i._layouted=!1,i.mi(i.handleInteraction.bind(i)),i.addBottomPainter(i.paintBottom.bind(i)),i.addTopPainter(i.paintTop.bind(i)),i}return gj(j,t),j.prototype.paintBottom=function(t){var j=this,C=this._rowHeight,k=this.getWidth();this.nodes.forEach(function(i){if(j._layoutType===aC)j.isSelected(i)&&(t.beginPath(),t.rect(0,i.p().y-C/2,k,C),t.fillStyle=lj.config.color_select,t.fill());else{var U=j.isSelected(i)?lj.config.color_select:lj.config.color_mask,K=i.getRect(),y=K.x,L=K.y,X=K.width,u=K.height,a=j._filePadding;_(t,U,y-a,L-a,X+2*a,u+2*a,1)}}),this.bottomRects.forEach(function(j){var C=j.x,k=j.y,i=j.width,U=j.height;t.beginPath(),t.lineWidth=2,t.strokeStyle=lj.config.color_hover,t.moveTo(C+10,k+U/2),t.lineTo(C+i-10,k+U/2),t.stroke()})},j.prototype.isDroppable=function(t,j){return"displays"===this.explorer.rootDir&&j.view instanceof NC||j.view===this.editor.dndFromOutside},j.prototype.handleDragAndDrop=function(j,C){var k=this.draggingData;k&&k.fileType!==kC&&t.prototype.handleDragAndDrop.call(this,j,C)},j.prototype.isLabelVisible=function(t){return t.fileType!==kC},j.prototype.paintTop=function(t){t.texureImage2D=!0;var j=void 0;if(this._dragInfo&&this._dragInfo.inView?j=this._dragInfo:this._crossDragInfo&&(j=this._crossDragInfo),j){var C=lj.config.color_select_dark,k=j.targetData;if(t.texureImage2D=!0,k){var i=k.getRect();t.beginPath(),t.rect(i.x,i.y,i.width,i.height),t.lineWidth=2,t.strokeStyle=lj.config.color_select_dark,t.stroke()}else{var U=this.getViewRect();_(t,C,0,0,U.width,U.height,2)}}},j.prototype.getDataAt=function(j){if(this._layoutType!==aC)return t.prototype.getDataAt.call(this,j);var C=t.prototype.getDataAt.call(this,j);if(C)return C;for(var k=this.lp(j).y,i=0;i<this.nodes.length;i++){var U=this.nodes[i],K=U.getY(),y=this._rowHeight,L=K-y/2,X=K+y/2;if(k>=L&&k<X)return U}},j.prototype.handleInteraction=function(t){var j=t.kind,C=t.data,k=t.event;"doubleClickData"===j&&1===this.sm().size()&&C.fileType!==kC&&(this.setFilter(""),C.getParent().expanded=!0,this.sm().ss(C),this.ivm(),this.editor.open(C,p(k)))},j.prototype.handleDataDoubleSelect=function(t,j){if(this.isEditable(j)){var C=this.lp(t);if(j.fileType!==kC)if(this._layoutType===aC)C.x>this._rowHeight&&this.beginEditing(j);else{var k=this.getDataUI(j);k&&k.labelInfo&&k.labelInfo.rect&&ht.Default.containsPoint(k.labelInfo.rect,C)&&this.beginEditing(j)}}},j.prototype.getLabelColor=function(t){return t!==this.draggingData||this.isSelected(t)?this._layoutType===aC?this.isSelected(t)?lj.config.color_light:ht.Default.labelColor:this.isSelected(t)?lj.config.color_select:ht.Default.labelColor:lj.config.color_select},j.prototype.isVisible=function(t){if(!this._layouted)return!1;if(this._visibleFunc&&!1===this._visibleFunc(t))return!1;var j=this.explorer.rootDir,C=t.getParent();if(!1===t.a("visible"))return!1;if(t.fileType===jC||!C)return!1;if(this._visibleFunc&&!this._visibleFunc(t))return!1;if(this._filter){var k=this.getLabel(t);if(C.url===j&&t.fileType===kC){for(var i=t.getChildren(),U=0;U<i.length;U++){var K=i.get(U);if(this.isVisible(K))return!0}return!1}if(C.getParent()&&C.getParent().url===j&&t.fileType!==kC)return!(!k||k.indexOf(this._filter)<0)}return C.url===j&&t.fileType===kC||!(!C.getParent()||C.getParent().url!==j||t.fileType===kC)&&!!C.expanded},j.prototype.adjustTranslateX=function(t){return 0},j.prototype.adjustTranslateY=function(t){if(!this.contentHeight)return 0;var j=this.getViewRect(),C=j.height-this.contentHeight;return t>=0||C>=0?0:t>C?t:C},j.prototype.getImage=function(t){if(t.getImage)return t.fileType===kC?"accordion-title":t.getImage()},j.prototype.doLayout=function(){var t=this;if(this._lastWidth!==this.getWidth()||this._lastHeight!==this.getHeight()||this._lastFileSize!==this.getFileSize()){this._doLayoutLater=!1,this.redraw();var j=this.dirs=[],C=this.nodes=[],k=this.bottomRects=[];this.dm().each(function(C){t.isVisible(C)&&C.fileType===kC&&j.push(C)});var i=this._lastWidth=this.getWidth(),U=this._titleHeight,K=0;this._lastHeight=this.getHeight(),this._lastFileSize=this._fileSize,this._expandIds&&(this.dirs.forEach(function(j){j.expanded=t._expandIds.indexOf(j.getId())>=0}),delete this._expandIds),j.forEach(function(j){j.setAnchor(0,0),j.p(0,K),j.setSize(i,U),j.s("label",null),K+=U;var y=[];j.getChildren().each(function(j){t.isVisible(j)&&(y.push(j),C.push(j))}),K=t.layoutChildren(y,K),j.expanded&&(k.push({x:0,y:K,width:i,height:16}),K+=16)}),this.contentHeight=K,this._layouted=!0}},j.prototype.layoutChildren=function(t,j){if(!t||0===t.length)return j;var C=this._fileGap;if(this._layoutType===aC){var k=this._rowHeight,i=Math.max(k-4,15);return t.forEach(function(t,U){t.setPosition(C+i/2,j+2+i/2),t.setSize(i,i),t.s({"label.position":20,"label.offset.x":3,"label.offset.y":0,"label.max":void 0}),j+=k}),j}var U=this.getWidth(),K=this._fileSize,y=this._filePadding,L=K+2*y,X=C,u=j+C,a=0,B=K+C+2*y,c=K+C+16+2*y;return t.forEach(function(j,k){j.setPosition(X+L/2,u+L/2),j.setSize(K,K),j.s({"label.position":31,"label.offset.x":0,"label.offset.y":2+y,"label.max":L}),(a+2)*B+C>U?(X=C,k!==t.length-1&&(u+=c),a=0):(X+=B,a++)}),u+c},j.prototype.handleScroll=function(t){var j=fC?-t.detail:t.wheelDelta/10;(fC||t.wheelDelta!==t.wheelDeltaX)&&this.translate(0,j)},j.prototype.adjustZoom=function(){return 1},j.prototype.onPropertyChanged=function(j){t.prototype.onPropertyChanged.call(this,j);var C=j.property;"dataModel"!==C&&"fileSize"!==C||this.doLayout()},j.prototype._endDrag=function(t,j){var C=this,k=j.targetData;if(k&&k.fileType===kC){var U=this.draggingData,K=function(){C.isSelected(U)?C.sm().toSelection().each(function(t){C.editor.moveFile(t,k)}):C.editor.moveFile(U,k),C.doLayout(),C.redraw()};lj.config.promptForMovingFile?_t(i("editor.move"),i("editor.confirmmovefile"),K,function(){}):K()}},j.prototype.toDraggingDatas=function(t){var j=[];return this.isSelected(this.draggingData)?(this.sm().toSelection().each(function(t){t.fileType!==kC&&j.push(t)}),t&&j.reverse()):this.draggingData.fileType!==kC&&j.push(this.draggingData),j},j.prototype.invalidateModel=function(){this._lastWidth=null,this.iv()},j.prototype.ivm=function(){this.invalidateModel()},j.prototype.getContentRect=function(){return{x:0,y:0,width:this.getWidth(),height:this.contentHeight||0}},j.prototype.onPropertyChanged=function(j){t.prototype.onPropertyChanged.apply(this,arguments),_C[j.property]&&this.ivm()},_j(j,[{key:"expandIds",get:function(){var t=[];return this.dirs.forEach(function(j){j.expanded&&t.push(j.getId())}),t},set:function(t){this._expandIds=t,this._lastWidth=null}}]),j}(OC);h(gC,{ms_ac:["filePadding","titleHeight","mutex"],_mutex:!1,_filePadding:6,_titleHeight:36});var hC=function(t){function j(C,k){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Ij(this,j);var U=hj(this,t.call(this));U.editor=C,U.rootDir=k,U.copyFileInfos=[],U.dataModel=new ht.DataModel,U.dataModel.setAutoAdjustIndex(!1);var K=U.mode=lj.config.explorerMode;K===BC&&(U.accordion=new gC(U,i)),U.tree=new MC(U,i),U.list=new SC(U,i),U.controlPane=new Vj,U.controlPane.addRow([{id:"filter",textField:{}},{id:"url",textField:{editable:!1}},{id:"slider",slider:{min:1,max:U.getFileListView().getMaxFileSize(),step:1,onValueChanged:function(t,j){U.getFileListView().setFileSize(j),U.getFileListView().setLayoutType(j>16?uC:aC)}}}],[.1,.2,ht.Default.isTouchable?70:50]);var y=U.controlPane.getViewById("filter").getElement();y.onkeyup=function(t){m(t)&&(y.value=""),K===BC?(U.accordion.setFilter(y.value),U.accordion.ivm()):U.list.setFilter(y.value)},(K===BC?U.accordion:U.list).mp(function(t){"filter"===t.property&&(y.value=t.newValue||"")});var L=U.controlPane.getItemById("slider").element;return L.getToolTip=function(){},U.getFileListView().mp(function(t){"fileSize"===t.property&&L.setValue(t.newValue)}),U.bottomPane=new zC,U.bottomPane.setCenterView(U.getFileListView()),U.bottomPane.setBottomView(U.controlPane),U.bottomPane.setBottomHeight(ht.Default.widgetRowHeight+8),U.setOrientation("vertical"),K===BC?(U.setLeftView(U.bottomPane),U.setPosition(1),U.accordion.sm().ms(function(){U.$52$(U.accordion)}),U.accordion.setFileSize(lj.config.fileSize),U.setDraggable(!1)):(U.setLeftView(U.tree),U.setRightView(U.bottomPane),U.setPosition(lj.config.explorerSplitViewPosition),U.list.setSelectionModelShared(!1),U.list.sm().ms(function(){U.$52$(U.list)}),U.list.setFileSize(lj.config.fileSize)),U.tree.menu=new TC,U.treeMenuItems=[],U.initTreeMenu(U.tree.menu,U.treeMenuItems),U.tree.menu.setItems(U.treeMenuItems),U.tree.menu.addTo(U.tree.getView()),U.editor.menus.push(U.tree.menu),U.list.menu=new TC,U.listMenuItems=[],U.initListMenu(U.list.menu,U.listMenuItems),U.list.menu.setItems(U.listMenuItems),U.list.menu.addTo(U.list.getView()),U.editor.menus.push(U.list.menu),U.isAccordionMode()&&(U.accordion.menu=new TC,U.accordionMenuItems=[],U.initAccordionMenu(U.accordion.menu,U.accordionMenuItems),U.accordion.menu.setItems(U.accordionMenuItems),U.accordion.menu.addTo(U.accordion.getView()),U.editor.menus.push(U.accordion.menu)),U}return gj(j,t),j.prototype.$52$=function(t){var j=t.sm().ld();this.controlPane.v("url",j?j.getFileUUID():"")},j.prototype.isAccordionMode=function(){return this.mode===BC},j.prototype.parse=function(t){var j=this,C=void 0,k=void 0,i=void 0,U=void 0;if(this.mode===BC?(k=this.accordion.expandIds,C=this.accordion.ty()):(C=this.tree.ty(),k=this.tree.expandIds,i=this.tree.selectionIds,U=this.tree.dm().size()),this.dataModel.clear(),Dt(t))t.forEach(function(t){if(t){var C=t.attrs&&t.attrs.path?t.attrs.path:"",k=j.rootNode=new IC(j.rootDir,C,t.name,t);j.dataModel.add(k),j.parseRoot(k,t)}});else{var K=this.rootNode=new IC(this.rootDir,"",this.rootDir);this.dataModel.add(K),this.parseRoot(K,t)}var y=this.dataModel.getDatas(),L={};y.toArray().forEach(function(t,j){L[t._id]=j}),y.sort(function(t,j){return t.fileType===CC?-1:j.fileType===CC?1:t.fileType===kC&&j.fileType!==kC?-1:t.fileType!==kC&&j.fileType===kC?1:L[t._id]-L[j._id]}),this.mode===BC?(this.accordion.expandIds=k,this.accordion.ty(C)):(this.tree.expandIds=k,this.tree.selectionIds=i,this.tree.ty(C),0===U&&(this.tree.expand(this.rootNode),this.tree.sm().ss(this.rootNode)));var X={explorer:this};this.editor.fireEvent("explorerUpdated",X)},j.prototype.parseRoot=function(t,j){t.a("editable",!1);var C=void 0;j.fileType===kC||j.fileType===CC?(t.a(j.attrs),t.s(j.styles),j.fileIcon&&(t.setIcon(j.fileIcon),t.setImage(j.fileIcon)),C=j.children):C=j;for(var k in C)this.parseChild(t,k,C[k])},j.prototype.parseChild=function(t,j,C){var k=new IC(this.rootDir,t.url,j,C);k.setParent(t),this.dataModel.add(k);var i=void 0;C&&C.fileType===kC?i=C.children:k.fileType===kC&&(i=C);for(var U in i)this.parseChild(k,U,i[U]);return k},j.prototype.deleteSelection=function(t){var j=this,C=[];if(t.sm().getTopSelection().forEach(function(t){var k={data:t,url:t.url};j.editor.fireEvent("fileDeleting",k),k.preventDefault||C.push(t)}),C.length){var k=t.getLabel(C[0])||C[0].getName(),U=i("editor.delete")+" ["+k+"]";C.length>1&&(U+=" ("+C.length+")");var K=function(){j.editor.removeFiles(C)};lj.config.deleteFileConfirm?_t(U,i("editor.deleteselection"),K,function(){}):K()}},j.prototype.addDeleteItem=function(t,j){var C=this,k={id:"delete",label:i("editor.delete"),action:function(){C.deleteSelection(j)},visible:function(){return!(!j.sm().ld()||!j.isEditable(j.sm().ld()))}};return t.push(k),k},j.prototype.addNewFolderItem=function(t,j){var C=this,k={id:"newFolder",label:i("editor.newfolder"),action:function(){C.editor.newFolder(j)},visible:function(){return j.editable}};return t.push(k),k},j.prototype.addLocateTreeFileItem=function(t){var j=this,C=void 0;return lj.config.locateFileEnabled&&(C={id:"locateFile",label:i("editor.locatefile"),action:function(){var t=j.tree.sm().ld()||j.rootNode;j.editor.locate(t)}},t.push(C)),C},j.prototype.addLocateListFileItem=function(t){var j=this,C=void 0;return lj.config.locateFileEnabled&&(C={id:"locateFile",label:i("editor.locatefile"),action:function(){var t=j.ld||j.tree.sm().ld()||j.rootNode;j.editor.locate(t)},visible:function(){return!j.isAccordionMode()||!!j.getFileListView().sm().ld()}},t.push(C)),C},j.prototype.addExportItem=function(t){var j=this,C={id:"export",label:i("editor.export"),action:function(){var t=[],C=j.getFileListView().sm();C.size()>0&&(C.each(function(j){t.push(j.url)}),j.editor.request("export",t))},visible:function(){var t=j.getFileListView().sm().ld();return!!t&&(t.fileType===KC||t.fileType===UC||t.fileType===yC||t.fileType===XC)}};return t.push(C),C},j.prototype.addRenameItem=function(t,j){var C={id:"rename",label:i("editor.rename"),action:function(){var t=j.sm().ld();t&&!1!==t.a("editable")&&j.beginEditing(t)},visible:function(){var t=j.sm().ld();return!(!t||!j.isEditable(t))}};return t.push(C),C},j.prototype.addCopyItem=function(t){var j=this,C={id:"copy",label:i("editor.copy"),action:function(){j.copyFiles()},visible:function(){if(!j.getFileListView().editable)return!1;var t=j.getFileListView().sm().ld();return!(!t||!1===t.a("editable"))}};return t.push(C),C},j.prototype.addPasteItem=function(t){var j=this,C={id:"paste",label:i("editor.paste"),action:function(){j.pasteFiles()},visible:function(){return!!j.copyFileInfos.length&&(!!j.getFileListView().editable&&(!j.isAccordionMode()||!!j.ld))}};return t.push(C),C},j.prototype.copyFiles=function(){var t=this;this.copyFileInfos.length=0,this.getFileListView().sm().each(function(j){t.prepareCopyFileInfos(j)})},j.prototype.prepareCopyFileInfos=function(t,j){var C=this;if(t.fileType!==CC&&t.fileType!==jC){var k={url:t.url,name:t.getName(),fileNode:t,parentInfo:j};if(this.copyFileInfos.push(k),this.editor.fireEvent("copyFile",{url:t.url}),t.fileType===kC)return k.isDir=!0,void t.eachChild(function(t){C.prepareCopyFileInfos(t,k)});this.loadFileInfo(k)}},j.prototype.loadFileInfo=function(t){var j=t.url;if(this.editor.requestBase64(j,function(j){t.content=j}),Ut(j)){var C=Rt(j);this.dataModel.getDataById(C)&&this.editor.requestBase64(C,function(j){t.image=j})}},j.prototype.pasteFiles=function(){var t=this;this.copyFileInfos.forEach(function(j){t.pasteFileImpl(j)})},j.prototype.pasteFileImpl=function(t){var j=t.url,C=t.parentInfo,k=void 0,i=2,U=C?C.pasteURL:this.currentDir;if(t.isDir){var K=U+"/"+t.name;for(k=K;this.dataModel.getDataById(k);)k=K+" "+i++}else if(t.content){var y=U+"/"+x(t.name),L=j.substring(j.lastIndexOf("."),j.length);for(k=y+L;this.dataModel.getDataById(k);)k=y+" "+i+++L}if(k){if(t.content){var X={path:k,content:t.content};this.editor.request("upload",X),this.editor.fireEvent("pasteFile",{url:k}),t.image&&(X.path=Rt(k),X.content=t.image,this.editor.request("upload",X),this.editor.fireEvent("pasteFile",{url:X.path}))}t.isDir&&(t.pasteURL=k,this.editor.request("mkdir",k,function(t){}))}},j.prototype.enableDroppableToSymbolView=function(){var t=this.list;this.mode===BC&&(t=this.accordion),t.isDroppableToSymbolView=!0},j.prototype.enableDroppableToDisplayView=function(){var t=this.list;this.mode===BC&&(t=this.accordion),t.isDroppableToDisplayView=!0},j.prototype.getFileListView=function(){return this.mode===BC?this.accordion:this.list},j.prototype.initTreeMenu=function(t,j){},j.prototype.initListMenu=function(t,j){},j.prototype.initAccordionMenu=function(t,j){},_j(j,[{key:"currentDir",get:function(){var t=void 0;return this.isAccordionMode()?(t=this.ld,t&&t.fileType!==kC&&(t=t.getParent()),t?t.url:this.accordion.dirs.length?this.accordion.dirs[this.accordion.dirs.length-1].url:this.rootDir):(t=this.tree.sm().ld(),t?t.url:this.rootDir)}},{key:"ld",get:function(){return this.getFileListView().sm().ld()}}]),j}(xC),WC=function(t){function j(C){var k=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Ij(this,j);var i=hj(this,t.call(this,C,"displays",k));return i.enableDroppableToDisplayView(),i}return gj(j,t),j.prototype.initTreeMenu=function(t,j){this.addLocateTreeFileItem(j),this.addNewFolderItem(j,this.tree),this.addNewDisplayItem(j,this.tree),this.addRenameItem(j,this.tree),this.addDeleteItem(j,this.tree)},j.prototype.initListMenu=function(t,j){this.addLocateListFileItem(j),this.addNewFolderItem(j,this.list),this.addNewDisplayItem(j,this.list),this.addCopyItem(j),this.addPasteItem(j),this.addRenameItem(j,this.list),this.addDeleteItem(j,this.list),this.addExportItem(j)},j.prototype.initAccordionMenu=function(t,j){this.addLocateListFileItem(j),this.addNewFolderItem(j,this.accordion),this.addNewDisplayItem(j,this.accordion),this.addCopyItem(j),this.addPasteItem(j),this.addRenameItem(j,this.accordion),this.addDeleteItem(j,this.accordion),this.addExportItem(j)},j.prototype.addNewDisplayItem=function(t,j){var C=this,k={id:"newDisplayView",label:i("editor.newdisplayview"),action:function(){if(j instanceof SC){var t=j.sm().ld();t&&t.fileType===kC&&(C.editor._rightClickURL=t.url)}C.editor.newDisplayView(),C.editor.save(),delete C.editor._rightClickURL},visible:function(){if(!j.editable)return!1;if(C.isAccordionMode()){var t=C.accordion.sm().ld();return t&&t.fileType===kC}return!0}};return t.push(k),k},j}(hC),VC=function(t){function j(C){var k=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Ij(this,j);var i=hj(this,t.call(this,C,"symbols",k));return i.enableDroppableToDisplayView(),i.enableDroppableToSymbolView(),i}return gj(j,t),j.prototype.initTreeMenu=function(t,j){this.addLocateTreeFileItem(j),this.addNewFolderItem(j,this.tree),this.addNewSymbolItem(j,this.tree),this.addRenameItem(j,this.tree),this.addDeleteItem(j,this.tree)},j.prototype.initListMenu=function(t,j){this.addLocateListFileItem(j),this.addNewFolderItem(j,this.list),this.addNewSymbolItem(j,this.list),this.addCopyItem(j),this.addPasteItem(j),this.addRenameItem(j,this.list),this.addDeleteItem(j,this.list),this.addExportItem(j)},j.prototype.initAccordionMenu=function(t,j){this.addLocateListFileItem(j),this.addNewFolderItem(j,this.accordion),this.addNewSymbolItem(j,this.accordion),this.addCopyItem(j),this.addPasteItem(j),this.addRenameItem(j,this.accordion),this.addDeleteItem(j,this.accordion),this.addExportItem(j)},j.prototype.addNewSymbolItem=function(t,j){var C=this,k={id:"newSymbolView",label:i("editor.newsymbolview"),action:function(){if(j instanceof SC){var t=j.sm().ld();t&&t.fileType===kC&&(C.editor._rightClickURL=t.url)}C.editor.newSymbolView(),C.editor.save(),delete C.editor._rightClickURL},visible:function(){if(!j.editable)return!1;if(C.isAccordionMode()){var t=C.accordion.sm().ld();return t&&t.fileType===kC}return!0}};return t.push(k),k},j}(hC),PC=function(t){function j(C){var k=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Ij(this,j);var i=hj(this,t.call(this,C,"components",k));return i.enableDroppableToSymbolView(),i}return gj(j,t),j.prototype.initTreeMenu=function(t,j){this.addLocateTreeFileItem(j),this.addNewFolderItem(j,this.tree),this.addNewComponentItem(j,this.tree),this.addRenameItem(j,this.tree),this.addDeleteItem(j,this.tree)},j.prototype.initListMenu=function(t,j){this.addLocateListFileItem(j),this.addNewFolderItem(j,this.list),this.addNewComponentItem(j,this.list),this.addCopyItem(j),this.addPasteItem(j),this.addRenameItem(j,this.list),this.addDeleteItem(j,this.list),this.addExportItem(j)},j.prototype.initAccordionMenu=function(t,j){this.addLocateListFileItem(j),this.addNewFolderItem(j,this.accordion),this.addNewComponentItem(j,this.accordion),this.addCopyItem(j),this.addPasteItem(j),this.addRenameItem(j,this.accordion),this.addDeleteItem(j,this.accordion),this.addExportItem(j)},j.prototype.addNewComponentItem=function(t,j){var C=this,k={id:"newComponent",label:i("editor.newcomponent"),action:function(){var t=void 0;if(j instanceof SC){var k=j.sm().ld();k&&k.fileType===kC&&(t=k.url)}C.editor.newComponent(t)},visible:function(){if(!j.editable)return!1;if(C.isAccordionMode()){var t=C.accordion.sm().ld();return t&&t.fileType===kC}return!0}};return t.push(k),k},j}(hC),lC=function(t){function j(C){var k=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Ij(this,j);var i=hj(this,t.call(this,C,"scenes",k));return i.enableDroppableToDisplayView(),i}return gj(j,t),j.prototype.initTreeMenu=function(t,j){},j.prototype.initListMenu=function(t,j){},j.prototype.initAccordionMenu=function(t,j){},j}(hC),tk=function(t){function j(C){var k=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Ij(this,j);var i=hj(this,t.call(this,C,"models",k));return i.enableDroppableToDisplayView(),i}return gj(j,t),j.prototype.initTreeMenu=function(t,j){},j.prototype.initListMenu=function(t,j){},j.prototype.initAccordionMenu=function(t,j){},j}(hC),jk=function(t){function j(C){var k=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Ij(this,j);var i=hj(this,t.call(this,C,"assets",k));return i.enableDroppableToDisplayView(),i.enableDroppableToSymbolView(),i}return gj(j,t),j.prototype.initTreeMenu=function(t,j){this.addLocateTreeFileItem(j),this.addNewFolderItem(j,this.tree),this.addRenameItem(j,this.tree),this.addDeleteItem(j,this.tree)},j.prototype.initListMenu=function(t,j){this.addLocateListFileItem(j),this.addNewFolderItem(j,this.list),this.addCopyItem(j),this.addPasteItem(j),this.addRenameItem(j,this.list),this.addDeleteItem(j,this.list),this.$54$(j)},j.prototype.initAccordionMenu=function(t,j){this.addLocateListFileItem(j),this.addNewFolderItem(j,this.accordion),this.addCopyItem(j),this.addPasteItem(j),this.addRenameItem(j,this.accordion),this.addDeleteItem(j,this.accordion),this.$54$(j)},j.prototype.$54$=function(t){var j=this;t.push("separator"),t.push({id:"convertToDisplay",label:i("editor.converttodisplay"),action:function(){j.editor.open(j.getFileListView().sm().ld(),!1)},visible:function(){var t=j.getFileListView().sm().ld();return!!t&&(Lt(t.url)||Xt(t.url))}}),t.push({id:"convertToSymbol",label:i("editor.converttosymbol"),action:function(){j.editor.open(j.getFileListView().sm().ld(),!0)},visible:function(){var t=j.getFileListView().sm().ld();return!!t&&(Lt(t.url)||Xt(t.url)||Bt(t.url)||ct(t.url))}}),t.push({id:"batchConvertSVG",label:i("editor.batchconvertsvg"),action:function(){j.editor.batchConvertSVG(j.getFileListView().sm().getSelection().toArray())},visible:function(){var t=j.getFileListView().sm().ld();return!!t&&Lt(t.url)}})},j}(hC),Ck=function(t){function j(C){Ij(this,j);var k=hj(this,t.call(this));return k.editor=C,k}
return gj(j,t),j.prototype.$6$=function(t){this.setGraphView(this.editor.gv)},j}(eC),kk=function(t){function j(C){Ij(this,j);var k=hj(this,t.call(this));k.editView=C,k.editor=C.editor,k._topCanvas=N(),k._topDiv=O(),k._view.insertBefore(k._topCanvas,k._scrollBarDiv||null),k._view.insertBefore(k._topDiv,k._scrollBarDiv||null);var i=[];return k.menu=new TC(i),k.menu.beforeShow=function(t){k._rightClickPosition=k.lp(t)},k.initMenuItems(i),k.menu.addTo(k.getView()),k.editor.menus.push(k.menu),k.addTopPainter(function(t){return t.texureImage2D=!0}),k}return gj(j,t),j.prototype.isEditable=function(j){return!!this.editable&&t.prototype.isEditable.call(this,j)},j.prototype.isMovable=function(j){return!!this.editable&&t.prototype.isMovable.call(this,j)},j.prototype.handleDelete=function(j){this.editable&&t.prototype.handleDelete.call(this,j)},j.prototype.onGroupDoubleClicked=function(j,C,k){this.editable&&t.prototype.onGroupDoubleClicked.call(this,j,C,k)},j.prototype.onEdgeDoubleClicked=function(j,C,k){this.editable&&t.prototype.onEdgeDoubleClicked.call(this,j,C,k)},j.prototype.checkDoubleClickOnNote=function(j,C){return!!this.editable&&t.prototype.checkDoubleClickOnNote.call(this,j,C)},j.prototype.$57$=function(t){var j=this;t.push({id:"copy",label:i("editor.copy"),action:function(){j.editor.copy()},visible:function(){return!!j.editor.ld}}),t.push({id:"paste",label:i("editor.paste"),action:function(){j.editor.paste(!1,j._rightClickPosition)},visible:function(){return j.editable&&j.editor.hasCopyInfo()}})},j.prototype.$56$=function(t){var j=this;t.push({separator:!0,visible:function(){return j.editable&&!!j.editor.ld}}),t.push({id:"bringToFront",label:i("editor.bringtofront"),action:function(){j.editor.bringToFront()},visible:function(){return j.editable&&!!j.editor.ld}}),t.push({id:"bringForward",label:i("editor.bringforward"),action:function(){j.editor.bringForward()},visible:function(){return j.editable&&!!j.editor.ld}}),t.push({id:"sendBackward",label:i("editor.sendbackward"),action:function(){j.editor.sendBackward()},visible:function(){return j.editable&&!!j.editor.ld}}),t.push({id:"sendToBack",label:i("editor.sendtoback"),action:function(){j.editor.sendToBack()},visible:function(){return j.editable&&!!j.editor.ld}})},j.prototype.addShapeSplitItems=function(t,j){var C=this;t.push({id:"combined",label:i("editor.combineshapes"),action:function(){C.editor.beginTransaction(),Xj(C.editor.sm.getSelection().toArray(),j&&HC),C.editor.endTransaction()},visible:function(){return C.editable&&C.editor.sm.size()>1&&aj(C.editor.sm.getSelection())}}),t.push({id:"splitShape",label:i("editor.splitshape"),action:function(){C.editor.beginTransaction(),uj(C.editor.ld,j&&HC),C.editor.endTransaction()},visible:function(){return C.editable&&1===C.editor.sm.size()&&C.editor.ld instanceof ht.Shape}})},j.prototype.initMenuItems=function(t){},j.prototype.onClosed=function(){U(this.editor.menus,this.menu)},j.prototype.$58$=function(t){return t&&this.copyMap[t._id]?t._id:t},j.prototype.$50$=function(t,j){return t instanceof ht.Data?this.dm().contains(t)?t:void 0:j[t]},j.prototype.getSelectWidth=function(t){return!this.isEditable(t)||t instanceof ht.Edge?t.s("select.width"):0},j.prototype.onSelectionChanged=function(t){if(1===this.sm().size()&&("set"===t.kind||"append"===t.kind)){var j=this.sm().ld();j&&document.activeElement===this.getView()&&this._dataModel.isAutoAdjustIndex()&&this.adjustIndex(j)}},j.prototype.getContentRect=function(){var j=t.prototype.getContentRect.call(this);return j.width&&j.height||(j={x:0,y:0,width:this.dm().a("width")||100,height:this.dm().a("height")||100,empty:!0}),j},j.prototype.isDroppable=function(t,j){return!1},j.prototype.$59$=function(t){if(this.dragImage){var j=lj.config.dragImageSize,C=Z(t);this.dragImage.style.left=C.x-j/2+"px",this.dragImage.style.top=C.y-j/2+"px"}},j.prototype.removeDragImage=function(){this.dragImage&&(r(this.dragImage),this.dragImage=null)},j.prototype.handleCrossDrag=function(t,j,C){var k=this,i=C.view,U=i.draggingData;if("enter"===j){if(this._topDiv.style.border="solid "+lj.config.color_select_dark+" 2px",!this.dragImage&&U){var K=void 0===U.a("dragImage")?U.getImage():U.a("dragImage");if(ht.Default.getImage(K)!==ht.Default.getImage("editor.unknown")){var y=lj.config.dragImageSize;this.dragImage=ht.Default.toCanvas(K,y,y,"centerUniform",U,C.view,null,ht.Default.devicePixelRatio),this.$59$(t),this.dragImage.style.opacity=lj.config.dragImageOpacity,this.dragImage.className="ht-editor-dnd-image",ht.Default.appendToScreen(this.dragImage)}}}else if("exit"===j||"cancel"===j)this._topDiv.style.border="",this.removeDragImage();else if("over"===j)this.$59$(t);else if("drop"===j)if(this._topDiv.style.border="",U){this.removeDragImage();var L=this.lp(t);i.isSelected(U)?i.sm().toSelection().each(function(j){i.handleDropToEditView?i.handleDropToEditView(k.editView,j,L,t):k.editor.$100$(j,L)}):i.handleDropToEditView?i.handleDropToEditView(this.editView,U,L,t):this.editor.$100$(U,L)}else i===this.editor.dndFromOutside&&this.editor.dropLocalFileOnGraphView(t)},_j(j,[{key:"editable",get:function(){return this.editor.editable},set:function(t){}}]),j}(EC),ik=function(t){function j(C){return Ij(this,j),hj(this,t.call(this,C))}return gj(j,t),j.prototype.handleDataModelChange=function(j){t.prototype.handleDataModelChange.call(this,j),this.editor&&this.editor.fireViewEvent(this.editView,"DataModelChanged",{event:j})},j.prototype.handleDataModelPropertyChange=function(j){t.prototype.handleDataModelPropertyChange.call(this,j),this.editor&&this.editor.fireViewEvent(this.editView,"DataModelPropertyChanged",{event:j})},j.prototype.handleDataPropertyChange=function(j){t.prototype.handleDataPropertyChange.call(this,j),this.editor&&this.editor.fireViewEvent(this.editView,"DataPropertyChanged",{event:j})},j.prototype.initMenuItems=function(t){this.$57$(t),this.$56$(t),this.addBlockItems(t),this.addShapeSplitItems(t)},j.prototype.isDroppable=function(t,j){if(this.editor.editable)return!!j.view.isDroppableToDisplayView},j.prototype.isSelectable=function(j,C){return!j._refGraph&&t.prototype.isSelectable.call(this,j,C)},j.prototype.addBlockItems=function(t){var j=this,C=function(){return j.sm().size()>0},k=function(){for(var t=0;t<j.sm().size();t++){var C=j.sm().getSelection().get(t);if(C instanceof ht.Block&&!(C instanceof ht.RefGraph))return!0}return!1};t.push({separator:!0,visible:function(){return j.editable&&(C()||k())}}),t.push({id:"block",label:i("editor.block"),action:function(){j.editor.block()},visible:function(){return j.editable&&C()}}),t.push({id:"unblock",label:i("editor.unblock"),action:function(){j.editor.unblock()},visible:function(){return j.editable&&k()}})},j}(kk),Uk=function(t){function j(C,k,i,U){Ij(this,j);var K=hj(this,t.call(this));return K.newAdded=U,K.defaultValueMap={},K.parse(C,k,i),K}return gj(j,t),j.prototype.toLabel=function(){return this.getDisplayName()||this.s("type")||i("editor.comptype.comp")},j.prototype.getClass=function(){return j},j.prototype.getStyle=function(j,C){var k=t.prototype.getStyle.call(this,j,C);return void 0===k&&(k=this.defaultValueMap[j]),k},j.prototype.$61$=function(t){this.properties&&(this.properties=null),this.disableDirty=!0,this.defaultValueMap={};var j=this.s("type"),C=ht.Default.getCompType(j);if(C){this.$60$&&this.newAdded&&C.events&&(this.a(C.events),this.newAdded=!1),this.$60$=null;var k={cache:C,width:{value:100,isSafeFunc:!0,func:function(t){return t._width}},height:{value:100,isSafeFunc:!0,func:function(t){return t._height}},comps:[{type:{func:function(t){return t.compType},isSafeFunc:!0}}]};if(!C.width||this._width>0||this.setWidth(C.width),!C.height||this._height>0||this.setHeight(C.height),C.properties){this.properties=C.properties;for(var i in this.properties){var U=this.properties[i];k.comps[0][i]={func:"style@"+i},t?st(this,i,t[i],U.defaultValue):void 0===this.s(i)&&st(this,i,void 0,U.defaultValue),this.defaultValueMap[i]=U.defaultValue}}var K=lj.config.customProperties.comp;K&&K.length&&K.forEach(function(t){var j=t.property;k.comps[0][j]={func:"style@"+j}}),this.setImage(k),this.ivLater()}else this.$60$=t,"editor.comp"!==this.getImage()&&(this.setImage("editor.comp"),this.ivLater());this.disableDirty=!1},j.prototype.ivLater=function(){var t=this;ht.Default.callLater(function(){t.disableDirty=!0,t.iv(),t.disableDirty=!1})},j.prototype.onStyleChanged=function(j,C,k){t.prototype.onStyleChanged.call(this,j,C,k),"type"===j&&(this.fromDrop=!0,this.$61$(this.parsingComp))},j.prototype.parse=function(t,j,C){if(t){if(this.parsingComp=t,st(this,"type",t.type),this.$61$(t),Tt(this,t,j,C),!this.$60$&&this.newAdded){var k=this.s("type"),i=ht.Default.getCompType(k);i.events&&this.a(i.events),this.newAdded=!1}this.parsingComp=null}},j.prototype.toJSON=function(){var t={};if(Zt(this,t,"type","type",void 0),Et(this,t),this.properties)for(var j in this.properties){var C=this.properties[j];Zt(this,t,j,j,C.defaultValue)}return t},_j(j,[{key:"compType",get:function(){var t=this.s("type");return this.$60$?this.$61$(this.$60$):t&&ht.Default.getCompType(t)!==this.getImage().cache&&this.$61$(),t}}]),j}(ht.Node),Kk=function(t){function j(C,k,i){Ij(this,j);var U=hj(this,t.call(this));return U.s({border_color:lj.config.color_dark,border_width:1}),U.setImage("border_image"),U.parse(C,k,i),U}return gj(j,t),j.prototype.getClass=function(){return j},j.prototype.toLabel=function(){return this.getDisplayName()||i("editor.comptype.border")},j.prototype.parse=function(t,j,C){t&&(st(this,"type",t.type,"border"),st(this,"border_color",t.color,lj.config.color_dark),st(this,"border_width",t.width,1),Tt(this,t,j,C))},j.prototype.toJSON=function(){var t={};return Zt(this,t,"type","type",void 0),Zt(this,t,"border_color","color",void 0),Zt(this,t,"border_width","width",void 0),Et(this,t),t},_j(j,[{key:"compType",get:function(){return this.s("type")}}]),j}(ht.Node),yk=function(t){function j(C,k,i){Ij(this,j);var U=hj(this,t.call(this));return U.setSize(100,100),U.setImage("pieChart_image"),U.s({"chart.label":!1,"chart.label.color":ht.Default.labelColor,"chart.label.font":ht.Default.labelFont,"chart.hollw":!1,"chart.start.angle":0,"chart.values":[],"chart.colors":void 0}),U.parse(C,k,i),U}return gj(j,t),j.prototype.getClass=function(){return j},j.prototype.toLabel=function(){return this.getDisplayName()||i("editor.comptype.piechart")},j.prototype.parse=function(t,j,C){t&&(st(this,"chart.type",t.type,"pieChart"),st(this,"chart.label",t.label,!1),st(this,"chart.label.color",t.labelColor,ht.Default.labelColor),st(this,"chart.label.font",t.labelFont,ht.Default.labelFont),st(this,"chart.hollow",t.hollow,!1),st(this,"chart.start.angle",t.startAngle,0),st(this,"chart.values",t.values,[]),st(this,"chart.colors",t.colors,void 0),Tt(this,t,j,C))},j.prototype.toJSON=function(){var t={};return Zt(this,t,"chart.type","type",void 0),Zt(this,t,"chart.label","label",!1),Zt(this,t,"chart.label.color","labelColor",ht.Default.labelColor),Zt(this,t,"chart.label.font","labelFont",ht.Default.labelFont),Zt(this,t,"chart.hollow","hollow",!1),Zt(this,t,"chart.start.angle","startAngle",0),Zt(this,t,"chart.values","values",[]),Zt(this,t,"chart.colors","colors",void 0),Et(this,t),t},_j(j,[{key:"compType",get:function(){return this.s("chart.type")}}]),j}(ht.Node),Lk=function(t){function j(C,k,i){Ij(this,j);var U=hj(this,t.call(this));return U.setSize(100,100),U.setImage("columnChart_image"),U.s({"chart.label":!1,"chart.label.color":ht.Default.labelColor,"chart.label.font":ht.Default.labelFont,"chart.series":[],"chart.min.value":0,"chart.max.value":void 0}),U.parse(C,k,i),U}return gj(j,t),j.prototype.getClass=function(){return j},j.prototype.toLabel=function(){return this.getDisplayName()||i("editor.comptype.columnchart")},j.prototype.parse=function(t,j,C){t&&(st(this,"chart.type",t.type,void 0),st(this,"chart.label",t.label,!1),st(this,"chart.label.color",t.labelColor,ht.Default.labelColor),st(this,"chart.label.font",t.labelFont,ht.Default.labelFont),st(this,"chart.series",t.series,[]),st(this,"chart.min.value",t.minValue,0),st(this,"chart.max.value",t.maxValue,void 0),Tt(this,t,j,C))},j.prototype.toJSON=function(){var t={};return Zt(this,t,"chart.type","type",void 0),Zt(this,t,"chart.label","label",!1),Zt(this,t,"chart.label.color","labelColor",ht.Default.labelColor),Zt(this,t,"chart.label.font","labelFont",ht.Default.labelFont),Zt(this,t,"chart.series","series",[]),Zt(this,t,"chart.min.value","minValue",0),Zt(this,t,"chart.max.value","maxValue",void 0),Et(this,t),t},_j(j,[{key:"compType",get:function(){return this.s("chart.type")}}]),j}(ht.Node),Xk=function(t){function j(C,k,i){Ij(this,j);var U=hj(this,t.call(this));return U.setSize(100,100),U.setImage("lineChart_image"),U.s({"chart.label":!1,"chart.label.color":ht.Default.labelColor,"chart.label.font":ht.Default.labelFont,"chart.series":[],"chart.min.value":0,"chart.max.value":void 0,"chart.line.point":!1,"chart.line.width":2,"chart.line.3d":!1}),U.parse(C,k,i),U}return gj(j,t),j.prototype.getClass=function(){return j},j.prototype.toLabel=function(){return this.getDisplayName()||i("editor.comptype.linechart")},j.prototype.parse=function(t,j,C){t&&(st(this,"chart.type",t.type,void 0),st(this,"chart.label",t.label,!1),st(this,"chart.label.color",t.labelColor,ht.Default.labelColor),st(this,"chart.label.font",t.labelFont,ht.Default.labelFont),st(this,"chart.series",t.series,[]),st(this,"chart.min.value",t.minValue,0),st(this,"chart.max.value",t.maxValue,void 0),st(this,"chart.line.point",t.linePoint,!1),st(this,"chart.line.width",t.lineWidth,2),st(this,"chart.line.3d",t.line3d,!1),Tt(this,t,j,C))},j.prototype.toJSON=function(){var t={};return Zt(this,t,"chart.type","type",void 0),Zt(this,t,"chart.label","label",!1),Zt(this,t,"chart.label.color","labelColor",ht.Default.labelColor),Zt(this,t,"chart.label.font","labelFont",ht.Default.labelFont),Zt(this,t,"chart.series","series",[]),Zt(this,t,"chart.min.value","minValue",0),Zt(this,t,"chart.max.value","maxValue",void 0),Zt(this,t,"chart.line.point","linePoint",!1),Zt(this,t,"chart.line.width","lineWidth",2),Zt(this,t,"chart.line.3d","line3d",!1),Et(this,t),t},_j(j,[{key:"compType",get:function(){return this.s("chart.type")}}]),j}(ht.Node),uk={width:!0,height:!0,position:!0,rotation:!0,anchor:!0,scale:!0,expanded:!0};ht.Default.getMSMap().hteditor_editview=function(t,j){Object.defineProperties(t,{dirty:{get:function(){return this.tab.a("dirty")},set:function(t){ht.Default.loadingRefGraph||this.tab.a("dirty",t)}}}),t.reload=function(){if(this.url){var t={url:this.url};if(this.editor.fireViewEvent(this,"Reloading",t),t.preventDefault)return!1;this.parse(this.url)}},t.save=function(t,j){var C=this;if(!this.editable)return void(t&&t());var k=function(){t&&t(),C.editor.fireViewEvent(C,"Saved",{url:C.url}),C.editor.selectFileNode(C.url)};if(j)this._saveAs(k,j);else if(this.url)this._saveImpl(k);else{var U=this.editor._rightClickURL||this.editor[this.type+"s"].currentDir,K=i("editor.inputnew"+this.type+"name"),y=this.editor[this.type+"s"];if(y.isAccordionMode()&&y.rootDir===U)return void this.editor.showMessage(i("editor.createFolderFirst"),"error",2e3);this._saveNew(t,k,K,U)}},t._saveNew=function(t,j,C,k){var U=this,K=function(C,K){if("ok"===K){var y=Ut(C)?x(C):C,L=k+"/"+y+".json";U.editor.getFileNode(L)?_t(i("editor.filenameconflict"),L,function(){t&&t()}):(U.tab.setName(y),U.url=L,U.tab.setTag(U.url),U.editor.dataView.updateUrl(),U._saveImpl(j,!0))}else t&&t()},y={name:void 0};if(this.editor.fireViewEvent(this,"NewNameInputing",y),y.preventDefault)return!1;y.name?K(y.name,"ok"):It(C,this.tab.getName(),{nullable:!1,trim:!0,maxLength:lj.config.maxFileNameLength,checkFunc:lj.config.checkFileName},K)},t._saveAs=function(t,j){this.tab.setName(o(j)),this.url=j,this.tab.setTag(this.url),this.editor.dataView.updateUrl(),this._saveImpl(t)},t._saveImpl=function(t,j){var C=this,k=this.url,U={url:k};if("display"===this.type&&lj.config.settingDefaultValueBeforeSaving&&this.dm.each(function(t){if(t instanceof ht.Node){var j=ht.Default.getImage(t.getImage());j&&j.dataBindings&&j.dataBindings.forEach(function(j){var C=t.getAttrObject(),k=j.defaultValue;if(void 0!==k){var i=j.attr;C&&void 0!==C[i]||t.a(i,k)}})}}),this.editor.fireViewEvent(this,"Saving",U),U.preventDefault)return j&&(this.tab.setName(i("editor.untitled")),delete this.url,this.tab.setTag(void 0),this.editor.dataView.updateUrl()),!1;U={path:U.url,content:s(this.content)},this.editor.request("upload",U,function(j){!0===j?C.editor.saveImage(C.dm.a("snapshotURL")||C.g3d||C.graphView,k.substr(0,k.length-5)+".png",function(){t&&t(),C.editor.showMessage(i("editor.savedsuccessfully"),"normal",1e3),C.dirty=!1}):(C.tab&&C.editor.mainTabView.removeTab(C.tab),delete C.tab,C.editor.showMessage(i("editor.savedfailed"),"error",1e3))})},t.parse=function(t,j){(t||j)&&(this.url=t,j?this.update(j):Y(t,this.update.bind(this)))},t.update=function(t,j){var C=this;if(t){if(j){var k=s(this.content),i=t,U={undo:function(){C.updateImpl(k,!0)},redo:function(){C.updateImpl(i,!0)}};this.dm.disableHistoryManager(),this.updateImpl(t,j),this.dm.enableHistoryManager(),this.dm.addHistory(U)}else this.dm.disableHistoryManager(),this.updateImpl(t,j),this.dm.enableHistoryManager(),this.dm.clearHistoryManager();var K=void 0;j?K="Committed":this.isOpened?K="Reloaded":(K="Opened",this.isOpened=!0);var y={url:this.url,json:t};this.editor.fireViewEvent(this,K,y)}},t.updateImpl=function(t,j){var k=this,i=e(t);if(this.clear(),this.isDeserializing=!0,this.dm.deserialize(i,void 0,{disableOnPreDeserialize:!0,disableOnPostDeserialize:!0}),this.isDeserializing=!1,this.dirty=!!j,!j&&lj.config.fitContentForDisplayView)if(i.contentRect){var U=C(i.contentRect);ht.Default.grow(U,lj.config.fitPadding),this.graphView.getWidth()&&this.graphView.getHeight()?this.graphView.fitRect(U,lj.config.animate):setTimeout(function(){k.graphView.fitRect(U,lj.config.animate)},500)}else this.graphView.fitContent(lj.config.animate,lj.config.fitPadding)},t.$4$=function(){return this._interactionState},t.$5$=function(t,j,C){var k=this,i=this._interactionState;if(i!==t){this._interactionState=t,this.editor.pointsEditingMode=!1;var U=[];if(this.graphView.getInteractors().each(function(j){j.keep?j.disabled="edit"!==t:U.push(j)}),U.forEach(function(t){t.tearDown(),k.graphView.getInteractors().remove(t)}),"edit"!==t){var K=this.createInteractor(j,C);K.setUp(),this.graphView.getInteractors().add(K)}this.graphView.invalidateSelection(),this.editor.mainToolbar.iv(),this.fp("interactionState",i,t),this.validateCanvas()}},t.addData=function(t){var j=arguments.length>1&&void 0!==arguments[1]&&arguments[1],C=arguments.length>2&&void 0!==arguments[2]&&arguments[2],k=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i="symbol"===this.type?"compCreated":"dataCreated",U={data:t};if(C)return void this.editor.fireViewEvent(this,i,U,!1);this.dm.beginTransaction(),j||t.getParent()||t.setParent(this.graphView.getCurrentSubGraph()),this.dm.add(t),j||(k||this.dm.sm().ss(t),this.graphView.setFocus()),this.editor.fireViewEvent(this,i,U,!1),this.dm.endTransaction()},t.skewGrid=function(){this.dm.beginTransaction(),this.dm.a("gridAngle",2*Math.PI/3),this.dm.a("gridRotation",Math.PI/6),this.dm.endTransaction()},t.preview=function(){this.$65$("previews/"+this.type+".json",this.dm.a("previewURL")||lj.config[this.type+"PreviewURL"])},t.$65$=function(t,j){var C=this;this.tab.getTag()&&-1===j.indexOf("?")&&(j+="?tag="+encodeURI(this.tab.getTag()));var k={url:j};if(this.editor.fireViewEvent(this,"Previewing",k),k.preventDefault)return!1;j=k.url,window.open(j,j);var i=this.content;i.title=this.tab.getName(),k={path:t,content:s(i)},this.editor.request("upload",k,function(t){C.editor.fireViewEvent(C,"Preview",{url:j})})}};var ak=function(){function t(j,C,k,i,U){var K=this;Ij(this,t),this.editor=j,this.tab=C,this.type=i,this.sceneView=U,C.setView(this);var y=this.gv=this.graphView=new k(this);this._view=Q(!0,this),y.addViewListener(function(t){"validate"===t.kind&&K.validateCanvas()}),this._hRuler=N(),this._vRuler=N(),this._view.appendChild(y.getView()),this.$5$("edit"),y.isInteractive=function(){return!1},y.addPropertyChangeListener(function(){K.iv()}),y.addInteractorListener(function(t){K.handleInteractorEvent(t)}),this.dm.sm().addSelectionChangeListener(function(t){K.iv()}),this.dm.addDataModelChangeListener(function(t){K.handleDataModelChanged(t)}),this.dm.addDataPropertyChangeListener(function(t){K.handleDataPropertyChanged(t)}),this.dm.addPropertyChangeListener(function(t){K.handleDataModelPropertyChanged(t)}),this.dm.addHierarchyChangeListener(function(t){K.handleHierarchyChanged(t)}),this.dm.layout=function(t,j){K._autoLayout||(K._autoLayout=new ht.layout.AutoLayout(y)),K._autoLayout.options=j||{};var C=K.graphView.getZoom(),k=K.graphView.tx(),i=K.graphView.ty();K.dm.beginTransaction(),K._autoLayout.setAnimate(lj.config.animate);var U=function(){var t=K.graphView.getZoom(),j=K.graphView.tx(),U=K.graphView.ty(),y={undo:function(){K.graphView.setZoom(C),K.graphView.tx(k),K.graphView.ty(i)},redo:function(){K.graphView.setZoom(t),K.graphView.tx(j),K.graphView.ty(U)}};K.dm.addHistory(y),K.dm.endTransaction()};K._autoLayout.layout(t,function(){lj.config.animate?y.fitContent({finishFunc:U}):(y.fitContent(!1,lj.config.fitPadding),U())})},this.graphView.setEditable(!0),this.graphView.setEditStyle("hoverGuideVisible",lj.config.hoverGuideVisible),this.graphView.setEditStyle("anchorVisible",lj.config.anchorVisible),this.graphView.setEditStyle("connectGuideVisible",lj.config.connectGuideVisible),this.graphView.setEditStyle("guideLineVisible",lj.config.guideLineVisible),this.graphView.setEditStyle("moveDummyThreshold",lj.config.moveDummyThreshold),this.graphView.setEditStyle("smartGuideThreshold",lj.config.smartGuideThreshold),this.graphView.getInteractors().each(function(t){t.keep=!0}),this.setRulerEnabled(this.editor.isRulerEnabled()),this.setGridEnabled(this.editor.isGridEnabled()),this.clear()}return t.prototype.resetGrid=function(){},t.prototype.clear=function(){this.dm.beginTransaction(),this.dm.setName(void 0),this.dm.setBackground(void 0),this.dm.setHierarchicalRendering(!1),this.dm.setLayers(void 0),this.dm.clear(),this.dm.setAttrObject(void 0),this.dm.a("rotateAsClock",lj.config.rotateAsClock),this.resetGrid(),this.dm.endTransaction()},t.prototype.handleInteractorEvent=function(t){"prepareMove"!==t.kind&&"prepareEdit"!==t.kind||!t.event.altKey||(this.editor.copy(),this.editor.paste(!0),this.editor.gv.validate())},t.prototype.handleDataModelChanged=function(t){this.dirty=!0},t.prototype.handleDataPropertyChanged=function(t){t.data.disableDirty||this.graphView.fpImageLoaded||"*"!==t.property&&(uk[t.property]&&this.iv(),this.dirty=!0)},t.prototype.handleHierarchyChanged=function(t){this.dirty=!0},t.prototype.handleDataModelPropertyChanged=function(t){var j=t.property,C=t.newValue;null!=C&&("a:gridBlockSize"===j?this.graphView.setEditStyle("gridBlockSize",C):"a:gridThickLinesEvery"===j?this.graphView.setEditStyle("gridThickLinesEvery",C):"a:gridThickColor"===j?this.graphView.setEditStyle("gridThickColor",C):"a:gridLightColor"===j?this.graphView.setEditStyle("gridLightColor",C):"a:gridAngle"===j?this.graphView.setEditStyle("gridAngle",C):"a:gridRotation"===j?this.graphView.setEditStyle("gridRotation",C):"a:gridZoomThreshold"===j&&this.graphView.setEditStyle("gridZoomThreshold",C)),"a:connectActionType"===j?this.graphView.setCurrentConnectActionType(C):"a:rotateAsClock"===j&&this.graphView.setEditStyle("rotateAsClock",C),this.dirty=!0,this.validateCanvas()},t.prototype.onPropertyChanged=function(t){"rulerEnabled"===t.property&&(this.graphView.getEditInteractor().alignmentGuideEnabled=t.newValue),"gridEnabled"===t.property&&(this.graphView.getEditInteractor().gridEnabled=t.newValue),this.iv()},t.prototype.onClosed=function(){this.graphView.onClosed()},t.prototype.validateCanvasLater=function(){var t=this;t._drawTimer||(t._drawTimer=setTimeout(function(){t._drawTimer=null,t.validateCanvas()},0))},t.prototype.validateCanvas=function(){var t=this.graphView._topCanvas,j=g(t);j.clearRect(0,0,t.clientWidth,t.clientHeight),this.graphView.getInteractors().each(function(t){t.$0$&&t.$0$(j)}),this.$0$(j),j.restore()},t.prototype.redraw=function(){this._lastWidth=this._lastHeight=null,this.iv()},t.prototype.validateImpl=function(){var t=this._rulerSize,j=this._rulerEnabled,C=this.getWidth(),k=this.getHeight();if(C!==this._lastWidth||k!==this._lastHeight||t!==this._lastRulerSize||j!==this._lastRulerEnabled){if(this._lastWidth=C,this._lastHeight=k,this._lastRulerSize=t,this._lastRulerEnabled=j,j){this._hRuler.parentNode||(this._view.appendChild(this._hRuler),this._view.appendChild(this._vRuler));var i=Math.max(0,C-t),U=Math.max(0,k-t);n(this._hRuler,t,0,i,t),n(this._vRuler,0,t,t,U),n(this.graphView,t,t,i,U),n(this.graphView._topDiv,0,0,i,U),w(this.graphView._topCanvas,i,U),w(this._hRuler,i,t),w(this._vRuler,t,U)}else this._hRuler.parentNode&&(r(this._hRuler),r(this._vRuler)),n(this.graphView,0,0,C,k),n(this.graphView._topDiv,0,0,C,k),w(this.graphView._topCanvas,C,k);this.validateCanvas()}this._hRuler.style.background=this._rulerBackground,this._vRuler.style.background=this._rulerBackground,this.drawRuler()},t.prototype.$0$=function(t){var j=this.graphView.getZoom(),C=this.graphView.tx(),k=this.graphView.ty(),i=Math.round(this.dm.a("width")||0)*j,U=Math.round(this.dm.a("height")||0)*j,K=this.graphView.getWidth(),y=this.graphView.getHeight();!lj.config.mixMaskAndBackground&&this.dm.getBackground()||i>0&&U>0&&K>0&&y>0&&(t.beginPath(),C&&t.rect(0,0,C,y),k&&K-C&&t.rect(C,0,K-C,k),K-C-i&&U&&t.rect(C+i,k,K-C-i,U),K-C&&y-k-U&&t.rect(C,k+U,K-C,y-k-U),t.fillStyle=lj.config.color_mask,t.fill())},t.prototype.drawVerticalText=function(t,j,C){t.save(),t.translate(11,C+11),t.rotate(-Math.PI/2),S(t,j,this._rulerFont,this._rulerColor,11,-11,0,this._rulerSize,"right"),t.restore()},t.prototype.drawRuler=function(){if(this._rulerEnabled){var t,j,C,k,i,U,K=this._rulerFont,y=this._rulerSize,L=this._rulerColor,X=this.graphView,u=X.getUnionNodeRect(X.sm().getSelection()),a=X.getZoom(),B=Math.log(a)/Math.log(10),c=Math.floor(B),f=100/Math.pow(10,c)*a,R=f/10,d=c>1?40+10*(c-1):40,$=Math.round(X.tx()),m=Math.round(X.ty()),D={x:-$,y:-m,width:X.getWidth(),height:X.getHeight()},b=Math.floor(D.x/f),J=Math.ceil((D.x+D.width)/f),v=Math.floor(D.y/f),H=Math.ceil((D.y+D.height)/f);for(g(this._hRuler,0,0,1,{x:0,y:0,width:D.width,height:y}).restore(),k=g(this._hRuler,$,0,1),k.lineWidth=1,k.strokeStyle=L,u&&(k.beginPath(),k.rect(u.x*a,0,u.width*a,y),k.fillStyle=lj.config.color_line,k.fill()),k.beginPath(),t=b;t<=J;t++)i=t*f,U=c>1?(i/a).toFixed(c-1):Math.round(i/a),i=Math.round(i),k.moveTo(i,y),k.lineTo(i,0),S(k,U,K,L,i,0,1,y,"left");for(k.stroke(),k.beginPath(),t=b;t<=J;t++)for(C=1;C<10;C++)i=t*f+C*R,U=c>1?(i/a).toFixed(c-1):Math.round(i/a),i=Math.round(i),k.moveTo(i,y),5===C?(k.lineTo(i,y-10),S(k,U,K,L,i,0,1,y,"left")):(k.lineTo(i,y-4),R>d&&S(k,U,K,L,i,0,1,y,"left"));for(k.stroke(),k.restore(),g(this._vRuler,0,0,1,{x:0,y:0,width:y,height:D.height}).restore(),k=g(this._vRuler,0,m,1),k.lineWidth=1,k.strokeStyle=L,u&&(k.beginPath(),k.rect(0,u.y*a,y,u.height*a),k.fillStyle=lj.config.color_line,k.fill()),k.beginPath(),j=v;j<=H;j++)i=j*f,U=c>1?(i/a).toFixed(c-1):Math.round(i/a),i=Math.round(i),k.moveTo(y,i),k.lineTo(0,i),this.drawVerticalText(k,U,i);for(k.stroke(),k.beginPath(),j=v;j<=H;j++)for(C=1;C<10;C++)i=j*f+C*R,U=c>1?(i/a).toFixed(c-1):Math.round(i/a),i=Math.round(i),k.moveTo(y,i),5===C?(k.lineTo(y-10,i),this.drawVerticalText(k,U,i)):(k.lineTo(y-4,i),R>d&&this.drawVerticalText(k,U,i));k.stroke(),k.restore()}},_j(t,[{key:"editable",get:function(){return this.sceneView?this.sceneView.editable:this._editable},set:function(t){this.sceneView||t!==this._editable&&(this._editable=t,this.gv.invalidateSelection())}},{key:"dm",get:function(){return this.graphView.dm()}}]),t}();h(ak,{ms_v:1,ms_fire:1,ms_ac:["gridEnabled","rulerEnabled","rulerBackground","rulerFont","rulerColor","rulerSize","guideColor"],hteditor_editview:1,_rulerFont:lj.config.smallFont,_rulerBackground:lj.config.color_pane,_rulerColor:lj.config.color_dark,_rulerSize:lj.config.rulerSize,_guideColor:lj.config.color_transparent,_interactionState:void 0});var Bk=function(t){function j(C,k,i){Ij(this,j);var U=hj(this,t.call(this,C.getView().graphView));return U.tab=C,U.editView=C.getView(),U.editor=U.editView.editor,U.clazz=k,U.type=i,U._disabled=!1,U}return gj(j,t),j.prototype.beginTransaction=function(){this._isBeginTransaction||(this._isBeginTransaction=!0,this.dm.beginTransaction())},j.prototype.endTransaction=function(){this._isBeginTransaction&&(this._isBeginTransaction=!1,this.dm.endTransaction())},j.prototype.getDataAt=function(t){return this.gv.getDataAt(t)},j.prototype.getNodeAt=function(t){var j=this.getDataAt(t);return j instanceof ht.Node?j:null},j.prototype.setUp=function(){t.prototype.setUp.call(this),this.sm.cs()},j.prototype.$0$=function(t){},j.prototype.drawDiamond=function(t,j,C,k){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4;j=this.toPoint(j),k&&(t.fillStyle=k),C&&(t.strokeStyle=C);var U=j,K=U.x,y=U.y;t.lineWidth=1,t.beginPath(),t.moveTo(K,y-i),t.lineTo(K+i,y),t.lineTo(K,y+i),t.lineTo(K-i,y),t.closePath(),k&&t.fill(),C&&t.stroke()},j.prototype.drawRect=function(t,j,C,k){j=this.toRect(j),k&&(t.fillStyle=k),C&&(t.strokeStyle=C),t.lineWidth=1,t.beginPath(),t.rect(j.x,j.y,j.width,j.height),t.stroke(),k&&t.fill(),C&&t.stroke()},j.prototype.drawPoint=function(t,j,C,k,i){j=this.toPoint(j),i&&(t.fillStyle=i),k&&(t.strokeStyle=k),t.lineWidth=1,t.beginPath(),t.arc(j.x,j.y,C,0,2*Math.PI,!0),i&&t.fill(),k&&t.stroke()},j.prototype.drawPoints=function(t,j,C,k,i){for(var U=0;U<j.length;U++)this.drawPoint(t,j[U],C,k,i)},j.prototype.drawLine=function(t,j,C,k){j=this.toPoint(j),C=this.toPoint(C),t.lineWidth=1,t.strokeStyle=k,t.beginPath(),t.moveTo(j.x,j.y),t.lineTo(C.x,C.y),t.stroke()},j.prototype.toRect=function(t){var j=this.zoom;return{x:t.x*j+this.tx,y:t.y*j+this.ty,width:t.width*j,height:t.height*j}},j.prototype.toPoint=function(t){return{x:t.x*this.zoom+this.tx,y:t.y*this.zoom+this.ty}},j.prototype.add=function(t){this.editView.addData(t)},j.prototype.remove=function(t){this.dm.remove(t)},j.prototype.lp=function(t){return this.gv.lp(t)},_j(j,[{key:"dm",get:function(){return this.gv.dm()}},{key:"sm",get:function(){return this.gv.dm().sm()}},{key:"zoom",get:function(){return this.gv.getZoom()}},{key:"tx",get:function(){return this.gv.tx()}},{key:"ty",get:function(){return this.gv.ty()}},{key:"disabled",get:function(){return!this.editor.editable||this._disabled},set:function(t){this._disabled=t}}]),j}(ht.graph.Interactor),ck=function(t){function j(C,k,i){return Ij(this,j),hj(this,t.call(this,C,k,i))}return gj(j,t),j.prototype.tearDown=function(){t.prototype.tearDown.call(this),this.node=this.p1=this.p2=null},j.prototype.$49$=function(t){this.node?this.remove(this.node):this.editView.$5$("edit")},j.prototype.handle_mousedown=function(t){this.handle_touchstart(t)},j.prototype.handle_touchstart=function(t){V(t),b(t)&&(this.gv.setFocus(t),this.p1=this.lp(t),this.startDragging(t))},j.prototype.handleWindowMouseMove=function(t){this.handleWindowTouchMove(t)},j.prototype.handleWindowMouseUp=function(t){this.handleWindowTouchEnd(t)},j.prototype.handleWindowTouchMove=function(t){if(V(t),this.p1){this.p2=this.lp(t);var j=z(this.p1,this.p2);if(this.node)this.node.setRect(j);else{if(!j.width||!j.height)return;this.beginTransaction(),this.createNode(j,!1)}}},j.prototype.handleWindowTouchEnd=function(t){if(V(t),this.endTransaction(),!this.node&&this.p1&&this.createNode({x:this.p1.x-25,y:this.p1.y-25,width:50,height:50},!0),this.node){var j="symbol"===this.editView.type?"compCreated":"dataCreated",C={data:this.node};this.editor.fireViewEvent(this.editView,j,C,!1)}lj.config.continuousCreating?this.node=this.p1=this.p2=null:this.editView.$5$("edit")},j.prototype.createNode=function(t,j){
mt(this.type)?this.node=this.type(t,j):this.node=new this.clazz,j?this.node.setPosition(t.x+t.width/2,t.y+t.height/2):this.node.setRect(t),this.node.setParent(this.editView.graphView.getCurrentSubGraph()),this.dm.add(this.node),this.dm.sm().ss(this.node),this.editView.graphView.setFocus()},j.prototype.$0$=function(t){this.node&&this.drawRect(t,this.node.getRect(),lj.config.color_data_border)},j}(Bk),fk=function(t){function j(C,k,i){return Ij(this,j),hj(this,t.call(this,C,k,i))}return gj(j,t),j.prototype.tearDown=function(){t.prototype.tearDown.call(this),this.draggingPoint=this.n1=this.n2=null},j.prototype.$49$=function(t){this.n1?(this.draggingPoint=this.n1=this.n2=null,this.editView.validateCanvas()):this.editView.$5$("edit")},j.prototype.drawAttachPoints=function(t,j,C){var k=this,i=this.gv.getAttachPoints(j);i&&i.forEach(function(i,U){var K=i.x,y=i.y,L=i.offsetX,X=i.offsetY;U===C?k.drawDiamond(t,j.getAttachPosition(K,y,L,X),lj.config.color_select,lj.config.color_select,6):k.drawDiamond(t,j.getAttachPosition(K,y,L,X),lj.config.color_select,lj.config.color_light)})},j.prototype.drawCurve=function(t,j,C){var k=this.gv.getEditInteractor();if(!k)return null;var i=k.getSubModule("Curve");if(!i)return null;i.drawEdgeHostHighlight(t,j,C),this.editView.validateCanvasLater()},j.prototype.$0$=function(t){if(this.n1&&(this.n1 instanceof ht.Edge?this.drawCurve(t,this.n1,this.edgePosition1):(this.drawRect(t,this.gv.getNodeRect(this.n1),lj.config.color_data_border),this.drawAttachPoints(t,this.n1,this.attachIndex1)),this.draggingPoint)){var j=void 0,C=void 0;j=this.n1 instanceof ht.Edge?this.edgePosition1.point:this.attachIndex1||0===this.attachIndex1?this.getAttachPosition(this.n1,this.attachIndex1):this.n1.p(),this.n2 instanceof ht.Edge?C=this.edgePosition2.point:this.n2&&(this.attachIndex2||0===this.attachIndex2)&&(C=this.getAttachPosition(this.n2,this.attachIndex2)),this.drawLine(t,j,C||this.draggingPoint,lj.config.color_data_border)}if(this.n2)if(this.n2 instanceof ht.Edge)this.drawCurve(t,this.n2,this.edgePosition2);else{var k=this.gv.getNodeRect(this.n2);this.n1!==this.n2&&(this.drawRect(t,k,lj.config.color_data_border),this.drawAttachPoints(t,this.n2,this.attachIndex2));var i=this.toPoint({x:k.x,y:k.y});t.beginPath(),t.moveTo(i.x,i.y-15-3),t.lineTo(i.x+10,i.y-15-3),t.lineTo(i.x+10,i.y-3),t.lineTo(i.x+5,i.y-7-3),t.moveTo(i.x+10,i.y-3),t.lineTo(i.x+15,i.y-7-3),t.lineWidth=1,t.strokeStyle=lj.config.color_data_border,t.stroke()}},j.prototype.handle_mousemove=function(t){if(V(t),!this.draggingPoint){var j=this.getDataAt(t);if(j instanceof ht.Edge)this.edgePosition1=this.gv.calculateEdgePosition(j,this.lp(t));else{var C=this.attachIndex1;if(j){var k=this.gv.calculateAttachPoint(j,this.lp(t));this.attachIndex1=k?k.index:null}else this.attachIndex1=null;if(j===this.n1&&C===this.attachIndex1)return}this.n1=j,this.editView.validateCanvas()}},j.prototype.handle_mousedown=function(t){this.handle_touchstart(t)},j.prototype.handle_touchstart=function(t){V(t),b(t)&&(this.gv.setFocus(t),this.draggingPoint||(this.n1=this.getDataAt(t),this.n1&&(this.draggingPoint=this.lp(t),this.startDragging(t))))},j.prototype.handleWindowMouseMove=function(t){this.handleWindowTouchMove(t)},j.prototype.handleWindowMouseUp=function(t){this.handleWindowTouchEnd(t)},j.prototype.handleWindowTouchMove=function(t){var j=this.getDataAt(t);if(this.draggingPoint=this.lp(t),this.autoScroll(t),lj.config.edgeLoop||this.n1!==j){if(this.n2=j,j)if(j instanceof ht.Edge)this.edgePosition2=this.gv.calculateEdgePosition(j,this.lp(t));else{var C=this.gv.calculateAttachPoint(j,this.lp(t));this.attachIndex2=C?C.index:null}}else this.attachIndex2=null,this.edgePosition2=null;this.editView.validateCanvas()},j.prototype.handleWindowTouchEnd=function(t){if(this.n1&&this.n2){var j=void 0;dt(this.type)?(j=new this.clazz(this.n1,this.n2),j.s("edge.type",this.type)):j=mt(this.type)?this.type(this.n1,this.n2):new this.clazz(this.n1,this.n2);var C=void 0,k=void 0;if(this.n1 instanceof ht.Edge)void 0!==this.edgePosition1.index?j.setStyle("edge.source.index",this.edgePosition1.index):void 0!==this.edgePosition1.percent&&j.setStyle("edge.source.percent",this.edgePosition1.percent);else if(C=this.getAttachPoint(this.n1,this.attachIndex1)){var i=C,U=i.x,K=i.y,y=i.offsetX,L=i.offsetY;j.s({"edge.source.anchor.x":U,"edge.source.anchor.y":K,"edge.source.offset.x":y,"edge.source.offset.y":L})}if(this.n2 instanceof ht.Edge)void 0!==this.edgePosition2.index?j.setStyle("edge.target.index",this.edgePosition2.index):void 0!==this.edgePosition2.percent&&j.setStyle("edge.target.percent",this.edgePosition2.percent);else if(k=this.getAttachPoint(this.n2,this.attachIndex2)){var X=k,u=X.x,a=X.y,B=X.offsetX,c=X.offsetY;j.s({"edge.target.anchor.x":u,"edge.target.anchor.y":a,"edge.target.offset.x":B,"edge.target.offset.y":c})}(C||k)&&j.s("edge.offset",0),this.add(j),lj.config.continuousCreating||this.editView.$5$("edit")}this.draggingPoint=this.n1=this.n2=null,this.editView.validateCanvas()},j.prototype.getAttachPoint=function(t,j){if(null===j||void 0===j)return null;var C=this.gv.getAttachPoints(t);return C&&0!==C.length?C[j]:null},j.prototype.getAttachPosition=function(t,j){var C=this.getAttachPoint(t,j),k=C.x,i=C.y,U=C.offsetX,K=C.offsetY;return t.getAttachPosition(k,i,U,K)},j}(Bk),Rk=function(t){function j(C,k,i){Ij(this,j);var U=hj(this,t.call(this,C,k,i));return U.points=[],U.segments=[],U.nextPoint=null,U.closePath=!1,U}return gj(j,t),j.prototype.tearDown=function(){t.prototype.tearDown.call(this),this.points=[],this.segments=[],this.nextPoint=null,this.isBreak=!1},j.prototype.$49$=function(t){this.isBreak?this.createShape():(this.preCtrl=null,this.isBreak=!0,this.editView.validateCanvas())},j.prototype.createShape=function(){if(this.points.length>1){var t=void 0;mt(this.type)?t=this.type(this.points,this.segments):(t=new this.clazz,t.setPoints(this.points),t.setSegments(this.segments)),this.closePath&&t.setClosePath&&t.setClosePath(!0),this.add(t)}this.editView.$5$("edit"),this.editor.pointsEditingMode=!0},j.prototype.handle_mousedown=function(t){this.handle_touchstart(t)},j.prototype.isCloseStart=function(t){var j=this.points[0];if(!j)return!1;var C=this.lp(t);return ht.Default.getDistance(j,C)<5},j.prototype.handle_touchstart=function(t){if(V(t),b(t)){if(this.gv.setFocus(t),J(t))this.createShape();else{if(this.isCloseStart(t))return this.closePath=!0,void this.createShape();var j=this.judgeNextPoint(t,!0);if(this.points.length){var C=this.points[this.points.length-1];if(Math.abs(C.x-j.x)<.01&&Math.abs(C.y-j.y)<.01)return}this.preCtrl?(this.points.push(this.preCtrl),this.points.push(j),this.points.push(j),this.segments.push(4),this.preCtrl=null):(this.isBreak?(this.segments.push(1),this.isBreak=!1):this.segments.push(this.points.length>0?2:1),this.points.push(j)),this.nextPoint=this.lp(t),this.editView.validateCanvas()}this.downPoint=this.lp(t),this.startDragging(t),this._dragging=!0}},j.prototype.judgeNextPoint=function(t,j){var C=this.lp(t);if(this._dragging||this.isBreak&&!j)return null;if(ht.Default.isShiftDown()&&this.points.length>0){var k=this.points[this.points.length-1],i=C.x-k.x,U=C.y-k.y,K=Math.atan2(U,i),y=ht.Default.getDistance(k,C),L=K%(Math.PI/4);return K-=L,Math.abs(L)>Math.PI/8&&(L>0?K+=Math.PI/4:K-=Math.PI/4),{x:k.x+Math.cos(K)*y,y:k.y+Math.sin(K)*y}}var X=this.gv.getEditInteractor(),u=X.gridGuide.findClosest(C);return u&&(u.x&&(C.x+=u.x),u.y&&(C.y+=u.y)),C},j.prototype.handle_mousemove=function(t){this.nextPoint=this.judgeNextPoint(t),this.editView.validateCanvas()},j.prototype.handle_touchend=function(t){},j.prototype.handle_mouseup=function(t){this.handle_touchend(t)},j.prototype.handleWindowTouchMove=function(t){return this.handleWindowMouseMove(t)},j.prototype.updateCtrl=function(t){var j=this.points.length,C=this.points[j-1],k=this.downPoint,i=this.lp(t),U=this.gv.getZoom(),K=ht.Default.getDistance(k,i),y=this.segments[this.segments.length-1];if(K*U>5){if(ht.Default.isShiftDown()){var L=Math.abs;L(C.x-i.x)>=L(C.y-i.y)?i.y=C.y:i.x=C.x}else{var X=this.gv.getEditInteractor(),u=X.gridGuide.findClosest(i);u&&(u.x&&(i.x+=u.x),u.y&&(i.y+=u.y))}var a={x:2*C.x-i.x,y:2*C.y-i.y};4===y?this.points[j-2]=a:1!==y&&(this.segments.pop(),this.segments.push(4),this.points.splice(j-1,0,a),this.points.push(this.points[j-1])),this.preCtrl=i}else 4===y&&(this.points[j-2]=this.points[j-1],this.preCtrl=null)},j.prototype.handleWindowMouseMove=function(t){0!==this.points.length&&(this.updateCtrl(t),this.editView.validateCanvas())},j.prototype.handleWindowTouchEnd=function(t){return this.handleWindowMouseUp(t)},j.prototype.handleWindowMouseUp=function(t){0!==this.points.length&&(this._dragging=!1,this.updateCtrl(t),this.nextPoint=this.judgeNextPoint(t,!0))},j.prototype.$0$=function(t){var j=[];t.beginPath();for(var C=0,k=void 0,i=void 0,U=void 0,K=0;K<this.segments.length;K++){var y=this.segments[K];1===y?(k=this.toPoint(this.points[C++]),t.moveTo(k.x,k.y)):2===y?(k=this.toPoint(this.points[C++]),t.lineTo(k.x,k.y)):3===y?(k=this.toPoint(this.points[C++]),i=this.toPoint(this.points[C++]),t.quadraticCurveTo(k.x,k.y,i.x,i.y)):4===y?(k=this.toPoint(this.points[C++]),i=this.toPoint(this.points[C++]),U=this.toPoint(this.points[C++]),t.bezierCurveTo(k.x,k.y,i.x,i.y,U.x,U.y)):5===y&&t.closePath(),j.push(this.points[C-1])}var L=this.preCtrl;if(this.nextPoint)if(L)k=this.toPoint(L),i=this.toPoint(this.nextPoint),U=this.toPoint(this.nextPoint),t.bezierCurveTo(k.x,k.y,i.x,i.y,U.x,U.y);else{var X=this.toPoint(this.nextPoint);t.lineTo(X.x,X.y)}if(t.strokeStyle=lj.config.color_data_border,t.lineWidth=1,t.stroke(),this.drawPoints(t,j,4,lj.config.color_data_border,lj.config.color_data_background),L){var u=this.points[this.points.length-1],a=this.gv.getZoom(),B=3/a,c=6/a,f={x:2*u.x-L.x,y:2*u.y-L.y};this.drawLine(t,L,f,lj.config.color_data_border),this.drawRect(t,{x:f.x-B,y:f.y-B,width:c,height:c},lj.config.color_data_border,lj.config.color_data_background),this.drawRect(t,{x:L.x-B,y:L.y-B,width:c,height:c},lj.config.color_data_border,lj.config.color_data_background)}},j}(Bk),dk=function(t){function j(C,k,i,U,K,y){Ij(this,j);var L=hj(this,t.call(this,C,k,ik,"display",y));L.displayTree=L.list=new(K||NC)(L),L.dm.setHierarchicalRendering(!0),L.dm.enableHistoryManager(lj.config.maxUndoRedoSteps),L.dirty=!1,L.parse(i,U);var X=C.getFileNode(i);return L.editable=!X||!1!==X.a("editable"),y||(i?U||L.editor.fireEvent("displayViewOpening",{displayView:L,url:i}):L.editor.fireEvent("displayViewCreated",{displayView:L,json:U})),L}return gj(j,t),j.prototype.onClosed=function(){t.prototype.onClosed.call(this),this.displayTree.onClosed()},j.prototype.handleDataModelChanged=function(t){"add"!==t.kind||this.isDeserializing||t.data.setLayer(this.editor.currentLayer),this.dirty=!0},j.prototype.clear=function(){this.sceneView||(this.dm.beginTransaction(),t.prototype.clear.call(this),this.dm.a("connectActionType",lj.config.displayConnectActionType),this.dm.endTransaction())},j.prototype.resetGrid=function(){this.sceneView||(this.dm.beginTransaction(),this.dm.a("gridBlockSize",lj.config.displayGridBlockSize),this.dm.a("gridThickLinesEvery",lj.config.displayGridThickLinesEvery),this.dm.a("gridThickColor",lj.config.displayGridThickColor),this.dm.a("gridLightColor",lj.config.displayGridLightColor),this.dm.a("gridAngle",lj.config.displayGridAngle),this.dm.a("gridRotation",lj.config.displayGridRotation),this.dm.a("gridZoomThreshold",lj.config.displayGridZoomThreshold),this.dm.endTransaction())},j.prototype.createInteractor=function(t,j){var C=new t;return C instanceof ht.Shape?new Rk(this.tab,null,function(C,k){var i=new t;return i.setPoints(C),i.setSegments(k),j&&j(i),i}):C instanceof ht.Edge?new fk(this.tab,null,function(t,C){var k=new ht.Edge(t,C);return j&&j(k),k}):C instanceof ht.Node?new ck(this.tab,null,function(C,k){var i=new t;return j&&j(i,C,k),i}):void 0},_j(j,[{key:"content",get:function(){var t=this.dm,j=t.toJSON();j.modified=(new Date).toString(),t.a("connectActionType")===lj.config.displayConnectActionType&&delete j.connectActionType,t.a("rotateAsClock")===lj.config.rotateAsClock&&delete j.rotateAsClock,t.a("gridBlockSize")===lj.config.displayGridBlockSize&&delete j.a.gridBlockSize,t.a("gridThickLinesEvery")===lj.config.displayGridThickLinesEvery&&delete j.a.gridThickLinesEvery,t.a("gridThickColor")===lj.config.displayGridThickColor&&delete j.a.gridThickColor,t.a("gridLightColor")===lj.config.displayGridLightColor&&delete j.a.gridLightColor,t.a("gridAngle")===lj.config.displayGridAngle&&delete j.a.gridAngle,t.a("gridRotation")===lj.config.displayGridRotation&&delete j.a.gridRotation,t.a("gridZoomThreshold")===lj.config.displayGridZoomThreshold&&delete j.a.gridZoomThreshold,t.a("xAlignmentGuides")&&!t.a("xAlignmentGuides").length&&delete j.a.xAlignmentGuides,t.a("yAlignmentGuides")&&!t.a("yAlignmentGuides").length&&delete j.a.yAlignmentGuides;var C=this.graphView.getContentRect();return t.a("width")>0&&t.a("height")>0&&(j.contentRect={x:0,y:0,width:t.a("width"),height:t.a("height")}),t.size()&&C&&C.width&&C.height&&(j.contentRect=C),j}}]),j}(ak),$k=function(t){function j(C){return Ij(this,j),hj(this,t.call(this,C))}return gj(j,t),j.prototype.setDataModel=function(t){var j=this,C=j._dataModel,k=j._selectionModel;C!==t&&(C&&(C.umm(j.handleDataModelChange,j),C.umd(j.handleDataPropertyChange,j),C.removeIndexChangeListener(j.handleIndexChange,j),k||C.sm().ums(j.handleSelectionChange,j)),j._dataModel=t,t.mm(j.handleDataModelChange,j),t.md(j.handleDataPropertyChange,j),t.addIndexChangeListener(j.handleIndexChange,j),k?k._setDataModel(t):t.sm().ms(j.handleSelectionChange,j),j.fp("dataModel",C,t))},j.prototype.handleIndexChange=function(t){this.ivm()},j.prototype.handleDataPropertyChange=function(t){this.invalidateData(t.data)},j.prototype.validateModel=function(){var t=this;t._rows.clear(),t._rowMap={};var j=t._rows=t._dataModel.toDatas(t.isVisible,t),C=0,k=t.getCurrentSortFunc(),i=j.size();for(k&&j.sort(k);C<i;C++)t._rowMap[j.get(C)._id]=C},j}(sC),mk=function(t){function j(C,k){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Ij(this,j);var U=hj(this,t.call(this,k));return U.editor=C,U.editable=i,U.addTopPainter(U.$1$.bind(U)),U}return gj(j,t),j.prototype.isEditable=function(t){return this.editable},j.prototype.handleDelete=function(){this.editable&&this.removeSelection()},j.prototype.handleDataDoubleSelect=function(t,j){if(this.isEditable(j)){var C=this.getIcon(j)?this.getIndent():0;this.lp(t).x>C&&this.beginEditing(j)}},j.prototype.rename=function(t,j){t.setName(j)},j.prototype.isDroppable=function(t,j){return!1},j.prototype._clearDragInfo=function(){this.editor.dnd.hideTip(),this._dragInfo&&(this._dragInfo=null,this.redraw())},j.prototype._endDrag=function(t,j){},j.prototype._endCrossDrag=function(t,j){},j.prototype.$1$=function(t){t.texureImage2D=!0;var j=void 0;if(this._dragInfo&&this._dragInfo.inView?j=this._dragInfo:this._crossDragInfo&&(j=this._crossDragInfo),j){var C=this.getWidth(),k=(this.getRowHeight(),j.type,lj.config.color_select_dark);if(j.refData){var i=j.y;t.beginPath(),t.arc(4,i,3,0,2*Math.PI,!0),t.moveTo(7,i),t.lineTo(C,i),t.lineWidth=2,t.strokeStyle=k,t.stroke()}else{var U=this.getViewRect();_(t,k,U.x,U.y,U.width,U.height,2)}}},j.prototype._dragging=function(t,j){var C=this.getRowHeight(),k=this.lp(t),i=k.y/C,U=Math.floor(i);U>this.getRowSize()-1?(j.refData=null,j.type=null,j.parent=null):(j.refData=this.getRowDatas().get(U),k.y-U*C<.5*C?(j.type="up",j.y=U*C):(j.type="down",j.y=(U+1)*C)),this.autoScroll(t),this.redraw()},j.prototype.$2$=function(){var t="";if(this.draggingData&&(t=this.getLabel(this.draggingData),this.isSelected(this.draggingData))){var j=this.sm().size();t+=j>1?" (+"+j+") ":""}return t},j.prototype.handleDragAndDrop=function(t,j){if(this.editable){if("prepare"===j)return void this._clearDragInfo();"begin"===j&&(this._dragInfo={tip:this.$2$(),view:this});var C=this._dragInfo;if(C){var k=this.editor.dnd;if("begin"===j||"between"===j){return this.getView().contains(G(t))?(C.inView=!0,this._dragging(t,C),k.clearDropView(t,C)):(C.inView&&this.redraw(),C.inView=!1,k.crossDrag(t,C)),void k.showTip(C.tip,t)}return"end"===j?(C.inView?this._endDrag(t,C):k.crossDrop(t,C),void this._clearDragInfo()):"cancel"===j?(C.inView||k.crossCancel(t,C),void this._clearDragInfo()):void 0}}},j.prototype.handleCrossDrag=function(t,j,C){if(this.editable)return"exit"===j||"cancel"===j?(this._crossDragInfo=null,void this.redraw()):"enter"===j||"over"===j?(this._crossDragInfo||(this._crossDragInfo={}),void this._dragging(t,this._crossDragInfo)):"drop"===j?(this._endCrossDrag(t,C),this._crossDragInfo=null,void this.redraw()):void 0},j.prototype.beginEditing=function(t){var j=this;this.cancelEditing(),this.makeVisible(t),this.validate();var C=this.getIcon(t)?this.getIndent():0,k=this.ty()+this.getRowIndex(t)*this.getRowHeight(),i=Math.max(1,this.getWidth()-C),U=this.getRowHeight();this._currentEditor=new ht.widget.TextField,this._currentEditor.data=t;var K=this._currentEditor.getElement(),y=this.getLabel(t);K.value=null==y?"":y,K.onblur=function(t){j.endEditing()},K.onkeydown=function(t){d(t)?j.endEditing():m(t)&&j.cancelEditing()},this.getView().appendChild(this._currentEditor.getView()),n(this._currentEditor,C,k,i,U),this._currentEditor.setFocus(),ht.Default.callLater(K.select,K)},j.prototype.endEditing=function(){var t=this._currentEditor;t&&(this.rename(t.data,t.getValue()),delete this._currentEditor,r(t.getView()),this.redraw())},j.prototype.cancelEditing=function(){var t=this._currentEditor;t&&(delete this._currentEditor,r(t.getView()),this.redraw())},j}($k),Dk=function(t){function j(C){Ij(this,j);var k=hj(this,t.call(this,C.editor,C.dm));return k.symbolView=C,k.graphView=C.graphView,k.nodeIcon=Nt(k),k.initMenu(),C.dm.addDataPropertyChangeListener(function(t){t.data.editorIcon=null}),k}return gj(j,t),j.prototype.onDataDoubleClicked=function(t,j){j.altKey?this.graphView.fitData(t,!0,lj.config.fitPadding):this.graphView.makeCenter(t,!0)},j.prototype.onPropertyChanged=function(j){"filter"===j.property&&this.ivm(),t.prototype.onPropertyChanged.call(this,j)},j.prototype.handleDataPropertyChange=function(j){!this._filter||"displayName"!==j.property&&"s:text"!==j.property&&"s:type"!==j.property&&"s:image"!==j.property?t.prototype.handleDataPropertyChange.call(this,j):this.ivm()},j.prototype.isVisible=function(t){if(!this._filter)return!0;var j=this.getVisibleFunc();if(j&&!j(t))return!1;if(lj.config.symbolListVisibleFunc)return lj.config.symbolListVisibleFunc(t,this._filter);var C=this.getLabel(t),k=(this._filter+"").toLowerCase();return null!=C&&(C=(C+"").toLowerCase(),C.indexOf(k)>=0)},j.prototype.validate=function(){this.graphView.validate(),t.prototype.validate.call(this)},j.prototype.validateModel=function(){var j=this;t.prototype.validateModel.call(this),lj.config.filterSymbolViewEnabled&&this.graphView.setVisibleFunc(function(t){return j.isVisible(t)})},j.prototype.getIcon=function(t){return t instanceof AC?"editor.restore.state":t instanceof ht.Text?t.getIcon():t instanceof ht.Shape?(t.editorIcon||(t.editorIcon=Ft(t)),t.editorIcon):t instanceof ht.Node?this.nodeIcon:null},j.prototype.isDroppable=function(t,j){return!1},j.prototype._endCrossDrag=function(t,j){},j.prototype._endDrag=function(t,j){var C=this;this.editor.beginTransaction();var k=j.type,i=j.refData;if(this.isSelected(this.draggingData)){var U=this.getRowOrderSelection();"down"===k&&U.reverse(),U.each(function(t){C._dropData(t,k,i)})}else this._dropData(this.draggingData,k,i),this.sm().ss(this.draggingData);this.editor.endTransaction()},j.prototype._dropData=function(t,j,C){if(C){var k=this.dm().getDatas(),i=k.indexOf(C);"down"===j&&i++,k.indexOf(t)<i&&i--,this.dm().moveToIndex(t,i)}else this.dm().bringToFront(t)},j.prototype.rename=function(t,j){t.setDisplayName(j)},j.prototype.initMenu=function(){var t=this;this.menu=new TC;var j=[{id:"copy",label:i("editor.copy"),action:function(){t.editor.copy()},visible:function(){return!!t.editor.ld}},{id:"paste",label:i("editor.paste"),action:function(){t.editor.paste()},visible:function(){return t.editable&&t.editor.hasCopyInfo()}},{id:"delete",label:i("editor.delete"),action:function(){t.editor.delete()},visible:function(){return t.editable&&!!t.editor.ld}},"separator",{id:"bringToFront",label:i("editor.bringtofront"),action:function(){t.editor.bringToFront()},visible:function(){return t.editable&&!!t.editor.ld}},{id:"bringForward",label:i("editor.bringforward"),action:function(){t.editor.bringForward()},visible:function(){return t.editable&&!!t.editor.ld}},{id:"sendBackward",label:i("editor.sendbackward"),action:function(){t.editor.sendBackward()},visible:function(){return t.editable&&!!t.editor.ld}},{id:"sendToBack",label:i("editor.sendtoback"),action:function(){t.editor.sendToBack()},visible:function(){return t.editable&&!!t.editor.ld}},"separator",{id:"combined",label:i("editor.combineshapes"),action:function(){t.editor.beginTransaction(),Xj(t.editor.sm.getSelection().toArray(),HC),t.editor.endTransaction()},visible:function(){return t.editable&&t.editor.sm.size()>1&&aj(t.editor.sm.getSelection())}},{id:"splitShape",label:i("editor.splitshape"),action:function(){t.editor.beginTransaction(),uj(t.editor.ld),t.editor.endTransaction()},visible:function(){return t.editable&&1===t.editor.sm.size()&&t.editor.ld instanceof ht.Shape}}];this.menu.setItems(j),this.menu.addTo(this.getView()),this.editor.menus.push(this.menu)},j.prototype.onClosed=function(){U(this.editor.menus,this.menu)},_j(j,[{key:"editable",get:function(){return this.editor.editable},set:function(t){}}]),j}(mk);h(Dk,{ms_ac:["filter"]});var bk=function(t){function j(C){return Ij(this,j),hj(this,t.call(this,C))}return gj(j,t),j.prototype.handleDataModelChange=function(j){t.prototype.handleDataModelChange.call(this,j),this.editor&&this.editor.fireViewEvent(this.editView,"DataModelChanged",{event:j})},j.prototype.handleDataModelPropertyChange=function(j){t.prototype.handleDataModelPropertyChange.call(this,j),this.editor&&this.editor.fireViewEvent(this.editView,"DataModelPropertyChanged",{event:j})},j.prototype.handleDataPropertyChange=function(j){t.prototype.handleDataPropertyChange.call(this,j),this.editor&&this.editor.fireViewEvent(this.editView,"DataPropertyChanged",{event:j})},j.prototype.isDroppable=function(t,j){if(this.editor.editable)return!!j.view.isDroppableToSymbolView},j.prototype.isPixelPerfect=function(t){return!0},j.prototype.initMenuItems=function(t){this.$57$(t),this.$56$(t),this.addShapeSplitItems(t,!0)},j.prototype.isVisible=function(j){var C=this.editor.symbolStatePane.currentState,k=j.s("state");return(void 0===k||k===C)&&t.prototype.isVisible.call(this,j)},j}(kk),Jk=function(t){function j(C,k,i){Ij(this,j);var U=hj(this,t.call(this));return U.setIcon("editor.func"),U.setImage("editor.func"),U.parse(C,k,i),U}return gj(j,t),j.prototype.toLabel=function(){return this.getDisplayName()||i("editor.comptype.func")},j.prototype.getClass=function(){return j},j.prototype.parse=function(t,j,C){t&&(this.a("type",t.type),Tt(this,t,j,C))},j.prototype.toJSON=function(){var t={};return t.type=this.a("type"),Et(this,t),t},_j(j,[{key:"compType",get:function(){return"function"}}]),j}(ht.Node),vk={rect:vC,circle:vC,oval:vC,roundRect:vC,star:vC,triangle:vC,hexagon:vC,pentagon:vC,diamond:vC,rightTriangle:vC,parallelogram:vC,trapezoid:vC,polygon:vC,arc:vC,image:GC,shape:HC,text:ZC,border:Kk,pieChart:yk,oneDimensionalColumnChart:Lk,columnChart:Lk,percentageColumnChart:Lk,stackedColumnChart:Lk,lineChart:Xk,comp:Uk,clip:qC,restore:AC,endClip:AC};lj.toDatas=function(t,j){var C=[];return t.forEach(function(t){var k=sj(t);if(k){var i=Tj(k),U=Ej(i,j);U&&C.push(U)}}),C};var Hk=function(t){function j(C,k,i,U){Ij(this,j);var K=hj(this,t.call(this,C,k,bk,"symbol"));K.graphView.vectorDataBindingDisabled=!0,K.graphView.getLabel=function(){return null},K.graphView.setVisibleFunc(function(t){return!(t instanceof AC)}),K.list=K.symbolList=new Dk(K),K.dm.a({name:void 0,comps:[],width:100,height:100,boundExtend:0,fitSize:!1,scrollable:!1,interactive:!1,disableSelectedBorder:!1,pixelPerfect:!0,clip:!1,visible:!0,color:void 0,blendMode:"multiply",opacity:1});var y=lj.config.customProperties.symbol;y&&y.length&&y.forEach(function(t){K.dm.a(t.property,t.defaultValue)}),K.dm.addIndexChangeListener(function(){K.dirty=!0}),K.dirty=!1,K.dm.enableHistoryManager(lj.config.maxUndoRedoSteps),K.parse(i,U);var L=C.getFileNode(i);return K.editable=!L||!1!==L.a("editable"),i?U||K.editor.fireEvent("symbolViewOpening",{symbolView:K,url:i}):K.editor.fireEvent("symbolViewCreated",{symbolView:K,json:U}),K}return gj(j,t),j.prototype.clear=function(){this.dm.beginTransaction(),t.prototype.clear.call(this),this.dm.a("connectActionType",lj.config.symbolConnectActionType),this.dm.setAutoAdjustIndex(!1),this.dm.endTransaction()},j.prototype.resetGrid=function(){this.dm.beginTransaction(),this.dm.a("gridBlockSize",lj.config.symbolGridBlockSize),this.dm.a("gridThickLinesEvery",lj.config.symbolGridThickLinesEvery),this.dm.a("gridThickColor",lj.config.symbolGridThickColor),this.dm.a("gridLightColor",lj.config.symbolGridLightColor),this.dm.a("gridAngle",lj.config.symbolGridAngle),this.dm.a("gridRotation",lj.config.symbolGridRotation),this.dm.a("gridZoomThreshold",lj.config.symbolGridZoomThreshold),this.dm.endTransaction()},j.prototype.onClosed=function(){t.prototype.onClosed.call(this),this.list.onClosed()},j.prototype.updateImpl=function(t,j){var C=this,k=this.dm,i=e(t);this.clear(),k.setBackground(i.background),k.a("previewURL",i.previewURL),k.a("snapshotURL",i.snapshotURL),k.dataBindings=i.dataBindings,this.attrObject=i.attrObject,null!=i.gridBlockSize&&this.dm.a("gridBlockSize",i.gridBlockSize),null!=i.gridThickLinesEvery&&this.dm.a("gridThickLinesEvery",i.gridThickLinesEvery),null!=i.gridThickColor&&this.dm.a("gridThickColor",i.gridThickColor),null!=i.gridLightColor&&this.dm.a("gridLightColor",i.gridLightColor),null!=i.gridAngle&&this.dm.a("gridAngle",i.gridAngle),null!=i.gridRotation&&this.dm.a("gridRotation",i.gridRotation),null!=i.gridZoomThreshold&&this.dm.a("gridZoomThreshold",i.gridZoomThreshold),i.hasOwnProperty("connectActionType")&&this.dm.a("connectActionType",i.connectActionType),i.hasOwnProperty("rotateAsClock")&&this.dm.a("rotateAsClock",i.rotateAsClock),tC.forEach(function(t){k.a(t,i[t])}),k.a({name:i.name,renderHTML:i.renderHTML,comps:Yt(i.comps,[]),width:Yt(i.width,100),height:Yt(i.height,100),boundExtend:Yt(i.boundExtend,0),fitSize:Yt(i.fitSize,!1),scrollable:Yt(i.scrollable,!1),interactive:Yt(i.interactive,!1),disableSelectedBorder:Yt(i.disableSelectedBorder,!1),pixelPerfect:Yt(i.pixelPerfect,!0),clip:Yt(i.clip,!1),visible:Yt(i.visible,!0),color:Yt(i.color,void 0),blendMode:Yt(i.blendMode,"multiply"),opacity:Yt(i.opacity,1),attachPoints:Yt(i.attachPoints,void 0),attachStyle:Yt(i.attachStyle,void 0),cacheRule:Yt(i.cacheRule,!1),state:Yt(i.state,void 0),stateEnum:Yt(i.stateEnum,void 0),comps_func:pt(i.comps),width_func:pt(i.width),height_func:pt(i.height),fitSize_func:pt(i.fitSize),scrollable_func:pt(i.scrollable),interactive_func:pt(i.interactive),disableSelectedBorder_func:pt(i.disableSelectedBorder),pixelPerfect_func:pt(i.pixelPerfect),visible_func:pt(i.visible),color_func:pt(i.color),blendMode_func:pt(i.blendMode),opacity_func:pt(i.opacity),attachPoints_func:pt(i.attachPoints),attachStyle_func:pt(i.attachStyle),cacheRule_func:pt(i.cacheRule),state_func:pt(i.state)});var U=lj.config.customProperties.symbol;U&&U.length&&U.forEach(function(t){k.a(t.property,Yt(i[t.property],t.defaultValue))}),k.a("comps").forEach(function(t){sj(t,C)}),this.dirty=!!j,!j&&lj.config.fitContentForSymbolView&&this.graphView.fitContent(lj.config.animate,lj.config.fitPadding)},j.prototype.addValue=function(t,j,C){var k=this.dm.a(j);zt(t,j,this.dm.a(j+"_func"),k,C)},j.prototype.createInteractor=function(t,j){var C=this,k=vk[t];return"shape"===t?new Rk(this.tab,null,function(i,U){var K={type:"shape",background:null,borderColor:lj.config.color_data_border,borderWidth:1};j&&j(K,i,U);var y=new k(K);return y.setPoints(i),y.setSegments(U),C.editor.fireEvent("compInited",{type:t,data:y,symbolView:C.editor.symbolView}),y}):new ck(this.tab,null,function(U,K){var y=void 0;y="arc"===t?{type:t,rect:[U.x,U.y,U.width,U.height],background:lj.config.color_data_background,borderWidth:1,borderColor:lj.config.color_data_border,arcFrom:0,arcTo:4.1888}:"border"===t?{type:t,rect:[U.x,U.y,U.width,U.height],border:1,color:lj.config.color_data_border}:"text"===t?{type:t,rect:[U.x,U.y,U.width,U.height],text:i("editor.text")}:"comp"===t||"image"===t?K?{rect:[U.x+U.width/2,U.y+U.height/2,-1,-1]}:{rect:[U.x,U.y,U.width,U.height]}:"pieChart"===t?{type:"pieChart",values:[10,20,40,60,80],colors:["#7EB6EA","#434348","#93EB82","#F5A262","#8087E6"]}:"oneDimensionalColumnChart"===t?{type:"columnChart",series:[{values:[10,20,40,60,80],colors:["#7EB6EA","#434348","#93EB82","#F5A262","#8087E6"]}]}:"columnChart"===t?{type:"columnChart",series:[{values:[30,40,60,70,80],color:"#7EB6EA"},{values:[20,40,50,80,90],color:"#434348"}]}:"lineChart"===t?{type:"lineChart",series:[{values:[10,40,30,60,70],color:"#7EB6EA"}]}:{type:t,rect:[U.x,U.y,U.width,U.height],background:lj.config.color_data_background,borderWidth:1,borderColor:lj.config.color_data_border},j&&j(y,U,K);var L=new k(y);return C.editor.fireEvent("compInited",{type:t,data:L,symbolView:C.editor.symbolView}),L})},_j(j,[{key:"attrObject",set:function(t){var j=this.editor.rightBottomTabView.getTabModel().sm();this._attrObject=t,j.co(this.editor.dataViewTab)&&this.editor.dataView.updateContent()},get:function(){return this._attrObject}},{key:"content",get:function(){var t=this,j=this.graphView.getEditInteractor(),C=(j.gridGuide,this.dm),k=this.attrObject,i={modified:(new Date).toString()};void 0!==k&&(i.attrObject=k),C.getBackground()&&(i.background=C.getBackground()),C.dataBindings&&(i.dataBindings=C.dataBindings),C.a("previewURL")&&(i.previewURL=C.a("previewURL")),C.a("snapshotURL")&&(i.snapshotURL=C.a("snapshotURL")),C.a("connectActionType")!==lj.config.symbolConnectActionType&&(i.connectActionType=C.a("connectActionType")),C.a("rotateAsClock")!==lj.config.rotateAsClock&&(i.rotateAsClock=C.a("rotateAsClock")),C.a("gridBlockSize")!==lj.config.symbolGridBlockSize&&(i.gridBlockSize=C.a("gridBlockSize")),C.a("gridThickLinesEvery")!==lj.config.symbolGridThickLinesEvery&&(i.gridThickLinesEvery=C.a("gridThickLinesEvery")),C.a("gridThickColor")!==lj.config.symbolGridThickColor&&(i.gridThickColor=C.a("gridThickColor")),C.a("gridLightColor")!==lj.config.symbolGridLightColor&&(i.gridLightColor=C.a("gridLightColor")),C.a("gridAngle")!==lj.config.symbolGridAngle&&(i.gridAngle=C.a("gridAngle")),C.a("gridRotation")!==lj.config.symbolGridRotation&&(i.gridRotation=C.a("gridRotation")),C.a("gridZoomThreshold")!==lj.config.symbolGridZoomThreshold&&(i.gridZoomThreshold=C.a("gridZoomThreshold")),C.a("xAlignmentGuides")&&C.a("xAlignmentGuides").length&&(i.xAlignmentGuides=C.a("xAlignmentGuides")),C.a("yAlignmentGuides")&&C.a("yAlignmentGuides").length&&(i.yAlignmentGuides=C.a("yAlignmentGuides")),C.a("cacheRule")&&this.addValue(i,"cacheRule"),C.a("stateEnum")&&C.a("stateEnum").length&&(i.stateEnum=C.a("stateEnum"),this.addValue(i,"state")),tC.forEach(function(t){C.a(t)&&(i[t]=C.a(t))}),C.a("renderHTML")&&(i.renderHTML=C.a("renderHTML")),this.addValue(i,"width"),this.addValue(i,"height"),this.addValue(i,"boundExtend",0),this.addValue(i,"fitSize",!1),this.addValue(i,"scrollable",!1),this.addValue(i,"interactive",!1),this.addValue(i,"disableSelectedBorder",!1),this.addValue(i,"pixelPerfect",!0),this.addValue(i,"name"),this.addValue(i,"clip",!1),this.addValue(i,"visible",!0),this.addValue(i,"color"),this.addValue(i,"blendMode","multiply"),this.addValue(i,"opacity",1),this.addValue(i,"attachPoints"),this.addValue(i,"attachStyle");var U=lj.config.customProperties.symbol,K=!!lj.config.saveSymbolCustomPropertyDefaultValue;U&&U.length&&U.forEach(function(j){
K?t.addValue(i,j.property):t.addValue(i,j.property,j.defaultValue)});var y=[];return C.a("comps_func")?i.comps={values:y,func:C.a("comps_func")}:i.comps=y,C.each(function(t){y.push(t.toJSON())}),i}}]),j}(ak),Gk=function(t){function j(C){Ij(this,j);var k=hj(this,t.call(this));k.editor=C,k.getTabModel().sm().ms(function(){k.editor.$6$(k.currentTab)});var U=function(){return!!k.getTabModel().size()};return k.menu=new TC([{id:"closeTab",label:i("editor.closetab"),action:function(){k.closeTab()},visible:U},{id:"closeOtherTabs",label:i("editor.closeothertabs"),action:function(){k.closeOtherTabs()},visible:U},{id:"closeTabsToTheRight",label:i("editor.closetabstotheright"),action:function(){k.closeTabsToTheRight()},visible:U}]),k.menu.beforeShow=function(t){k._rightClickTab=k.getTabAt(t)},k.menu.addTo(k.getTitleDiv()),k.editor.menus.push(k.menu),k}return gj(j,t),j.prototype.drawCloseIcon=function(j,C,k,i){j.a("dirty")?(C.fillStyle=k,C.beginPath(),C.arc(i.x+i.width/2,i.y+i.height/2,3,0,2*Math.PI,!0),C.fill()):t.prototype.drawCloseIcon.call(this,j,C,k,i)},j.prototype.open=function(t){if(t){var j=t.fileType,C=j===KC,k=j===UC,i=j===XC&&lj.SceneView;if(C||k||i){var U=t.url,K=this.getTabModel().getDataByTag(U);K||(K=new ht.Tab,K.setTag(U),K.setClosable(!0),K.setName(x(t.getName())),C?(K.setIcon("editor.display"),new dk(this.editor,K,U)):k?(K.setIcon("editor.symbol"),new Hk(this.editor,K,U)):i&&(K.setIcon("editor.scene"),new lj.SceneView(this.editor,K,U)),this.editor.addTab(K)),this.getTabModel().sm().ss(K)}}},j.prototype.newDisplayView=function(t){var j=new ht.Tab;j.setClosable(!0),j.setIcon("editor.display"),j.setName(t||i("editor.untitled"));var C=new dk(this.editor,j);return this.editor.addTab(j,!0),C},j.prototype.newSymbolView=function(t){var j=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],C=new ht.Tab;C.setClosable(!0),C.setIcon("editor.symbol"),C.setName(t||i("editor.untitled"));var k=new Hk(this.editor,C);return this.editor.addTab(C,!0),j&&this.editor.zoomToFit(),k},j.prototype.$101$=function(){this.getTabModel().each(function(t){t.getView().graphView.invalidateAll()})},j.prototype.reload=function(){this.currentTab&&this.currentTab.getView().reload()},j.prototype.save=function(t,j){this.currentTab&&this.currentTab.getView().save(t,j)},j.prototype.saveAll=function(t){var j=this.tabs,C=-1,k=function(){C++,C<j.length?j[C].getView().save(k):t()};k()},j.prototype.preview=function(){this.currentTab&&this.currentTab.getView().preview()},j.prototype.selectTab=function(t){t&&this.getTabModel().sm().ss(t)},j.prototype.onTabClosing=function(t,j){return this.closeTab(t),!1},j.prototype.closeTab=function(t,j,C){(t=t||this._rightClickTab||this.currentTab)&&this.closeTabs([t],j,C)},j.prototype.closeOtherTabs=function(t,j){var C=this._rightClickTab||this.currentTab;this.closeTabs(this.tabs.filter(function(t){return t!==C}),t,j)},j.prototype.closeTabsToTheRight=function(t,j){var C=this._rightClickTab||this.currentTab;if(C){var k=this.tabs.indexOf(C);this.closeTabs(this.tabs.slice(k+1),t,j)}},j.prototype.closeAllTabs=function(t,j){this.closeTabs(this.tabs,t,j)},j.prototype.closeTabs=function(t,j,C){var k=this,i=void 0,U=function(K){if("cancel"!==K&&t.length){var y=t.shift(0);void 0===i&&(i=k.tabs.indexOf(y)-1),k.$66$(y,U,C)}else{j&&j();var L=k.tabs.length;!k.currentTab&&L&&((void 0===i||i<0)&&(i=0),i>L-1&&(i=L-1),k.selectTab(k.tabs[i]))}};U(),this._rightClickTab=null},j.prototype.removeTab=function(t){var j=t.getView(),C={url:j.url};this.editor.fireViewEvent(j,"Closing",C),C.preventDefault||(j.onClosed(),this.getTabModel().remove(t),this.editor.fireEvent("tabClosed",{tab:t}),this.editor.fireViewEvent(j,"Closed",C))},j.prototype.$66$=function(t,j,C){var k=this,U=t.getView();if(!C&&U.dirty&&U.editable){var K={tab:t};if(this.editor.fireEvent("tabPrompting",K),"notSave"===K.action)this.removeTab(t),j&&j("notSave");else if("save"===K.action)U.save(function(){k.removeTab(t),j&&j("save")});else if("cancel"===K.action)j&&j("cancel");else{var y=[{label:i("editor.notsave"),action:function(){L.hide(),k.removeTab(t),j&&j("notSave")}},{label:i("editor.save"),action:function(){U.save(function(){L.hide(),k.removeTab(t),j&&j("save")})}},{label:i("editor.cancel"),action:function(){L.hide(),j&&j("cancel")}}],L=new Wj({title:t.getName(),contentPadding:20,width:260,draggable:!0,content:'<p style="color: '+ht.Default.labelColor+'">'+i("editor.savechange")+"</p>",buttons:y});L.$49$=y[2].action,L.$48$=y[1].action,L.show()}}else this.removeTab(t),j&&j()},_j(j,[{key:"currentTab",get:function(){return this.getTabModel().sm().ld()}},{key:"tabs",get:function(){return this.getTabModel().getRoots().toArray()}}]),j}(nC),Zk=function(t){function j(C){Ij(this,j);var k=hj(this,t.call(this));k.editor=C,k.buttons={};var i=[];i.push(k.createItem("distributeHorizontal")),i.push(k.createItem("distributeVertical")),i.push(k.createItem("alignLeft")),i.push(k.createItem("alignHorizontal")),i.push(k.createItem("alignRight")),i.push(k.createItem("alignTop")),i.push(k.createItem("alignVertical")),i.push(k.createItem("alignBottom")),k.addSearchItem(i);var U=22,y=[U,U,U,U,U,U,U,U,.1];return K(lj.config.compactFilter)||(k.addCompactItem(i),y.push(U)),k.addRow(i,y),k.updateItems(),k}return gj(j,t),j.prototype.createItem=function(t){var j=this,C="editor.align."+t.toLocaleLowerCase();return this.buttons[t]=Vt(null,i(C),C,function(){j[t]()})},j.prototype.updateItems=function(){var t=this.buttons;if(this.dataModel){var j=[];this.dataModel.sm().each(function(t){t instanceof ht.Node&&j.push(t)}),j.length>2?(t.distributeHorizontal.setDisabled(!1),t.distributeVertical.setDisabled(!1),t.alignLeft.setDisabled(!1),t.alignHorizontal.setDisabled(!1),t.alignRight.setDisabled(!1),t.alignTop.setDisabled(!1),t.alignVertical.setDisabled(!1),t.alignBottom.setDisabled(!1)):j.length>1?(t.distributeHorizontal.setDisabled(!0),t.distributeVertical.setDisabled(!0),t.alignLeft.setDisabled(!1),t.alignHorizontal.setDisabled(!1),t.alignRight.setDisabled(!1),t.alignTop.setDisabled(!1),t.alignVertical.setDisabled(!1),t.alignBottom.setDisabled(!1)):(t.distributeHorizontal.setDisabled(!0),t.distributeVertical.setDisabled(!0),t.alignLeft.setDisabled(!0),t.alignHorizontal.setDisabled(!0),t.alignRight.setDisabled(!0),t.alignTop.setDisabled(!0),t.alignVertical.setDisabled(!0),t.alignBottom.setDisabled(!0))}else t.distributeHorizontal.setDisabled(!0),t.distributeVertical.setDisabled(!0),t.alignLeft.setDisabled(!0),t.alignHorizontal.setDisabled(!0),t.alignRight.setDisabled(!0),t.alignTop.setDisabled(!0),t.alignVertical.setDisabled(!0),t.alignBottom.setDisabled(!0)},j.prototype.$6$=function(t){this.dataModel&&this.dataModel.sm().ums(this.updateItems,this),t?(this.dataModel=t.getView().dm,this.dataModel.sm().ms(this.updateItems,this)):this.dataModel=null,this.updateItems()},j.prototype.getUnionRect=function(t){return this.editor.gv?this.editor.gv.getUnionNodeRect(t):null},j.prototype.isSelected=function(t){return this.dataModel&&this.dataModel.sm().contains(t)},j.prototype.hasSelectedGroupParent=function(t){return t instanceof ht.Group&&(!!this.isSelected(t)||this.hasSelectedGroupParent(t.getParent()))},j.prototype.hasSelectedHost=function(t){var j=this,C=function(k){return k!==t&&(k instanceof ht.Node&&(!!j.isSelected(k)||C(k.getHost())))};return C(t.getHost())},j.prototype.distributeHorizontal=function(){if(this.editor.editable){this.editor.beginTransaction();var t=this.editor.gv,j=this.selection,C=this.getUnionRect(j);if(t&&C){j.sort(function(j,C){return t.getNodeRect(j).x-t.getNodeRect(C).x});var k={},i=0;j.forEach(function(j){var C=t.getNodeRect(j);k[j._id]=C,i+=C.width});var U=(C.width-i)/(j.length-1),K=C.x;j.forEach(function(j){var C=t.getNodeRect(j);j.translate(K-C.x,0),K+=C.width+U})}this.editor.endTransaction()}},j.prototype.distributeVertical=function(){if(this.editor.editable){this.editor.beginTransaction();var t=this.editor.gv,j=this.selection,C=this.getUnionRect(j);if(t&&C){j.sort(function(j,C){return t.getNodeRect(j).y-t.getNodeRect(C).y});var k={},i=0;j.forEach(function(j){var C=t.getNodeRect(j);k[j._id]=C,i+=C.height});var U=(C.height-i)/(j.length-1),K=C.y;j.forEach(function(j){var C=t.getNodeRect(j);j.translate(0,K-C.y),K+=C.height+U})}this.editor.endTransaction()}},j.prototype.alignLeft=function(){if(this.editor.editable){this.editor.beginTransaction();var t=this.editor.gv,j=this.selection,C=this.getUnionRect(j);t&&C&&j.forEach(function(j){var k=t.getNodeRect(j);j.translate(C.x-k.x,0)}),this.editor.endTransaction()}},j.prototype.alignHorizontal=function(){if(this.editor.editable){this.editor.beginTransaction();var t=this.editor.gv,j=this.selection,C=this.getUnionRect(j);t&&C&&j.forEach(function(j){var k=t.getNodeRect(j);j.translate(C.x+C.width/2-k.x-k.width/2,0)}),this.editor.endTransaction()}},j.prototype.alignRight=function(){if(this.editor.editable){this.editor.beginTransaction();var t=this.editor.gv,j=this.selection,C=this.getUnionRect(j);t&&C&&j.forEach(function(j){var k=t.getNodeRect(j);j.translate(C.x+C.width-k.x-k.width,0)}),this.editor.endTransaction()}},j.prototype.alignTop=function(){if(this.editor.editable){this.editor.beginTransaction();var t=this.editor.gv,j=this.selection,C=this.getUnionRect(j);t&&C&&j.forEach(function(j){var k=t.getNodeRect(j);j.translate(0,C.y-k.y)}),this.editor.endTransaction()}},j.prototype.alignVertical=function(){if(this.editor.editable){this.editor.beginTransaction();var t=this.editor.gv,j=this.selection,C=this.getUnionRect(j);t&&C&&j.forEach(function(j){var k=t.getNodeRect(j);j.translate(0,C.y+C.height/2-k.y-k.height/2)}),this.editor.endTransaction()}},j.prototype.alignBottom=function(){if(this.editor.editable){this.editor.beginTransaction();var t=this.editor.gv,j=this.selection,C=this.getUnionRect(j);t&&C&&j.forEach(function(j){var k=t.getNodeRect(j);j.translate(0,C.y+C.height-k.y-k.height)}),this.editor.endTransaction()}},j.prototype.addSearchItem=function(t){var j=this;this.searchField=new ht.widget.TextField;var C=this.searchField.getElement();C.onkeyup=function(t){m(t)&&(C.value=""),j.editor.filterProperties()},t.push(this.searchField)},j.prototype.addCompactItem=function(t){var j=this,C=Pt("editor.filter",function(){return j.editor.inspectorCompact}),k=function(){j.editor.inspectorCompact=!j.editor.inspectorCompact};t.push(Vt(null,i("editor.inspectorcompact"),C,k))},_j(j,[{key:"selection",get:function(){var t=this,j=[];return this.dataModel&&this.dataModel.sm().each(function(C){C instanceof ht.Node&&(t.hasSelectedGroupParent(C.getParent())||t.hasSelectedHost(C)||j.push(C))}),j}},{key:"filter",get:function(){return this.searchField.getElement().value}}]),j}(Vj),qk=function(t){function j(C){Ij(this,j);var k=hj(this,t.call(this));return k.editor=C,k.initForm(),k.visible=!1,k.$6$(),k.oopsImageJSON=ht.Default.getImage("editor.oops"),k.oopsImage=ht.Default.toCanvas(k.oopsImageJSON,k.oopsImageJSON.width,k.oopsImageJSON.height,"fill",null,null,null,ht.Default.devicePixelRatio).toDataURL(),k}return gj(j,t),j.prototype.initForm=function(){var t=this,j=this.codeEditor=new Pj({language:"JSON",lineNumbers:"off",readOnly:!0,minimap:{enabled:!1}});this.addRow([{id:"content",element:j}],[.1],.1),this.addRow([{id:"url",textField:{editable:!1}},{id:"edit",button:{onClicked:function(){t.editor.editable&&(t.editing=!t.editing)}}},{id:"commit",button:{label:i("editor.commit"),onClicked:function(){t.commit()}}}],[.1,50,50]),this.getView().style.background=lj.config.color_pane,this.editing=!1},j.prototype.commit=function(){this.editor.editable&&(this.currentView.update(this.content,!0),this.editing=!1)},j.prototype.$67$=function(){var t=this;this.visible&&!this.editing&&(this._updateContentLater||(this._updateContentLater=!0,setTimeout(function(){t.updateContent()},100)))},j.prototype.updateContent=function(){this.visible&&!this.editing&&(this._updateContentLater=!1,this.content=this.currentView?s(this.currentView.content):"")},j.prototype.updateUrl=function(){this.v("url",this.tab&&this.tab.getTag()||"")},j.prototype.$6$=function(t){this.editing=!1,this.dataModel&&(this.dataModel.removeDataModelChangeListener(this.$67$,this),this.dataModel.removeDataPropertyChangeListener(this.$67$,this),this.dataModel.removePropertyChangeListener(this.$67$,this)),t?(this.currentView=t.getView(),this.dataModel=this.currentView.dm,this.dataModel.addDataModelChangeListener(this.$67$,this),this.dataModel.addDataPropertyChangeListener(this.$67$,this),this.dataModel.addPropertyChangeListener(this.$67$,this),this.setDisabled(!1)):(this.currentView=null,this.dataModel=null,this.setDisabled(!0)),this.tab=t,this.updateUrl(),this.$67$()},_j(j,[{key:"editing",get:function(){return this._editing},set:function(t){this._editing!==t&&(this._editing=t,this.getViewById("edit").setLabel(i(t?"editor.cancel":"editor.edit")),this.getViewById("commit").setDisabled(!t),this.getViewById("content").setEditable(t),t||this.$67$())}},{key:"visible",get:function(){return this._visible},set:function(t){this._visible!==t&&(this._visible=t,t?this.updateContent():this.editing||(this.content=""))}},{key:"content",get:function(){return this.v("content")},set:function(t){this.setDisabled(!1),this.v("content",t)}}]),j}(Vj);lj.DataView=qk;var Ak=function(t){function j(C){Ij(this,j);var k=hj(this,t.call(this));return k.editor=C,k.centerPane=new zC,k.setCenterView(k.centerPane),k.controlPane=new Vj,k.controlPane.addRow([{id:"filter",textField:{}}],[.1,ht.Default.isTouchable?32:18]),k.setBottomView(k.controlPane),k.setBottomHeight(ht.Default.widgetRowHeight+8),k.input=k.controlPane.getViewById("filter").getElement(),k.input.onkeyup=function(t){k.list&&(m(t)&&(k.input.value=""),k.list.setFilter(k.input.value))},k}return gj(j,t),j.prototype.$6$=function(t){this.tab=t,this.list=t?t.getView().list:null,this.controlPane.v("filter",this.list?this.list.getFilter()||"":"")},_j(j,[{key:"list",get:function(){return this.centerPane.getCenterView()},set:function(t){this.centerPane.setCenterView(t)}}]),j}(zC),zk=function(t){function j(C){Ij(this,j);var k=hj(this,t.call(this));k.editor=C,k._layerNames=[],k.setDisabled(!0),k.tableModel=new ht.DataModel,k.tablePane=new oC(k.tableModel),k.tableView=k.tablePane.getTableView(),k.tableView.setEditable(!0);var U=k.tableView.isCellEditable;return k.tableView.isCellEditable=function(){return!!C.editable&&U.apply(this,arguments)},k.tablePane.getView().style.border=lj.config.color_line+" solid 1px",k.tablePane.addColumns([k.$74$("name",i("editor.name"),100),k.$74$("visible",i("editor.visible"),50),k.$74$("selectable",i("editor.selectable"),50),k.$74$("movable",i("editor.movable"),50),k.$74$("editable",i("editor.editable"),50)]),k.addRow([k.tablePane],[.1],.1),k.addRow([{button:{icon:"editor.add",toolTip:i("editor.add"),onClicked:function(){k.editor.editable&&(k.addLayer(ht.Data.prototype._layer,!0,!0,!0,!0),k.updateLayers())}}},{button:{icon:"editor.delete",toolTip:i("editor.delete"),onClicked:function(){k.editor.editable&&k.tableView.sm().size()&&(k.tableView.removeSelection(),k.updateLayers())}}},null,{button:{icon:"editor.top",toolTip:i("editor.bringtofront"),onClicked:function(){k.editor.editable&&k.tableView.sm().size()&&(k.tableModel.moveSelectionToTop(),k.updateLayers())}}},{button:{icon:"editor.up",toolTip:i("editor.bringforward"),onClicked:function(){k.editor.editable&&k.tableView.sm().size()&&(k.tableModel.moveSelectionUp(),k.updateLayers())}}},{button:{icon:"editor.down",toolTip:i("editor.sendbackward"),onClicked:function(){k.editor.editable&&k.tableView.sm().size()&&(k.tableModel.moveSelectionDown(),k.updateLayers())}}},{button:{icon:"editor.bottom",toolTip:i("editor.sendtoback"),onClicked:function(){k.editor.editable&&k.tableView.sm().size()&&(k.tableModel.moveSelectionToBottom(),k.updateLayers())}}}],[20,20,.1,20,20,20,20]),k}return gj(j,t),j.prototype.addLayer=function(t,j,C,k,i){!1!==j&&(j=!0),!1!==C&&(C=!0),!1!==k&&(k=!0),!1!==i&&(i=!0);var U=new ht.Data;U.a({name:t,visible:j,selectable:C,movable:k,editable:i}),this.tableModel.add(U)},j.prototype.$74$=function(t,j,C){var k=this;return{name:t,tag:t,accessType:"attr",width:C,displayName:j,align:"center",editable:!0,setValue:function(j,C,i){i!==j.a(t)&&(j.a(t,i),k.updateLayers())}}},j.prototype.$6$=function(t){this.dataModel&&this.dataModel.removePropertyChangeListener(this.handleDataModelPropertyChange,this);var j=this.editor.displayView||this.editor.sceneView;j?(this.dataModel=j.dm,this.dataModel.addPropertyChangeListener(this.handleDataModelPropertyChange,this),this.setDisabled(!1)):(this.dataModel=null,this.setDisabled(!0)),this.updateTable()},j.prototype.handleDataModelPropertyChange=function(t){var j=this;if("layers"===t.property){this.updateTable(),this._layerNames=[];var C=this.dataModel.getLayers();C&&C.forEach(function(t){j._layerNames.push($t(t)?t.name:t)}),this.editor.inspector&&this.editor.inspector.$35$()}},j.prototype.updateLayers=function(){if(this.dataModel){var t=this.tableModel.size()?[]:null;t&&this.tableModel.getRoots().forEach(function(j){t.push({name:j.a("name"),visible:j.a("visible"),selectable:j.a("selectable"),movable:j.a("movable"),editable:j.a("editable")})}),this.isSettingLayers=!0,this.dataModel.setLayers(t),this.isSettingLayers=!1}},j.prototype.updateTable=function(){var t=this;if(!this.isSettingLayers&&(this.tableModel.clear(),this.dataModel)){var j=this.dataModel.getLayers();j&&j.forEach(function(j){$t(j)?t.addLayer(j.name,j.visible,j.selectable,j.movable,j.editable):t.addLayer(j,!0,!0,!0,!0)})}},_j(j,[{key:"currentLayer",get:function(){var t=this.tableModel.sm().ld();if(t)return t.a("name");var j=this.tableModel.getRoots();return j.size()?(t=j.get(j.size()-1),t.a("name")):ht.Data.prototype._layer}},{key:"layerNames",get:function(){return this._layerNames}}]),j}(Vj),Tk=function(t){function j(C){Ij(this,j);var k=hj(this,t.call(this));k.editor=C;var U=k.tableModel=new ht.DataModel,K=k.tablePane=new oC(U),y=k.tableView=K.getTableView();return U.mm(k.handleUpdate,k),U.md(k.handleTableDataPropertyChange,k),U.sm().setSelectionMode("single"),y.isEditable=function(){return C.editable},K.addColumns([{name:"stateName",displayName:i("editor.state"),accessType:"attr",editable:!0,valueType:"string",tag:"stateName"},{name:"stateDisplayName",displayName:i("editor.name"),accessType:"attr",editable:!0,valueType:"string",tag:"stateDisplayName"},{name:"isDefault",displayName:i("editor.default"),accessType:"attr",valueType:"boolean",editable:!0,width:48,setValue:function(t,j,C,i){k.setDefaultState(t.a("stateName"))}}]),K.addViewListener(function(t){if("beginValidate"===t.kind){var j=K.getColumnModel(),C=K.getWidth(),k=(C-80)/2;j.getDataByTag("stateName").setWidth(k),j.getDataByTag("stateDisplayName").setWidth(k)}}),k.addRow([k.tablePane],[.1],.1),k.addRow([{button:{icon:"editor.add",toolTip:i("editor.add"),onClicked:function(){if(k.editor.editable){var t=k.addState();k.tableModel.sm().ss(t)}}}},{button:{icon:"editor.delete",toolTip:i("editor.delete"),onClicked:function(){k.editor.editable&&k.removeState()}}}],[20,20]),U.sm().ms(function(t){k.editor.gv.iv();var j=U.sm().ld();if(j){var C=j.a("stateName"),i=k.editor.dm.toDatas(function(t){return t.s("state")===C});k.editor.sm.ss(i)}k.updatingClear||(k.dataModel._lastState=k.currentState)}),k._index=0,k}return gj(j,t),j.prototype.handleUpdate=function(){if(!this.updatingClear){var t=[],j=void 0;this.tableModel.each(function(C){var k=C.a("stateName"),i=C.a("stateDisplayName"),U={};C.a("isDefault")&&(j=k),U.value=k,i&&(U.label=i),t.push(U)}),this.isSettingState=!0,this.editor.dm.a({stateEnum:t,state:j}),this.editor.inspector.filterPropertiesLater(),this.editor.inspector.updateProperties(),this.isSettingState=!1}},j.prototype.handleTableDataPropertyChange=function(t){if("a:stateName"!==t.property||this.renameRollback)this.handleUpdate();else{var j=t.oldValue,C=t.newValue;this.isStateExist(C,t.data)?(this.editor.showMessage(i("editor.statenameexist"),"error"),this.renameRollback=!0,t.data.a("stateName",j),this.renameRollback=!1):C?(this.editor.dm.each(function(t){j===t.s("state")&&t.s("state",C)}),this.handleUpdate()):(this.editor.showMessage(i("editor.statenameempty"),"error"),this.renameRollback=!0,t.data.a("stateName",j),this.renameRollback=!1)}},j.prototype.addState=function(t,j){var C=arguments.length>2&&void 0!==arguments[2]&&arguments[2],k=this.currentState,i=this.tableView.dm(),U=new ht.Data;if(!t){for(;this.isStateExist("state"+this._index);)this._index++;t="state"+this._index}if(U.a({stateName:t,isDefault:C,stateDisplayName:j}),i.add(U),lj.config.isCopyCompsWhenNewState&&k){var K=this.dataModel.toDatas(function(t){return t.s("state")===k});if(K.size()){var y=this.dataModel.sm();y.cs(),K.each(function(t){y.as(t)}),this.editor.copy(),this.editor.paste(!0),y.each(function(j){j.s("state",t)})}}return U},j.prototype.removeState=function(){var t=this,j=this.tableModel.sm().ld();if(j){var C=j.a("stateName"),k=this.editor.dm,U=k.toDatas(function(t){return C===t.s("state")}),K=U.size();K?this.editor.showConfirm(void 0,yj(i("editor.retaincompafterdelete"),C),function(){U.each(function(t){t.s("state",void 0)}),t.tableModel.remove(j)},function(){for(var C=K-1;C>=0;C--)k.remove(U.get(C));t.tableModel.remove(j)}):this.tableModel.remove(j)}},j.prototype.handleDataModelPropertyChange=function(t){"a:stateEnum"!==t.property&&"a:state"!==t.property||this.updateTable()},j.prototype.handleDataModelChange=function(t){var j=this.currentState;j&&"add"===t.kind&&t.data.s("state",j)},j.prototype.updateTable=function(){var t=this;if(!this.isSettingState&&this.dataModel){this.updatingClear=!0,this.tableModel.clear();var j=this.dataModel.a("state"),C=this.dataModel.a("stateEnum");C&&C.forEach(function(C){t.addState(C.value,C.label,C.value===j)}),this.updatingClear=!1}},j.prototype.isStateExist=function(t,j){for(var C=this.tableModel.toDatas(function(t){return t!==j}),k=C.size(),i=0;i<k;i++)if(t===C.get(i).a("stateName"))return!0},j.prototype.setDefaultState=function(t){this.tableModel.each(function(j){j.a("isDefault",j.a("stateName")===t)})},j.prototype.$6$=function(t){var j=this;this.dataModel&&(this.dataModel.ump(this.handleDataModelPropertyChange,this),this.dataModel.umm(this.handleDataModelChange,this));var C=this.editor.symbolView;if(C?(this.dataModel=C.dm,this.dataModel.mp(this.handleDataModelPropertyChange,this),this.dataModel.mm(this.handleDataModelChange,this)):this.dataModel=null,this.updateTable(),C){var k=this.dataModel._lastState;void 0!==k?this.tableModel.each(function(t){t.a("stateName")===k&&j.tableModel.sm().ss(t)}):this.tableModel.sm().cs()}},_j(j,[{key:"currentState",get:function(){var t=this.tableModel.sm().ld();return t?t.a("stateName"):void 0}}]),j}(Vj),Ek=function(t){function j(C){Ij(this,j);var k=hj(this,t.call(this));return k.editor=C,k.editor.menus.push(k),k.setItems([{id:"file",label:i("editor.file"),items:[k.createItem("newSceneView",i("editor.newsceneview"),"newSceneView",lj.config.scenesVisible),k.createItem("newDisplayView",i("editor.newdisplayview"),"newDisplayView",lj.config.displaysVisible),k.createItem("newSymbolView",i("editor.newsymbolview"),"newSymbolView",lj.config.symbolsVisible),k.createItem("newComponent",i("editor.newcomponent"),"newComponent",lj.config.componentsVisible),k.createItem("newModel",i("editor.newmodel"),"newModel",lj.config.modelsVisible)]}]),k}return gj(j,t),j.prototype.createItem=function(t,j,C){var k=this,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],U={id:t,label:j,visible:!(!this.editor[C]||!i)};return C&&(U.action=function(){k.editor[C]()}),U},j}(TC),sk=function(t){function j(C){Ij(this,j);var k=hj(this,t.call(this));return k.editor=C,k.initMenu(),k.$69$(),k.enableToolTip(),k}return gj(j,t),j.prototype.$6$=function(){this.iv()},j.prototype.initMenu=function(){var t=this;this.editor.mainMenu=new Ek(this.editor);var j=function(j){var C=t.editor.mainMenu;C.isShowing()&&!C.getView().contains(j.target)&&C.hide()};window.addEventListener("touchstart",j,!1),window.addEventListener("mousedown",j,!1)},j.prototype.$69$=function(){var t=[];this.$68$(t),this.createEditItem(t),this.createDisplayItems(t),this.createSymbolItems(t),this.createSceneItems(t),this.setItems(t)},j.prototype.$68$=function(t){var j=this,C=gt("menu",i("editor.menu"),"editor.menu");C.action=function(t,C,k){j.editor.mainMenu.isShowing()||(j.editor.mainMenu.showOnView(j,4,20),k.preventDefault(),k.stopPropagation())},t.push(C)},j.prototype.createEditItem=function(t){var j=this,C=function(){return j.editor.currentView&&"edit"===j.editor.currentView.$4$()},k=gt("edit",i("editor.edit"),"editor.edit",C);k.visible=function(){return!!j.editor.currentView},k.action=function(){var t=j.editor.currentView;t&&t.$5$("edit")},t.push(k)},j.prototype.createDisplayItems=function(t){var j=this,C=function(t){return function(C){"node"===t||"subgraph"===t||("edge"===t?C.s({"edge.width":1,"edge.color":lj.config.color_data_border}):"group"===t?C.setExpanded(!0):"arc"===t?C.s({shape:t,"shape.background":lj.config.color_data_background,"shape.border.width":1,"shape.border.color":lj.config.color_data_border,"shape.arc.from":0,"shape.arc.to":4.1888}):"shape"===t?C.s({"shape.background":null,"shape.border.color":lj.config.color_data_border,"shape.border.width":1}):"text"===t?C.s("text",i("editor.text")):C.s({shape:t,"shape.background":lj.config.color_data_background,"shape.border.width":1,"shape.border.color":lj.config.color_data_border})),j.editor.fireEvent("dataInited",{type:t,data:C,displayView:j.editor.displayView})}};t.push(this.editor.createDisplayItem("Shape",i("editor.shape"),"editor.display.shape",ht.Shape,C("shape"))),t.push(this.editor.createDisplayItem("Oval",i("editor.oval"),"editor.display.oval",ht.Node,C("oval"))),t.push(this.editor.createDisplayItem("RoundRect",i("editor.roundrect"),"editor.display.roundrect",ht.Node,C("roundRect"))),t.push(this.editor.createDisplayItem("Rect",i("editor.rect"),"editor.display.rect",ht.Node,C("rect"))),t.push(this.editor.createDisplayItem("Polygon",i("editor.polygon"),"editor.display.polygon",ht.Node,C("polygon"))),t.push(this.editor.createDisplayItem("Triangle",i("editor.triangle"),"editor.display.triangle",ht.Node,C("triangle"))),t.push(this.editor.createDisplayItem("Star",i("editor.star"),"editor.display.star",ht.Node,C("star"))),t.push(this.editor.createDisplayItem("Arc",i("editor.arc"),"editor.display.arc",ht.Node,C("arc"))),t.push(this.editor.createDisplayItem("Text",i("editor.text"),"editor.display.text",ht.Text,C("text"))),t.push(this.editor.createDisplayItem("Node",i("editor.node"),"editor.display.node",ht.Node,C("node"))),t.push(this.editor.createDisplayItem("Group",i("editor.group"),"editor.display.group",ht.Group,C("group"))),t.push(this.editor.createDisplayItem("SubGraph",i("editor.subgraph"),"editor.display.subgraph",ht.SubGraph,C("subgraph"))),t.push(this.editor.createDisplayItem("Edge",i("editor.edge"),"editor.display.edge",ht.Edge,C("edge")))},j.prototype.createSymbolItems=function(t){t.push(this.editor.createSymbolItem("shape",i("editor.shape"),"editor.symbol.shape","shape")),t.push(this.editor.createSymbolItem("oval",i("editor.oval"),"editor.symbol.oval","oval")),t.push(this.editor.createSymbolItem("roundRect",i("editor.roundrect"),"editor.symbol.roundrect","roundRect")),t.push(this.editor.createSymbolItem("rect",i("editor.rect"),"editor.symbol.rect","rect")),t.push(this.editor.createSymbolItem("polygon",i("editor.polygon"),"editor.symbol.polygon","polygon")),t.push(this.editor.createSymbolItem("triangle",i("editor.triangle"),"editor.symbol.triangle","triangle")),t.push(this.editor.createSymbolItem("star",i("editor.star"),"editor.symbol.star","star")),t.push(this.editor.createSymbolItem("arc",i("editor.arc"),"editor.symbol.arc","arc")),t.push(this.editor.createSymbolItem("text",i("editor.text"),"editor.symbol.text","text")),t.push(this.editor.createSymbolItem("border",i("editor.border"),"editor.symbol.border","border")),t.push(this.editor.createSymbolItem("piechart",i("editor.piechart"),"editor.symbol.piechart","pieChart")),t.push(this.editor.createSymbolItem("onedimensionalcolumnchart",i("editor.onedimensionalcolumnchart"),"editor.symbol.onedimensionalcolumnchart","oneDimensionalColumnChart")),t.push(this.editor.createSymbolItem("columnchart",i("editor.columnchart"),"editor.symbol.columnchart","columnChart")),t.push(this.editor.createSymbolItem("linechart",i("editor.linechart"),"editor.symbol.linechart","lineChart"))},j.prototype.createSceneItems=function(t){},j}(wC),ek=function(t){function j(C){Ij(this,j);var k=hj(this,t.call(this));return k.editor=C,k.$69$(),k.enableToolTip(),k.setStickToRight(!0),k}return gj(j,t),j.prototype.handlePropertyChange=function(t){"zoom"===t.property&&this.$70$()},j.prototype.$70$=function(){this.label.innerHTML=this.graphView?parseInt(100*this.graphView.getZoom())+"%":""},j.prototype.$6$=function(t){this.graphView&&this.graphView.removePropertyChangeListener(this.handlePropertyChange,this),t?(this.graphView=t.getView().graphView,this.graphView.addPropertyChangeListener(this.handlePropertyChange,this)):this.graphView=null,this.iv(),this.$70$()},j.prototype.$69$=function(){var t=this,j=void 0,C=function(){return!!t.graphView},k=[];j=gt("undo",i("editor.undo"),"editor.undo"),j.action=function(){t.editor.undo()},j.visible=C,k.push(j),j=gt("redo",i("editor.redo"),"editor.redo"),j.action=function(){t.editor.redo()},j.visible=C,k.push(j),k.push({separator:!0,visible:C}),j=gt("rulers",i("editor.showrulers"),"editor.rulers",function(){return t.editor.isRulerEnabled()}),j.action=function(){t.editor.toggleRulerEnabled()},j.visible=C,k.push(j),j=gt("grid",i("editor.showgrid"),"editor.grid",function(){return t.editor.isGridEnabled()}),j.action=function(){t.editor.toggleGridEnabled()},j.visible=C,k.push(j),k.push({separator:!0,visible:C}),j=gt("save",i("editor.save"),"editor.save"),j.action=function(){t.editor.save()},j.visible=C,k.push(j),j=gt("preview",i("editor.preview"),"editor.preview"),j.action=function(){t.editor.preview()},j.visible=C,k.push(j),j=gt("reload",i("editor.reload"),"editor.reload"),j.action=function(){t.editor.reload()},j.visible=C,k.push(j),k.push({separator:!0,visible:C}),j=gt("zoomOut",i("editor.zoomout"),"editor.zoomout"),j.action=function(){t.editor.zoomOut()},j.visible=C,k.push(j),k.push(this.createZoomItem(C)),j=gt("zoomIn",i("editor.zoomin"),"editor.zoomin"),j.action=function(){t.editor.zoomIn()},j.visible=C,k.push(j),j=gt("zoomToFit",i("editor.zoomtofit"),"editor.zoomtofit"),j.action=function(){t.editor.zoomToFit()},j.visible=C,k.push(j),k.push({separator:!0,visible:C}),j=gt("toggleLeft",i("editor.toggleleft"),"editor.toggleleft"),j.action=function(){t.editor.toggleLeft()},k.push(j),j=gt("toggleBoth",i("editor.toggleboth"),"editor.toggleboth"),j.action=function(){t.editor.toggleBoth()},k.push(j),j=gt("toggleRight",i("editor.toggleright"),"editor.toggleright"),j.action=function(){t.editor.toggleRight()},k.push(j),this.setItems(k)},j.prototype.createZoomItem=function(t){var j=this,C=this.label=ht.Default.createDiv(!0);C.style.font=this.getLabelFont(),C.style.color=this.getLabelColor(),C.style.cursor="ew-resize",C.style.width="40px",C.style.height=ht.Default.widgetRowHeight+"px",C.style.lineHeight=ht.Default.widgetRowHeight+"px",C.style.whiteSpace="nowrap",C.style.textAlign="center";var k=function(t){t.preventDefault();var C=j.editor.gv;if(C){J(t)&&j.editor.zoomReset();var k=C.getZoom(),i=H(t).x,U=function(t){t.preventDefault();var j=H(t).x-i;C.setZoom(k*(1+.005*j))};window.addEventListener("mousemove",U,!1),window.addEventListener("touchmove",U,!1);var K=function(t){t.preventDefault(),window.removeEventListener("mousemove",U,!1),window.removeEventListener("touchmove",U,!1),window.removeEventListener("mouseup",K,!1),window.removeEventListener("touchend",K,!1)};window.addEventListener("mouseup",K,!1),window.addEventListener("touchend",K,!1)}};return C.addEventListener("mousedown",k,!1),C.addEventListener("touchstart",k,!1),{id:"zoom",unfocusable:!0,element:C,visible:t}},j}(wC),xk=function(t){function j(C){Ij(this,j);var k=hj(this,t.call(this))
;k.editor=C,k._errorMsg=null,k.$72$(),k.$71$(),k.$73$(),k.splitView=new xC(k.inspectorPane,k.graphView,"v",-200),k.mainSplitView=new xC(k.funcPane,k.splitView,"h",-360),k._eventData=new ht.Data;var U=[];return U.push({label:i("editor.refresh"),action:function(){k.refresh()}}),U.push({label:i("editor.ok"),action:function(){k.ok()}}),U.push({label:i("editor.cancel"),action:function(){k.hide()}}),k.setConfig({closable:!0,draggable:!0,width:lj.config.componentViewSize.width,height:lj.config.componentViewSize.height,contentPadding:0,resizeMode:"wh",maximizable:!0,content:k.mainSplitView,buttons:U,buttonsAlign:"right"}),k}return gj(j,t),j.prototype.$49$=function(){this.hide()},j.prototype.$48$=function(){this.ok()},j.prototype.$72$=function(){var t=this;ht.Default.setCompType("_editingCompType_",{func:function(){}}),this.node=new ht.Node,this.node.setImage({width:100,height:100,fitSize:!0,comps:[{type:"_editingCompType_"}]}),this.graphView=new EC,this.graphView.dm().add(this.node),this.graphView.sm().ss(this.node),this.graphView.mi(function(j){"doubleClickData"!==j.kind&&"doubleClickBackground"!==j.kind||t.graphView.fitContent(lj.config.animate,lj.config.fitPadding)});var j=this;ht.Default.drawCompType=function(t,C,k,U,K,y){var L="_editingCompType_"===U.type;try{L&&j.beforeDrawCompType(C),t(C,k,U,K,y),L&&j.afterDrawCompType(C)}catch(t){L&&(j.afterDrawCompType(C),j._errorMsg=i("editor.compfunctionerror")),console.error(t.stack||t)}}},j.prototype.beforeDrawCompType=function(t){var j=this._restoreFlag;j||(j=this._restoreFlag=t.createLinearGradient(0,0,10,10),j.addColorStop(0,"black"),j.addColorStop(0,"black")),t.fillStyle=j,t.save(),t.fillStyle="#000000"},j.prototype.afterDrawCompType=function(t){if(t.restore(),t.fillStyle!==this._restoreFlag){for(var j=0;t.fillStyle!==this._restoreFlag&&(t.restore(),!(++j>=20)););t.fillStyle="black",this._errorMsg=i("editor.complosssaveorrestore")}else this._errorMsg=null},j.prototype.$73$=function(){this.funcPane=new Vj,this.funcPane.addRow([{id:"head",element:"function(g, rect, comp, data, view) {"}],[.1]),this.funcPane.addRow([{id:"func",element:Kj()}],[.1],.1),this.funcPane.addRow(["}"],[.1])},j.prototype.$71$=function(){var t=this,j=lj.config.indent;this.inspectorPane=new Vj,this.inspectorPane.addRow([i("editor.name"),{id:"name",textField:{}}],[j,.1]),this.inspectorPane.addRow([i("editor.path"),{id:"path",textField:{editable:!1}}],[j,.1]),this.inspectorPane.addRow([i("editor.snapshoturl"),{id:"snapshotURL",textField:{}}],[j,.1]),this.inspectorPane.addRow([i("editor.width"),{id:"width",textField:{}},i("editor.height"),{id:"height",textField:{}}],[j,.1,lj.config.indent2,.1]);var C=Vt(i("editor.eventhandlers"),null,null,function(){t.editor.eventView.open([t._eventData],null,t.resetEventButtonLabelColor.bind(t))});this.eventButton=C,this.inspectorPane.addRow([i("editor.events"),{element:C}],[j,.1]),this.inspectorPane.addLine(),this.createTable()},j.prototype.$74$=function(t,j,C,k){return{name:t,tag:t,accessType:"attr",width:C,displayName:j,align:"center",enum:k,editable:!0}},j.prototype.createTable=function(){var t=this;this.tableModel=new ht.DataModel,this.tablePane=new oC(this.tableModel),this.tableView=this.tablePane.getTableView(),this.tableView.setEditable(!0),this.tableView.isEditable=function(){return t.editable},this.tablePane.getView().style.border=lj.config.color_line+" solid 1px",this.tablePane.addColumns([this.$74$("property",i("editor.property"),90),this.$74$("valueType",i("editor.valuetype"),80,{values:lj.consts.valueTypes,labels:lj.consts.valueTypeLabels}),this.$74$("defaultValue",i("editor.defaultvalue"),90),this.$74$("name",i("editor.name"),80),this.$74$("group",i("editor.group"),80),this.$74$("description",i("editor.description"),120),this.$74$("extraInfo",i("editor.extrainfo"),100)]),this.$75$(),this.initExtraInfoColumn(),this.inspectorPane.addRow([this.tablePane],[.1],.1),this.inspectorPane.addRow([{button:{toolTip:i("editor.add"),icon:"editor.add",onClicked:function(){if(t.editable){var j=new ht.Data;j.a({property:"property",valueType:"String"});var C=void 0,k=t.tableModel.sm().ld();k&&(C=t.tableModel.getRoots().indexOf(k)+1),t.tableModel.add(j,C)}}}},{button:{toolTip:i("editor.delete"),icon:"editor.delete",onClicked:function(){t.editable&&t.tableView.removeSelection()}}},null,{button:{icon:"editor.top",toolTip:i("editor.bringtofront"),onClicked:function(){t.editable&&t.tableView.sm().size()&&t.tableModel.moveSelectionToTop()}}},{button:{icon:"editor.up",toolTip:i("editor.bringforward"),onClicked:function(){t.editable&&t.tableView.sm().size()&&t.tableModel.moveSelectionUp()}}},{button:{icon:"editor.down",toolTip:i("editor.sendbackward"),onClicked:function(){t.editable&&t.tableView.sm().size()&&t.tableModel.moveSelectionDown()}}},{button:{icon:"editor.bottom",toolTip:i("editor.sendtoback"),onClicked:function(){t.editable&&t.tableView.sm().size()&&t.tableModel.moveSelectionToBottom()}}}],[20,20,.1,20,20,20,20])},j.prototype.$75$=function(){var t=this,j=this.tableView.getColumnModel().getDataByTag("defaultValue");j.getEnumValues=function(t){var j=t?lj.config.valueTypes[t.a("valueType")]:null;return j&&"enum"===j.type?j.values:null},j.getEnumLabels=function(t){var j=t?lj.config.valueTypes[t.a("valueType")]:null;return j&&"enum"===j.type?j.labels:null},j.getEnumIcons=function(t){var j=t?lj.config.valueTypes[t.a("valueType")]:null;return j&&"enum"===j.type?j.icons:null},j.getEnumDropDownWidth=function(t){var j=t?lj.config.valueTypes[t.a("valueType")]:null;return j&&"enum"===j.type?j.dropDownWidth:null},j.getValueType=function(t){var j=t?lj.config.valueTypes[t.a("valueType")]:null;return j?j.type:null},j.isCellEditable=function(j,C,k,U){var K=j?lj.config.valueTypes[j.a("valueType")]:null,y=K?K.type:null,L=j.a("extraInfo");if("function"===y){var X=i("editor.function")+" "+(j.a("property")||"");return t.editor.functionView.open(j.a("defaultValue"),function(t){j.a("defaultValue",t)},X,L&&L.arguments),!1}if("multiline"===y)return t.editor.textView.open(j.a("defaultValue"),function(t){j.a("defaultValue",t)},j.a("property")||"&nbsp;"),!1;if("font"===y)return t.editor.fontView.open(j.a("defaultValue"),function(t){j.a("defaultValue",t)},j.a("property")||"&nbsp;"),!1;if("object"===y||"custom"===y||"stringArray"===y||"objectArray"===y||"numberArray"===y||"colorArray"===y){var u=i("editor.object")+" "+(j.a("property")||"");return t.editor.objectView.open(j.a("defaultValue"),function(t){j.a("defaultValue",t)},u),!1}return!0}},j.prototype.initExtraInfoColumn=function(){var t=this;this.tableView.getColumnModel().getDataByTag("extraInfo").isCellEditable=function(j,C,k,U){var K=i("editor.extrainfo")+" "+(j.a("property")||"");return t.editor.objectView.open(j.a("extraInfo"),function(t){j.a("extraInfo",t)},K),!1}},j.prototype.open=function(t,j){var C=this;this.fileNode=t,t?Y(t.url,function(j){C.update(t.url,t.path,x(t.getName()),j,t.a("editable"))}):this.update(void 0,j||this.editor.components.currentDir,i("editor.untitled"))},j.prototype.update=function(t,j,C,k,U){if(this.editable=!1!==U,k){if(k=e(k),this.setTitle(i("editor.editcomponent")),this.node.setWidth(k.width||100),this.node.setHeight(k.height||100),this.inspectorPane.v("width",this.node.getWidth()),this.inspectorPane.v("height",this.node.getHeight()),this.inspectorPane.v("snapshotURL",k.snapshotURL||""),this.inspectorPane.getViewById("name").setEditable(!1),this.inspectorPane.v("name",C||""),this.inspectorPane.v("path",j||""),this.funcPane.v("func",L(k.func)),this.tableModel.clear(),k.properties)for(var K in k.properties){var y=k.properties[K],X=new ht.Data;X.a({property:K,valueType:y.valueType,defaultValue:y.defaultValue,name:y.name,group:y.group,description:y.description,extraInfo:y.extraInfo}),this.tableModel.add(X)}if(this._eventData=new ht.Data,k.events)for(var u in k.events)this._eventData.a(u,k.events[u]);this.resetEventButtonLabelColor(),this.refresh(),this.show(),this.url=t,this.editor.fireEvent("componentViewOpened",{componentView:this,url:t,json:k})}else this.setTitle(i("editor.newcomponent")),this.node.setWidth(100),this.node.setHeight(100),this.inspectorPane.v("width",this.node.getWidth()),this.inspectorPane.v("height",this.node.getHeight()),this.inspectorPane.v("snapshotURL",""),this.inspectorPane.getViewById("name").setEditable(!0),this.inspectorPane.v("name",C),this.inspectorPane.v("path",j),this.funcPane.v("func",""),this.tableModel.clear(),this.refresh(),this.show(),this.url=t,this.editor.fireEvent("componentViewCreated",{componentView:this})},j.prototype.$76$=function(){return X(this.funcPane.v("head")+"\n"+this.funcPane.v("func").trim()+"\n}")},j.prototype.$77$=function(){var t={};return this.tableModel.getRoots().each(function(j){t[j.a("property")]={valueType:j.a("valueType"),defaultValue:j.a("defaultValue"),name:j.a("name"),group:j.a("group"),description:j.a("description"),extraInfo:j.a("extraInfo")}}),t},j.prototype.refresh=function(t){ht.Default.setCompType("_editingCompType_",{func:this.$76$(),properties:this.$77$()}),this.node.setWidth(parseFloat(this.inspectorPane.v("width"))),this.node.setHeight(parseFloat(this.inspectorPane.v("height"))),this.node.iv(),this.graphView.fitContent(lj.config.animate,lj.config.fitPadding);var j=function(C){"validate"===C.kind&&(t&&t(!this._errorMsg),this._errorMsg&&this.editor.showMessage(this._errorMsg,"error"),this.graphView.removeViewListener(j,this))};this.graphView.addViewListener(j,this)},j.prototype.createEvents=function(){var t=this._eventData,j=null;return tC.forEach(function(C){t.a(C)&&(j||(j={}),j[C]=t.a(C))}),j},j.prototype.resetEventButtonLabelColor=function(){for(var t=!1,j=0;j<tC.length;j++)if(this._eventData.a(tC[j])){t=!0;break}this.eventButton.setLabelColor(t?lj.config.color_select:ht.Default.labelColor)},j.prototype.ok=function(){var t=this;if(!this.editable)return void this.hide();var j=this.inspectorPane.v("name").trim(),C=this.inspectorPane.v("path");if(!this.url){var k=this.editor.components;if(k.isAccordionMode()&&k.rootDir===C)return void this.editor.showMessage(i("editor.createFolderFirst"),"error",2e3)}var U=this.url||C+"/"+j+".json";if(!j)return void _t(null,i("editor.inputempty"),function(){});if(j.length>lj.config.maxFileNameLength)return void _t(null,i("editor.inputmax"),function(){});if(lj.config.checkFileName&&!(j=lj.config.checkFileName(j,U)))return void _t(null,i("editor.invalidinput"),function(){});Ut(j)&&(j=x(j));var K=this.content,y={componentView:this,url:U,json:s(K)};this.editor.fireEvent("componentViewSaving",y),y.preventDefault||(y={path:y.url,content:y.json},this.refresh(function(k){k&&t.editor.request("upload",y,function(k){!0===k&&(t.refresh(),t.graphView.sm().cs(),t.graphView.validate(),t.editor.saveImage(K.snapshotURL||t.graphView,C+"/"+j+".png",function(){t.editor.fireEvent("componentViewSaved",y)}),t.hide(),t.editor.selectFileNode(y.path),y={componentView:t,url:y.path,json:y.content})})}))},_j(j,[{key:"content",get:function(){var t={modified:(new Date).toString(),width:parseFloat(this.inspectorPane.v("width")),height:parseFloat(this.inspectorPane.v("height")),snapshotURL:this.inspectorPane.v("snapshotURL"),func:this.$76$()};this.tableModel.size()&&(t.properties=this.$77$());var j=this.createEvents();return j&&(t.events=j),t}}]),j}(Wj),ok=460,nk=230,wk=function(t){function j(C){Ij(this,j);var k=hj(this,t.call(this));k.editor=C;var U=[];U.push(i("editor.binding")),U.push({id:"compProperty",textField:{editable:!1}}),U.push({element:i("editor.type"),align:"right"}),U.push({id:"type",comboBox:{values:["attr","func"],onValueChanged:function(t,j){var C="func"===j,i=C?ht.Default.labelColor:lj.config.color_disabled;k.getViewById("func").setEditable(C),k.getItemById("head").color=i,k.getItemById("end").color=i,k.getViewById("property").setDisabled(C),C&&k.getViewById("property").setValue(""),k.iv()}}}),U.push({element:i("editor.property"),align:"right"});var K={id:"property"};lj.config.dataBindingsForSymbol.getComboBoxValues?K.comboBox={editable:!!lj.config.dataBindingsForSymbol.comboBoxEditable}:K.textField={},U.push(K);var y=[50,90,40,60,60,.1];if(lj.config.dataBindingsForSymbol.onButtonClicked){var L=Vt("...",void 0,void 0,function(){k.smartClose=!1,lj.config.dataBindingsForSymbol.onButtonClicked(k,k.v("compProperty"),k.editor)});U.push(L),y.push(20)}if(k.addRow(U,y),!lj.config.dataBindingsForSymbol.getComboBoxValues){k.getItemById("property").element.getElement().addEventListener("keydown",function(t){ht.Default.isEnter(t)&&k.hide(!0)})}k.addLine(),k.addRow([{id:"head",element:""}],[.1]),k.addRow([{id:"func",element:Kj()}],[.1],.1),k.addRow([{id:"end",element:"}"},{button:{label:i("editor.ok"),onClicked:function(){k.hide(!0)}}},{button:{label:i("editor.cancel"),onClicked:function(){k.hide()}}}],[.1,50,50]),k.setWidth(ok),k.setHeight(nk),k.getView().className="ht-editor-databinding",k.getView().style.background=lj.config.color_pane,k.getView().style.border=lj.config.color_pane_dark+" solid 1px",k.getView().style.boxShadow="0px 0px 3px "+ht.Default.toolTipShadowColor,k.getView().style.overflow="visible";var X=k.handleWindowClick.bind(k);return window.addEventListener("mousedown",X,!1),window.addEventListener("touchstart",X,!1),k}return gj(j,t),j.prototype.handleWindowClick=function(t){if(this.smartClose&&this.getView().parentNode&&!this.button.getView().contains(t.target)){var j=this.getViewById("type");if(!j.getListView().getView().contains(t.target)){if((j=this.getViewById("property"))instanceof ht.widget.ComboBox){if(j.getListView().getView().contains(t.target))return;if(j.getInput()&&j.getInput().contains(t.target))return}this.getView().contains(t.target)||this.hide()}}},j.prototype.toggle=function(t,j,C,k,i,U){this.getView().parentNode?this.hide():this.show(t,j,C,k,i,U)},j.prototype.show=function(t,j,C,k,i,U){var K=this;lj.config.dataBindingsForSymbol.getComboBoxValues?lj.config.dataBindingsForSymbol.getComboBoxValues(function(y){K.getViewById("property").setValues(y),K.showImpl(t,j,C,k,i,U)}):this.showImpl(t,j,C,k,i,U)},j.prototype.showImpl=function(t,j,C,k,i,U){if(!this.getView().parentNode){this.smartClose=!0;var K=t.getView().getBoundingClientRect(),y=(this.getView().style,q());ht.Default.appendToScreen(this),K.bottom+nk+1>y.height?this.getView().style.top=y.top+K.top-nk-1+"px":this.getView().style.top=y.top+K.bottom+1+"px",this.getView().style.left=y.left+K.right-ok+"px",this.iv(),this.button=t,this.name=j,this.inspector=k,this.setter=U,this.v("compProperty",C||j);var X=void 0,u=!1;this.inspector.global?"clip"===j?(X=i?i():this.inspector.dataModel.a("clip"),this.v("head","function(g, width, height, data, view, image) {"),u=!0):(X=i?i():this.inspector.dataModel.a(j+"_func"),this.v("head","function(data, view) {")):(X=i?i():this.inspector.data.a(j),this.inspector.data instanceof Jk&&"type"===j?(this.v("head","function(g, rect, comp, data, view) {"),u=!0):this.v("head","function(data, view) {"));dt(X)?(cC.test(X)?(this.v("type","attr"),this.v("property",X.slice(5))):(this.v("type","attr"),this.v("property",X)),this.v("func","")):mt(X)?(this.v("type","func"),this.v("property",""),this.v("func",L(X))):(this.v("type","attr"),this.v("property",""),this.v("func","")),u?(this.v("type","func"),this.v("property",""),this.getViewById("type").setDisabled(!0)):this.getViewById("type").setDisabled(!1)}},j.prototype.hide=function(){var t=this,j=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.getView().parentNode&&(r(this.getView()),j)){var C=this.v("type"),k=this.v("property"),i=void 0;if("func"===C){var U=this.v("func").trim();(U||this.inspector.data instanceof Jk&&"type"===this.name)&&(i=X(this.v("head")+"\n"+U+"\n}"))}else k&&"attr"===C&&(i="attr@"+k);this.setter?this.setter(i):this.inspector.global?"clip"===this.name?this.inspector.dataModel.a("clip",i):this.inspector.dataModel.a(this.name+"_func",i):this.inspector.setValue(function(j,C){j.a(t.name,C)},i)}},j}(Vj),rk=function(t){function j(C){Ij(this,j);var k=hj(this,t.call(this));k.editor=C,k.createTabView();var U=[];return U.push({label:i("editor.ok"),action:function(){k.ok()}}),U.push({label:i("editor.cancel"),action:function(){k.hide()}}),k.setConfig({title:i("editor.eventhandlers"),closable:!0,draggable:!0,width:lj.config.eventViewSize.width,height:lj.config.eventViewSize.height,contentPadding:6,resizeMode:"wh",maximizable:!0,content:k.tabView,buttons:U,buttonsAlign:"right"}),k}return gj(j,t),j.prototype.$49$=function(){this.hide()},j.prototype.$48$=function(){this.ok()},j.prototype.ok=function(){var t=this;this.target&&tC.forEach(function(j){var C=t[j+"FormPane"],k=C.v("body").trim();if("data"===t.inspectorType){var i=k?X("function(event, data, view) {\n"+k+"\n}"):void 0;t.target.forEach(function(t){t.s(j,i)})}else{var U=k?X("function(event, data, view, point, width, height) {\n"+k+"\n}"):void 0;t.target.forEach(function(t){t.a(j,U)})}}),this.callback&&this.callback(),this.hide()},j.prototype.createTabView=function(){var t=this,j=this.tabView=new nC;tC.forEach(function(C){var k=t[C+"FormPane"]=new Vj;k.addRow([{id:"head",element:""}],[.1]),k.addRow([{id:"body",element:Kj()}],[.1],.1),k.addRow(["}"],[.1]),t[C+"Tab"]=j.add(i("editor.event."+C.toLowerCase()),k)}),j.getTabModel().sm().ss(j.getTabModel().getDatas().get(0))},j.prototype.open=function(t,j,C){var k=this;t&&t.length&&(this.target=t,this.inspectorType=j,this.callback=C,tC.forEach(function(C){var i=k[C+"FormPane"];"data"===j?(i.v("head",C+": function(event, data, view) {"),i.v("body",L(t[t.length-1].s(C)))):(i.v("head",C+": function(event, data, view, point, width, height) {"),i.v("body",L(t[t.length-1].a(C))))}),this.show())},j}(Wj),Yk=function(t){function j(C){Ij(this,j);var k=hj(this,t.call(this));k.editor=C,k.formPane=new Vj;var U=k.raws=[],K=k.formPane.addRow([{id:"head",element:"function() {"}],[.1]);U.push(K),K=k.formPane.addRow([{id:"function",element:Kj()}],[.1],.1),U.push(K),K=k.formPane.addRow(["}"],[.1]),U.push(K);var y=[];return y.push({label:i("editor.ok"),action:function(){k.ok()}}),y.push({label:i("editor.cancel"),action:function(){k.hide()}}),k.setConfig({title:i("editor.function"),closable:!0,draggable:!0,width:lj.config.functionViewSize.width,height:lj.config.functionViewSize.height,contentPadding:6,resizeMode:"wh",maximizable:!0,content:k.formPane,buttons:y,buttonsAlign:"right"}),k}return gj(j,t),j.prototype.$49$=function(){this.hide()},j.prototype.$48$=function(){this.ok()},j.prototype.parse=function(t){if(t){var j=this.getFunctionHead();return t=t.trim(),j?t=""+j+t+"}":t.startsWith("function")||(t="function() {\n"+t+"\n}"),X(t)}},j.prototype.ok=function(){this.setValue&&this.setValue(this.parse(this.formPane.v("function"))),this.hide()},j.prototype.setFormRows=function(){var t=this.formPane,j=this.raws,C=this._argList;this._argList?t._rows=j:t._rows=[j[1]],t.iv(),C&&t.v("head",this.getFunctionHead())},j.prototype.getFunctionHead=function(){var t=this._argList;if(t)return"function("+(ht.Default.isArray(t)?t.join(", "):t)+") {"},j.prototype.stringifyFunction=function(t){var j=y(t);if(this._argList){var C=j.indexOf("{"),k=j.lastIndexOf("}");j=j.substring(C+1,k)}return j},j.prototype.open=function(t,j,C,k){this.setValue=j,this._argList=k,this.setTitle(C),this.setFormRows(),this.formPane.v("function",this.stringifyFunction(t)),this.show()},j}(Wj),pk=function(t){function j(C){Ij(this,j);var k=hj(this,t.call(this));k.editor=C,k.formPane=new Vj,k.formPane.addRow([{id:"object",element:Kj()}],[.1],.1);var U=[];return U.push({label:i("editor.ok"),action:function(){k.ok()}}),U.push({label:i("editor.cancel"),action:function(){k.hide()}}),k.setConfig({title:i("editor.object"),closable:!0,draggable:!0,width:lj.config.objectViewSize.width,height:lj.config.objectViewSize.height,contentPadding:6,resizeMode:"wh",maximizable:!0,content:k.formPane,buttons:U,buttonsAlign:"right"}),k}return gj(j,t),j.prototype.$49$=function(){this.hide()},j.prototype.$48$=function(){this.ok()},j.prototype.ok=function(){if(this.setValue){var t=this.formPane.v("object").trim();t=new Function("return "+t)(),this.setValue(t)}this.hide()},j.prototype.open=function(t,j,C){if(this.setValue=j,this.setTitle(C),t=this.stringify(t,4)){this._funcMap;for(var k in this._funcMap)t=t.replace('"'+k+'"',y(this._funcMap[k]))}this.formPane.v("object",t),this.show()},j.prototype.stringify=function(t,j){var C=this,k=Date.prototype.toJSON;Date.prototype.toJSON=function(){return"__ht__date"+this.getTime()},this._funcMap={};var i=JSON.stringify(t,function(t,j){if("function"==typeof j){var k=Math.random().toString().substring(3,16)+Date.now();return C._funcMap[k]=j,k}return j},null==j?2:j);return Date.prototype.toJSON=k,i},j}(Wj),Mk=function(t){function j(C){Ij(this,j);var k=hj(this,t.call(this));k.editor=C,k.formPane=new Vj,k.formPane.addRow([{id:"text",textArea:{}}],[.1],.1);var U=[];return U.push({label:i("editor.ok"),action:function(){k.ok()}}),U.push({label:i("editor.cancel"),action:function(){k.hide()}}),k.setConfig({closable:!0,draggable:!0,width:lj.config.textViewSize.width,height:lj.config.textViewSize.height,contentPadding:6,resizeMode:"wh",maximizable:!0,content:k.formPane,buttons:U,buttonsAlign:"right"}),k}return gj(j,t),j.prototype.$49$=function(){this.hide()},j.prototype.$48$=function(){this.ok()},j.prototype.ok=function(){this.setValue&&this.setValue(this.formPane.v("text")),this.hide()},j.prototype.open=function(t,j,C){this.setValue=j,this.setTitle(C),this.formPane.v("text",t||""),this.show()},j}(Wj),Qk=function(){function t(){Ij(this,t)}return t.prototype.init=function(){var t=this.baseFonts=["monospace","sans-serif","serif"],j=this.testString="mmmmmmmmmmlli",C=this.testSize="72px",k=this.h=document.getElementsByTagName("body")[0],i=this.s=document.createElement("span");i.style.fontSize=C,i.innerHTML=j;var U=this.defaultWidth={},K=this.defaultHeight={};for(var y in t)i.style.fontFamily=t[y],k.appendChild(i),U[t[y]]=i.offsetWidth,K[t[y]]=i.offsetHeight,k.removeChild(i);this.initialized=!0},t.prototype.detect=function(t){this.initialized||this.init();var j=!1,C=this.baseFonts,k=this.s,i=this.h,U=this.defaultWidth,K=this.defaultHeight;for(var y in C){k.style.fontFamily=t+","+C[y],i.appendChild(k);var L=k.offsetWidth!=U[C[y]]||k.offsetHeight!=K[C[y]];i.removeChild(k),j=j||L}return j},t}(),Nk=function(t){function j(C){Ij(this,j);var k=hj(this,t.call(this));return k.editor=C,k}return gj(j,t),j.prototype.init=function(){var t=this;this._detector=new Qk;var j=this.borderPane=new zC,C=this.rightBorder=new zC,k=this.previewGraph=new ht.graph.GraphView,U=this.listView=new sC,K=this.formPane=new Vj;U.getView().style.borderRight="2px solid #f7f7f7",U.getLabelFont=function(t){return"14px "+t.getName()},j.setLeftView(U),j.setCenterView(C),j.setLeftWidth(180),C.setBottomView(k),C.setBottomHeight(120),C.setCenterView(K),k.adjustTranslateX=function(){return 0},k.adjustTranslateY=function(){return 0},k.handleScroll=function(){return!1},k.setScrollBarVisible(!1);var y=this.textNode=new ht.Text;y.s({"2d.selectable":!1,text:lj.config.fontPreview}),y.setAnchor(0,0),y.setSize(2e3,120),y.p(4,4),k.dm().add(y);K.setVPadding(32),K.setVGap(18),K.setHGap(0),K.addRow([{element:i("editor.font.style"),align:"right"},"",{id:"normal",button:this.createStyleButton(i("editor.font.normal"))},{id:"bold",button:this.createStyleButton(i("editor.font.bold"))},{id:"oblique",button:this.createStyleButton(i("editor.font.oblique"))},{id:"obliqueBold",button:this.createStyleButton(i("editor.font.obliqueBold"))}],[60,8,.1,.1,.1,.1],32),K.addRow([{element:i("editor.font.size"),align:"right"},"",{id:"fontSize",slider:{max:72,min:12,step:1,onValueChanged:function(j,C){K.getItemById("fontSizeLabel").element=C+"",K.iv(),t._handleFontChange()}}},{id:"fontSizeLabel",element:"12"}],[60,8,.1,20],32),K.addRow([{element:"\u8f93\u51fa",align:"right"},"",{id:"fontOutput",textField:{editable:!1,value:this.getFontString()}}],[60,8,.1],32);var L=[];L.push({label:i("editor.ok"),action:function(){t.ok()}}),L.push({label:i("editor.cancel"),action:function(){t.hide()}}),this.initFontList(),this.setConfig({closable:!0,draggable:!0,width:lj.config.fontViewSize.width,height:lj.config.fontViewSize.height,contentPadding:6,resizeMode:"wh",maximizable:!0,content:j,buttons:L,buttonsAlign:"right"}),this._init=!0},j.prototype.createStyleButton=function(t){var j=this;return{label:t,groupId:"fontStyle",labelSelectColor:lj.config.color_select,labelColor:"#2c2c2c",borderSelectColor:"red",background:"rgb(247,247,247)",selectBackground:"rgb(247,247,247)",togglable:!0,borderColor:null,onClicked:function(t){j._handleFontChange()}}},j.prototype.initFontList=function(){var t=this,j=this.listView,C=j.getView().style,k=j.dm(),i=this._detector,U=lj.config.fontList;return j.sm().ms(function(j){t._handleFontChange(j)}),U.forEach(function(t){if(i.detect(t)){var j=new ht.Node;j.setIcon(null),j.setName(t),k.add(j)}}),k.sm().setSelectionMode("multiple"),C.background="white",j},j.prototype.$49$=function(){this.hide()},j.prototype.$48$=function(){this.ok()},j.prototype._handleFontChange=function(){this.textNode.s("text.font",this.getFontString()),this.formPane.v("fontOutput",this.getFontString())},j.prototype.getFontString=function(){var t=this.listView,j=this.formPane,C=t.sm().getSelection().toArray(),k="",i=C.map(function(t){return t.getName()});return i.length||(i=["arial"]),["bold","oblique","obliqueBold"].forEach(function(t,C){j.getItemById(t).element.isSelected()&&(0===C?k="bold ":1===C?k="italic ":2===C&&(k="italic bold "))}),""+k+j.getValue("fontSize")+"px "+i.join(", ")},j.prototype.ok=function(){this.setValue&&this.setValue(this.getFontString()),this.hide()},j.prototype.analysisFontString=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht.Default.labelFont;"string"!=typeof t&&(t=ht.Default.labelFont);var j=t.split(/px\s+/);j.length<2&&(j=ht.Default.labelFont.split(/px\s+/));var C=j[0].split(/\s+/),k=j[1].split(",").map(function(t){return t.trim()}),i=/\d+/,U=void 0,K=void 0,y=void 0;C.forEach(function(t){"bold"===t?U=!0:"oblique"===t||"italic"===t?K=!0:i.test(t)&&(y=parseInt(t))}),this.setFormValue(y,k,U,K)},j.prototype.setFormValue=function(t,j,C,k){var i=this.listView,U=this.formPane;i.sm().cs(),i.dm().each(function(t){j.forEach(function(j){t.getName().toLowerCase()===j.toLowerCase()&&i.sm().as(t)})});var K=0;C&&k?K=3:C?K=1:k&&(K=2),["normal","bold","oblique","obliqueBold"].forEach(function(t,j){U.getItemById(t).element.setSelected(K===j)}),U.getItemById("fontSizeLabel").element=t+"",U.setValue("fontSize",t)},j.prototype.open=function(t,j,C){this._init||this.init(),this.setValue=j,this.setTitle(C),this.analysisFontString(t),this.show()},j}(Wj),Ok=300,Fk=230,Sk=function(t){function j(C){Ij(this,j);var k=hj(this,t.call(this));k.editor=C,k.addRow([{id:"content",textArea:{}}],[.1],.1),k.addRow([null,{button:{label:i("editor.ok"),onClicked:function(){k.hide(!0)}}},{button:{label:i("editor.cancel"),onClicked:function(){k.hide()}}}],[.1,50,50]),k.setWidth(Ok),k.setHeight(Fk),k.getView().className="ht-editor-styleicons",k.getView().style.background=lj.config.color_pane,k.getView().style.border=lj.config.color_pane_dark+" solid 1px",k.getView().style.boxShadow="0px 0px 3px "+ht.Default.toolTipShadowColor,k.getView().style.overflow="visible";var U=function(t){!k.getView().parentNode||k.button.getView().contains(t.target)||k.getView().contains(t.target)||k.hide()};return window.addEventListener("mousedown",U,!1),window.addEventListener("touchstart",U,!1),k}return gj(j,t),j.prototype.toggle=function(t,j){this.getView().parentNode?this.hide():this.show(t,j)},j.prototype.show=function(t,j){if(!this.getView().parentNode){var C=t.getView().getBoundingClientRect(),k=(this.getView().style,q());ht.Default.appendToScreen(this),this.getView().style.top=k.top+C.top+"px",this.getView().style.left=k.left+C.left-Ok-4+"px",this.iv(),this.button=t,this.data=j;var i=j.s("icons");this.v("content",i?s(i):"")}},j.prototype.hide=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.getView().parentNode&&(r(this.getView()),t)){var j=this.v("content").trim();this.data.s("icons",j?e(j):void 0)}},j}(Vj),Ik=function(){function t(j){var C=this;Ij(this,t),this.editor=j;var k=this.container=ht.Default.createDiv(),i=this.wrap=ht.Default.createDiv(),U=k.style;U.pointerEvents="none",U.position="absolute",U.left=0,U.right=0,U.top=0,U.bottom=0,k.appendChild(i),U=i.style,U.width="600px",U.position="absolute",U.left="50%",U.bottom="20px",U.marginLeft="-300px",U.pointerEvents="none",this._cache=[],this._visibleCount=0,this.layoutContainer(),window.addEventListener("resize",function(){C.layoutContainer()})}return t.prototype.layoutContainer=function(){var t=this.container,j=ht.Default.getWindowInfo(),C=t.style;C.width=j.width+"px",C.height=j.height+"px"},t.prototype.createMessage=function(t){var j=this._cache.pop();if(!j){j=document.createElement("div");var C=j.style;C.boxSizing="border-box",C.padding=0,C.backgroundColor="rgba(61,61,61,0.15)",C.color="rgb(247,247,247)",C.margin="5px auto",C.textAlign="center",C.borderRadius="19px",C.height=0,C.overflow="hidden",C.pointerEvents="none",C.webkitTransition="0.3s all",C.mozTransition="0.3s all",C.msTransition="0.3s all",C.oTransition="0.3s all",C.transition="0.3s all"}return j.innerText=t,j},t.prototype.show=function(t){var j=this,C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal",k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3,i=this.createMessage(t);this.wrap.appendChild(i),this._visibleCount||ht.Default.appendToScreen(this.container),this._visibleCount++,i.style.backgroundColor="normal"===C?"rgba(61,61,61,0.15)":"#FF7C7C",setTimeout(function(){i.style.height="38px",i.style.padding="8px 20px",j.hideLater(i,k)},10)},t.prototype.hideLater=function(t,j){var C=this;setTimeout(function(){t.style.height=0,t.style.padding=0,setTimeout(function(){if(C.wrap.removeChild(t),C._cache.push(t),!--C._visibleCount){C.container.parentNode.removeChild(C.container)}},500)},j)},t}(),_k=function(t){function j(C){Ij(this,j);var k=hj(this,t.call(this));return k.editor=C,k}return gj(j,t),j.prototype.init=function(){var t=this,j=this.dm=new ht.DataModel,C=this.gv=new ht.graph.GraphView(j),k=this.rightFormPane=new Vj,U=this.splitView=new xC(C,k,"h",.6),K=this.targetNode=new ht.Node;K.setAnchor(0,0),K.p(0,0),K.s("2d.selectable",!1),C.dm().add(K),C.setEditable(!0),C.addBottomPainter(function(t){var j=this.getViewRect();t.fillStyle="#cbd3d8",t.fillRect(j.x,j.y,j.width,j.height);var C=K.getRect();t.fillStyle="#fff",t.fillRect(C.x,C.y,C.width,C.height)});var y=[{label:i("editor.ok"),action:function(){t.editor.dm.a("attachPoints",t.toPointsData()),t.hide()}},{label:i("editor.cancel"),action:function(){t.hide()}}];this.setConfig({title:"\u5438\u9644\u70b9",content:U,closable:!0,draggable:!0,maximizable:!0,resizeMode:"wh",buttons:y,width:lj.config.attachPointsViewSize.width,height:lj.config.attachPointsViewSize.height}),this.$81$(),j.md(function(t){if("position"===t.property&&t.data!==K){var j=t.data,C=j.a("offsetX"),k=j.a("offsetY"),i=t.newValue.x-C,U=t.newValue.y-k;j.a({x:parseFloat((i/K.getWidth()).toFixed(2)),y:parseFloat((U/K.getHeight()).toFixed(2))})}}),C.mp(function(t){if("zoom"===t.property){var k=1/C.getZoom();j.each(function(t){t!==K&&t.setScale(k,k)})}}),this._init=!0},j.prototype.$81$=function(){var t=this,j=new oC(this.dm),C=this.tableView=j.getTableView();C.isVisible=function(j){return j!==t.targetNode},C.setEditable(!0),j.getView().style.border=lj.config.color_line+" solid 1px",j.addColumns([this.$74$("x","X",70,function(j,C,k,i){var U=t.targetNode.getWidth();j.setX(U*k+(j.a("offsetX")||0))}),this.$74$("y","Y",70,function(j,C,k,i){var U=t.targetNode.getHeight();j.setY(U*k+(j.a("offsetY")||0))}),this.$74$("offsetX","Offset X",70,function(j,C,k,i){j.a("offsetX",k);var U=t.targetNode.getWidth();j.setX(U*j.a("x")+k)}),this.$74$("offsetY","Offset Y",70,function(j,C,k,i){j.a("offsetY",k);var U=t.targetNode.getHeight();j.setY(U*j.a("y")+k)})]);var k=lj.config.customAttachPointsColumns;if(k&&k.length){
var U=this.customColumns=k.map(function(j){return t.$74$(j.name,j.displayName,j.width||70,j.setter,"string")});j.addColumns(U)}this.rightFormPane.addRow([j],[.1],200),this.rightFormPane.addRow([{button:{icon:"editor.add",toolTip:i("editor.add"),onClicked:function(){t.add()}}},{button:{icon:"editor.delete",toolTip:i("editor.delete"),onClicked:function(){t.remove()}}}],[20,20],20)},j.prototype.add=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,j=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments[4],U=new ht.Node,K=1/this.gv.getZoom();if(U.setImage("editor.attachPoint"),U.setScale(K,K),U.a({x:t,y:j,offsetX:C,offsetY:k}),U.s({"2d.editable":!1}),i)for(var y in i)"x"!==y&&"y"!==y&&"offsetX"!==y&&"offsetY"!==y&&U.a(y,i[y]);var L=this.targetNode.getWidth(),X=this.targetNode.getHeight();return U.p(t*L+C,j*X+k),this.gv.dm().add(U),U},j.prototype.remove=function(){for(var t=this.dm.sm().getSelection().toArray(),j=t.length-1;j>=0;j--)this.dm.remove(t[j])},j.prototype.$74$=function(t,j,C,k){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"number";return{name:t,tag:t,width:C,displayName:j,align:"center",editable:!0,valueType:i,getValue:function(j){return j.a(t)},setValue:k}},j.prototype.toPointsData=function(){var t=this;return this.dm.toDatas(function(j){return j!==t.targetNode}).toArray().map(function(j){var C={x:j.a("x"),y:j.a("y")};return j.a("offsetX")&&(C.offsetX=j.a("offsetX")),j.a("offsetY")&&(C.offsetY=j.a("offsetY")),t.customColumns&&t.customColumns.forEach(function(t){var k=j.a(t.name);k&&(C[t.name]=k)}),C})},j.prototype.$49$=function(){this.hide()},j.prototype.createNodeByPointData=function(){var t=this,j=this.editor.dm.a("attachPoints");j&&j.forEach(function(j){t.add(j.x,j.y,j.offsetX,j.offsetY,j)})},j.prototype.show=function(j){this._init||this.init(),this.dm.clear(),this.dm.add(this.targetNode),this.targetNode.setImage(j),this.createNodeByPointData(),t.prototype.show.call(this),this.gv.fitContent(!0)},j}(Wj),gk=function(t){function j(C){Ij(this,j);var k=hj(this,t.call(this));return k.editor=C,k}return gj(j,t),j.prototype.init=function(){var t=this,j=this.formPane=new Vj;j.setVPadding(2),j.setVGap(8),j.setHGap(0),j.addRow([{element:i("editor.size"),background:lj.config.color_pane_dark}],[.1],24),j.addRow([i("editor.width"),{id:"width",type:"number",textField:{value:30}},i("editor.height"),{id:"height",type:"number",textField:{value:40}}],[64,.1,64,.1],24),j.addRow([{element:i("editor.content"),background:lj.config.color_pane_dark}],[.1],24),j.addRow([{id:"uppercase",checkBox:{label:i("editor.uppercase"),selected:!0}},{id:"lowercase",checkBox:{label:i("editor.lowercase"),selected:!0}},{id:"number",checkBox:{label:i("editor.valuetype.number"),selected:!0}}],[.1,.1,.1],24),j.addRow([i("editor.custom"),{id:"content",textField:{}}],[64,.1],24);var C=[];C.push({label:i("editor.ok"),action:function(){t.ok()}}),C.push({label:i("editor.cancel"),action:function(){t.hide()}}),this.setConfig({closable:!0,draggable:!0,title:i("editor.converteroption"),width:320,height:240,contentPadding:6,resizeMode:"wh",maximizable:!0,content:j,buttons:C,buttonsAlign:"right"}),this._init=!0},j.prototype.ok=function(){var t=this.formPane,j=t.v("width"),C=t.v("height"),k=t.v("uppercase"),i=t.v("lowercase"),U=t.v("number"),K=t.v("content"),y="";k&&(y+="ABCDEFGHIJKLMNOPQRSTUVXWYZ"),i&&(y+="abcdefghijklmnopqrstuvxwyz"),U&&(y+="1234567890"),y+=K;var L={width:j,height:C,texts:y};this.callback&&this.callback(L),delete this.callback,this.hide()},j.prototype.open=function(t){this._init||this.init(),this.callback=t,this.show()},j}(Wj),hk=function t(j,C){var k=this;Ij(this,t),this.editor=j,this.inspector=C,["isDataTitleVisible","isDataPropertyVisible","isCompTitleVisible","isCompPropertyVisible","isDisplayTitleVisible","isDisplayPropertyVisible","isSymbolTitleVisible","isSymbolPropertyVisible","isData3dTitleVisible","isData3dPropertyVisible","isSceneTitleVisible","isScenePropertyVisible"].forEach(function(t){k[t]=function(){return!(lj.config.detailFilter[t]&&!lj.config.detailFilter[t].apply(C,arguments))&&!(j.inspectorCompact&&lj.config.compactFilter[t]&&!lj.config.compactFilter[t].apply(C,arguments))}})},Wk=function(t){function j(C,k,i){var U=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Ij(this,j);var K=hj(this,t.call(this));return K.setHPadding(8),K.global=U,K.editor=C,K.name=k,K.type=i,K.setVPadding(0),K.inspectorFilter=new hk(C,K),K.updateHandlers=[],K.propertyChangeHandlers=[],K.editor.fireEvent("inspectorInitializing",{inspector:K}),K.initForm(),K.editor.fireEvent("inspectorInitialized",{inspector:K}),K.$104$(),K.editor.fireEvent("inspectorCreated",{inspector:K}),K.$47$=K._rows,K}return gj(j,t),j.prototype.initForm=function(){},j.prototype.beginTransaction=function(){this.dataModel&&this.dataModel.beginTransaction()},j.prototype.endTransaction=function(){this.dataModel&&this.dataModel.endTransaction()},j.prototype.addUpdateHandler=function(t){this.updateHandlers.push(t)},j.prototype.removeUpdateHandler=function(t){U(this.updateHandlers,t)},j.prototype.addPropertyChangeHandler=function(t){this.propertyChangeHandlers.push(t)},j.prototype.removePropertyChangeHandler=function(t){U(this.propertyChangeHandlers,t)},j.prototype.$104$=function(){for(var t=this._rows,j=!0,C=t.length-1;C>=0;C--)t[C].title?j?this.removeRow(t[C]):j=!0:j=!1},j.prototype.isTitleVisible=function(t){return!1!==t.visible&&(!mt(t.visible)||!1!==t.visible(this))},j.prototype.isPropertyVisible=function(t){var j=this.editor.inspectorInputFilter;if(j){if(!t.keys)return!1;j=j.toLowerCase();var C=t.keys.name;if(C&&C.toLowerCase().indexOf(j)>=0)return!0;var k=t.keys.displayName;return!!(k&&k.toLowerCase().indexOf(j)>=0)}return!1!==t.visible&&!(mt(t.visible)&&!t.visible(this))},j.prototype.makeItemsHidden=function(t){var j=this;t.hidden=!0,t.forEach(function(t){var C=j.getItemView(t);C&&(C.style.display="none")})},j.prototype.makeItemsVisible=function(t){var j=this;t.hidden=!1,t.forEach(function(t){var C=j.getItemView(t);C&&(C.style.display="block")})},j.prototype.filterPropertiesLater=function(){var t=this;this._filterPropertiesLater||(this._filterPropertiesLater=!0,requestAnimationFrame(function(){t.filterProperties()}))},j.prototype.isTitleExpanded=function(t){return!(t&&!this.editor.inspectorInputFilter)||lj.config.expandedTitles[t]},j.prototype.filterProperties=function(){var t=this;this._filterPropertiesLater=!1;var j=[],C=void 0,k=!1;this.$47$.forEach(function(i){var U=i.items;i.title?(!k&&"$$HTISFUCKINGAWESOME$$"!==C&&j.length&&j[j.length-1].title&&t.makeItemsHidden(j.pop().items),t.isTitleVisible(i)?(C=i.title,i.button.setIcon(t.isTitleExpanded(C)?"expandIcon":"collapseIcon"),j.push(i),t.makeItemsVisible(U)):(C="$$HTISFUCKINGAWESOME$$",t.makeItemsHidden(U)),k=!1):"$$HTISFUCKINGAWESOME$$"===C?t.makeItemsHidden(U):(t.isTitleExpanded(C)&&t.isPropertyVisible(i)?(j.push(i),t.makeItemsVisible(U)):t.makeItemsHidden(U),!k&&t.isPropertyVisible(i)&&(k=!0))}),!k&&"$$HTISFUCKINGAWESOME$$"!==C&&j.length&&j[j.length-1].title&&this.makeItemsHidden(j.pop().items),this._rows=j,this.updateProperties(),this.iv()},j.prototype.addTitle=function(t,j){var C=this,k=this._oldTitle;this.editor.fireEvent("titleCreating",{oldTitle:k,title:t,inspector:this});var U=function(){lj.config.expandedTitles[t]=!lj.config.expandedTitles[t],C.filterProperties()},K=[],y=this.addButton(K,null,null,null,U,!0);y.setBorderColor(null);var L=i("editor."+t.toLowerCase(),!0)||i(t);K.push({element:L,font:lj.config.boldFont}),j=j||{},j.title=t,j.background=lj.config.inspectorTitleBackground||lj.config.color_pane_dark,j.button=y;var X=this.addRow(K,[20,.1],lj.config.inspectorTitleHeight||null,j);return this._oldTitle=t,this.editor.fireEvent("titleCreated",{oldTitle:k,title:t,inspector:this}),X},j.prototype.$35$=function(t){var j=this;t&&(this.propertyChangeHandlers.forEach(function(C){C(t,j)}),this.$47$.forEach(function(C){C.onPropertyChanged&&C.onPropertyChanged(t,j)})),this._updatePropertiesLater||(this._updatePropertiesLater=!0,requestAnimationFrame(function(){j.updateProperties()}))},j.prototype.updateProperties=function(){this._updating=!0,this.updateHandlers.forEach(function(t){t()}),this.editor.fireEvent("propertiesUpdated",{inspector:this}),this._updating=!1,this._updatePropertiesLater=!1},j.prototype.eachSelection=function(t){this.dataModel&&(this.beginTransaction(),this.dataModel.sm().each(function(j){t(j)}),this.endTransaction())},j.prototype.getPropertyValue=function(t,j){j=this.fixAccessType(j);var C=u(j,t);return this.getValue(C)},j.prototype.setPropertyValue=function(t,j,C,k){C=this.fixAccessType(C);var i=a(C,t);i.once=k,this.setValue(i,j)},j.prototype.getValue=function(t){if(this.dataModel)return this.global?t(this.dataModel):this.data?t(this.data):void 0},j.prototype.setValue=function(t,j,C){!this._updating&&this.dataModel&&this.editor.editable&&(this.beginTransaction(),this.global?t(this.dataModel,C?C():j):t.once?this.data&&t(this.data):this.dataModel.sm().each(function(k){t(k,C?C():j)}),this.endTransaction())},j.prototype.addLabelArray=function(t,j,C,k,i,U){return this.addLabel(t,j,C,k,void 0,U),this.addArray(t,C,k,i)},j.prototype.addLabelTextArea=function(t,j,C,k,i){return this.addLabel(t,j,C,k,void 0,i),this.addTextArea(t,C,k)},j.prototype.addLabelMultiline=function(t,j,C,k,i){var U=this;this.addLabelInput(t,j,C,k,void 0,i),this.addButton(t,"...",null,null,function(t){var i=function(t){U.setValue(k,t)};U.editor.textView.open(U.getValue(C),i,j)},!0)},j.prototype.addLabelInput=function(t,j,C,k,i,U,K,y){return this.addLabel(t,j,C,k,U,y),this.addInput(t,C,k,i,K)},j.prototype.addLabelRange=function(t,j,C,k,i,U,K,y,L){var X=this,u=function(t){var j=C(t);return null==j?U:j};return this.addLabelInput(t,j,u,k?function(t,j){void 0!==U&&j>U&&(j=U),void 0!==i&&j<i&&(j=i);var C=u(t);k(t,j),C===j&&C===U&&X.updateProperties()}:null,y,K,void 0,L)},j.prototype.addLabelColor=function(t,j,C,k,i){return this.addLabel(t,j,C,k,void 0,i),this.addColor(t,C,k)},j.prototype.addLabelCheckBox=function(t,j,C,k,i){return this.addLabel(t,j,C,k,void 0,i),this.addCheckBox(t,C,k)},j.prototype.addLabelFunction=function(t,j,C,k,i,U,K){return this.addLabel(t,j,C,k,void 0,K),this.addFunction(t,C,k,i,U)},j.prototype.addLabelObject=function(t,j,C,k,i,U){return this.addLabel(t,j,C,k,void 0,U),this.addObject(t,C,k,i)},j.prototype.addLabelComboBox=function(t,j,C,k,i,U,K,y){return this.addLabel(t,j,C,k,void 0,y),this.addComboBox(t,C,k,i,U,K)},j.prototype.addLabelURL=function(t,j,C,k,i,U){var K=this.addLabelInput(t,j,C,k,null,null,!1,U);if(k){var y=K.getElement();K.isDroppable=i||function(t,j){return!!j.view.draggingData},K.handleCrossDrag=function(t,j,C){"enter"===j?y.style.border="solid "+lj.config.color_select_dark+" 2px":"exit"===j||"cancel"===j?y.style.border="":"over"===j||"drop"===j&&(y.style.border="",y.value=C.view.draggingData.getFileUUID(),K.setFocus(),K.handleChange())}}return K},j.prototype.addLabelImage=function(t,j,C,k,i){var U=function(t,j){if(!j.view.draggingData)return!1;var C=j.view.draggingData.fileType;return C===iC||C===UC};return this.addLabelURL(t,j,C,k,U,i),this.addImage(t,C,k)},j.prototype.addLabelGradient=function(t,j,C,k,i,U){var K=this,y=[],L=function(){return K.data&&K.data.s(i)||lj.config.color_light},X=function(){return K.data&&K.data.s(k)||lj.config.color_select};lj.consts.gradients.forEach(function(t){t?y.push({width:20,height:14,comps:[{type:"rect",rect:[0,0,20,14],gradient:t,gradientColor:{func:L},background:{func:X}}]}):y.push({width:20,height:14,comps:[]})});var u=this.addLabelComboBox(t,j,function(t){return t.s(C)},function(t,j){t.s(C,j)},lj.consts.gradients,null,y,U);this.updateHandlers.push(function(){if(!t.hidden){var j=L(),C=X();u._lastGradientColor===j&&u._lastBackground===C||(u._lastGradientColor=j,u._lastBackground=C,u.iv())}})},j.prototype.addLabelFont=function(t,j,C,k,i){var U=this;this.addLabelInput(t,j,function(t){return C(t)||ht.Default.labelFont},k?function(t,j){k(t,j||void 0)}:null,void 0,void 0,void 0,i),this.addButton(t,"...",null,null,function(t){var i=function(t){U.setValue(k,t)};U.editor.fontView.open(U.getValue(C),i,j)},!0)},j.prototype.addLabelRotation=function(t,j,C,k,i,U,K,y){return this.addLabelInput(t,j,function(t){return null==C(t)?U:180/Math.PI*C(t)},k?function(t,j){j=j*Math.PI/180,void 0!==U&&j>U&&(j=U),void 0!==i&&j<i&&(j=i),k(t,j)}:null,"number",K||1,void 0,y)},j.prototype.addLabelAlign=function(t,j,C,k,i){return this.addLabelComboBox(t,j,function(t){return C(t)||"center"},k,lj.consts.aligns,lj.consts.alignLabels,void 0,i)},j.prototype.addLabelVAlign=function(t,j,C,k,i){return this.addLabelComboBox(t,j,function(t){return C(t)||"bottom"},k,lj.consts.vAligns,lj.consts.vAlignLabels,void 0,i)},j.prototype.addLabelStretch=function(t,j,C,k,i){this.addLabelComboBox(t,j,function(t){return C(t)||"fill"},k,lj.consts.stretchs,lj.consts.stretchLabels,void 0,i)},j.prototype.addOrientation=function(t,j,C,k,i){return this.addLabelComboBox(t,j,function(t){return C(t)||"top"},k,lj.consts.orientations,lj.consts.orientationLabels,void 0,i)},j.prototype.addLabelLabel=function(t,j,C,k,i){this.addLabelInput(t,j,function(t){var j=C(t);return j&&j.replace&&(j=j.replace(/\n/g,"\\n")),j},k?function(t,j){j&&j.replace&&(j=j.replace(/\\n/g,"\n")),k(t,j)}:null,void 0,void 0,void 0,i)},j.prototype.toDisplayName=function(t){var j="";return t.forEach(function(t){if(t)if(dt(t))j+=t;else if(dt(t.element))j+=t.element;else{if(!t.element)return;t.element.innerHTML&&(j+=t.element.innerHTML)}}),j},j.prototype.addLabel=function(t,j,C,k,i,U){var K=this,y=void 0,L=!1,X=C&&k&&i,u=lj.config.dataBindings;if(U&&u.onButtonClicked&&(!u.filter||u.filter(U.accessType,U.name,this))&&(L=!0),L||X){y=Wt(j,t.length?"right":"left"),t.push(y),y.style.cursor=X?"ew-resize":"pointer";var a=function(t){t.preventDefault(),K.beginTransaction();var j=X?K.getValue(C)||0:0,y=H(t).x,u=!1,a=function(t){if(t.preventDefault(),X){var C=j+(H(t).x-y)*i;K.setValue(k,C),u=!0}};window.addEventListener("mousemove",a,!1),window.addEventListener("touchmove",a,!1);var B=function(t){K.endTransaction(),t.preventDefault(),window.removeEventListener("mousemove",a,!1),window.removeEventListener("touchmove",a,!1),window.removeEventListener("mouseup",B,!1),window.removeEventListener("touchend",B,!1),L&&!u&&lj.config.dataBindings.onButtonClicked(K.data,U.accessType,U.name,K.editor)};window.addEventListener("mouseup",B,!1),window.addEventListener("touchend",B,!1)};y.addEventListener("mousedown",a,!1),y.addEventListener("touchstart",a,!1)}else y={element:j,align:t.length?"right":"left"},t.push(y);return L&&this.updateHandlers.push(function(){if(K.data){var t=lj.config.isDataBound(K.data,U.accessType,U.name);y.style.color=t?lj.config.color_select:lj.config.color_dark}}),y},j.prototype.createHandleChange=function(t,j,C){var k=this;return function(){var i=t.value;if("pattern"===C)if(i=i.trim()){if(i.indexOf("[")<0||i.indexOf("]")<0)return;if(i=i.replace("[","").replace("]","").split(","),i.length){for(var U=[],K=0;K<i.length;K++){var y=parseFloat(i[K]);if(isNaN(y))return;U.push(y)}i=U}else i=void 0}else i=void 0;else if("number"===C){if(i=parseFloat(i),isNaN(i))return}else if("int"===C){if(i=parseInt(i),isNaN(i))return}else i||(i=void 0);k.setValue(j,i)}},j.prototype.createArrayIndexColumn=function(t,j,k,U){var K=this,y=t[j],L="object"===U?s(y):y;return{name:j,width:50,align:"center",editable:!!k,sortable:!1,clickable:!1,getValueType:function(t){return U},getValue:function(t){return L},setValue:function(i,U,y,L){K.setValue(k,void 0,function(){var k=t.slice();return k[j]=C(y),k})},isCellEditable:function(t,C,k,L){if(!K.editor.editable)return!1;if("object"===U){var X=i("editor.object")+" ["+j+"]";return K.editor.objectView.open(y,function(j){C.setValue(t,C,j,L)},X),!1}return!0}}},j.prototype.addArray=function(t,j,C,k){var U=this,K=new oC;K.getTableHeader().setMovable(!1),K.getView().style.border=lj.config.color_line+" solid 1px";var y=K.getTableView();return y.getDataModel().add(new ht.Data),this.updateHandlers.push(function(){if(!t.hidden){var L=U.getValue(j);if(y.getColumnModel().clear(),K.addColumns([{name:i("editor.length"),width:50,align:"center",editable:!!C,sortable:!1,clickable:!1,valueType:"int",getValue:function(t){return L?L.length:0},setValue:function(t,j,i,K){U.setValue(C,void 0,function(){if(i>=0){var t=kj(L,i);return"number"===k||"int"===k?jj(t):"color"===k&&Cj(t),t}})}}]),L){for(var X=[],u=0;u<L.length;u++)X.push(U.createArrayIndexColumn(L,u,C,k));K.addColumns(X)}}}),t.push(K),K},j.prototype.addTextArea=function(t,j,C){var k=this,i=new ht.widget.TextArea,U=i.getElement();return C?(U.onblur=function(){k.setValue(C,U.value)},U.forceOnblur=U.onblur):i.setEditable(!1),this.updateHandlers.push(function(){if(!t.hidden){var C=k.getValue(j);null==C&&(C=""),U.value!==C&&(U.value=C)}}),t.push(i),i},j.prototype.addInput=function(t,j,C,i,U){var K=this,y=new ht.widget.TextField;"number"!==i&&"int"!==i||y.setType("number");var L=y.getElement();if(C){var X=this.createHandleChange(L,C,i);y.handleChange=X,U?(L.onkeyup=X,L.onchange=X):(L.onblur=X,L.forceOnblur=L.onblur,L.onkeydown=function(t){d(t)&&X()})}else y.setEditable(!1);return this.updateHandlers.push(function(){if(!t.hidden){var C=K.getValue(j);"pattern"===i?C=C?"["+C.join()+"]":"":"number"===i?C=k(parseFloat(C||0)):"int"===i?C=parseInt(C||0):null==C&&(C=""),L.value!==C&&(dt(C)&&C.length>1e3&&C.startsWith("data:image")&&(C=C.substr(0,10)+"[...]"),L.value=C)}}),t.push(y),y},j.prototype.addColor=function(t,j,C){var k=this,i=new ht.widget.ColorPicker;return C?(i.setInstant(!0),i.onValueChanged=function(){k.setValue(C,i.getValue())},i.addViewListener(function(t){"open"===t.kind?k.beginTransaction():"close"===t.kind&&k.endTransaction()})):i.setDisabled(!0),this.updateHandlers.push(function(){if(!t.hidden){var C=k.getValue(j);void 0===C&&(C=null),i.getValue()!=C&&i.setValue(C)}}),t.push(i),i},j.prototype.addImage=function(t,j,C){var k=this,i=new ht.widget.Image;i.vectorDataBindingDisabled=!0,this.updateHandlers.push(function(){if(!t.hidden||t.forceToUpdate){var C=k.getValue(j);i.rawIcon=C,C=ht.Default.getImage(C),C&&C.snapshotURL?i.setIcon(C.snapshotURL):i.setIcon(i.rawIcon)}});var U=i.getView();U.style.cursor="pointer";var K=function(t){t.preventDefault(),J(t)?k.editor.open(i.rawIcon):k.editor.selectFileNode(i.rawIcon)};return U.addEventListener("mousedown",K,!1),U.addEventListener("touchstart",K,!1),t.push(i),i},j.prototype.addCheckBox=function(t,j,C){var k=this,i=new ht.widget.CheckBox;return C?(i.handleClick=function(){k.editor.editable&&i.setSelected(!i.isSelected())},i.onValueChanged=function(){k.setValue(C,i.getValue())}):i.setDisabled(!0),this.updateHandlers.push(function(){if(!t.hidden){var C=!!k.getValue(j);i.getValue()!==C&&i.setValue(C)}}),t.push(i),i},j.prototype.addFunction=function(t,j,C,k,U){var K=this,L=function(){var t=i("editor.function")+" "+(k||""),y=function(t){K.setValue(C,t)};K.editor.functionView.open(K.getValue(j),y,t,U)},X=k||i("editor.function"),u=Vt(X,null,null,L);return t.push(u),this.updateHandlers.push(function(){if(!t.hidden){var C=K.getValue(j);u.setLabel(y(C)),u.setLabelColor(C?lj.config.color_select:ht.Default.labelColor)}}),u},j.prototype.addObject=function(t,j,C,k){var U=this,K=function(){var t=i("editor.object")+" "+(k||""),K=function(t){U.setValue(C,t)};U.editor.objectView.open(U.getValue(j),K,t)},y=Vt("",null,null,K);return t.push(y),this.updateHandlers.push(function(){if(!t.hidden){var C=U.getValue(j);y.setLabel(s(C)),y.setLabelColor(void 0!==C?lj.config.color_select:ht.Default.labelColor)}}),y},j.prototype.addComboBox=function(t,j,C,k,i,U){var K=this,y=new ht.widget.ComboBox;return y.setValues(k),y.setLabels(i),y.setIcons(U),y.setDisabled(!C),C&&(y.onValueChanged=function(){K.setValue(C,y.getValue())}),this.updateHandlers.push(function(){if(!t.hidden){var C=K.getValue(j);y.getValue()!==C&&y.setValue(C)}}),U&&U[0].width&&y.setIndent(U[0].width+4),t.push(y),y},j.prototype.addButton=function(t,j,C,k,i,U){var K=this,y=function(){K.global||U?i():K.eachSelection(i)},L=Vt(j,C,k,y);return t.push(L),L},j.prototype.addFuncRow=function(t,j,C,k){var i=this,U=k?this.getRowHeight()*k:null,K=void 0;if(!lj.config.dataBindingsForSymbol.filter||lj.config.dataBindingsForSymbol.filter(C||j,this)){var y=function(){i.dataModel&&i.editor.funcView.toggle(K,j,C,i)},L=void 0;L=lj.config.dataBindingsForSymbol.getToolTip?lj.config.dataBindingsForSymbol.getToolTip(C||j,this):(C||j)+": { func: ... }",K=this.addButton(t,null,L,null,y,!0),this.updateHandlers.push(function(){if(!t.hidden){var C=!1;i.global?i.dataModel&&(C="clip"===j?mt(i.dataModel.a(j)):!!i.dataModel.a(j+"_func")):i.data&&(C=!!i.data.a(j)),K.setIcon(C?"editor.bind.state":"editor.unbind.state")}})}var X=t.length,u=void 0;return 2===X?u=this.addRow(t,[lj.config.indent,.1],U):3===X?u=this.addRow(t,[lj.config.indent,.1,20],U):4===X?u=this.addRow(t,[lj.config.indent,.1,20,20],U):5===X?u=this.addRow(t,[lj.config.indent,.1,20,20,20],U):6===X&&(u=this.addRow(t,[lj.config.indent,.1,20,20,20,20],U)),u.keys={name:C||j,displayName:this.toDisplayName(t)},!this.addingCustomProperties&&mC[this.type][C||j]&&this.removeRows([u]),u},j.prototype.addNameRow=function(t,j,C,k,i){var U=k?this.getRowHeight()*k:null,K=t.length,y=void 0;return i?y=this.addRow(t,i,U):2===K?y=this.addRow(t,[lj.config.indent,.1],U):3===K?y=this.addRow(t,[lj.config.indent,.1,20],U):4===K?y=this.addRow(t,[lj.config.indent,.1,20,20],U):5===K&&(y=this.addRow(t,[lj.config.indent,.1,20,20,20],U)),y.keys={name:j,displayName:this.toDisplayName(t),accessType:C},j=(C?C+":":"")+j,!this.addingCustomProperties&&mC[this.type][j]&&this.removeRows([y]),y},j.prototype.$78$=function(){var t=this;(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this.addTitle("TitleGridsGuides");var j=[];this.addLabelInput(j,i("editor.gridblocksize"),function(t){return t.a("gridBlockSize")},function(t,j){j>0&&t.a("gridBlockSize",j)},"int",1),this.addNameRow(j,"gridBlockSize","a"),j=[],this.addLabelInput(j,i("editor.gridthicklinesevery"),function(t){return t.a("gridThickLinesEvery")},function(t,j){j>0&&t.a("gridThickLinesEvery",j)},"int",1),this.addNameRow(j,"gridThickLinesEvery","a"),j=[],this.addLabelColor(j,i("editor.gridlightcolor"),function(t){return t.a("gridLightColor")},function(t,j){t.a("gridLightColor",j)}),this.addNameRow(j,"gridLightColor","a"),j=[],this.addLabelColor(j,i("editor.gridthickcolor"),function(t){return t.a("gridThickColor")},function(t,j){t.a("gridThickColor",j)}),this.addNameRow(j,"gridThickColor","a"),j=[],this.addLabelInput(j,i("editor.gridangle"),function(t){return 180/Math.PI*t.a("gridAngle")},function(t,j){t.a("gridAngle",j*Math.PI/180)},"number",1),this.addNameRow(j,"gridAngle","a"),j=[],this.addLabelInput(j,i("editor.gridrotation"),function(t){return 180/Math.PI*t.a("gridRotation")},function(t,j){t.a("gridRotation",j*Math.PI/180)},"number",1),this.addNameRow(j,"gridRotation","a"),j=[],this.addLabelInput(j,i("editor.gridzoomthreshold"),function(t){return t.a("gridZoomThreshold")},function(t,j){j>0&&t.a("gridZoomThreshold",j)},"number",.01),this.addNameRow(j,"gridZoomThreshold","a"),j=[null],this.addButton(j,i("editor.skewgrid"),null,null,function(){t.editor.currentView&&t.editor.currentView.skewGrid&&t.editor.currentView.skewGrid()}),this.addButton(j,i("editor.reset"),null,null,function(){t.editor.currentView&&t.editor.currentView.resetGrid&&t.editor.currentView.resetGrid()}),this.addRow(j,[lj.config.indent,.1,.1],this.getRowHeight())},j.prototype.$27$=function(){var t=this;this.addTitle("TitleEditingPoint");var j={Mirrored:0,Straight:1,Disconnected:2,Asymmetric:3};this.editingPointButtons=[];var C=function(C,k){var U=i("editor.editingpoint."+k.toLowerCase()),K="editor.point."+k.toLowerCase(),y=Vt(U,null,K,function(){t.editor.editInteractor.getSubModule("Curve").setCurrentSelectionStatus(y.statusValue)});y.setOrientation("v"),y.setTogglable(!0),y.setGroupId("editingPoint"),y.statusValue=j[k],t.editingPointButtons.push(y),C.push(y)},k=[];C(k,"Straight"),C(k,"Mirrored"),this.addRow(k,[.1,.1],60),k=[],C(k,"Disconnected"),C(k,"Asymmetric"),this.addRow(k,[.1,.1],60)},j.prototype.addCustomProperties=function(){var t=this,j=lj.config.customProperties[this.type];j&&j.length&&(this.addTitle("TitleCustom"),j.forEach(function(j){t.addCustomProperty(j)}))},j.prototype.fixAccessType=function(t){return t=t||"a","symbol"===this.type?t="a":"comp"===this.type&&(t="s"),t},j.prototype.addEventProperties=function(){var t=this,j=[],C=function(){var j=t.global?t.dataModel:t.data;j&&(j=t.global?[t.dataModel]:t.dataModel.sm().getSelection().toArray()),t.editor.eventView.open(j,t.type)};this.addLabel(j,i("editor.events"));var k=this.addButton(j,i("editor.eventhandlers"),null,null,C,!0);"data"===this.type?(this.addCheckBox(j,function(t){return!!t&&t.s("interactive")},function(t,j){t&&t.s("interactive",j)}),this.addRow(j,[lj.config.indent,.1,20]).keys={name:"eventHandlers"}):this.addRow(j,[lj.config.indent,.1]).keys={name:"eventHandlers"},this.updateHandlers.push(function(){if(!j.hidden){var C=!1,i=t.global?t.dataModel:t.data;tC.forEach(function(j){C||(C="data"===t.type?i.s(j):i.a(j))}),k.setLabelColor(C?lj.config.color_select:ht.Default.labelColor)}})},j.prototype.addCustomProperty=function(t){var j=t.name,C=t.valueType,k=!1!==t.editable,U=t.defaultValue,K=this.fixAccessType(t.accessType),y=t.dataBinding,L=t.property;if(!(C=lj.config.valueTypes[C]))return!1;this.addingCustomProperties=!0;var X=[],B=i(j)||L,c=u(K,L),f=a(K,L),R=function(t){var j=c(t);return void 0===j&&(j=U),j},d=k?f:null,$=t.extraInfo,m=void 0,D=void 0,b=void 0;$&&$.enum&&(m=$.enum.values,D=$.enum.labels,b=$.enum.icons),$&&$.buildUI?$.buildUI(this,X,B,R,d):m?this.addLabelComboBox(X,B,R,d,m,D,b):"int"===C.type||"number"===C.type?C.angle?this.addLabelRotation(X,B,R,d,C.min,C.max,C.step):this.addLabelRange(X,B,R,d,C.min,C.max,C.step,C.type):"color"===C.type?this.addLabelColor(X,B,R,d):"boolean"===C.type?this.addLabelCheckBox(X,B,R,d):"enum"===C.type?this.addLabelComboBox(X,B,R,d,C.values,C.labels,C.icons):"image"===C.type?this.addLabelImage(X,B,R,d):"url"===C.type?this.addLabelURL(X,B,R,d):"multiline"===C.type?this.addLabelMultiline(X,B,R,d):"colorArray"===C.type?this.addLabelArray(X,B,R,d,"color"):"numberArray"===C.type?this.addLabelArray(X,B,R,d,"number"):"stringArray"===C.type?this.addLabelArray(X,B,R,d,"string"):"objectArray"===C.type?this.addLabelArray(X,B,R,d,"object"):"function"===C.type?this.addLabelFunction(X,B,R,d,L):"object"===C.type?this.addLabelObject(X,B,R,d,L):"font"===C.type?this.addLabelFont(X,B,R,d):"custom"===C.type?C.buildUI(this,X,B,R,d):this.addLabelInput(X,B,R,d);var J=void 0;"display"!==this.type&&"scene"!==this.type&&y?"data"===this.type?J=this.addDBRow(X,K,L,null,C.rows):"symbol"!==this.type&&"comp"!==this.type||(J=this.addFuncRow(X,L,null,C.rows)):J=this.addNameRow(X,K+":"+L,K,C.rows),J&&$&&(J.visible=$.visible,J.onPropertyChanged=$.onPropertyChanged),this.addingCustomProperties=!1},j.prototype.addActionLabel=function(t,j,C,k){this.addLabel(t,j,void 0,void 0,void 0,{accessType:C,name:k})},j.prototype.addActionLabelInput=function(t,j,C,k,i,U,K,y,L){this.addLabelInput(t,j,y||u(C,k),L||a(C,k),i,U,K,{accessType:C,name:k})},j.prototype.addActionLabelCheckBox=function(t,j,C,k,i,U){this.addLabelCheckBox(t,j,i||u(C,k),U||a(C,k),{accessType:C,name:k})},j.prototype.addActionLabelColor=function(t,j,C,k,i,U){this.addLabelColor(t,j,i||u(C,k),U||a(C,k),{accessType:C,name:k})},j.prototype.addActionLabelImage=function(t,j,C,k,i,U){this.addLabelImage(t,j,i||u(C,k),U||a(C,k),{accessType:C,name:k})},j}(Vj),Vk=function(t){function j(C,k){return Ij(this,j),hj(this,t.call(this,C,k,"display",!0))}return gj(j,t),j.prototype.initForm=function(){this.addCustomProperties(),this.$12$(),this.$78$(),this.$79$()},j.prototype.isTitleVisible=function(j){return!!this.inspectorFilter.isDisplayTitleVisible(this.editor,j.title)&&t.prototype.isTitleVisible.call(this,j)},j.prototype.isPropertyVisible=function(j){return!!this.inspectorFilter.isDisplayPropertyVisible(this.editor,j.keys&&j.keys.name)&&t.prototype.isPropertyVisible.call(this,j)},j.prototype.$12$=function(){this.addTitle("TitleBasic");var t=[];this.addLabelInput(t,i("editor.previewurl"),function(t){return t.a("previewURL")},function(t,j){t.a("previewURL",j)}),this.addNameRow(t,"previewURL","a"),t=[],this.addLabelImage(t,i("editor.snapshoturl"),function(t){return t.a("snapshotURL")},function(t,j){t.a("snapshotURL",j)}),this.addNameRow(t,"snapshotURL","a"),t=[],this.addLabelColor(t,i("editor.background"),function(t){return t.getBackground()},function(t,j){t.setBackground(j)}),this.addNameRow(t,"background","p"),t=[],this.addLabelInput(t,i("editor.width"),function(t){return t.a("width")},function(t,j){t.a("width",j)},"number",1),this.addNameRow(t,"width","a"),t=[],this.addLabelInput(t,i("editor.height"),function(t){return t.a("height")},function(t,j){t.a("height",j)},"number",1),this.addNameRow(t,"height","a"),t=[],this.addLabelInput(t,i("editor.datacount"),function(t){return t.size()}),this.addNameRow(t,"count"),t=[];var j=["json","dm","gv"];this.addLabelFunction(t,i("editor.onpredeserialize"),function(t){return t.a("onPreDeserialize")},function(t,j){t.a("onPreDeserialize",j)},"onPreDeserialize",j),this.addNameRow(t,"onPreDeserialize","a"),t=[],j=["json","dm","gv","datas"],this.addLabelFunction(t,i("editor.onpostdeserialize"),function(t){return t.a("onPostDeserialize")},function(t,j){t.a("onPostDeserialize",j)},"onPostDeserialize",j),this.addNameRow(t,"onPostDeserialize","a"),t=[],this.addLabelComboBox(t,i("editor.connectactiontype"),function(t){return t.a("connectActionType")},function(t,j){t.a("connectActionType",j)},lj.consts.displayConnectActionTypes,lj.consts.displayConnectActionTypeLabels),this.addNameRow(t,"connectActionType","a"),t=[],this.addLabelCheckBox(t,i("editor.rotateasclock"),function(t){return t.a("rotateAsClock")},function(t,j){t.a("rotateAsClock",j)}),this.addNameRow(t,"rotateAsClock","a"),t=[],this.addLabelCheckBox(t,i("editor.hierarchicalrendering"),function(t){return t.isHierarchicalRendering()},function(t,j){t.setHierarchicalRendering(j)}),this.addNameRow(t,"hierarchicalRendering","p"),t=[],this.addLabelCheckBox(t,i("editor.zoomable"),function(t){return null==t.a("zoomable")||t.a("zoomable")},function(t,j){t.a("zoomable",j)}),this.addNameRow(t,"zoomable","a"),t=[],this.addLabelCheckBox(t,i("editor.pannable"),function(t){return null==t.a("pannable")||t.a("pannable")},function(t,j){t.a("pannable",j)}),this.addNameRow(t,"pannable","a"),t=[],this.addLabelCheckBox(t,i("editor.rectSelectable"),function(t){return null==t.a("rectSelectable")||t.a("rectSelectable")},function(t,j){t.a("rectSelectable",j)}),this.addNameRow(t,"rectSelectable","a"),t=[],this.addLabelCheckBox(t,i("editor.fitContent"),function(t){return null!=t.a("fitContent")&&t.a("fitContent")},function(t,j){t.a("fitContent",j)}),this.addNameRow(t,"fitContent","a")},j.prototype.$79$=function(){this.addTitle("TitleLayout");var t=[];this.$80$(t,"circular"),this.$80$(t,"symmetric"),this.$80$(t,"hierarchical"),this.$80$(t,"towardnorth"),this.$80$(t,"towardsouth"),this.$80$(t,"towardeast"),this.$80$(t,"towardwest"),this.addRow(t,[.1,.1,.1,.1,.1,.1,.1]).keys={name:"layouts"}},j.prototype.$80$=function(t,j){var C=this,k=function(){C.editor.editable&&C.dataModel&&C.dataModel.layout(j)};return this.addButton(t,null,i("editor.layout."+j),"editor.layout."+j+".state",k)},j}(Wk),Pk={visible:"Boolean",selectable:"Boolean",movable:"Boolean",editable:"Boolean",opacity:"Opacity",clipPercentage:"Percentage",clipDirection:"ClipDirection",shadow:"Boolean",shadowColor:"Color",shadowBlur:"PositiveNumber",shadowOffsetX:"PositiveNumber",shadowOffsetY:"PositiveNumber",type:"String",background:"Color",repeatImage:"String",borderWidth:"PositiveNumber",borderColor:"Color",border3d:"Boolean",border3dColor:"Color",
border3dAccuracy:"PositiveNumber",borderCap:"CapStyle",borderJoin:"JoinStyle",gradient:"Gradient",gradientColor:"Color",dash:"Boolean",dashOffset:"Number",dashColor:"Color",dashWidth:"PositiveNumber",dash3d:"Boolean",dash3dColor:"Color",dash3dAccuracy:"PositiveNumber",borderWidthAbsolute:"Boolean",fillClipPercentage:"Percentage",fillClipDirection:"ClipDirection",depth:"Number",cornerRadius:"PositiveNumber",polygonSide:"Int",arcFrom:"Number",arcTo:"Number",arcClose:"Boolean",arcOval:"Boolean",displayName:"String",scaleX:"Number",scaleY:"Number",anchorX:"Number",anchorY:"Number",rotation:"Number",color:"Color",width:"PositiveNumber",label:"Boolean",labelColor:"Color",labelFont:"String",minValue:"Number",maxValue:"Number",linePoint:"Boolean",lineWidth:"PositiveNumber",line3d:"Boolean",text:"String",align:"Align",vAlign:"VAlign",closePath:"Boolean",fillRule:"FillRule",name:"String",stretch:"Stretch",values:"NumberArray",colors:"ColorArray",hollow:"Boolean",layoutV:"String",layoutH:"String"},lk=function(t){function j(C,k){return Ij(this,j),hj(this,t.call(this,C,k,"symbol",!0))}return gj(j,t),j.prototype.initForm=function(){this.addCustomProperties(),this.$12$(),this.addDataBindingProperties(),this.$78$()},j.prototype.isTitleVisible=function(j){return!!this.inspectorFilter.isSymbolTitleVisible(this.editor,j.title)&&t.prototype.isTitleVisible.call(this,j)},j.prototype.isPropertyVisible=function(j){return!!this.inspectorFilter.isSymbolPropertyVisible(this.editor,j.keys&&j.keys.name)&&t.prototype.isPropertyVisible.call(this,j)},j.prototype.$12$=function(){var t=this,j=void 0;this.addTitle("TitleBasic"),this.addEventProperties(),this.addHTMLProperties(),j=[],this.addLabelInput(j,i("editor.previewurl"),function(t){return t.a("previewURL")},function(t,j){t.a("previewURL",j)}),this.addRow(j,[lj.config.indent,.1]).keys={name:"previewURL"},j=[],this.addLabelImage(j,i("editor.snapshoturl"),function(t){return t.a("snapshotURL")},function(t,j){t.a("snapshotURL",j)}),this.addRow(j,[lj.config.indent,.1,20]).keys={name:"snapshotURL"},j=[],this.addLabelColor(j,i("editor.background"),function(t){return t.getBackground()},function(t,j){t.setBackground(j)}),this.addRow(j,[lj.config.indent,.1]).keys={name:"background"},j=[],this.addLabelInput(j,i("editor.width"),function(t){return t.a("width")},function(t,j){t.a("width",j)},"number",1),this.addFuncRow(j,"width"),j=[],this.addLabelInput(j,i("editor.height"),function(t){return t.a("height")},function(t,j){t.a("height",j)},"number",1),this.addFuncRow(j,"height"),j=[],this.addLabelInput(j,i("editor.boundextend"),function(t){return t.a("boundExtend")},function(t,j){t.a("boundExtend",j)},"number",1),this.addFuncRow(j,"boundExtend"),j=[],this.addLabelComboBox(j,i("editor.connectactiontype"),function(t){return t.a("connectActionType")},function(t,j){t.a("connectActionType",j)},lj.consts.symbolConnectActionTypes,lj.consts.symbolConnectActionTypeLabels),this.addRow(j,[lj.config.indent,.1]).keys={name:"connectActionType"},j=[],this.addLabelCheckBox(j,i("editor.rotateasclock"),function(t){return t.a("rotateAsClock")},function(t,j){t.a("rotateAsClock",j)}),this.addFuncRow(j,"rotateAsClock"),j=[],this.addLabelCheckBox(j,i("editor.fitsize"),function(t){return t.a("fitSize")},function(t,j){t.a("fitSize",j)}),this.addFuncRow(j,"fitSize"),j=[],this.addLabelCheckBox(j,i("editor.scrollable"),function(t){return t.a("scrollable")},function(t,j){t.a("scrollable",j)}),this.addFuncRow(j,"scrollable"),j=[],this.addLabelCheckBox(j,i("editor.interactive"),function(t){return t.a("interactive")},function(t,j){t.a("interactive",j)}),this.addFuncRow(j,"interactive"),j=[],this.addLabelCheckBox(j,i("editor.disableselectedborder"),function(t){return t.a("disableSelectedBorder")},function(t,j){t.a("disableSelectedBorder",j)}),this.addFuncRow(j,"disableSelectedBorder"),j=[],this.addLabelCheckBox(j,i("editor.pixelperfect"),function(t){return t.a("pixelPerfect")},function(t,j){t.a("pixelPerfect",j)}),this.addFuncRow(j,"pixelPerfect"),j=[],this.addLabelCheckBox(j,i("editor.visible"),function(t){return t.a("visible")},function(t,j){t.a("visible",j)}),this.addFuncRow(j,"visible"),j=[],this.addLabelCheckBox(j,i("editor.clip"),function(t){return t.a("clip")},function(t,j){t.a("clip",j)}).onValueChanged=function(j,C){t.dataModel&&(C?t.dataModel.a("clip")||t.dataModel.a("clip",!0):t.dataModel.a("clip",!1))},this.addFuncRow(j,"clip"),j=[],this.addLabelCheckBox(j,i("editor.cacherule"),function(t){return t.a("cacheRule")},function(t,j){t.a("cacheRule",j)}),this.addFuncRow(j,"cacheRule"),j=[],this.addLabelComboBox(j,i("editor.blendmode"),function(t){return t.a("blendMode")},function(t,j){t.a("blendMode",j)},["multiply","override","override_rgb","override_a"],[i("editor.blendmode.multiply"),i("editor.blendmode.override"),i("editor.blendmode.override_rgb"),i("editor.blendmode.override_a")]),this.addFuncRow(j,"blendMode"),this.addAttachPointsProperties(),this.addStateProperty(),j=[],this.addLabelInput(j,i("editor.compcount"),function(t){return t.size()}),this.addNameRow(j,"count")},j.prototype.addHTMLProperties=function(){var t=this,j=[],C=function(){t.editor.functionView.open(t.dataModel.a("renderHTML"),function(j){t.dataModel.a("renderHTML",j)},i("editor.renderhtml"),["data","gv","cache"])};this.addLabel(j,i("editor.html"));var k=this.addButton(j,i("editor.renderhtml"),null,null,C,!0);this.addRow(j,[lj.config.indent,.1]).keys={name:"renderHTML"},this.updateHandlers.push(function(){if(!j.hidden){var C=t.dataModel.a("renderHTML");k.setLabelColor(C?lj.config.color_select:ht.Default.labelColor)}})},j.prototype.addDataBindingProperties=function(){this.addTitle("TitleDataBinding"),this.$81$(),this.$82$()},j.prototype.$74$=function(t,j,C,k){var i=this;return{name:t,tag:t,width:C,displayName:j,align:"center",enum:k,editable:!0,getValue:function(j){return j.dataBinding[t]},setValue:function(j,C,k,U){j.dataBinding[t]!==k&&i.modifyDataBindings(function(){j.dataBinding[t]=k})}}},j.prototype.$75$=function(){var t=this,j=this.tableView.getColumnModel().getDataByTag("defaultValue");j.getEnumValues=function(t){var j=t?lj.config.valueTypes[t.dataBinding.valueType]:null;return j&&"enum"===j.type?j.values:null},j.getEnumLabels=function(t){var j=t?lj.config.valueTypes[t.dataBinding.valueType]:null;return j&&"enum"===j.type?j.labels:null},j.getEnumIcons=function(t){var j=t?lj.config.valueTypes[t.dataBinding.valueType]:null;return j&&"enum"===j.type?j.icons:null},j.getEnumDropDownWidth=function(t){var j=t?lj.config.valueTypes[t.dataBinding.valueType]:null;return j&&"enum"===j.type?j.dropDownWidth:null},j.getValueType=function(t){var j=t?lj.config.valueTypes[t.dataBinding.valueType]:null;return j?j.type:null},j.isCellEditable=function(j,C,k,U){var K=lj.config.valueTypes[j.dataBinding.valueType],y=K?K.type:null,L=j.dataBinding.extraInfo;if("function"===y){var X=i("editor.function")+" "+(j.dataBinding.attr||"");return t.editor.functionView.open(j.dataBinding.defaultValue,function(C){t.modifyDataBindings(function(){j.dataBinding.defaultValue=C,t.tableView.redraw()})},X,L&&L.arguments),!1}if("multiline"===y)return t.editor.textView.open(j.dataBinding.defaultValue,function(C){t.modifyDataBindings(function(){j.dataBinding.defaultValue=C,t.tableView.redraw()})},j.dataBinding.attr||"&nbsp;"),!1;if("font"===y)return t.editor.fontView.open(j.dataBinding.defaultValue,function(C){t.modifyDataBindings(function(){j.dataBinding.defaultValue=C,t.tableView.redraw()})},j.dataBinding.attr||"&nbsp;"),!1;if("object"===y||"stringArray"===y||"custom"===y||"objectArray"===y||"numberArray"===y||"colorArray"===y){var u=i("editor.object")+" "+(j.dataBinding.attr||"");return t.editor.objectView.open(j.dataBinding.defaultValue,function(C){t.modifyDataBindings(function(){j.dataBinding.defaultValue=C,t.tableView.redraw()})},u),!1}return!0}},j.prototype.initExtraInfoColumn=function(){var t=this;this.tableView.getColumnModel().getDataByTag("extraInfo").isCellEditable=function(j,C,k,U){var K=i("editor.object")+" "+(j.dataBinding.attr||"");return t.editor.objectView.open(j.dataBinding.extraInfo,function(C){t.modifyDataBindings(function(){j.dataBinding.extraInfo=C,t.tableView.redraw()})},K),!1}},j.prototype.$81$=function(){var t=this,j=this.tableModel=new ht.DataModel,C=this.tablePane=new oC(j),k=this.tableView=C.getTableView();k.setEditable(!0),k.isEditable=function(){return t.editor.editable},C.getView().style.border=lj.config.color_line+" solid 1px",C.addColumns([this.$74$("attr","Attr",90),this.$74$("valueType",i("editor.valuetype"),80,{values:lj.consts.valueTypes,labels:lj.consts.valueTypeLabels}),this.$74$("defaultValue",i("editor.defaultvalue"),90),this.$74$("name",i("editor.name"),80),this.$74$("group",i("editor.group"),80),this.$74$("description",i("editor.description"),120),this.$74$("extraInfo",i("editor.extrainfo"),100)]),this.$75$(),this.initExtraInfoColumn();var K=[C];this.addRow(K,[.1],"120+0.1");var y=null;this.updateHandlers.push(function(){if(!K.hidden&&t.dataModel&&(!y||t.dataModel.dataBindings!==y)){y=t.dataModel.dataBindings;var C=j.sm().toSelection().toArray();j.clear(),t.dataModel.dataBindings&&t.dataModel.dataBindings.forEach(function(t){var k=new ht.Data;k.dataBinding=t,j.add(k);for(var i=0;i<C.length;i++)if(At(C[i].dataBinding,t)){U(C,C[i]),j.sm().as(k);break}})}})},j.prototype.modifyDataBindings=function(t){var j=C(this.dataModel.dataBindings);t();var k=C(this.dataModel.dataBindings);this.dataModel.dataBindings=k,this.dataModel.fp("f:dataBindings",j,k)},j.prototype.$83$=function(t,j,C,k,i,U){var K=new ht.Data;K.dataBinding={attr:t||"",valueType:j||"String",defaultValue:C,name:k,description:i,extraInfo:U};var y={symbolView:this.editor.symbolView,dataBinding:K.dataBinding};if(this.editor.fireEvent("dataBindingAdding",y),y.preventDefault)return!1;K.dataBinding=y.dataBinding,this.dataModel.dataBindings||(this.dataModel.dataBindings=[]);var L=this.tableModel.sm().ld();if(L){var X=this.tableModel.getRoots().indexOf(L);this.dataModel.dataBindings.splice(X+1,0,K.dataBinding)}else this.dataModel.dataBindings.push(K.dataBinding)},j.prototype.add=function(){var t=this;this.modifyDataBindings(function(){t.$83$()})},j.prototype.delete=function(){var t=this;this.tableView.sm().ld()&&this.modifyDataBindings(function(){t.tableView.sm().each(function(j){U(t.dataModel.dataBindings,j.dataBinding)})})},j.prototype.reorder=function(){var t=this;this.dataModel.dataBindings=[],this.tableModel.getRoots().each(function(j){t.dataModel.dataBindings.push(j.dataBinding)})},j.prototype.import=function(){var t=this;this.modifyDataBindings(function(){lj.config.clearDataBindingsBeforeImporting&&(t.dataModel.dataBindings=[]);var j=t.editor.symbolView.content,C={};j.dataBindings&&j.dataBindings.forEach(function(t){C[t.attr]=!0}),j.comps.forEach(function(j){for(var k in j){var i=j[k];if($t(i))if(dt(i.func)&&cC.test(i.func)){var U=i.func.slice(5);if(!C[U]){var K=void 0,y=void 0,L=void 0,X=void 0;if(Ut(j.type)){var u=ht.Default.getCompType(j.type);if(u){var a=u.properties[k];a?(K=a.valueType,y=a.name,L=a.description,X=a.extraInfo):K=Pk[k]}}else K=Pk[k];t.$83$(U,K,void 0,y,L,X),C[U]=!0}}else{var B={};Uj(i,B);for(var c in B)C[c]||t.$83$(c,Pk[B[c]])}}})})},j.prototype.$82$=function(){var t=this,j=lj.config.importDataBindingsButtonVisible?{button:{icon:"editor.import",toolTip:i("editor.import"),onClicked:function(){t.editor.editable&&t.import()}}}:null;this.addRow([{button:{icon:"editor.add",toolTip:i("editor.add"),onClicked:function(){t.editor.editable&&t.add()}}},{button:{icon:"editor.delete",toolTip:i("editor.delete"),onClicked:function(){t.editor.editable&&t.delete()}}},j,null,{button:{icon:"editor.top",toolTip:i("editor.bringtofront"),onClicked:function(){t.editor.editable&&t.tableView.sm().size()&&t.modifyDataBindings(function(){t.tableModel.moveSelectionToTop(),t.reorder()})}}},{button:{icon:"editor.up",toolTip:i("editor.bringforward"),onClicked:function(){t.editor.editable&&t.tableView.sm().size()&&t.modifyDataBindings(function(){t.tableModel.moveSelectionUp(),t.reorder()})}}},{button:{icon:"editor.down",toolTip:i("editor.sendbackward"),onClicked:function(){t.editor.editable&&t.tableView.sm().size()&&t.modifyDataBindings(function(){t.tableModel.moveSelectionDown(),t.reorder()})}}},{button:{icon:"editor.bottom",toolTip:i("editor.sendtoback"),onClicked:function(){t.editor.editable&&t.tableView.sm().size()&&t.modifyDataBindings(function(){t.tableModel.moveSelectionToBottom(),t.reorder()})}}}],[20,20,20,.1,20,20,20,20])},j.prototype.addAttachPointsProperties=function(){var t=this,j=[],C=function(){t.editor.attachPointsView.show(t.editor.symbolView.content)};this.addLabel(j,i("editor.attach.points"));var k=this.addButton(j,i("editor.attach.edit"),null,null,C,!0);this.addFuncRow(j,"attachPoints"),this.updateHandlers.push(function(){if(!j.hidden){var C=t.dataModel.a("attachPoints");k.setLabelColor(C&&C.length?lj.config.color_select:ht.Default.labelColor)}}),j=[],this.addLabelComboBox(j,i("editor.attach.style"),function(t){return t.a("attachStyle")||"close"},function(t,j){t.a("attachStyle",j)},["close","strict"],[i("editor.attach.close"),i("editor.attach.strict")]),this.addFuncRow(j,"attachStyle")},j.prototype.addStateProperty=function(){var t=this,j=[];this.addLabel(j,i("editor.state"));var C=new ht.widget.ComboBox;C.onValueChanged=function(){t.editor.dm.a("state",C.getValue())},this.updateHandlers.push(function(){if(!j.hidden){var k=t.editor.dm.a("state"),i=t.editor.dm.a("stateEnum");if(i&&i.length){var U=i.map(function(t){return t.value}),K=i.map(function(t){return t.label||t.value});U.unshift(void 0),K.unshift(""),C.setValues(U),C.setLabels(K),C.getValue()!==k&&C.setValue(k)}}}),j.push(C),this.addFuncRow(j,"state")},j}(Wk),ti=function(t){function j(C,k){return Ij(this,j),hj(this,t.call(this,C,k,"data"))}return gj(j,t),j.prototype.initForm=function(){this.addCustomProperties(),this.$28$()},j.prototype.isTitleVisible=function(j){return!!this.inspectorFilter.isDataTitleVisible(this.editor,this.data,j.title)&&t.prototype.isTitleVisible.call(this,j)},j.prototype.isPropertyVisible=function(j){return!!this.inspectorFilter.isDataPropertyVisible(this.editor,this.data,j.keys&&j.keys.accessType,j.keys&&j.keys.name)&&t.prototype.isPropertyVisible.call(this,j)},j.prototype.addDBRow=function(t,j,C,k,i,U){var K=this,y=i?this.getRowHeight()*i:null,L=t.length,X=void 0;if(!lj.config.dataBindings.onButtonClicked||lj.config.dataBindings.filter&&!lj.config.dataBindings.filter(j,C,this))U?X=this.addRow(t,U,y,k):2===L?X=this.addRow(t,[lj.config.indent,.1],y,k):3===L?X=this.addRow(t,[lj.config.indent,.1,20],y,k):4===L?X=this.addRow(t,[lj.config.indent,.1,20,20],y,k):5===L?X=this.addRow(t,[lj.config.indent,.1,20,20,20],y,k):1===L&&(X=this.addRow(t,[.1],y,k));else{var u=function(){lj.config.dataBindings.onButtonClicked(K.data,j,C,K.editor)},a=void 0;a=lj.config.dataBindings.getToolTip?lj.config.dataBindings.getToolTip(j,C,this):j+":"+C;var B=this.addButton(t,null,a,null,u,!0);this.updateHandlers.push(function(){if(!t.hidden&&K.data){var k=lj.config.isDataBound(K.data,j,C);B.setIcon(k?"editor.bind.state":"editor.unbind.state")}}),U?(U=U.slice(),U.push(20),X=this.addRow(t,U,y,k)):2===L?X=this.addRow(t,[lj.config.indent,.1,20],y,k):3===L?X=this.addRow(t,[lj.config.indent,.1,20,20],y,k):4===L?X=this.addRow(t,[lj.config.indent,.1,20,20,20],y,k):5===L?X=this.addRow(t,[lj.config.indent,.1,20,20,20,20],y,k):1===L&&(X=this.addRow(t,[.1,20],y,k))}return X.keys={name:C,displayName:this.toDisplayName(t),accessType:j},!this.addingCustomProperties&&mC[this.type][j+":"+C]&&this.removeRows([X]),X},j.prototype.addDBInput=function(t,j,C,k,i){var U=[];return this.addLabelInput(U,j,u(t,C),a(t,C),k,i),this.addDBRow(U,t,C)},j.prototype.addDBLabel=function(t,j,C){var k=[];return this.addLabelLabel(k,j,u(t,C),a(t,C)),this.addDBRow(k,t,C)},j.prototype.addDBCheckBox=function(t,j,C){var k=[];return this.addLabelCheckBox(k,j,u(t,C),a(t,C)),this.addDBRow(k,t,C)},j.prototype.addDBImage=function(t,j,C){var k=[];return this.addLabelImage(k,j,u(t,C),a(t,C)),this.addDBRow(k,t,C)},j.prototype.addDBColor=function(t,j,C){var k=[];return this.addLabelColor(k,j,u(t,C),a(t,C)),this.addDBRow(k,t,C)},j.prototype.addDBFont=function(t,j,C){var k=[];return this.addLabelFont(k,j,u(t,C),a(t,C)),this.addDBRow(k,t,C)},j.prototype.addDBPattern=function(t,j,C){var k=[];return this.addLabelInput(k,j,u(t,C),a(t,C),"pattern"),this.addDBRow(k,t,C)},j.prototype.addDBRotation=function(t,j,C){var k=[];return this.addLabelRotation(k,j,u(t,C),a(t,C)),this.addDBRow(k,t,C)},j.prototype.addDBAlign=function(t,j,C){var k=[];return this.addLabelAlign(k,j,u(t,C),a(t,C)),this.addDBRow(k,t,C)},j.prototype.addDBVAlign=function(t,j,C){var k=[];return this.addLabelVAlign(k,j,u(t,C),a(t,C)),this.addDBRow(k,t,C)},j.prototype.addDBOrientation=function(t,j,C){var k=[];return this.addOrientation(k,j,u(t,C),a(t,C)),this.addDBRow(k,t,C)},j.prototype.addDBComboBox=function(t,j,C,k,i,U){var K=[];return this.addLabelComboBox(K,j,u(t,C),a(t,C),k,i,U),this.addDBRow(K,t,C)},j.prototype.addDBStretch=function(t,j,C){var k=[];return this.addLabelStretch(k,j,u(t,C),a(t,C)),this.addDBRow(k,t,C)},j.prototype.addDBZeroToOne=function(t,j,C){var k=[];return this.addLabelRange(k,j,u(t,C),a(t,C),0,1,.01,"number"),this.addDBRow(k,t,C)},j.prototype.addDBPosition=function(t,j,C){var k=[];return this.addLabelRange(k,j,u(t,C),a(t,C),1,55,1,"int"),this.addDBRow(k,t,C)},j.prototype.addDBRange=function(t,j,C,k,i,U,K){var y=[];return this.addLabelRange(y,j,u(t,C),a(t,C),k,i,U,K),this.addDBRow(y,t,C)},j.prototype.addDBGradient=function(t,j,C,k){var i=[];return this.addLabelGradient(i,t,j,C,k),this.addDBRow(i,"s",j)},j.prototype.addDBBodyColorProperty=function(){this.addDBColor("s",i("editor.bodycolor"),"body.color")},j.prototype.addDBOpacityProperty=function(){this.addDBZeroToOne("s",i("editor.opacity"),"opacity")},j.prototype.$84$=function(){var t=this,j=[];this.addLabel(j,i("editor.icons"));var C=function(){t.data&&t.editor.iconsView.toggle(k,t.data)},k=this.addButton(j,"Icons","s:icons",null,C,!0);return this.updateHandlers.push(function(){j.hidden||k.setLabelColor(t.data.s("icons")?lj.config.color_select:ht.Default.labelColor)}),this.addDBRow(j,"s","icons")},j.prototype.addDBData=function(t,j,C,k){var i=this;k=k||a(t,C);var U=u(t,C),K=[],y=this.addLabelInput(K,j,function(t){var j=U(t);return j?j.toLabel()||j.getClassName():""}),L=y.getElement();y.isDroppable=function(t,j){return j.view.draggingData&&i.dataModel===j.view.draggingData.getDataModel()},y.handleCrossDrag=function(t,j,C){"enter"===j?L.style.border="solid "+lj.config.color_select_dark+" 2px":"exit"===j||"cancel"===j?L.style.border="":"over"===j||"drop"===j&&(L.style.border="",i.setValue(k,C.view.draggingData),y.setFocus())},L.onkeydown=function(t){D(t)&&i.setValue(k,null)};var X=new ht.widget.Image;return X.drawImage=function(t,j,C,k,U,K){var y=X.data,L=i.editor.list;y&&L&&L.dm().contains(y)&&(j=L.getIcon(y))&&I(t,ht.Default.getImage(j),"centerUniform",C,k,U,K,y,L)},this.updateHandlers.push(function(){if(!K.hidden){var t=X.data;X.data=i.getValue(U),X.fp("data",t,X.data)}}),K.push(X),this.addDBRow(K,t,C)},j.prototype.addDBMultiline=function(t,j,C){var k=[];return this.addLabelMultiline(k,j,u(t,C),a(t,C)),this.addDBRow(k,t,C)},j.prototype.$28$=function(){this.addTitle("TitleBasic"),this.addEventProperties();var t=[];this.addLabelInput(t,i("editor.class"),function(t){return t.getClassName()}),this.addRow(t,[lj.config.indent,.1]).keys={accessType:"p",name:"className"},this.addDBInput("p",i("editor.name"),"displayName"),this.addDBInput("p",i("editor.tag"),"tag"),this.addDBImage("p",i("editor.icon"),"icon"),this.addDBData("p",i("editor.parent"),"parent")},j.prototype.$30$=function(){this.addTitle("TitleLabel"),this.addDBMultiline("s",i("editor.content"),"label"),this.addDBFont("s",i("editor.font"),"label.font"),this.addDBColor("s",i("editor.color"),"label.color"),this.addDBColor("s",i("editor.background"),"label.background"),this.addDBPosition("s",i("editor.position"),"label.position"),this.addDBInput("s",i("editor.offsetx"),"label.offset.x","number",1),this.addDBInput("s",i("editor.offsety"),"label.offset.y","number",1),this.addDBInput("s",i("editor.maxlength"),"label.max","number",1),this.addDBRotation("s",i("editor.rotation"),"label.rotation"),this.addDBZeroToOne("s",i("editor.opacity"),"label.opacity"),this.addDBRange("s",i("editor.scale"),"label.scale",.01,100,.1,"number"),this.addDBAlign("s",i("editor.align"),"label.align"),this.addDBCheckBox("s",i("editor.fixed"),"label.position.fixed")},j.prototype.$31$=function(){this.addTitle("TitleNote"),this.addDBMultiline("s",i("editor.content"),"note"),this.addDBFont("s",i("editor.font"),"note.font"),this.addDBColor("s",i("editor.color"),"note.color"),this.addDBColor("s",i("editor.background"),"note.background"),this.addDBInput("s",i("editor.borderwidth"),"note.border.width","number",1),this.addDBColor("s",i("editor.bordercolor"),"note.border.color"),this.addDBPosition("s",i("editor.position"),"note.position"),this.addDBInput("s",i("editor.offsetx"),"note.offset.x","number",1),this.addDBInput("s",i("editor.offsety"),"note.offset.y","number",1),this.addDBZeroToOne("s",i("editor.opacity"),"note.opacity"),this.addDBRange("s",i("editor.scale"),"note.scale",.01,100,.1,"number"),this.addDBInput("s",i("editor.maxlength"),"note.max","number",1),this.addDBAlign("s",i("editor.align"),"note.align"),this.addDBCheckBox("s",i("editor.toggleable"),"note.toggleable"),this.addDBCheckBox("s",i("editor.expanded"),"note.expanded")},j.prototype.addDBLayer=function(){var t=this,j=[],C=u("p","layer"),k=a("p","layer");this.addLabel(j,i("editor.layer"),C,k);var U=new ht.widget.ComboBox;U.onValueChanged=function(){t.setValue(k,U.getValue())},this.updateHandlers.push(function(){if(!j.hidden){U.setValues(t.editor.layerPane.layerNames);var k=t.getValue(C);U.getValue()!==k&&U.setValue(k)}}),j.push(U);var K=this.addDBRow(j,"p","layer");return K.items.tag="layer",K},j.prototype.addDBGray=function(){this.addDBCheckBox("s",i("editor.gray"),"2d.gray")},j}(Wk),ji={TitleShapeBackground:!0,TitleShapeBorder:!0,TitleShapeDash:!0},Ci=function(t){function j(C,k){return Ij(this,j),hj(this,t.call(this,C,k))}return gj(j,t),j.prototype.initForm=function(){this.addCustomProperties(),this.$28$(),this.$92$(),this.addLayoutProperties(),this.$23$(),this.$29$(),this.$30$(),this.$31$(),this.$26$()},j.prototype.$28$=function(){t.prototype.$28$.call(this),this.addDBGray(),this.addDBLayer(),this.addDBInput("p",i("editor.tooltip"),"toolTip"),this.addDBBodyColorProperty(),this.addDBOpacityProperty(),this.$84$(),this.addState()},j.prototype.addState=function(){var t=this,j=[],C=new ht.widget.ComboBox,k=function(t){var j=t.s("state");if(j)return j;if(t.getImage){var C=ht.Default.getImage(t.getImage());return C?C.state:void 0}},U=a("s","state");this.addLabel(j,i("editor.state")),C.onValueChanged=function(){t.setValue(U,C.getValue())},this.updateHandlers.push(function(){if(!j.hidden){var i=t.getStateEnum();if(i&&0!==!i){var U=t.getValue(k),K=i.map(function(t){return t.value}),y=i.map(function(t){return t.label||t.value});K.unshift(void 0),y.unshift(""),C.setValues(K),C.setLabels(y),C.getValue()!==U&&"object"!=typeof U&&C.setValue(U)}}}),j.push(C);var K=this.addDBRow(j,"s","state");return K.visible=function(){var j=t.getStateEnum();return j&&j.length},K},j.prototype.getStateEnum=function(){var t=ht.Default.getImage(this.data.getImage());return t?t.stateEnum:null},j.prototype.$92$=function(){var t=this;this.addDBStretch("s",i("editor.stretch"),"image.stretch").items.tag="imageRelative",this.addDBComboBox("s",i("editor.shape"),"shape",lj.consts.shapes,lj.consts.shapeLabels,lj.consts.shapeIcons);var j=[];j.forceToUpdate=!0,this.addLabelImage(j,i("editor.image"),function(j){var C=j.getImage(),k=ht.Default.getImage(C);return t.$86$($t(k)?k.dataBindings:null,k),C},function(t,j){t.setImage&&(dt(j)&&j.endsWith("[...]")||t.setImage(j))}),this.addButton(j,null,i("editor.resetsize"),"editor.resetsize.state",function(t){t instanceof ht.Node&&t.setSize(-1,-1)}),this.imageRow=this.addDBRow(j,"p","image"),this.imageRow.items.tag="imageRelative"},j.prototype.addLayoutProperties=function(){var t=this;this.addTitle("TitleNodeLayout");var j=this.layoutGv=new ht.graph.GraphView,C=this.layoutNode=new ht.Node,k=!1;C.setImage("editor.layout.helper"),C.a("selectColor",lj.config.color_select),j.dm().add(C),j.tx(50),j.ty(50),j.handleScroll=function(){},j.handlePinck=function(){},j.setScrollBarVisible(!1),j.setRectSelectable(!1),j.setPannable(!1),j.setMovableFunc(function(){return!1}),j.dm().md(function(j){k||(t.beginTransaction(),t.dataModel.sm().getSelection().each(function(t){"a:layout.v"===j.property?t.s("layout.v",j.newValue):"a:layout.h"===j.property&&t.s("layout.h",j.newValue)}),t.endTransaction())}),this.addRow(["",{element:j},""],[.1,100,.1],100),this.addUpdateHandler(function(){var j=t.data;k=!0,C.a({"layout.v":j.s("layout.v"),"layout.h":j.s("layout.h")}),k=!1}),this.addDBComboBox("s",i("editor.nodeLayout.h"),"layout.h",lj.consts.hLayoutValues,lj.consts.hLayoutLabels),this.addDBComboBox("s",i("editor.nodeLayout.v"),"layout.v",lj.consts.vLayoutValues,lj.consts.vLayoutLabels)},j.prototype.$23$=function(){this.addTitle("TitleNode"),this.addDBInput("p",i("editor.posx"),"x","number",1),this.addDBInput("p",i("editor.posy"),"y","number",1),this.addDBInput("p",i("editor.width"),"width","number",1),this.addDBInput("p",i("editor.height"),"height","number",1),this.addDBRotation("p",i("editor.rotation"),"rotation");var t=[];this.addLabelInput(t,i("editor.scalex"),u("p","scaleX"),a("p","scaleX"),"number",.01),this.addButton(t,null,i("editor.flipx"),"editor.flipx",function(t){t instanceof ht.Node&&t.setScaleX(-t.getScaleX())}),this.addDBRow(t,"p","scaleX"),t=[],this.addLabelInput(t,i("editor.scaley"),u("p","scaleY"),a("p","scaleY"),"number",.01),this.addButton(t,null,i("editor.flipy"),"editor.flipy",function(t){t instanceof ht.Node&&t.setScaleY(-t.getScaleY())}),this.addDBRow(t,"p","scaleY"),t=[],this.addLabelInput(t,i("editor.anchorx"),function(t){return t.getAnchor().x},function(t,j){t instanceof ht.Node&&t.setAnchor(j,t.getAnchor().y,!0)},"number",.01),this.addDBRow(t,"p","anchorX"),t=[],this.addLabelInput(t,i("editor.anchory"),function(t){return t.getAnchor().y},function(t,j){t instanceof ht.Node&&t.setAnchor(t.getAnchor().x,j,!0)},"number",.01),this.addDBRow(t,"p","anchorY"),this.$85$(),this.addDBData("p",i("editor.host"),"host",function(t,j){t instanceof ht.Node&&(null==j||j instanceof ht.Node)&&t.setHost(j)}),this.addDBComboBox("s",i("editor.fullscreen"),"fullscreen",lj.consts.fullscreenValues,lj.consts.fullscreenLabels);var j=this.addDBComboBox("s",i("editor.fullscreen.lock"),"fullscreen.lock",lj.consts.fullscreenLockValues,lj.consts.fullscreenLockLabels);j.items.tag="fullscreen",j=this.addDBInput("s",i("editor.fullscreen.gap"),"fullscreen.gap","number",1),j.items.tag="fullscreen",this.addDBComboBox("s",i("editor.movemode"),"2d.move.mode",[void 0,"x","y"],["",i("editor.horizontal"),i("editor.vertical")]),this.addDBCheckBox("s",i("editor.ingroup"),"ingroup"),this.addDBCheckBox("s",i("editor.visible"),"2d.visible"),this.addDBCheckBox("s",i("editor.selectable"),"2d.selectable"),this.addDBCheckBox("s",i("editor.movable"),"2d.movable"),this.addDBCheckBox("s",i("editor.editable"),"2d.editable"),this.addDBCheckBox("s",i("editor.pixelperfect"),"pixelPerfect")},j.prototype.$85$=function(){this.addDBZeroToOne("s",i("editor.clippercentage"),"clip.percentage"),this.addDBComboBox("s",i("editor.clipdirection"),"clip.direction",lj.consts.clipDirections,lj.consts.clipDirectionLabels)},j.prototype.$29$=function(){this.$25$(),this.addShapeForegroundProperties(),this.$33$(),this.addShapeDashProperties()},j.prototype.$25$=function(){this.addTitle("TitleShapeBackground"),this.addDBColor("s",i("editor.background"),"shape.background"),this.addDBGradient(i("editor.gradient"),"shape.gradient","shape.background","shape.gradient.color"),this.addDBColor("s",i("editor.gradientcolor"),"shape.gradient.color"),this.addDBImage("s",i("editor.repeatimage"),"shape.repeat.image"),this.addDBZeroToOne("s",i("editor.clippercentage"),"shape.fill.clip.percentage"),this.addDBComboBox("s",i("editor.clipdirection"),"shape.fill.clip.direction",lj.consts.clipDirections,lj.consts.clipDirectionLabels)},j.prototype.addShapeForegroundProperties=function(){this.addTitle("TitleShapeForeground"),this.addDBColor("s",i("editor.foreground"),"shape.foreground"),this.addDBGradient(i("editor.gradient"),"shape.foreground.gradient","shape.foreground","shape.foreground.gradient.color"),this.addDBColor("s",i("editor.gradientcolor"),"shape.foreground.gradient.color"),this.addDBZeroToOne("s",i("editor.clippercentage"),"shape.foreground.clip.percentage"),this.addDBComboBox("s",i("editor.clipdirection"),"shape.foreground.clip.direction",lj.consts.clipDirections,lj.consts.clipDirectionLabels)},j.prototype.$33$=function(){this.addTitle("TitleShapeBorder"),this.addDBInput("s",i("editor.width"),"shape.border.width","number",1),this.addDBCheckBox("s",i("editor.widthabsolute"),"shape.border.width.absolute"),this.addDBPattern("s",i("editor.pattern"),"shape.border.pattern"),this.addDBColor("s",i("editor.color"),"shape.border.color"),this.addDBCheckBox("s",i("editor.threed"),"shape.border.3d"),this.addDBColor("s",i("editor.threedcolor"),"shape.border.3d.color"),this.addDBComboBox("s",i("editor.join"),"shape.border.join",lj.consts.joins,lj.consts.joinLabels),this.addDBComboBox("s",i("editor.cap"),"shape.border.cap",lj.consts.caps,lj.consts.capLabels),this.$24$()},j.prototype.$24$=function(){this.addDBInput("s",i("editor.depth"),"shape.depth","int",1).items.tag="shapeDepth",this.addDBInput("s",i("editor.sides"),"shape.polygon.side","int",1).items.tag="shapeSide",this.addDBInput("s",i("editor.radius"),"shape.corner.radius","number",1).items.tag="shapeRadius",this.addDBCheckBox("s",i("editor.arcoval"),"shape.arc.oval").items.tag="shapeArc",this.addDBCheckBox("s",i("editor.closed"),"shape.arc.close").items.tag="shapeArc",this.addDBRotation("s",i("editor.arcfrom"),"shape.arc.from").items.tag="shapeArc",this.addDBRotation("s",i("editor.arcto"),"shape.arc.to").items.tag="shapeArc"},j.prototype.addShapeDashProperties=function(){this.addTitle("TitleShapeDash"),this.addDBPattern("s",i("editor.pattern"),"shape.dash.pattern"),this.addDBCheckBox("s",i("editor.dash"),"shape.dash"),this.addDBColor("s",i("editor.color"),"shape.dash.color"),this.addDBInput("s",i("editor.offset"),"shape.dash.offset","number",1),this.addDBInput("s",i("editor.width"),"shape.dash.width","number",1),this.addDBCheckBox("s",i("editor.threed"),"shape.dash.3d"),this.addDBColor("s",i("editor.threedcolor"),"shape.dash.3d.color")},j.prototype.$35$=function(j){if(j){if("s:shape"===j.property||"host"===j.property||"s:fullscreen"===j.property)return void this.filterPropertiesLater();if("s:select.type"===j.property&&("shadow"===j.oldValue||"shadow"===j.newValue))return void this.filterPropertiesLater()}t.prototype.$35$.call(this,j)},j.prototype.isTitleVisible=function(j){if(this.data){if(!(this.data instanceof ht.Shape)&&!this.data.s("shape")&&ji[j.title])return!1;if("TitleNodeLayout"===j.title&&!this.data.getHost())return!1}return t.prototype.isTitleVisible.call(this,j)},j.prototype.isPropertyVisible=function(j){if(this.data){var C=j.items.tag;if(C)if("selectShadow"===C){if("shadow"!==this.data.s("select.type"))return!1}else if("shapeDepth"===C){if("rect"!==this.data.s("shape"))return!1}else if("shapeSide"===C){if("polygon"!==this.data.s("shape"))return!1}else if("shapeRadius"===C){if("roundRect"!==this.data.s("shape"))return!1}else if("shapeArc"===C){if("arc"!==this.data.s("shape"))return!1}else if("imageRelative"===C){if(this.data.s("shape"))return!1}else if("layer"===C){if(!this.editor.layerPane.layerNames.length)return!1}else if("fullscreen"===C&&!this.data.s("fullscreen"))return!1}return t.prototype.isPropertyVisible.call(this,j)},j.prototype.$86$=function(t,j){var C=this
;this.dataBindings!==t&&(this.$46$=t,this.pendingImage=j,this._updateDataBindingsLater||(this._updateDataBindingsLater=!0,requestAnimationFrame(function(){C.$87$()})))},j.prototype.$87$=function(){var t=this;if(this._updateDataBindingsLater=!1,this.dataBindings===this.$46$)return this.$46$=null,void(this.pendingImage=null);if(this._rows=this.$47$,this.removeRows(this.$45$),this.dataBindingHandlers&&this.dataBindingHandlers.length&&this.dataBindingHandlers.forEach(this.removeUpdateHandler,this),this.$45$=[],this.dataBindingHandlers=[],this.dataBindings=this.$46$,this.dataBindings){var j=this.updateHandlers.length,C={},k={},i={};this.pendingImage.comps.forEach(function(t){if(Ut(t.type)){var j=ht.Default.getCompType(t.type);if(j)for(var U in j.properties)C[U]=j.properties[U].defaultValue}Uj(t,k,i)});for(var U in k)void 0===i[U]&&(i[U]=C[k[U]]);var K=void 0,y=this._rows.indexOf(this.imageRow)+1;this.dataBindings.forEach(function(j){if(j.group&&K!==j.group){K=j.group;var C=t.addTitle(K,{index:y});C.items.tag="imageRelative",t.$45$.push(C),y++}t.$88$(j,y,i)&&y++}),this.dataBindingHandlers=this.updateHandlers.slice(j)}this.$47$=this._rows,this.filterProperties()},j.prototype.$88$=function(t,j,C){var k=[],U=t.attr,K=lj.config.valueTypes[t.valueType];if(!K)return this.editor.fireEvent("error",{message:"Wrong value type:"+t.valueType}),!1;var y=i(t.name)||U,L=function(t){var j=t.a(U);return void 0===j&&(j=C[U]),j},X=function(t,j){t.a(U,j)},u=t.extraInfo,a=void 0,B=void 0,c=void 0;u&&u.enum&&(a=u.enum.values,B=u.enum.labels,c=u.enum.icons),u&&u.buildUI?u.buildUI(this,k,y,L,X):a?this.addLabelComboBox(k,y,L,X,a,B,c):"int"===K.type||"number"===K.type?K.angle?this.addLabelRotation(k,y,L,X,K.min,K.max,K.step):this.addLabelRange(k,y,L,X,K.min,K.max,K.step,K.type):"color"===K.type?this.addLabelColor(k,y,L,X):"boolean"===K.type?this.addLabelCheckBox(k,y,L,X):"enum"===K.type?this.addLabelComboBox(k,y,L,X,K.values,K.labels,K.icons):"multiline"===K.type?this.addLabelMultiline(k,y,L,X):"font"===K.type?this.addLabelFont(k,y,L,X):"image"===K.type?this.addLabelImage(k,y,L,X):"url"===K.type?this.addLabelURL(k,y,L,X):"colorArray"===K.type?this.addLabelArray(k,y,L,X,"color"):"numberArray"===K.type?this.addLabelArray(k,y,L,X,"number"):"stringArray"===K.type?this.addLabelArray(k,y,L,X,"string"):"objectArray"===K.type?this.addLabelArray(k,y,L,X,"object"):"function"===K.type?this.addLabelFunction(k,y,L,X,U,u&&u.arguments):"object"===K.type?this.addLabelObject(k,y,L,X,U):"custom"===K.type?K.buildUI(this,k,y,L,X):this.addLabelInput(k,y,L,X);var f=this.addDBRow(k,"a",U,{index:j},K.rows);return u&&(f.visible=u.visible,f.onPropertyChanged=u.onPropertyChanged),this.$45$.push(f),k.tag="imageRelative",!0},j.prototype.$26$=function(){this.addTitle("TitleSelect"),this.addDBColor("s",i("editor.color"),"select.color"),this.addDBInput("s",i("editor.width"),"select.width","number",1),this.addDBInput("s",i("editor.padding"),"select.padding","number",1),this.addDBComboBox("s",i("editor.selecttype"),"select.type",lj.consts.selectTypes,lj.consts.selectTypeLabels,lj.consts.selectTypeIcons),this.addDBInput("s",i("editor.shadowblur"),"shadow.blur","number",1).items.tag="selectShadow",this.addDBInput("s",i("editor.shadowoffsetx"),"shadow.offset.x","number",1).items.tag="selectShadow",this.addDBInput("s",i("editor.shadowoffsety"),"shadow.offset.y","number",1).items.tag="selectShadow"},j}(ti),ki={"h.v":!0,"v.h":!0,ortho:!0,flex:!0,"extend.east":!0,"extend.west":!0,"extend.north":!0,"extend.south":!0,ortho2:!0,flex2:!0,"extend.north2":!0,"extend.south2":!0,"extend.west2":!0,"extend.east2":!0,"v.h2":!0,"h.v2":!0},ii={"extend.east":!0,"extend.west":!0,"extend.north":!0,"extend.south":!0,"extend.north2":!0,"extend.south2":!0,"extend.west2":!0,"extend.east2":!0},Ui=function(t){function j(C,k){return Ij(this,j),hj(this,t.call(this,C,k))}return gj(j,t),j.prototype.initForm=function(){this.$27$(),t.prototype.initForm.call(this),this.addDBGray(),this.$89$(),this.$90$(),this.$91$(),this.$30$(),this.$31$(),this.$26$()},j.prototype.isTitleVisible=function(j){return!("TitleEditingPoint"===j.title&&!this.editor.pointsEditingMode)&&t.prototype.isTitleVisible.call(this,j)},j.prototype.$35$=function(j){if(j&&("s:edge.type"===j.property||"source"===j.property||"target"===j.property))return void this.filterPropertiesLater();t.prototype.$35$.call(this,j)},j.prototype.isPropertyVisible=function(j){if(this.data){var C=j.items.tag;if(C){var k=this.data.s("edge.type");if("edgeRipple"===C){if("ripple"!==k)return!1}else if("edgeRadius"===C){if(!ki[k])return!1}else if("edgeOrtho"===C){if("ortho"!==k&&"ortho2"!==k)return!1}else if("edgeFlex"===C){if("flex"!==k&&"flex2"!==k)return!1}else if("edgeExtend"===C){if(!ii[k])return!1}else if("layer"===C){if(!this.editor.layerPane.layerNames.length)return!1}else{if("edgeSourceIsEdge"===C)return this.data.getSource()instanceof ht.Edge;if("edgeTargetIsEdge"===C)return this.data.getTarget()instanceof ht.Edge;if("edgeSourceIsNode"===C)return this.data.getSource()instanceof ht.Node;if("edgeTargetIsNode"===C)return this.data.getTarget()instanceof ht.Node}}}return t.prototype.isPropertyVisible.call(this,j)},j.prototype.$28$=function(){t.prototype.$28$.call(this),this.addDBLayer(),this.addDBInput("p",i("editor.tooltip"),"toolTip"),this.addDBOpacityProperty(),this.$84$()},j.prototype.$26$=function(){this.addTitle("TitleSelect"),this.addDBColor("s",i("editor.color"),"select.color"),this.addDBInput("s",i("editor.width"),"select.width","number",1);var t=[];this.addLabelCheckBox(t,i("editor.shadow"),function(t){return"shadow"===t.s("select.type")},function(t,j){t.s("select.type",j?"shadow":null)}),this.addDBRow(t,"s","select.type"),this.addDBInput("s",i("editor.shadowblur"),"shadow.blur","number",1),this.addDBInput("s",i("editor.shadowoffsetx"),"shadow.offset.x","number",1),this.addDBInput("s",i("editor.shadowoffsety"),"shadow.offset.y","number",1)},j.prototype.$89$=function(){this.addTitle("TitleEdgeBasic"),this.addDBInput("s",i("editor.width"),"edge.width","number",1),this.addDBCheckBox("s",i("editor.widthabsolute"),"edge.width.absolute"),this.addDBPattern("s",i("editor.pattern"),"edge.pattern"),this.addDBColor("s",i("editor.color"),"edge.color"),this.addDBCheckBox("s",i("editor.threed"),"edge.3d"),this.addDBColor("s",i("editor.threedcolor"),"edge.3d.color"),this.addDBComboBox("s",i("editor.join"),"edge.join",lj.consts.joins,lj.consts.joinLabels),this.addDBComboBox("s",i("editor.cap"),"edge.cap",lj.consts.caps,lj.consts.capLabels),this.addDBInput("s",i("editor.group"),"edge.group"),this.addDBInput("s",i("editor.offset"),"edge.offset","number",1),this.addDBInput("s",i("editor.gap"),"edge.gap","number",1),this.addDBComboBox("s",i("editor.type"),"edge.type",lj.consts.edgeTypes,lj.consts.edgeTypes.map(function(t){var j=i("edgeType:"+t,!0);return j||t})),this.addDBInput("s",i("editor.radius"),"edge.corner.radius","number",1).items.tag="edgeRadius",this.addDBZeroToOne("s",i("editor.ortho"),"edge.ortho").items.tag="edgeOrtho",this.addDBInput("s",i("editor.flex"),"edge.flex","number",1).items.tag="edgeFlex",this.addDBInput("s",i("editor.extend"),"edge.extend","number",1).items.tag="edgeExtend",this.addDBInput("s",i("editor.ripplesize"),"edge.ripple.size","int",1).items.tag="edgeRipple",this.addDBInput("s",i("editor.ripplelength"),"edge.ripple.length","number",1).items.tag="edgeRipple",this.addDBInput("s",i("editor.rippleelevation"),"edge.ripple.elevation","number",1).items.tag="edgeRipple",this.addDBCheckBox("s",i("editor.rippleboth"),"edge.ripple.both").items.tag="edgeRipple",this.addDBCheckBox("s",i("editor.ripplestraight"),"edge.ripple.straight").items.tag="edgeRipple",this.addDBCheckBox("s",i("editor.center"),"edge.center"),this.addDBCheckBox("s",i("editor.ingroup"),"ingroup"),this.addDBCheckBox("s",i("editor.visible"),"2d.visible"),this.addDBCheckBox("s",i("editor.selectable"),"2d.selectable"),this.addDBCheckBox("s",i("editor.editable"),"2d.editable"),this.addDBCheckBox("s",i("editor.independent"),"edge.independent"),this.addDBCheckBox("s",i("editor.toggleable"),"edge.toggleable");var t=[],j=function(t,j){t instanceof ht.Edge&&t.toggle()};j.once=!0,this.addLabelCheckBox(t,i("editor.expanded"),function(t){return t.s("edge.expanded")},j),this.addDBRow(t,"s","edge.expanded")},j.prototype.$91$=function(){this.addTitle("TitleEdgeDash"),this.addDBCheckBox("s",i("editor.dash"),"edge.dash"),this.addDBPattern("s",i("editor.pattern"),"edge.dash.pattern"),this.addDBColor("s",i("editor.color"),"edge.dash.color"),this.addDBInput("s",i("editor.offset"),"edge.dash.offset","number",1),this.addDBInput("s",i("editor.width"),"edge.dash.width","number",1),this.addDBCheckBox("s",i("editor.threed"),"edge.dash.3d"),this.addDBColor("s",i("editor.threedcolor"),"edge.dash.3d.color")},j.prototype.$90$=function(){this.addTitle("TitleEdgeEndpoint"),this.addDBData("p",i("editor.sourcenode"),"source",function(t,j){t instanceof ht.Edge&&(null==j||j instanceof ht.Node||j instanceof ht.Edge)&&(t.setSource(j),t.s("edge.source.percent",.5))}),this.addDBData("p",i("editor.targetnode"),"target",function(t,j){t instanceof ht.Edge&&(null==j||j instanceof ht.Node||j instanceof ht.Edge)&&(t.setTarget(j),t.s("edge.target.percent",.5))});var t=void 0;t=this.addDBZeroToOne("s",i("editor.sourcepercent"),"edge.source.percent"),t.items.tag="edgeSourceIsEdge",t=this.addDBRange("s",i("editor.sourceindex"),"edge.source.index",0,1/0,1,"number"),t.items.tag="edgeSourceIsEdge",t=this.addDBPosition("s",i("editor.sourceposition"),"edge.source.position"),t.items.tag="edgeSourceIsNode",t=this.addDBInput("s",i("editor.sourceoffsetx"),"edge.source.offset.x","number",1),t.items.tag="edgeSourceIsNode",t=this.addDBInput("s",i("editor.sourceoffsety"),"edge.source.offset.y","number",1),t.items.tag="edgeSourceIsNode",t=this.addDBInput("s",i("editor.sourceanchorx"),"edge.source.anchor.x","number",.01),t.items.tag="edgeSourceIsNode",t=this.addDBInput("s",i("editor.sourceanchory"),"edge.source.anchor.y","number",.01),t.items.tag="edgeSourceIsNode",t=this.addDBZeroToOne("s",i("editor.targetpercent"),"edge.target.percent"),t.items.tag="edgeTargetIsEdge",t=this.addDBRange("s",i("editor.targetindex"),"edge.target.index",0,1/0,1,"number"),t.items.tag="edgeTargetIsEdge",t=this.addDBPosition("s",i("editor.targetposition"),"edge.target.position"),t.items.tag="edgeTargetIsNode",t=this.addDBInput("s",i("editor.targetoffsetx"),"edge.target.offset.x","number",1),t.items.tag="edgeTargetIsNode",t=this.addDBInput("s",i("editor.targetoffsety"),"edge.target.offset.y","number",1),t.items.tag="edgeTargetIsNode",t=this.addDBInput("s",i("editor.targetanchorx"),"edge.target.anchor.x","number",.01),t.items.tag="edgeTargetIsNode",t=this.addDBInput("s",i("editor.targetanchory"),"edge.target.anchor.y","number",.01),t.items.tag="edgeTargetIsNode"},j}(ti),Ki=function(t){function j(C,k){return Ij(this,j),hj(this,t.call(this,C,k))}return gj(j,t),j.prototype.initForm=function(){this.addCustomProperties(),this.$28$(),this.$92$(),this.addLayoutProperties(),this.$23$(),this.$32$(),this.$94$(),this.$93$(),this.$29$(),this.$30$(),this.$31$(),this.$26$()},j.prototype.$35$=function(j){if(j&&"s:group.type"===j.property)return void this.filterPropertiesLater();t.prototype.$35$.call(this,j)},j.prototype.isTitleVisible=function(j){return(!this.data||!this.data.s("group.type")||"TitleGroupTitle"!==j.title)&&t.prototype.isTitleVisible.call(this,j)},j.prototype.isPropertyVisible=function(j){if(this.data){var C=j.items.tag;if(C&&"groupDepth"===C){var k=this.data.s("group.type");if(k&&"rect"!==k)return!1}}return t.prototype.isPropertyVisible.call(this,j)},j.prototype.$32$=function(){this.addTitle("TitleGroupBasic"),this.addDBComboBox("s",i("editor.type"),"group.type",[void 0,"rect","oval","circle","roundRect"],["",i("editor.grouptype.rect"),i("editor.grouptype.oval"),i("editor.grouptype.circle"),i("editor.grouptype.roundrect")]),this.addDBPosition("s",i("editor.position"),"group.position"),this.addDBColor("s",i("editor.background"),"group.background"),this.addDBGradient(i("editor.gradient"),"group.gradient","group.background","group.gradient.color"),this.addDBColor("s",i("editor.gradientcolor"),"group.gradient.color"),this.addDBImage("s",i("editor.image"),"group.image"),this.addDBStretch("s",i("editor.stretch"),"group.image.stretch"),this.addDBImage("s",i("editor.repeatimage"),"group.repeat.image"),this.addDBCheckBox("s",i("editor.toggleable"),"group.toggleable"),this.addDBCheckBox("p",i("editor.expanded"),"expanded"),this.addDBInput("s",i("editor.depth"),"group.depth","number",1).items.tag="groupDepth"},j.prototype.$94$=function(){this.addTitle("TitleGroupTitle"),this.addDBLabel("s",i("editor.content"),"label"),this.addDBFont("s",i("editor.font"),"group.title.font"),this.addDBColor("s",i("editor.color"),"group.title.color"),this.addDBColor("s",i("editor.background"),"group.title.background"),this.addDBAlign("s",i("editor.align"),"group.title.align"),this.addDBOrientation("s",i("editor.valuetype.orientation"),"group.title.orientation"),this.addDBCheckBox("s","\u5206\u5272\u7ebf","group.splitLine")},j.prototype.$93$=function(){this.addTitle("TitleGroupBorder"),this.addDBInput("s",i("editor.width"),"group.border.width","number",1),this.addDBPattern("s",i("editor.pattern"),"group.border.pattern"),this.addDBColor("s",i("editor.color"),"group.border.color"),this.addDBComboBox("s",i("editor.join"),"group.border.join",lj.consts.joins,lj.consts.joinLabels),this.addDBComboBox("s",i("editor.cap"),"group.border.cap",lj.consts.caps,lj.consts.capLabels),this.addDBInput("s",i("editor.radius"),"group.border.radius","number",1),this.addDBInput("s",i("editor.padding"),"group.padding","number",1),this.addDBInput("s",i("editor.paddingleft"),"group.padding.left","number",1),this.addDBInput("s",i("editor.paddingright"),"group.padding.right","number",1),this.addDBInput("s",i("editor.paddingtop"),"group.padding.top","number",1),this.addDBInput("s",i("editor.paddingbottom"),"group.padding.bottom","number",1)},j}(Ci),yi=function(t){function j(C,k){return Ij(this,j),hj(this,t.call(this,C,k))}return gj(j,t),j.prototype.initForm=function(){this.$27$(),this.addCustomProperties(),this.$28$(),this.addLayoutProperties(),this.$23$(),this.$29$(),this.$30$(),this.$31$(),this.$26$()},j.prototype.isTitleVisible=function(j){return!("TitleEditingPoint"===j.title&&!this.editor.pointsEditingMode)&&t.prototype.isTitleVisible.call(this,j)},j.prototype.$24$=function(){this.addDBCheckBox("p",i("editor.closed"),"closePath"),this.addDBColor("s",i("editor.outlinecolor"),"border.color"),this.addDBInput("s",i("editor.outlinewidth"),"border.width","number",1)},j.prototype.$25$=function(){t.prototype.$25$.call(this),this.addDBComboBox("s",i("editor.fillrule"),"shape.fill.rule",lj.consts.fillRules,lj.consts.fillRuleLabels)},j.prototype.$26$=function(){this.addTitle("TitleSelect"),this.addDBColor("s",i("editor.color"),"select.color"),this.addDBInput("s",i("editor.width"),"select.width","number",1);var t=[];this.addLabelCheckBox(t,i("editor.shadow"),function(t){return"shadow"===t.s("select.type")},function(t,j){t.s("select.type",j?"shadow":null)}),this.addDBRow(t,"s","select.type"),this.addDBInput("s",i("editor.shadowblur"),"shadow.blur","number",1),this.addDBInput("s",i("editor.shadowoffsetx"),"shadow.offset.x","number",1),this.addDBInput("s",i("editor.shadowoffsety"),"shadow.offset.y","number",1)},j}(Ci),Li=function(t){function j(C,k){return Ij(this,j),hj(this,t.call(this,C,k))}return gj(j,t),j.prototype.$23$=function(){t.prototype.$23$.call(this),this.addDBCheckBox("p",i("editor.clickthroughenabled"),"clickThroughEnabled");var j=[];this.addLabelCheckBox(j,i("editor.syncsize"),function(t){return t.isSyncSize()},function(t,j){t instanceof ht.Block&&(t.setSyncSize(j),t instanceof ht.RefGraph&&(t.p(0,0),t.setRotation(0),t.setAnchor(.5,.5),t.setScale(1,1),t.setSize(20,20),t.setRef(t.getRef())))}),this.addDBRow(j,"p","syncSize")},j.prototype.addDBGray=function(){},j.prototype.addDBBodyColorProperty=function(){},j.prototype.addDBOpacityProperty=function(){},j.prototype.$92$=function(){},j.prototype.$29$=function(){},j.prototype.$85$=function(){},j}(Ci),Xi=function(t){function j(C,k){return Ij(this,j),hj(this,t.call(this,C,k))}return gj(j,t),j.prototype.$28$=function(){t.prototype.$28$.call(this),this.addDBRef()},j.prototype.addDBRef=function(){var t=this,j=[],C=function(t){return t.getRef()},k=function(t,j){t instanceof ht.RefGraph&&(t.p(0,0),t.setRotation(0),t.setAnchor(.5,.5),t.setScale(1,1),t.setSize(20,20),t.setRef(j))},U=function(j,C){var k=C.view.draggingData;return!!k&&(t.editor.url!==k.url&&k.fileType===KC)};return this.addLabelURL(j,i("editor.ref"),C,k,U),this.addDBRow(j,"p","ref")},j.prototype.addDBGray=function(){},j}(Li),ui=function(t){function j(C,k){return Ij(this,j),hj(this,t.call(this,C,k))}return gj(j,t),j.prototype.initForm=function(){this.addCustomProperties(),this.$28$(),this.addLayoutProperties(),this.$22$(),this.$23$(),this.$26$()},j.prototype.$22$=function(){this.addTitle("TitleText"),this.addDBInput("s",i("editor.content"),"text"),this.addDBAlign("s",i("editor.align"),"text.align"),this.addDBVAlign("s",i("editor.valign"),"text.vAlign"),this.addDBColor("s",i("editor.color"),"text.color"),this.addDBFont("s",i("editor.font"),"text.font"),this.addDBCheckBox("s",i("editor.shadow"),"text.shadow"),this.addDBColor("s",i("editor.shadowcolor"),"text.shadow.color"),this.addDBInput("s",i("editor.shadowblur"),"text.shadow.blur","number",1),this.addDBInput("s",i("editor.shadowoffsetx"),"text.shadow.offset.x","number",1),this.addDBInput("s",i("editor.shadowoffsety"),"text.shadow.offset.y","number",1)},j}(Ci),ai=function(t){function j(C,k){return Ij(this,j),hj(this,t.call(this,C,k,"comp"))}return gj(j,t),j.prototype.initForm=function(){this.addCustomProperties(),this.$12$(),this.addLayoutProperties(),this.$20$()},j.prototype.isTitleVisible=function(j){return!!this.inspectorFilter.isCompTitleVisible(this.editor,this.data?this.data.compType:null,j.title)&&t.prototype.isTitleVisible.call(this,j)},j.prototype.isPropertyVisible=function(j){return!!this.inspectorFilter.isCompPropertyVisible(this.editor,this.data?this.data.compType:null,j.keys&&j.keys.name)&&t.prototype.isPropertyVisible.call(this,j)},j.prototype.$12$=function(){this.addTitle("TitleBasic"),this.addEventProperties(),this.$14$(),this.$15$(),this.addStyleInput(i("editor.prefix"),"prefix","prefix"),this.$13$(),this.$21$(),this.$16$(),this.$17$(),this.$18$(),this.$19$(),this.addStyleCheckBox(i("editor.visible"),"2d.visible","visible"),this.addStyleCheckBox(i("editor.selectable"),"2d.selectable","selectable"),this.addStyleCheckBox(i("editor.movable"),"2d.movable","movable"),this.addStyleCheckBox(i("editor.editable"),"2d.editable","editable"),this.addStyleCheckBox(i("editor.pixelperfect"),"pixelPerfect","pixelPerfect"),this.addStyleZeroToOne(i("editor.opacity"),"opacity","opacity"),this.addState()},j.prototype.addState=function(){var t=this,j=[],C=new ht.widget.ComboBox,k=u("s","state"),U=a("s","state");this.addLabel(j,i("editor.state"),k,U),C.onValueChanged=function(){t.setValue(U,C.getValue())},this.updateHandlers.push(function(){if(!j.hidden){var i=t.getValue(k),U=t.editor.dm.a("stateEnum");if(U&&U.length){var K=U.map(function(t){return t.value}),y=U.map(function(t){return t.label||t.value});K.unshift(void 0),y.unshift(""),C.setValues(K),C.setLabels(y),C.getValue()!==i&&C.setValue(i)}}}),j.push(C);var K=this.addFuncRow(j,"state");return K.visible=function(){return t.editor.dm.a("stateEnum")&&t.editor.dm.a("stateEnum").length},K},j.prototype.$13$=function(){var t=[];this.addLabelInput(t,i("editor.area"),function(t){return"["+k(t.p().x-t.getWidth()*t.getAnchor().x)+","+k(t.p().y-t.getHeight()*t.getAnchor().y)+","+k(t.getWidth())+","+k(t.getHeight())+"]"}),this.addFuncRow(t,"rect")},j.prototype.$14$=function(){var t=[];this.addLabelInput(t,i("editor.type"),function(t){return t.compType}),this.addRow(t,[lj.config.indent,.1]).keys={name:"type"}},j.prototype.$15$=function(){var t=[];this.addLabelInput(t,i("editor.name"),function(t){return t.getDisplayName()},function(t,j){t.setDisplayName(j)}),this.addFuncRow(t,"displayName")},j.prototype.$16$=function(){var t=[];this.addLabelInput(t,i("editor.rotation"),function(t){return 180/Math.PI*t.getRotation()},function(t,j){t instanceof ht.Node&&t.setRotation(j*Math.PI/180)},"number",1),this.addFuncRow(t,"rotation")},j.prototype.$17$=function(){var t=[];this.addLabelInput(t,i("editor.anchorx"),function(t){return t.getAnchor().x},function(t,j){t instanceof ht.Node&&t.setAnchor(j,t.getAnchor().y,!0)},"number",.01),this.addFuncRow(t,"anchorX"),t=[],this.addLabelInput(t,i("editor.anchory"),function(t){return t.getAnchor().y},function(t,j){t instanceof ht.Node&&t.setAnchor(t.getAnchor().x,j,!0)},"number",.01),this.addFuncRow(t,"anchorY")},j.prototype.$18$=function(){var t=[];this.addLabelInput(t,i("editor.scalex"),function(t){return t.getScale().x},function(t,j){t instanceof ht.Node&&t.setScale(j,t.getScale().y)},"number",.01),this.addFuncRow(t,"scaleX"),t=[],this.addLabelInput(t,i("editor.scaley"),function(t){return t.getScale().y},function(t,j){t instanceof ht.Node&&t.setScale(t.getScale().x,j)},"number",.01),this.addFuncRow(t,"scaleY")},j.prototype.$19$=function(){this.addStyleZeroToOne(i("editor.clippercentage"),"clip.percentage","clipPercentage"),this.addStyleComboBox(i("editor.clipdirection"),"clip.direction",lj.consts.clipDirections,lj.consts.clipDirectionLabels,null,"clipDirection")},j.prototype.$20$=function(){this.addTitle("TitleShadow"),this.addStyleCheckBox(i("editor.shadow"),"shadow","shadow"),this.addStyleColor(i("editor.shadowcolor"),"select.color","shadowColor"),this.addStyleInput(i("editor.shadowblur"),"shadow.blur","number",1,"shadowblur"),this.addStyleInput(i("editor.shadowoffsetx"),"shadow.offset.x","number",1,"shadowOffsetX"),this.addStyleInput(i("editor.shadowoffsety"),"shadow.offset.y","number",1,"shadowOffsetYs")},j.prototype.$21$=function(){var t=[];return this.addLabelInput(t,i("editor.posx"),function(t){return t.p().x},function(t,j){t instanceof ht.Node&&t.p(j,t.p().y)},"number",1),this.addLabelInput(t,i("editor.posy"),function(t){return t.p().y},function(t,j){t instanceof ht.Node&&t.p(t.p().x,j)},"number",1),this.addRow(t,[lj.config.indent,.1,lj.config.indent2,.1]).keys={name:"position"},t=[],this.addLabelInput(t,i("editor.width"),function(t){return t.getWidth()},function(t,j){t instanceof ht.Node&&t.setWidth(j)},"number",1),this.addLabelInput(t,i("editor.height"),function(t){return t.getHeight()},function(t,j){t instanceof ht.Node&&t.setHeight(j)},"number",1),this.addRow(t,[lj.config.indent,.1,lj.config.indent2,.1]).keys={name:"size"},t},j.prototype.addStyleColor=function(t,j,C){var k=[];return this.addLabelColor(k,t,function(t){return t.s(j)},function(t,C){t.s(j,C)}),this.addFuncRow(k,j,C)},j.prototype.addStyleFunction=function(t,j,C,k){var i=[];return this.addLabelFunction(i,t,function(t){return t.s(j)},function(t,C){t.s(j,C)},C,k),this.addFuncRow(i,j,C)},j.prototype.addStyleObject=function(t,j,C){var k=[];return this.addLabelObject(k,t,function(t){return t.s(j)},function(t,C){t.s(j,C)},C),this.addFuncRow(k,j,C)},j.prototype.addStyleLabel=function(t,j,C){var k=[];return this.addLabelInput(k,t,function(t){var C=t.s(j);return C&&C.replace&&(C=C.replace(/\n/g,"\\n")),C},function(t,C){C&&C.replace&&(C=C.replace(/\\n/g,"\n")),t.s(j,C)}),this.addFuncRow(k,j,C)},j.prototype.addStyleArray=function(t,j,C,k,i){var U=[];return this.addLabelArray(U,t,function(t){return t.s(j)},function(t,C){t.s(j,C)},k),this.addFuncRow(U,j,C,i)},j.prototype.addStyleMultiline=function(t,j,C,k){var i=[];return this.addLabelMultiline(i,t,function(t){return t.s(j)},function(t,C){t.s(j,C)}),this.addFuncRow(i,j,C,k)},j.prototype.addStyleFont=function(t,j,C,k){var i=[];return this.addLabelFont(i,t,function(t){return t.s(j)},function(t,C){t.s(j,C)}),this.addFuncRow(i,j,C,k)},j.prototype.addStyleTextArea=function(t,j,C,k){var i=[];return this.addLabelTextArea(i,t,function(t){return t.s(j)},function(t,C){t.s(j,C)}),this.addFuncRow(i,j,k,C)},j.prototype.addStyleInput=function(t,j,C,k,i){var U=[];return this.addLabelInput(U,t,function(t){return t.s(j)},function(t,C){t.s(j,C)},C,k),this.addFuncRow(U,j,i)},j.prototype.addStyleCheckBox=function(t,j,C){var k=[];return this.addLabelCheckBox(k,t,function(t){return t.s(j)},function(t,C){t.s(j,C)}),this.addFuncRow(k,j,C)},j.prototype.addStyleAlign=function(t,j,C){var k=[];return this.addLabelComboBox(k,t,function(t){return t.s(j)||"center"},function(t,C){t.s(j,C)},["left","center","right"],[i("editor.align.left"),i("editor.align.center"),i("editor.align.right")]),this.addFuncRow(k,j,C)},j.prototype.addStyleVAlign=function(t,j,C){var k=[];return this.addLabelComboBox(k,t,function(t){return t.s(j)||"bottom"},function(t,C){t.s(j,C)},["top","middle","bottom"],[i("editor.valign.top"),i("editor.valign.middle"),i("editor.valign.bottom")]),this.addFuncRow(k,j,C)},j.prototype.addStyleStretch=function(t,j,C){var k=[];return this.addLabelComboBox(k,t,function(t){return t.s(j)||"fill"},function(t,C){t.s(j,C)},["fill","uniform","centerUniform"],[i("editor.stretch.fill"),i("editor.stretch.uniform"),i("editor.stretch.centeruniform")]),this.addFuncRow(k,j,C)},j.prototype.addStyleComboBox=function(t,j,C,k,i,U){var K=[];return this.addLabelComboBox(K,t,function(t){return t.s(j)},function(t,C){t.s(j,C)},C,k,i),this.addFuncRow(K,j,U)},j.prototype.addStyleImage=function(t,j,C){var k=[];return this.addLabelImage(k,t,function(t){return t.s(j)},function(t,C){t.s(j,C)}),this.addFuncRow(k,j,C)},j.prototype.addStyleURL=function(t,j,C){var k=[];return this.addLabelURL(k,t,function(t){return t.s(j)},function(t,C){t.s(j,C)}),this.addFuncRow(k,j,C)},j.prototype.addStylePattern=function(t,j,C){var k=[];return this.addLabelInput(k,t,function(t){return t.s(j)},function(t,C){t.s(j,C)},"pattern"),this.addFuncRow(k,j,C)},j.prototype.addStyleZeroToOne=function(t,j,C){return this.addStyleRange(t,j,0,1,.01,C)},j.prototype.addStylePosition=function(t,j,C){return this.addStyleRange(t,j,1,55,1,C)},j.prototype.addStyleRange=function(t,j,C,k,i,U){var K=[];return this.addLabelInput(K,t,function(t){var C=t.s(j);return null==C?k:C},function(t,i){void 0!==k&&i>k&&(i=k),void 0!==C&&i<C&&(i=C),t.s(j,i)},"number",i),this.addFuncRow(K,j,U)},j.prototype.addStyleRotation=function(t,j,C,k,i,U){var K=[];return this.addLabelInput(K,t,function(t){var C=t.s(j);return null==C?i:180/Math.PI*C},function(t,C){C=C*Math.PI/180,void 0!==i&&C>i&&(C=i),void 0!==k&&C<k&&(C=k),t.s(j,C)},"number",U||1),this.addFuncRow(K,j,C)},j.prototype.addStyleGradient=function(t,j,C,k,i){var U=[];return this.addLabelGradient(U,t,j,C,k),this.addFuncRow(U,j,i)},j.prototype.addLayoutProperties=function(){var t=this;this.addTitle("TitleNodeLayout").visible=function(t){return!!t.dataModel.a("fitSize")};var j=this.layoutGv=new ht.graph.GraphView,C=this.layoutNode=new ht.Node,k=!1;C.setImage("editor.layout.helper"),C.a("selectColor",lj.config.color_select),j.dm().add(C),j.tx(50),j.ty(50),j.handleScroll=function(){},j.handlePinck=function(){},j.setScrollBarVisible(!1),j.setRectSelectable(!1),j.setPannable(!1),j.setMovableFunc(function(){return!1}),j.dm().md(function(j){k||(t.beginTransaction(),t.dataModel.sm().getSelection().each(function(t){"a:layout.v"===j.property?t.s("layout.v",j.newValue):"a:layout.h"===j.property&&t.s("layout.h",j.newValue)}),t.endTransaction())}),this.addRow(["",{element:j},""],[.1,100,.1],100),this.addUpdateHandler(function(j,i){var U=t.data;k=!0,C.a({"layout.v":U.s("layout.v"),"layout.h":U.s("layout.h")}),k=!1});var U=[];this.addLabelComboBox(U,i("editor.nodeLayout.h"),function(t){return t.s("layout.h")},function(t,j){t.s("layout.h",j)},lj.consts.hLayoutValues,lj.consts.hLayoutLabels),this.addFuncRow(U,"layout.h"),U=[],this.addLabelComboBox(U,i("editor.nodeLayout.v"),function(t){return t.s("layout.v")},function(t,j){t.s("layout.v",j)},lj.consts.vLayoutValues,lj.consts.vLayoutLabels),this.addFuncRow(U,"layout.v")},j}(Wk),Bi=function(t){function j(C,k){return Ij(this,j),hj(this,t.call(this,C,k))}return gj(j,t),j.prototype.$35$=function(j){if(j&&"s:shape"===j.property)return void this.filterPropertiesLater();t.prototype.$35$.call(this,j)},j.prototype.isTitleVisible=function(j){if(this.data){var C=this.data.s("shape");if("TitleArc"===j.title&&"arc"!==C)return!1}return t.prototype.isTitleVisible.call(this,j)},j.prototype.isPropertyVisible=function(j){if(this.data){var C=j.items.tag;if(C){var k=this.data.s("shape");if("shapeDepth"===C&&"rect"!==k)return!1;if("shapeCornerRadius"===C&&"roundRect"!==k)return!1;if("shapePolygonSide"===C&&"polygon"!==k)return!1}}return t.prototype.isPropertyVisible.call(this,j)},j.prototype.initForm=function(){t.prototype.initForm.call(this),this.$37$(),this.$38$(),this.addDashProperties(),this.addArcProperties()},j.prototype.$14$=function(){this.addStyleComboBox(i("editor.type"),"shape",lj.consts.shapes.slice(1),lj.consts.shapeLabels.slice(1),lj.consts.shapeIcons.slice(1),"type")},j.prototype.$37$=function(){this.addTitle("TitleBackground"),this.addStyleColor(i("editor.background"),"shape.background","background"),this.addStyleImage(i("editor.repeatimage"),"shape.repeat.image","repeatImage"),this.addStyleGradient(i("editor.gradient"),"shape.gradient","shape.background","shape.gradient.color","gradient"),this.addStyleColor(i("editor.gradientcolor"),"shape.gradient.color","gradientColor"),this.addStyleZeroToOne(i("editor.clippercentage"),"shape.fill.clip.percentage","fillClipPercentage"),this.addStyleComboBox(i("editor.clipdirection"),"shape.fill.clip.direction",lj.consts.clipDirections,lj.consts.clipDirectionLabels,null,"fillClipDirection")},j.prototype.$38$=function(){this.addTitle("TitleBorder"),this.addStyleInput(i("editor.width"),"shape.border.width","number",1,"borderWidth"),this.addStyleCheckBox(i("editor.widthabsolute"),"shape.border.width.absolute","borderWidthAbsolute"),this.addStyleColor(i("editor.color"),"shape.border.color","borderColor"),this.addStylePattern(i("editor.pattern"),"shape.border.pattern","borderPattern"),this.addStyleCheckBox(i("editor.threed"),"shape.border.3d","border3d"),this.addStyleColor(i("editor.threedcolor"),"shape.border.3d.color","border3dColor"),this.addStyleComboBox(i("editor.cap"),"shape.border.cap",lj.consts.caps,lj.consts.capLabels,null,"borderCap"),this.addStyleComboBox(i("editor.join"),"shape.border.join",lj.consts.joins,lj.consts.joinLabels,null,"borderJoin"),this.addStyleInput(i("editor.depth"),"shape.depth","int",1,"depth").items.tag="shapeDepth",this.addStyleInput(i("editor.radius"),"shape.corner.radius","number",1,"cornerRadius").items.tag="shapeCornerRadius",this.addStyleInput(i("editor.sides"),"shape.polygon.side","int",1,"polygonSide").items.tag="shapePolygonSide"},j.prototype.addDashProperties=function(){this.addTitle("TitleDash"),this.addStyleCheckBox(i("editor.dash"),"shape.dash","dash"),this.addStylePattern(i("editor.pattern"),"shape.dash.pattern","dashPattern"),this.addStyleColor(i("editor.color"),"shape.dash.color","dashColor"),this.addStyleInput(i("editor.offset"),"shape.dash.offset","number",1,"dashOffset"),this.addStyleInput(i("editor.width"),"shape.dash.width","number",1,"dashWidth"),this.addStyleCheckBox(i("editor.threed"),"shape.dash.3d","dash3d"),this.addStyleColor(i("editor.threedcolor"),"shape.dash.3d.color","dash3dColor")},j.prototype.addArcProperties=function(){this.addTitle("TitleArc"),this.addStyleCheckBox(i("editor.arcoval"),"shape.arc.oval","arcOval"),this.addStyleCheckBox(i("editor.closed"),"shape.arc.close","arcClose"),this.addStyleRotation(i("editor.arcfrom"),"shape.arc.from","arcFrom"),this.addStyleRotation(i("editor.arcto"),"shape.arc.to","arcTo")},j}(ai),ci=function(t){function j(C,k){return Ij(this,j),hj(this,t.call(this,C,k))}return gj(j,t),j.prototype.initForm=function(){t.prototype.initForm.call(this),this.addTitle("TitleImage");var j=[];this.addLabelImage(j,i("editor.name"),function(t){return t.s("image")},function(t,j){
dt(j)&&j.endsWith("[...]")||t.s("image",j)}),this.addButton(j,null,i("editor.resetsize"),"editor.resetsize.state",function(t){t instanceof ht.Node&&t.setSize(-1,-1)}),this.addFuncRow(j,"image","name"),this.addStyleColor(i("editor.color"),"body.color","color"),this.addStyleStretch(i("editor.stretch"),"image.stretch","stretch")},j}(ai),fi=function(t){function j(C,k){return Ij(this,j),hj(this,t.call(this,C,k))}return gj(j,t),j.prototype.initForm=function(){t.prototype.initForm.call(this),this.$44$()},j.prototype.$44$=function(){this.addTitle("TitleBorder"),this.addStyleInput(i("editor.width"),"border_width","number",1,"border"),this.addStyleColor(i("editor.color"),"border_color","color")},j}(ai),Ri=function(t){function j(C,k){return Ij(this,j),hj(this,t.call(this,C,k))}return gj(j,t),j.prototype.initForm=function(){t.prototype.initForm.call(this),this.addBasicChartProperties()},j.prototype.addBasicChartProperties=function(){this.addTitle("TitleChart"),this.addStyleCheckBox(i("editor.text"),"chart.label","label"),this.addStyleColor(i("editor.color"),"chart.label.color","labelColor"),this.addStyleFont(i("editor.font"),"chart.label.font","labelFont")},j}(ai),di=function(t){function j(C,k){return Ij(this,j),hj(this,t.call(this,C,k))}return gj(j,t),j.prototype.initForm=function(){t.prototype.initForm.call(this),this.addPieChartProperties()},j.prototype.addBasicChartProperties=function(){t.prototype.addBasicChartProperties.call(this),this.addStyleRotation(i("editor.rotation"),"chart.start.angle","startAngle"),this.addStyleCheckBox(i("editor.hollow"),"chart.hollow","hollow")},j.prototype.createChartIndexColumn=function(t){var j=this;return{name:t,width:50,align:"center",editable:!0,sortable:!1,clickable:!1,getValueType:function(t){return"chart.values"===t.getTag()?"number":"color"},getValue:function(C){if(j.data){var k=j.data.s(C.getTag());return k?k[t]:void 0}},setValue:function(C,k,i,U){var K=C.getTag(),y=function(j,C){var k=kj(j.s(K));k[t]=C,"chart.values"===K?jj(k):Cj(k),j.s(K,k)};j.setValue(y,i)}}},j.prototype.addPieChartProperties=function(){var t=this,j=this.tableModel=new ht.DataModel,C=this.tablePane=new oC(j),k=this.tableView=C.getTableView();C.getTableHeader().setMovable(!1),k.setEditable(!0),k.isEditable=function(){return t.editor.editable},C.getView().style.border=lj.config.color_line+" solid 1px";var U=[C];this.addRow(U,[.1],ht.Default.widgetRowHeight+4*k.getRowHeight()).keys={name:"chartTable"};var K=new ht.Data,y=new ht.Data;K.setTag("chart.values"),y.setTag("chart.colors"),j.add(K),j.add(y),this.updateHandlers.push(function(){if(!U.hidden&&t.data){k.getColumnModel().clear(),C.addColumns([{name:i("editor.length"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,valueType:"int",getValue:function(j){if(!t.data)return 0;var C=t.data.s("chart.values");return C?C.length:0},setValue:function(j,C,k,i){var U=function(t,j){if(j>=0){var C=kj(t.s("chart.values"),j);jj(C),t.s("chart.values",C),C=kj(t.s("chart.colors"),j),Cj(C),t.s("chart.colors",C)}};t.setValue(U,k)}},{tag:"binding",name:i("editor.binding"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,isCellEditable:function(j,k,i,U){var K="chart.values"===j.getTag()?"values":"colors";return t.editor.funcView.toggle(C,j.getTag(),K,t),!1},drawCell:function(j,C,k,i,U,K,y,L,X){var u=!!t.data.a(C.getTag());I(j,ht.Default.getImage(u?"editor.bind":"editor.unbind"),"centerUniform",U,K,y,L,C,X,u&&!k?lj.config.color_select:lj.config.color_dark)}}]);for(var j=t.data.s("chart.values"),K=j?j.length:0,y=0;y<K;y++)C.addColumns([t.createChartIndexColumn(y)])}})},j}(Ri),$i=function(t){function j(C,k){return Ij(this,j),hj(this,t.call(this,C,k))}return gj(j,t),j.prototype.initForm=function(){t.prototype.initForm.call(this),this.addOneDimensionalProperties()},j.prototype.createChartIndexColumn=function(t){var j=this;return{name:t,width:50,align:"center",editable:!0,sortable:!1,clickable:!1,getValueType:function(t){return"values"===t.getTag()?"number":"color"},getValue:function(C){if(j.data){var k=Yt(j.data.s("chart.series"));if(k&&k[0]){var i=Yt(k[0][C.getTag()]);return i?i[t]:void 0}}},setValue:function(k,i,U,K){var y=k.getTag(),L=function(j,k){var i=j.s("chart.series");if(i){var U=C(i),K=Yt(U);if(K[0]){var L=Yt(K[0][y]);L&&L[t]!==k&&(L[t]=k,"values"===y?jj(L):Cj(L),j.s("chart.series",U))}}};j.setValue(L,U)}}},j.prototype.addOneDimensionalProperties=function(){var t=this,j=this.tableModel=new ht.DataModel,k=this.tablePane=new oC(j),U=this.tableView=k.getTableView();k.getTableHeader().setMovable(!1),U.setEditable(!0),U.isEditable=function(){return t.editor.editable},k.getView().style.border=lj.config.color_line+" solid 1px";var K=[k];this.addRow(K,[.1],ht.Default.widgetRowHeight+4*U.getRowHeight()).keys={name:"chartTable"};var y=new ht.Data,L=new ht.Data;y.setTag("values"),L.setTag("colors"),j.add(y),j.add(L),this.updateHandlers.push(function(){if(!K.hidden&&t.data){U.getColumnModel().clear(),k.addColumns([{name:i("editor.length"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,valueType:"int",getValue:function(j){if(!t.data)return 0;var C=Yt(t.data.s("chart.series"));if(!C)return 0;if(!C[0])return 0;var k=Yt(C[0].values);return k?k.length:0},setValue:function(j,k,i,U){var K=function(t,j){if(j>=0){var k=t.s("chart.series"),i=k?C(k):[],U=Yt(i);U[0]||(U[0]={});var K=U[0];K.values||(K.values=[]),K.colors||(K.colors=[]);var y=Yt(K.values),L=Yt(K.colors);j===y.length&&j===L.length||(y.length=j,L.length=j,jj(y),Cj(L),t.s("chart.series",i))}};t.setValue(K,i)}},{tag:"binding",name:i("editor.binding"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,isCellEditable:function(j,i,U,K){var y=j.getTag(),L=function(){return oj(t.data,y)},X=function(j){t.setValue(function(t,k){var i=t.s("chart.series");if(i){var U=C(i),K=Yt(U);if(K[0]){var L=Yt(K[0][y]);K[0][y]=j?{value:L,func:j}:L,t.s("chart.series",U)}}},j)};return t.editor.funcView.toggle(k,y,y,t,L,X),!1},drawCell:function(j,C,k,i,U,K,y,L,X){var u=!!oj(t.data,C.getTag());I(j,ht.Default.getImage(u?"editor.bind":"editor.unbind"),"centerUniform",U,K,y,L,C,X,u&&!k?lj.config.color_select:lj.config.color_dark)}}]);for(var j=xj(t.data,"values"),y=j?j.length:0,L=0;L<y;L++)k.addColumns([t.createChartIndexColumn(L)])}})},j}(Ri),mi=function(t){function j(C,k){return Ij(this,j),hj(this,t.call(this,C,k))}return gj(j,t),j.prototype.initForm=function(){t.prototype.initForm.call(this),this.addSeriesChartProperties()},j.prototype.addSeriesChartProperties=function(){var t=this,j=[],k=function(t){var j=t.s("chart.series");return j?j.length:0},U=function(t,j){if(j>=0){var k=t.s("chart.series"),i=k?C(k):[],U=Yt(i);if(U.length!==j){U.length=j;for(var K=void 0,y=0;y<j;y++){U[y]||(U[y]={});var L=U[y];L.values||(L.values=[]),L.color||(L.color=ht.Color.chart[y%ht.Color.chart.length]);var X=Yt(L.values);Yt(L.colors);0===y?K=X.length:X.length=K,jj(X)}t.s("chart.series",i)}}};this.addLabelInput(j,i("editor.series"),k,U,"int",1),k=function(t){var j=t.s("chart.series");if(j){var C=j[0];if(C){var k=Yt(C.values);return k?k.length:0}}return 0},U=function(t,j){if(j>=0){var k=t.s("chart.series"),i=k?C(k):[],U=Yt(i);if(U.length){for(var K=0;K<U.length;K++){U[K]||(U[K]={});var y=U[K];y.values||(y.values=[]);var L=Yt(y.values);if(L.length===j)return;y.color||(y.color=ht.Color.chart[K%ht.Color.chart.length]);Yt(y.colors);L.length=j,jj(L)}t.s("chart.series",i)}}},this.addLabelInput(j,i("editor.length"),k,U,"int",1),this.addRow(j,[lj.config.indent,.1,lj.config.indent2,.1]).keys={name:"chartSeries"};var K=this.tableModel=new ht.DataModel,y=this.tablePane=new oC(K),L=this.tableView=y.getTableView();y.getTableHeader().setMovable(!1),L.setEditable(!0),L.isEditable=function(){return t.editor.editable},y.getView().style.border=lj.config.color_line+" solid 1px";var X=[y];this.addRow(X,[.1],160).keys={name:"chartTable"},this.updateHandlers.push(function(){if(!X.hidden&&t.data){K.clear(),L.getColumnModel().clear();var j=t.data.s("chart.series");if(j)for(var k=0;k<j.length;k++){var U=new ht.Data;U.serie=j[k],U.index=k,K.add(U)}if(y.addColumns([{name:i("editor.index"),width:50,align:"center",sortable:!1,clickable:!1,valueType:"int",getValue:function(t){return t.index}},{tag:"binding",name:i("editor.colorbinding"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,isCellEditable:function(j,k,i,U){var K=j.index,L=function(){return pt(j.serie.color)},X=function(j){t.setValue(function(t,k){var i=t.s("chart.series");if(i){var U=C(i),y=Yt(U),L=y[K];if(L){var X=Yt(L.color);L.color=j?{value:X,func:j}:X,t.s("chart.series",U)}}},j)};return t.editor.funcView.toggle(y,"values","values",t,L,X),!1},drawCell:function(t,j,C,k,i,U,K,y,L){var X=!!pt(j.serie.color);I(t,ht.Default.getImage(X?"editor.bind":"editor.unbind"),"centerUniform",i,U,K,y,j,L,X&&!C?lj.config.color_select:lj.config.color_dark)}},{name:i("editor.color"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,valueType:"color",getValue:function(t){return Yt(t.serie.color)},setValue:function(j,k,i,U){var K=j.index,y=Yt(j.serie.color);if(i&&y!==i){var L=function(t,j){var k=t.s("chart.series");if(k){var i=C(k),U=Yt(i),y=U[K];if(y){var L=pt(y.color);y.color=L?{value:j,func:L}:j,t.s("chart.series",i)}}};t.setValue(L,i)}}},{tag:"binding",name:i("editor.valuebinding"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,isCellEditable:function(j,k,i,U){var K=j.index,L=function(){return pt(j.serie.values)},X=function(j){t.setValue(function(t,k){var i=t.s("chart.series");if(i){var U=C(i),y=Yt(U),L=y[K];if(L){var X=Yt(L.values);L.values=j?{value:X,func:j}:X,t.s("chart.series",U)}}},j)};return t.editor.funcView.toggle(y,"values","values",t,L,X),!1},drawCell:function(t,j,C,k,i,U,K,y,L){var X=!!pt(j.serie.values);I(t,ht.Default.getImage(X?"editor.bind":"editor.unbind"),"centerUniform",i,U,K,y,j,L,X&&!C?lj.config.color_select:lj.config.color_dark)}}]),j){var u=j[0];if(u){var a=Yt(u.values);if(a)for(var B=0;B<a.length;B++)y.addColumns([t.createChartIndexColumn(B)])}}}})},j.prototype.createChartIndexColumn=function(t){var j=this;return{name:t,width:50,align:"center",editable:!0,sortable:!1,clickable:!1,valueType:"number",getValue:function(j){var C=Yt(j.serie.values);return C?C[t]:void 0},setValue:function(k,i,U,K){var y=k.index,L=function(j,k){var i=j.s("chart.series");if(i){var U=C(i),K=Yt(U);if(K[y]){var L=Yt(K[y].values);L&&L[t]!==k&&(L[t]=k,j.s("chart.series",U))}}};j.setValue(L,U)}}},j}(Ri),Di=function(t){function j(C,k){return Ij(this,j),hj(this,t.call(this,C,k))}return gj(j,t),j.prototype.addBasicChartProperties=function(){t.prototype.addBasicChartProperties.call(this),this.addStyleComboBox(i("editor.type"),"chart.type",lj.consts.columnChartTypes,lj.consts.columnChartTypeLabels,null,"type")},j.prototype.$14$=function(){},j}(mi),bi=function(t){function j(C,k){return Ij(this,j),hj(this,t.call(this,C,k))}return gj(j,t),j.prototype.initForm=function(){t.prototype.initForm.call(this)},j}(mi),Ji=function(t){function j(C,k){return Ij(this,j),hj(this,t.call(this,C,k))}return gj(j,t),j.prototype.initForm=function(){this.$27$(),t.prototype.initForm.call(this)},j.prototype.isTitleVisible=function(j){return!("TitleEditingPoint"===j.title&&!this.editor.pointsEditingMode)&&t.prototype.isTitleVisible.call(this,j)},j.prototype.$14$=function(){var t=[];this.addLabelInput(t,i("editor.type"),function(t){return t.compType}),this.addRow(t,[lj.config.indent,.1]).keys={name:"type"}},j.prototype.$37$=function(){t.prototype.$37$.call(this),this.addStyleComboBox(i("editor.fillrule"),"shape.fill.rule",lj.consts.fillRules,lj.consts.fillRuleLabels,null,"fillRule")},j.prototype.$38$=function(){t.prototype.$38$.call(this);var j=[];this.addLabelCheckBox(j,i("editor.closed"),function(t){return t.isClosePath()},function(t,j){t instanceof ht.Shape&&t.setClosePath(j)}),this.addFuncRow(j,"name")},j}(Bi),vi=function(t){function j(C,k){return Ij(this,j),hj(this,t.call(this,C,k))}return gj(j,t),j.prototype.initForm=function(){t.prototype.initForm.call(this),this.addTitle("TitleText"),this.addStyleLabel(i("editor.text"),"text","text"),this.addStyleAlign(i("editor.align"),"text.align","align"),this.addStyleVAlign(i("editor.valign"),"text.vAlign","vAlign"),this.addStyleColor(i("editor.color"),"text.color","color"),this.addStyleFont(i("editor.font"),"text.font","font")},j.prototype.$20$=function(){this.addTitle("TitleShadow"),this.addStyleCheckBox(i("editor.shadow"),"text.shadow","shadow"),this.addStyleColor(i("editor.shadowcolor"),"text.shadow.color","shadowColor"),this.addStyleInput(i("editor.shadowblur"),"text.shadow.blur","number",1,"shadowblur"),this.addStyleInput(i("editor.shadowoffsetx"),"text.shadow.offset.x","number",1,"shadowOffsetX"),this.addStyleInput(i("editor.shadowoffsety"),"text.shadow.offset.y","number",1,"shadowOffsetYs")},j}(ai),Hi=function(t){function j(C,k){return Ij(this,j),hj(this,t.call(this,C,k))}return gj(j,t),j.prototype.$14$=function(){var t=[];this.addLabelInput(t,i("editor.type"),function(t){return"function"}),this.addFuncRow(t,"type")},j}(ai),Gi=function(t){function j(C,k){return Ij(this,j),hj(this,t.call(this,C,k))}return gj(j,t),j.prototype.initForm=function(){t.prototype.initForm.call(this),this.addComponent()},j.prototype.$14$=function(){},j.prototype.addComponent=function(){var t=this;this.addTitle("TitleComponent");var j=[];j.forceToUpdate=!0;var C=function(t,j){return!!j.view.draggingData&&j.view.draggingData.fileType===yC};this.addLabelURL(j,i("editor.type"),function(j){var C=j.s("type");return t.$43$(j.properties),C},function(t,j){t.s("type",j)},C);var k=new ht.widget.Image;k.vectorDataBindingDisabled=!0,this.updateHandlers.push(function(){if(!j.hidden){var C=t.data?t.data.s("type"):null;t.$43$(t.data.properties),k.setIcon(C?Rt(C):null),k.compType=C}});var U=k.getView();U.style.cursor="pointer";var K=function(j){j.preventDefault(),J(j)?t.editor.open(k.compType):t.editor.selectFileNode(k.compType)};U.addEventListener("mousedown",K,!1),U.addEventListener("touchstart",K,!1),j.push(k),this.addFuncRow(j,"type")},j.prototype.$43$=function(t){var j=this;this.properties!==t&&(this.pendingProperties=t,this._updateComponentLater||(this._updateComponentLater=!0,requestAnimationFrame(function(){j.$61$()})))},j.prototype.$61$=function(){if(this._updateComponentLater=!1,this.properties===this.pendingProperties)return void(this.pendingProperties=null);if(this._rows=this.$47$,this.removeRows(this.$36$),this.propertiesHandlers&&this.propertiesHandlers.length&&this.propertiesHandlers.forEach(this.removeUpdateHandler,this),this.$36$=[],this.properties=this.pendingProperties,this.properties){var t=this.updateHandlers.length,j=void 0;for(var C in this.properties){var k=this.properties[C];if(k.group&&j!==k.group){j=k.group;var i=this.addTitle(j);this.$36$.push(i)}this.addProperty(C,k)}this.propertiesHandlers=this.updateHandlers.slice(t)}this.$47$=this._rows,this.filterProperties()},j.prototype.addProperty=function(t,j){var C=lj.config.valueTypes[j.valueType];if(!C)return this.editor.fireEvent("error",{message:"Wrong value type:"+j.valueType}),!1;var k=i(j.name)||t,U=void 0,K=void 0,y=void 0;if(j.extraInfo&&j.extraInfo.enum&&(U=j.extraInfo.enum.values,K=j.extraInfo.enum.labels,y=j.extraInfo.enum.icons),j.extraInfo&&j.extraInfo.buildUI){var L=function(j){return j.s(t)},X=function(j,C){j.s(t,C)},u=[];j.extraInfo.buildUI(this,u,displayName,L,X),this.addFuncRow(u,t,t)}else if(U)this.addStyleComboBox(k,t,U,K,y,t);else if("int"===C.type||"number"===C.type){var a=(C.max,C.min,function(j){return j.s(t)}),B=function(j,C){j.s(t,C)},c=[];C.angle?this.addLabelRotation(c,k,a,B,C.min,C.max,C.step):this.addLabelRange(c,k,a,B,C.min,C.max,C.step,C.type),this.addFuncRow(c,t,t)}else if("color"===C.type)this.addStyleColor(k,t,t);else if("boolean"===C.type)this.addStyleCheckBox(k,t,t);else if("enum"===C.type)this.addStyleComboBox(k,t,C.values,C.labels,C.icons,t);else if("multiline"===C.type)this.addStyleMultiline(k,t,t,C.rows);else if("font"===C.type)this.addStyleFont(k,t,t,C.rows);else if("image"===C.type)this.addStyleImage(k,t,t);else if("url"===C.type)this.addStyleURL(k,t,t);else if("colorArray"===C.type)this.addStyleArray(k,t,t,"color",C.rows);else if("numberArray"===C.type)this.addStyleArray(k,t,t,"number",C.rows);else if("stringArray"===C.type)this.addStyleArray(k,t,t,"string",C.rows);else if("objectArray"===C.type)this.addStyleArray(k,t,t,"object",C.rows);else if("function"===C.type){var f=void 0;j.extraInfo&&j.extraInfo.arguments&&(f=j.extraInfo.arguments),this.addStyleFunction(k,t,t,f)}else if("custom"===C.type){var R=function(j){return j.s(t)},d=function(j,C){j.s(t,C)},$=[];C.buildUI(this,$,k,R,d),this.addFuncRow($,t,t)}else"object"===C.type?this.addStyleObject(k,t,t):this.addStyleInput(k,t,null,null,t);return this.$36$.push(this._rows[this._rows.length-1]),!0},j}(ai),Zi=function(t){function j(C,k){return Ij(this,j),hj(this,t.call(this,C,k))}return gj(j,t),j.prototype.initForm=function(){this.$27$(),this.addTitle("TitleBasic"),this.$14$(),this.$15$()},j.prototype.isTitleVisible=function(j){return!("TitleEditingPoint"===j.title&&!this.editor.pointsEditingMode)&&t.prototype.isTitleVisible.call(this,j)},j}(ai),qi=function(t){function j(C,k){return Ij(this,j),hj(this,t.call(this,C,k))}return gj(j,t),j.prototype.initForm=function(){this.addTitle("TitleBasic"),this.$14$(),this.$15$()},j}(ai),Ai=function(t){function j(C){Ij(this,j);var k=hj(this,t.call(this));return k.editor=C,k.getView().style.background=lj.config.color_pane,k}return gj(j,t),j.prototype.handleDataModelPropertyChange=function(t){var j=this.inspector;j&&j.global&&j.$35$(t)},j.prototype.handleDataModelChange=function(t){var j=this.inspector;j&&j.global&&j.$35$()},j.prototype.handleDataPropertyChange=function(t){var j=this.inspector;j&&!j.global&&j.data===t.data&&j.$35$(t)},j.prototype.handleSelectionChange=function(t){this.updateInspector(),this.inspector&&this.inspector.updateProperties()},j.prototype.$42$=function(t){var j=this.inspector;j&&("pointsEditingMode"===t.property?j.filterPropertiesLater():"shapePointStatus"===t.property&&j.editingPointButtons&&j.editingPointButtons.forEach(function(j){j.setSelected(j.statusValue===t.newValue),j.setBorderColor(j.isSelected()?lj.config.color_line:null)}))},j.prototype.$6$=function(t){this.dataModel&&(this.dataModel.removeDataModelChangeListener(this.handleDataModelChange,this),this.dataModel.removePropertyChangeListener(this.handleDataModelPropertyChange,this),this.dataModel.removeDataPropertyChangeListener(this.handleDataPropertyChange,this),this.dataModel.sm().ums(this.handleSelectionChange,this),this.currentView.graphView.getEditInteractor().ump(this.$42$,this)),t?(this.currentView=t.getView(),this.dataModel=this.currentView.dm,this.dataModel.addDataModelChangeListener(this.handleDataModelChange,this),this.dataModel.addPropertyChangeListener(this.handleDataModelPropertyChange,this),this.dataModel.addDataPropertyChangeListener(this.handleDataPropertyChange,this),this.dataModel.sm().ms(this.handleSelectionChange,this),this.currentView.graphView.getEditInteractor().mp(this.$42$,this)):(this.currentView=null,this.dataModel=null),this.$95$()},j.prototype.$95$=function(){var t=this;this._updateInspectorLater||(this._updateInspectorLater=!0,requestAnimationFrame(function(){t.updateInspector()}))},j.prototype.getDataOfDisplayInspector=function(t){return t instanceof ht.Shape?this.htShapeInspector:t instanceof ht.Edge?this.htEdgeInspector:t instanceof ht.Group?this.htGroupInspector:t instanceof ht.Text?this.htTextInspector:t instanceof ht.RefGraph?this.htRefGraphInspector:t instanceof ht.Block?this.htBlockInspector:t instanceof ht.Node?this.htNodeInspector:this.htDataInspector},j.prototype.getCompOfSymbolInspector=function(t){if(t instanceof qC)return this.clipInspector;if(t instanceof AC)return this.restoreInspector;if(t instanceof vC)return this.basicInspector;if(t instanceof Kk)return this.borderInspector;if(t instanceof GC)return this.imageInspector;if(t instanceof yk)return this.pieChartInspector;if(t instanceof Lk){var j=Yt(t.s("chart.series"));return j&&j.length<=1&&j[0].colors?this.oneDimensionalColumnChartInspector:this.columnChartInspector}return t instanceof Xk?this.lineChartInspector:t instanceof HC?this.shapeInspector:t instanceof ZC?this.textInspector:t instanceof Jk?this.funcTypeInspector:t instanceof Uk?this.compTypeInspector:null},j.prototype.updateInspector=function(){if(this._updateInspectorLater=!1,this.dataModel){var t=this.dataModel.sm().ld();t?this.currentView instanceof Hk?this.inspector=this.getCompOfSymbolInspector(t):this.currentView instanceof dk?this.inspector=this.getDataOfDisplayInspector(t):this.currentView instanceof lj.SceneView&&(this.inspector=this.getDataOfSceneInspector(t)):this.currentView instanceof Hk?this.inspector=this.symbolInspector:this.currentView instanceof dk?this.inspector=this.displayInspector:this.currentView instanceof lj.SceneView&&(this.inspector=this.sceneInspector)}else this.inspector=null},_j(j,[{key:"basicInspector",get:function(){return this._basicInspector||(this._basicInspector=new Bi(this.editor,"basic")),this._basicInspector}},{key:"borderInspector",get:function(){return this._borderInspector||(this._borderInspector=new fi(this.editor,"border")),this._borderInspector}},{key:"clipInspector",get:function(){return this._clipInspector||(this._clipInspector=new Zi(this.editor,"clip")),this._clipInspector}},{key:"restoreInspector",get:function(){return this._restoreInspector||(this._restoreInspector=new qi(this.editor,"restore")),this._restoreInspector}},{key:"imageInspector",get:function(){return this._imageInspector||(this._imageInspector=new ci(this.editor,"image")),this._imageInspector}},{key:"pieChartInspector",get:function(){return this._pieChartInspector||(this._pieChartInspector=new di(this.editor,"pieChart")),this._pieChartInspector}},{key:"oneDimensionalColumnChartInspector",get:function(){return this._oneDimensionalColumnChartInspector||(this._oneDimensionalColumnChartInspector=new $i(this.editor,"oneDimensionalColumnChartInspector")),this._oneDimensionalColumnChartInspector}},{key:"columnChartInspector",get:function(){return this._columnChartInspector||(this._columnChartInspector=new Di(this.editor,"columnChart")),this._columnChartInspector}},{key:"lineChartInspector",get:function(){return this._lineChartInspector||(this._lineChartInspector=new bi(this.editor,"lineChart")),this._lineChartInspector}},{key:"shapeInspector",get:function(){return this._shapeInspector||(this._shapeInspector=new Ji(this.editor,"shape")),this._shapeInspector}},{key:"textInspector",get:function(){return this._textInspector||(this._textInspector=new vi(this.editor,"text")),this._textInspector}},{key:"funcTypeInspector",get:function(){return this._funcTypeInspector||(this._funcTypeInspector=new Hi(this.editor,"func")),this._funcTypeInspector}},{key:"compTypeInspector",get:function(){return this._compTypeInspector||(this._compTypeInspector=new Gi(this.editor,"comp")),this._compTypeInspector}},{key:"htShapeInspector",get:function(){return this._htShapeInspector||(this._htShapeInspector=new yi(this.editor,"Shape")),this._htShapeInspector}},{key:"htBlockInspector",get:function(){return this._htBlockInspector||(this._htBlockInspector=new Li(this.editor,"Block")),this._htBlockInspector}},{key:"htRefGraphInspector",get:function(){return this._htRefGraphInspector||(this._htRefGraphInspector=new Xi(this.editor,"RefGraph")),this._htRefGraphInspector}},{key:"htGroupInspector",get:function(){return this._htGroupInspector||(this._htGroupInspector=new Ki(this.editor,"Group")),this._htGroupInspector}},{key:"htEdgeInspector",get:function(){return this._htEdgeInspector||(this._htEdgeInspector=new Ui(this.editor,"Edge")),this._htEdgeInspector}},{key:"htNodeInspector",get:function(){return this._htNodeInspector||(this._htNodeInspector=new Ci(this.editor,"Node")),this._htNodeInspector}},{key:"htTextInspector",get:function(){return this._htTextInspector||(this._htTextInspector=new ui(this.editor,"Text")),this._htTextInspector}},{key:"htDataInspector",get:function(){return this._htDataInspector||(this._htDataInspector=new ti(this.editor,"Data")),this._htDataInspector}},{key:"displayInspector",get:function(){return this._displayInspector||(this._displayInspector=new Vk(this.editor,"display")),this._displayInspector}},{key:"symbolInspector",get:function(){return this._symbolInspector||(this._symbolInspector=new lk(this.editor,"symbol")),this._symbolInspector}},{key:"inspector",get:function(){return this.getCenterView()},set:function(t){var j=this.getCenterView();t?(t.dataModel=this.dataModel,this.dataModel&&(t.data=this.dataModel.sm().ld()),this.getCenterView()!==t&&this.setCenterView(t),t.filterPropertiesLater()):this.setCenterView(null),t===j||null==t&&null==j||this.editor.fireEvent("inspectorUpdated",{inspector:t,oldInspector:j})}}]),j}(zC),zi=function(){function t(j){Ij(this,t),this.editor=j}return t.prototype.showTip=function(t,j){this.tip.innerHTML=t,this.tip.parentNode!==document.body&&ht.Default.appendToScreen(this.tip);var C=Z(j);this.tip.style.left=C.x+15+"px",this.tip.style.top=C.y+"px"},t.prototype.hideTip=function(){r(this.tip)},t.prototype.clearDropView=function(t,j){this._dropView&&(this._dropView.handleCrossDrag(t,"exit",j),this._dropView=null)},t.prototype.crossDrag=function(t,j){var C=this._dropView,k=this.$96$(t,j);C!==k?(C&&C.handleCrossDrag(t,"exit",j),k&&k.handleCrossDrag(t,"enter",j)):k&&k.handleCrossDrag(t,"over",j),this._dropView=k},t.prototype.crossDrop=function(t,j){this._dropView&&(this._dropView.handleCrossDrag(t,"drop",j),this._dropView=null)},t.prototype.crossCancel=function(t,j){this._dropView&&(this._dropView.handleCrossDrag(t,"cancel",j),this._dropView=null)},t.prototype.$96$=function(t,j){for(var C=G(t);C&&!(C._ht&&C._ht.isDroppable&&C._ht.isDroppable(t,j));)C=C.parentNode;return C?C._ht:null},_j(t,[{key:"tip",get:function(){if(!this._tip){this._tip=O(),this._tip.className="ht-editor-dnd-tip";var t=this._tip.style;t.whiteSpace="nowrap",t.color=lj.config.color_light,t.background=lj.config.color_transparent,t.font=ht.Default.labelFont,t.padding="4px",t.borderRadius="4px",t.position="absolute",t.zIndex=1e4}return this._tip}}]),t}(),Ti=function(){function t(j,C){Ij(this,t),this.editor=j,this.dnd=j.dnd,this._dragInfo={view:this},C&&(C.addEventListener("dragenter",this.handle_dragenter.bind(this),!1),C.addEventListener("dragover",this.handle_dragover.bind(this),!1),C.addEventListener("dragleave",this.handle_dragleave.bind(this),!1),C.addEventListener("drop",this.handle_drop.bind(this),!1),C.addEventListener("dragexit",this.handle_dragexit.bind(this),!1),C.addEventListener("dragend",this.handle_dragend.bind(this),!1)),this.isDroppableToDisplayView=!0,this.isDroppableToSymbolView=!0}return t.prototype.handle_dragenter=function(t){V(t),t.stopPropagation(),this.dnd.crossDrag(t,this._dragInfo)},t.prototype.handle_dragover=function(t){V(t),t.stopPropagation(),this.dnd.crossDrag(t,this._dragInfo)},t.prototype.handle_dragleave=function(t){V(t),t.stopPropagation(),this.dnd.crossCancel(t,this._dragInfo)},t.prototype.handle_dragexit=function(t){V(t),t.stopPropagation(),this.dnd.crossCancel(t,this._dragInfo)},t.prototype.handle_dragend=function(t){V(t),t.stopPropagation(),this.dnd.crossCancel(t,this._dragInfo)},t.prototype.handle_drop=function(t){V(t),t.stopPropagation(),this.dnd.crossDrop(t,this._dragInfo)},t}(),Ei=function(t){function j(C){Ij(this,j);var k=hj(this,t.call(this));return k.editor=C,k}return gj(j,t),j.prototype.init=function(){var t=this,j=this.contentDiv=ht.Default.createDiv();j.style.lineHeight="28px",j.style.textAlign="center",j.style.fontSize="14px",j.style.color=ht.Default.labelColor,this.setConfig({closable:!0,draggable:!0,width:320,height:120,content:j,buttons:[{label:i("editor.yes"),action:function(){t.onYes&&t.onYes(),t.hide()}},{label:i("editor.no"),action:function(){t.onNo&&t.onNo(),t.hide()}},{label:i("editor.cancel"),action:function(){t.hide()}}]}),this._init=!0},j.prototype.show=function(){var j=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i("editor.tooltip"),C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",k=arguments[2],U=arguments[3];this._init||this.init(),this.setTitle(j),this.contentDiv.innerHTML=C,this.onYes=k,this.onNo=U,t.prototype.show.call(this)},j}(Wj),si=function(){function t(j){Ij(this,t),this.params=j||{},this.$39$=this.params.$39$,this._eventNotifier=new ht.Notifier;var C=ht.Default.getClass(lj.config.serviceClass)||YC;this.$40$=new C(this.handleServiceEvent.bind(this),this),this.emptyFunc=function(){}}return t.prototype.addEventListener=function(t,j,C){this._eventNotifier.add(t,j,C)},t.prototype.removeEventListener=function(t,j){this._eventNotifier.remove(t,j)},t.prototype.fireViewEvent=function(t,j,C){var k=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];C=C||{},t.sceneView?(k&&(j="sceneView"+j),C.sceneView=t.sceneView):"symbol"===t.type?(k&&(j="symbolView"+j),C.symbolView=t):"display"===t.type?(k&&(j="displayView"+j),C.displayView=t):"scene"===t.type&&(k&&(j="sceneView"+j),C.sceneView=t),this.fireEvent(j,C)},t.prototype.fireEvent=function(t,j){j=j||{},lj.config.handleEvent&&lj.config.handleEvent(this,t,j);var C="on"+t.charAt(0).toUpperCase()+t.slice(1);lj.config[C]&&lj.config[C](this,j),this.params&&this.params[C]&&this.params[C](this,j),this._eventNotifier.fire({editor:this,type:t,params:j})},t.prototype.handleServiceEvent=function(t){if("connected"===t.type)this.init&&(this.init(),this.init=null);else if("fileChanged"===t.type){var j=t.path;T(j)&&this.$101$(),P(j)?this.requestDisplays():l(j)?this.requestSymbols():tt(j)?this.requestComponents():jt(j)?this.requestScenes():Ct(j)?this.requestModels():kt(j)&&this.requestAssets()}else"download"===t.type?this.downloadFile(t.path):"confirm"===t.type&&this.requestImport(t.path);this.fireEvent(t.type,t)},t.prototype.onPropertyChanged=function(t){"rulerEnabled"!==t.property&&"gridEnabled"!==t.property||this.rightToolbar.iv()},t.prototype.init=function(){this._inspectorCompact=!K(lj.config.compactFilter),this.menus=[],this.cloneInfo={type:null,funcArray:[],jsonArray:[]},this.initSID(),this.$7$(),this.requestDisplays(),this.requestSymbols(),this.requestComponents(),this.requestScenes(),this.requestModels(),this.requestAssets(),this.$39$&&this.$39$.addEventListener("keydown",this.handleKeydown.bind(this),!1),this.dnd=new zi(this),this.dndFromOutside=new Ti(this,this.$39$),this.fireEvent("editorCreated"),this.fireEvent("mainMenuCreated"),this.fireEvent("mainToolbarCreated"),this.fireEvent("rightToolbarCreated");var t=this.params.open||j("hteditor");t&&(Ut(t)?this._pendingOpenJSON=t:"newdisplay"===t?this.newDisplayView():"newsymbol"===t?this.newSymbolView():"newcomponent"===t&&this.newComponent())},t.prototype.$7$=function(){this.mainTabView=new Gk(this),this.funcView=new wk(this),this.eventView=new rk(this),this.functionView=new Yk(this),this.objectView=new pk(this),this.textView=new Mk(this),this.fontView=new Nk(this),this.iconsView=new Sk(this),this.componentView=new xk(this),this.messageView=new Ik(this),this.confirmView=new Ei(this),this.attachPointsView=new _k(this),this.fontConverterOptionView=new gk(this),this.$8$(),this.$9$(),this.$11$(),this.$10$(),this.leftSplitView=new xC(this.leftTopTabView,this.mainTabView,"h",lj.config.leftSplitViewPosition),this.rightSplitView=new xC(this.rightTopBorderPane,this.rightBottomTabView,"v",lj.config.rightSplitViewPosition),this.mainSplitView=new xC(this.leftSplitView,this.rightSplitView,"h",lj.config.mainSplitViewPosition),this.mainPane=new zC,this.mainPane.setTopView(this.topBorderPane),this.mainPane.setCenterView(this.mainSplitView),tj(this.mainPane,this.$39$),this.mainPane.validateImpl()},t.prototype.initSID=function(){var t=window.location.href.match("sid=([0-9a-z-]*)");t&&(this.sid=t[1])},t.prototype.$8$=function(){var t=this;this.mainToolbar=new sk(this),this.rightToolbar=new ek(this),this.topBorderPane=new zC,this.topBorderPane.setCenterView(this.mainToolbar),
this.topBorderPane.setRightView(this.rightToolbar),this.topBorderPane.setHeight(28),this.rightToolbar.onSumWidthChanged=function(){t.topBorderPane.setRightWidth(t.rightToolbar.getSumWidth())}},t.prototype.$9$=function(){this.displays=new WC(this,lj.config.displaysEditable),this.symbols=new VC(this,lj.config.symbolsEditable),this.components=new PC(this,lj.config.componentsEditable),this.scenes=new lC(this,lj.config.scenesEditable),this.models=new tk(this,lj.config.modelsEditable),this.assets=new jk(this,lj.config.assetsEditable),this.leftTopTabView=new nC,this.scenesTab=this.leftTopTabView.add(i("editor.scenes"),this.scenes,!1,lj.config.scenesVisible),this.displaysTab=this.leftTopTabView.add(i("editor.displays"),this.displays,!1,lj.config.displaysVisible),this.symbolsTab=this.leftTopTabView.add(i("editor.symbols"),this.symbols,!1,lj.config.symbolsVisible),this.componentsTab=this.leftTopTabView.add(i("editor.components"),this.components,!1,lj.config.componentsVisible),this.modelsTab=this.leftTopTabView.add(i("editor.models"),this.models,!1,lj.config.modelsVisible),this.assetsTab=this.leftTopTabView.add(i("editor.assets"),this.assets,!1,lj.config.assetsVisible),this.leftTopTabView.select(lj.config.scenesVisible?this.scenesTab:this.displaysTab)},t.prototype.$10$=function(){this.inspectorTool=new Zk(this),this.inspectorPane=new Ai(this),this.rightTopBorderPane=new zC,this.rightTopBorderPane.setTopView(this.inspectorTool),this.rightTopBorderPane.setCenterView(this.inspectorPane),this.rightTopBorderPane.setTopHeight(ht.Default.widgetHeaderHeight+6)},t.prototype.$11$=function(){var t=this;this.listPane=new Ak(this),this.layerPane=new zk(this),this.overview=new Ck(this),this.dataView=new qk(this),this.symbolStatePane=new Tk(this),this.rightBottomTabView=new nC,this.listPaneTab=this.rightBottomTabView.add(i("editor.list"),this.listPane,!0),this.layerTab=this.rightBottomTabView.add(i("editor.layer"),this.layerPane,!1,!1),this.symbolStateTab=this.rightBottomTabView.add(i("editor.state"),this.symbolStatePane,!1,!1),this.overviewTab=this.rightBottomTabView.add(i("editor.overview"),this.overview),this.dataViewTab=this.rightBottomTabView.add(i("editor.data"),this.dataView);var j=this.rightBottomTabView.getTabModel().sm();j.ms(function(){var C=j.ld();t.dataView.visible=C.getView()===t.dataView,t.overview.setAutoUpdate(C.getView()===t.overview)})},t.prototype.newFolder=function(t){var j=this,C=this.explorer;if(C){var k=t.sm().ld();t!==t.explorer.list||k&&k.fileType===kC||(k=t.explorer.tree.sm().ld()),k&&!C.isAccordionMode()||(k=t.explorer.rootNode);It(i("editor.inputnewfoldername"),"",{nullable:!1,trim:!0,maxLength:lj.config.maxFileNameLength,checkFunc:lj.config.checkFileName},function(t,U){if("ok"===U){var K=(k?k.url:C.rootDir)+"/"+t;if(j.getFileNode(K))return void _t(i("editor.filenameconflict"),K,function(){});j.request("mkdir",K,function(t){})}})}},t.prototype.getFileNode=function(t){for(var j=this.leftTopTabView.getTabModel().getDatas(),C=0;C<j.size();C++){var k=j.get(C);if(k.getView()instanceof hC){var i=k.getView().dataModel.getDataById(t);if(i)return i}}return null},t.prototype.selectFileNode=function(t){for(var j=this,C=this.leftTopTabView.getTabModel().getDatas(),k=0;k<C.size();k++){var i=C.get(k);if(i.isVisible()&&i.getView()instanceof hC){var U=function(){var C=i.getView(),k=C.dataModel.getDataById(t);if(k)return j.leftTopTabView.getTabModel().sm().ss(i),C.isAccordionMode()?(k.fileType===kC?C.accordion.sm().ss(k):(k.getParent().expanded=!0,C.accordion.sm().ss(k)),C.accordion.ivm()):k.fileType===kC?(C.tree.sm().ss(k),setTimeout(function(){C.tree.makeVisible(k)},500)):(C.tree.sm().ss(k.getParent()),C.list.sm().ss(k),setTimeout(function(){C.tree.makeVisible(k.getParent()),C.list.makeVisible(k)},500)),delete j._pendingSelectURL,{v:void 0}}();if("object"==typeof U)return U.v}}this._pendingSelectURL=t},t.prototype.renameFile=function(t,j,k){var U=this;if(!t||t.$34$||!1===t.a("editable")||!j)return!1;var K=j;Ut(t.getName())&&!Ut(j)&&(j+=".json");var y=t.path+"/"+j;if(!(j=lj.config.checkFileName(j,y)))return _t(i("editor.invalidinput"),K,function(){}),!1;if(j.length>lj.config.maxFileNameLength+5)return _t(i("editor.inputmax"),j,function(){}),!1;if(t.getName()===j)return!1;if(this.getFileNode(y))return _t(i("editor.filenameconflict"),y,function(){}),!1;t.$34$=y;var L={old:t.url,new:t.$34$,fileType:t.fileType};Ut(L.old)&&this.request("rename",{old:Rt(L.old),new:Rt(L.new),fileType:iC},function(t){}),this.request("rename",L,function(i){if(i){U.mainTabView.getTabModel().each(function(C){C.getTag()===t.url&&(C.setTag(t.$34$),C.getView().url=t.$34$,C.setName(x(j)))}),k();var K=C(L);return K.data=t,U.fireEvent("fileRenamed",K),!0}return delete t.$34$,!1})},t.prototype.moveFile=function(t,j){if(t&&!1!==t.a("editable")&&j&&!t.$34$&&!j.$34$){var C={data:t,url:t.url,parent:j};if(this.fireEvent("fileMoving",C),!C.preventDefault){var k=t.getParent();if(t.setParent(j),k!==t.getParent()){t.$34$=j.url+"/"+t.getName();var i={old:t.url,new:t.$34$};Ut(i.old)&&this.request("rename",{old:Rt(i.old),new:Rt(i.new)},function(t){}),this.request("rename",i,function(t){})}}}},t.prototype.removeFiles=function(t){var j=this;t.forEach(function(t){if(!t.$34$&&!1!==t.a("editable")){var C=t.url||t;Ut(C)&&j.request("remove",Rt(C),function(t){}),j.request("remove",C,function(k){j.fireEvent("fileDeleted",{data:t,url:C})})}})},t.prototype.requestBase64=function(t,j){this.request("source",{url:t,encoding:"base64",prefix:"data:;base64,"},j)},t.prototype.request=function(t,j,C,k){var i=this;C=C||this.emptyFunc,k?setTimeout(function(){i.$40$.request(t,j,C)},k):this.$40$.request(t,j,C)},t.prototype.requestDisplays=function(){var t=this;this._requestingDisplays||(this.request("explore","/displays",function(j){t._requestingDisplays=!1,t.displays.parse(j),t._pendingOpenJSON&&P(t._pendingOpenJSON)&&(t.displays.dataModel.getDataById(t._pendingOpenJSON)?(t.open(t._pendingOpenJSON),t.selectFileNode(t._pendingOpenJSON)):lj.config.newIfFailToOpen&&(t.newDisplayView(),t.save(null,t._pendingOpenJSON)),delete t._pendingOpenJSON),t._pendingSelectURL&&P(t._pendingSelectURL)&&t.selectFileNode(t._pendingSelectURL)},lj.config.requestDelay),this._requestingDisplays=!0)},t.prototype.requestSymbols=function(){var t=this;this._requestingSymbols||(this.request("explore","/symbols",function(j){t._requestingSymbols=!1,t.symbols.parse(j),t._pendingOpenJSON&&l(t._pendingOpenJSON)&&(t.symbols.dataModel.getDataById(t._pendingOpenJSON)?(t.open(t._pendingOpenJSON),t.selectFileNode(t._pendingOpenJSON)):lj.config.newIfFailToOpen&&(t.newSymbolView(),t.save(null,t._pendingOpenJSON)),delete t._pendingOpenJSON),t._pendingSelectURL&&l(t._pendingSelectURL)&&t.selectFileNode(t._pendingSelectURL)},lj.config.requestDelay),this._requestingSymbols=!0)},t.prototype.requestComponents=function(){var t=this;this._requestingComponents||(this.request("explore","/components",function(j){t._requestingComponents=!1,t.components.parse(j),t._pendingOpenJSON&&tt(t._pendingOpenJSON)&&(t.components.dataModel.getDataById(t._pendingOpenJSON)?t.open(t._pendingOpenJSON):lj.config.newIfFailToOpen&&t.newComponent(),delete t._pendingOpenJSON),t._pendingSelectURL&&tt(t._pendingSelectURL)&&t.selectFileNode(t._pendingSelectURL)},lj.config.requestDelay),this._requestingComponents=!0)},t.prototype.requestScenes=function(){var t=this;this._requestingScenes||(this.request("explore","/scenes",function(j){t._requestingScenes=!1,t.scenes.parse(j),t._pendingOpenJSON&&jt(t._pendingOpenJSON)&&(t.open(t._pendingOpenJSON),delete t._pendingOpenJSON),t._pendingSelectURL&&jt(t._pendingSelectURL)&&t.selectFileNode(t._pendingSelectURL)},lj.config.requestDelay),this._requestingScenes=!0)},t.prototype.requestModels=function(){var t=this;this._requestingModels||(this.request("explore","/models",function(j){t._requestingModels=!1,t.models.parse(j),t._pendingOpenJSON&&Ct(t._pendingOpenJSON)&&(t.open(t._pendingOpenJSON),delete t._pendingOpenJSON),t._pendingSelectURL&&Ct(t._pendingSelectURL)&&t.selectFileNode(t._pendingSelectURL)},lj.config.requestDelay),this._requestingModels=!0)},t.prototype.requestAssets=function(){var t=this;this._requestingAssets||(this.request("explore","/assets",function(j){t._requestingAssets=!1,t.assets.parse(j),t._pendingOpenJSON&&kt(t._pendingOpenJSON)&&(t.open(t._pendingOpenJSON),delete t._pendingOpenJSON),t._pendingSelectURL&&kt(t._pendingSelectURL)&&t.selectFileNode(t._pendingSelectURL)},lj.config.requestDelay),this._requestingAssets=!0)},t.prototype.requestImport=function(t){var j=this;lj.config.importConfirm?_t("",i("editor.importconfirm"),function(){j.request("import",{path:t,move:!0})},function(){j.request("import",{path:t,move:!1})}):this.request("import",{path:t,move:!0})},t.prototype.downloadFile=function(t){try{var j=document.createElement("iframe");j.src=t,j.style.display="none",document.body.appendChild(j)}catch(t){}},t.prototype.$6$=function(t){var j=this._currentTab,C=this.rightBottomTabView.getTabModel().sm();this._currentTab=t,this.inspectorPane.$6$(t),this.listPane.$6$(t),this.overview.$6$(t),this.dataView.$6$(t),this.layerPane.$6$(t),this.mainToolbar.$6$(t),this.rightToolbar.$6$(t),this.inspectorTool.$6$(t),this.symbolStatePane.$6$(t),this.layerTab.setVisible(!!this.displayView||!!this.sceneView),this.symbolStateTab.setVisible(!!this.symbolView),(!this.symbolView&&C.co(this.symbolStateTab)||this.symbolView&&C.co(this.layerTab)||!t&&(C.co(this.symbolStateTab)||C.co(this.layerTab)))&&C.ss(this.listPaneTab),this.fireEvent("tabUpdated",{tab:t,oldTab:j})},t.prototype.beginTransaction=function(){this.dm&&this.dm.beginTransaction()},t.prototype.endTransaction=function(){this.dm&&this.dm.endTransaction()},t.prototype.$101$=function(){this.mainTabView.$101$()},t.prototype.dropLocalFileOnGraphView=function(t){if(this.currentView){var j={event:t};if(this.fireViewEvent(this.currentView,"OutsideDropping",j),!j.preventDefault)for(var C=t.dataTransfer.files,k=0;k<C.length;k++){var i=C[k],U=i.name;it(U)?this.insertLocalImageFile(t,i):Ut(U)&&this.insertLocalJSONFile(t,i)}}},t.prototype.insertLocalImageFile=function(t,j){var C=this,k=this.gv.lp(t);lt(j,function(t){if(C.displayView){var i=new ht.Node;i.setImage(t),i.p(k),i.setDisplayName(o(j.name)),C.displayView.addData(i)}else if(C.symbolView){var U=new GC({type:"image",name:t,rect:[k.x,k.y,-1,-1]});U.setDisplayName(o(j.name)),C.symbolView.addData(U)}},!0)},t.prototype.insertLocalJSONFile=function(t,j){var C=this;lt(j,function(j){C.$99$(j,C.currentView.graphView.lp(t))})},t.prototype.dropLocalFileOnDir=function(t,j){for(var C=t.dataTransfer.files,k=j.url,U=0;U<C.length;U++){var K=C[U].name;if(!lj.config.checkFileName(K,k+"/"+K))return void _t(i("editor.invalidfilename"),K,function(){})}for(var y=0;y<C.length;y++)this.uploadLocalFile(C[y],k)},t.prototype.uploadLocalFile=function(t,j){var C=this,k=lj.config.checkFileName(t.name,j+"/"+t.name);k&&lt(t,function(t){var i={path:j+"/"+k,content:t};C.request("upload",i)},!0)},t.prototype.addTab=function(t,j){this.mainTabView.add(t),this.fireEvent("tabCreated",{tab:t}),j&&this.mainTabView.getTabModel().sm().ss(t),this.mainTabView.validate()},t.prototype.openByJSON=function(t,j,C,k,i){this.mainTabView.getTabModel();if(t===KC){var U=this.mainTabView.getTabModel().getDataByTag(j);U||(U=new ht.Tab,U.setTag(j),U.setIcon("editor.display"),U.setClosable(!0),U.setName(C),new dk(this,U,j,k),this.addTab(U)),this.mainTabView.getTabModel().sm().ss(U)}else if(t===UC){var K=this.mainTabView.getTabModel().getDataByTag(j);K||(K=new ht.Tab,K.setTag(j),K.setIcon("editor.symbol"),K.setClosable(!0),K.setName(C),new Hk(this,K,j,k),this.addTab(K)),this.mainTabView.getTabModel().sm().ss(K)}else t===yC&&this.componentView.update(j,i,C,k)},t.prototype.isOpenable=function(t){return!lj.config.isOpenable||lj.config.isOpenable(t)},t.prototype.open=function(t,j){var C=this;dt(t)&&(t=this.getFileNode(t)),t&&!t.$34$&&this.isOpenable(t)&&(t.fileType===KC||t.fileType===UC||t.fileType===XC?this.mainTabView.open(t):t.fileType===yC?this.componentView.open(t):t.fileType===iC&&(Lt(t.url)?Y(t.url,function(k){var i=ht.Default.svgToShape(k,{segments:lj.config.svgSegments});setTimeout(function(){var k=x(t.getName());j?C.newSymbolView(k,!1):C.newDisplayView(k),i.output.comps.forEach(function(t){delete t.repeatImage}),C.beginTransaction(),lj.toDatas(i.output.comps,j).forEach(function(t){C.currentView.addData(t,!0)}),j&&(i.output.width&&C.dm.a("width",i.output.width),i.output.height&&C.dm.a("height",i.output.height)),C.zoomToFit(),C.endTransaction()},lj.config.svgWaitingTime)}):Xt(t.url)?Y(t.url,function(k){var i=x(t.getName()),U=ht.Default.cadToShape(k,{boundingType:j?lj.config.cadToSymbolBoundingType:lj.config.cadToDisplayBoundingType}),K={},y=Object.keys(U.blockDef).length,L=function(){j?C.newSymbolView(i,!1):C.newDisplayView(i),C.beginTransaction(),U.comps.forEach(function(t){"image"===t.type&&K[t.name]&&(t.name=K[t.name])}),lj.toDatas(U.comps,j).forEach(function(t){C.currentView.addData(t,!0)}),j&&(U.width&&C.dm.a("width",U.width),U.height&&C.dm.a("height",U.height)),C.zoomToFit(),C.endTransaction()};y?function(){var j=function(){0===--y&&L()},k="symbols/"+t.path.substr("assets/".length)+"/"+i+"/";for(var X in U.blockDef){U.blockDef[X].comps.forEach(function(t){"image"===t.type&&(t.name=k+t.name+".json")});var u={path:K[X]=k+X+".json",content:s(U.blockDef[X])};C.request("upload",u,j)}}():L()}):(Bt(t.url)||ct(t.url))&&Y(t.url,function(j){C.fontConverterOptionView.open(function(k){ht.Default.fontToShape(j,k,function(j){var k=x(t.getName());C.newSymbolView(k,!1),C.beginTransaction(),C.currentView.update(ht.Default.stringify(j)),C.endTransaction(),C.currentView.dirty=!0})})},{responseType:"arraybuffer"})))},t.prototype.$99$=function(t,j){var C=this;if(t){if(this.beginTransaction(),t=e(t),this.displayView&&Dt(t.d)){var k=this.displayView.graphView;this.displayView.isDeserializing=!0;var i=k.dm().deserialize(t,k.getCurrentSubGraph(),{justDatas:!0,disableOnPreDeserialize:!0,disableOnPostDeserialize:!0});if(this.displayView.isDeserializing=!1,k.sm().ss(i.toList(k.isSelectable,k)),i.each(function(t){C.displayView.addData(t,!0,!0)}),j){var U=k.getUnionNodeRect(i.toArray());k.moveDatas(i,j.x-U.x-U.width/2,j.y-U.y-U.height/2)}}else this.symbolView&&Dt(t.comps)&&t.comps.forEach(function(t){sj(t,C.symbolView)});this.gv.setFocus(),this.endTransaction()}},t.prototype.$100$=function(t,j){var C=this;if(t){if(!this.tab)return void this.open(t);if(this.editable)if(t.fileType!==KC){if(this.url!==t.url)if(t.fileType!==yC){if(t.fileType!==UC&&!it(t.url))return t.fileType===XC?void(this.displayView&&lj.config.handleInsertSceneFileToDisplayView&&lj.config.handleInsertSceneFileToDisplayView(this.displayView,t,j)):t.fileType===LC?void(this.displayView&&lj.config.handleInsertModelFileToDisplayView&&lj.config.handleInsertModelFileToDisplayView(this.displayView,t,j)):void 0;if(this.displayView){var k=new ht.Node;if(k.setImage(t.getFileUUID()),j)k.p(j.x,j.y);else{var i=this.gv.getViewRect();i&&k.p(i.x+i.width/2,i.y+i.height/2)}k.setDisplayName(o(t.url)),this.displayView.addData(k)}else if(this.symbolView){var U=ht.Default.getImage(t.getFileUUID()),K=U?U.width:-1,y=U?U.height:-1,L=j?j.x:(this.dm.a("width")||0)/2,X=j?j.y:(this.dm.a("height")||0)/2,u=new GC({type:"image",name:t.getFileUUID(),rect:[L-(K>0?K/2:0),X-(y>0?y/2:0),K,y]});u.setDisplayName(o(t.url)),this.symbolView.addData(u)}}else if(this.symbolView){var a=new Uk({type:t.getFileUUID(),rect:[j?j.x:(this.dm.a("width")||0)/2,j?j.y:(this.dm.a("height")||0)/2,-1,-1]},void 0,void 0,!0);a.setDisplayName(o(t.url)),this.symbolView.addData(a)}}else if(this.displayView)if(lj.config.insertDisplayViewAsRefGraph){var B=new ht.RefGraph;B.setRef(t.getFileUUID()),B.onPendingUpdated=function(){B.onPendingUpdated=null,B.p(j)},B.setDisplayName(o(t.url)),this.displayView.addData(B)}else Y(t.url,function(t){C.$99$(t,j)})}},t.prototype.newDisplayView=function(t){return this.mainTabView.newDisplayView(t)},t.prototype.newSymbolView=function(t,j){return this.mainTabView.newSymbolView(t,j)},t.prototype.newComponent=function(t){this.componentView.open(null,t)},t.prototype.save=function(t,j){if(RC){var C=document.activeElement;C&&C.blur&&C.blur()}this.mainTabView.save(t,j)},t.prototype.saveAll=function(t){this.mainTabView.saveAll(t)},t.prototype.reload=function(){this.mainTabView.reload()},t.prototype.preview=function(){this.mainTabView.preview()},t.prototype.closeTab=function(t,j,C){this.mainTabView.closeTab(t,j,C)},t.prototype.closeOtherTabs=function(t,j){this.mainTabView.closeOtherTabs(t,j)},t.prototype.closeTabsToTheRight=function(t,j){this.mainTabView.closeTabsToTheRight(t,j)},t.prototype.closeAllTabs=function(t,j){this.mainTabView.closeAllTabs(t,j)},t.prototype.filterProperties=function(){this.inspector&&this.inspector.filterPropertiesLater()},t.prototype.isRulerEnabled=function(){return this._rulerEnabled},t.prototype.setRulerEnabled=function(t){var j=this._rulerEnabled;j!==t&&(this._rulerEnabled=t,this.tabs.forEach(function(j){j.getView().setRulerEnabled(t)}),this.fp("rulerEnabled",j,t))},t.prototype.toggleRulerEnabled=function(){this.setRulerEnabled(!this.isRulerEnabled())},t.prototype.isGridEnabled=function(){return this._gridEnabled},t.prototype.setGridEnabled=function(t){var j=this._gridEnabled;j!==t&&(this._gridEnabled=t,this.tabs.forEach(function(j){j.getView().setGridEnabled(t)}),this.fp("gridEnabled",j,t))},t.prototype.toggleGridEnabled=function(){this.setGridEnabled(!this.isGridEnabled())},t.prototype.toggleLeft=function(){"normal"===this.leftSplitView.getStatus()?this.leftSplitView.setStatus("cl"):this.leftSplitView.setStatus("normal")},t.prototype.toggleRight=function(){"normal"===this.mainSplitView.getStatus()?this.mainSplitView.setStatus("cr"):this.mainSplitView.setStatus("normal")},t.prototype.toggleBoth=function(){"normal"===this.mainSplitView.getStatus()||"normal"===this.leftSplitView.getStatus()?(this.mainSplitView.setStatus("cr"),this.leftSplitView.setStatus("cl")):(this.mainSplitView.setStatus("normal"),this.leftSplitView.setStatus("normal"))},t.prototype.zoomIn=function(){this.gv&&this.gv.zoomIn(lj.config.animate)},t.prototype.zoomOut=function(){this.gv&&this.gv.zoomOut(lj.config.animate)},t.prototype.zoomReset=function(){this.gv&&this.gv.zoomReset(lj.config.animate)},t.prototype.zoomToFit=function(){this.gv&&this.gv.fitContent(lj.config.animate,lj.config.fitPadding)},t.prototype.delete=function(){this.gv&&this.gv.removeSelection()},t.prototype.copyFiles=function(){this.explorer.copyFiles()},t.prototype.pasteFiles=function(){this.explorer.pasteFiles()},t.prototype.copy=function(){var t=this;if(this.ld){var j=this.cloneInfo;if(j.funcArray.length=0,j.jsonArray.length=0,j.offset={x:0,y:0},j.lastCheck=null,j.lastView=this.gv,this.displayView)j.type="display";else{if(!this.symbolView)return void(j.type=null);j.type="symbol"}var C={};this.selection.forEach(function(t){t._refGraph||(C[t._id]=t,t instanceof ht.Block&&!(t instanceof ht.RefGraph)&&W(t,C))});var k=[],i=void 0;this.gv.each(function(t){C[t._id]&&(k.push(t),t instanceof ht.Node&&(i=i?ht.Default.unionRect(i,t.getRect()):t.getRect()))}),j.rect=i,this.gv.copyMap=C,k.forEach(function(C){var k=t.gv.isSelected(C),i=C.$51$(t.gv);if(0!==i.length){j.funcArray.push([C._id,k].concat(i));var U=Tj(C);U&&j.jsonArray.push([k,U])}}),this.fireEvent("copy",{datas:k,info:j}),this.gv.copyMap=null}},t.prototype.hasCopyInfo=function(){return this.cloneInfo.funcArray.length>0},t.prototype.paste=function(t,j){var C=this;if(this.editable){var k=this.gv,i=this.cloneInfo;if(i.funcArray.length&&k){var U=[],K=[];if(this.beginTransaction(),ht.Default.setIsolating(!0),"display"===i.type&&this.displayView||"symbol"===i.type&&this.symbolView){var y={},L=[];i.funcArray.forEach(function(t){var j=t[0],i=t[1],X=t[2],u=t[3],a=u(X,k);C.currentView.addData(a,!0),y[j]=a,U.push(a),L.push(X),i&&K.push(a)});for(var X=0;X<U.length;X++)U[X].$50$(L[X],k,y)}else i.jsonArray.length&&i.jsonArray.forEach(function(t){var j=t[0],i=t[1],y=Ej(i,!!C.symbolView);y&&(y.setParent(k.getCurrentSubGraph()),C.currentView.addData(y,!0),U.push(y),j&&K.push(y))});if(ht.Default.setIsolating(!1),K.length&&this.sm.ss(K),i.lastView!==k&&(i.offset.x=-lj.config.pasteOffset,i.offset.y=-lj.config.pasteOffset),!t&&U.length){if(j){var u=i.rect;i.offset.x=j.x-u.x-u.width/2,i.offset.y=j.y-u.y-u.height/2}else i.offset.x+=lj.config.pasteOffset,i.offset.y+=lj.config.pasteOffset;k.moveDatas(U,i.offset.x,i.offset.y);var a=k.$64$(U);a&&(i.offset.x+=a.x,i.offset.y+=a.y,i.lastCheck||(k.moveDatas(U,-lj.config.pasteOffset,-lj.config.pasteOffset),i.offset.x-=lj.config.pasteOffset,i.offset.y-=lj.config.pasteOffset)),i.lastCheck=a}i.lastView=k,this.fireEvent("paste",{datas:U,info:i}),k.setFocus(),this.endTransaction()}}},t.prototype.block=function(){if(this.editable&&this.displayView){var t=this.selection;if(t.length){this.beginTransaction();var j=new ht.Block;t.forEach(function(t){t.setParent(j)}),this.displayView.addData(j),this.endTransaction()}}},t.prototype.unblock=function(){var t=this;if(this.editable&&this.displayView){this.beginTransaction();var j=[];this.selection.forEach(function(C){if(C instanceof ht.Block&&!(C instanceof ht.RefGraph)){var k=C.getParent();C.getChildren().toArray().forEach(function(t){t.setParent(k),j.push(t)}),t.dm.remove(C)}}),j.length&&(this.sm.ss(j),this.gv.setFocus()),this.endTransaction()}},t.prototype.bringForward=function(){this.editable&&this.dm&&(this.dm.isHierarchicalRendering()?this.dm.moveSelectionDown():this.dm.bringSelectionForward())},t.prototype.bringToFront=function(){this.editable&&this.dm&&(this.dm.isHierarchicalRendering()?this.dm.moveSelectionToBottom():this.dm.bringSelectionToFront())},t.prototype.sendBackward=function(){this.editable&&this.dm&&(this.dm.isHierarchicalRendering()?this.dm.moveSelectionUp():this.dm.sendSelectionBackward())},t.prototype.sendToBack=function(){this.editable&&this.dm&&(this.dm.isHierarchicalRendering()?this.dm.moveSelectionToTop():this.dm.sendSelectionToBack())},t.prototype.undo=function(){this.editable&&this.dm.getHistoryManager()&&this.dm.getHistoryManager().canUndo()&&(this.dm.undo(),this.fireEvent("undo",{}))},t.prototype.redo=function(){this.editable&&this.dm.getHistoryManager()&&this.dm.getHistoryManager().canRedo()&&(this.dm.redo(),this.fireEvent("redo",{}))},t.prototype.distributeHorizontal=function(){this.editable&&this.inspectorTool.distributeHorizontal()},t.prototype.distributeVertical=function(){this.editable&&this.inspectorTool.distributeVertical()},t.prototype.alignLeft=function(){this.editable&&this.inspectorTool.alignLeft()},t.prototype.alignHorizontal=function(){this.editable&&this.inspectorTool.alignHorizontal()},t.prototype.alignRight=function(){this.editable&&this.inspectorTool.alignRight()},t.prototype.alignTop=function(){this.editable&&this.inspectorTool.alignTop()},t.prototype.alignVertical=function(){this.editable&&this.inspectorTool.alignVertical()},t.prototype.alignBottom=function(){this.editable&&this.inspectorTool.alignBottom()},t.prototype.folder=function(){if(this.editable&&this.displayView){this.beginTransaction();var t=new ht.Data;t.s("editor.folder",!0),this.dm.add(t);this.list.getTopRowOrderSelection().each(function(j){t.addChild(j)}),this.sm.ss(t),this.endTransaction()}},t.prototype.unfolder=function(){var t=this;if(this.editable&&this.displayView){this.beginTransaction();var j=this.sm.toSelection(function(t){return t.s("editor.folder")});j.forEach(function(t){t.toChildren().forEach(function(j){j.setParent(t.getParent())})}),j.forEach(function(j){t.dm.remove(j)}),this.endTransaction()}},t.prototype.locate=function(t){t&&this.request("locate",t.url||t)},t.prototype.saveImage=function(t,j,C){var k=this,i=function(){var i={path:j,content:ij(t)};k.request("upload",i,C)};if(dt(t)&&!ht.Default.getImage(t))if(/.json$/.test(t))ht.Default.xhrLoad(t,function(j){j&&(ht.Default.setImage(t,ht.Default.parse(j)),i())});else{var U=new window.Image;U.onload=function(){ht.Default.setImage(t,U),i()},U.src=t}else i()},t.prototype.handleKeydown=function(t){var j=t.keyCode;if(M(t)&&83===j&&t.preventDefault(),dC.length){if((t.target._ignore||!St(t.target))&&!ht.Default.popup){var C=dC[dC.length-1];m(t)&&C.$49$?C.$49$():d(t)&&C.$48$&&C.$48$()}}else{var k={event:t};if(this.fireEvent("keydown",k),!k.preventDefault){if(M(t)&&83===j)return void this.save();if(!St(t.target)){if(t.preventDefault(),m(t)){for(var i=0;i<this.menus.length;i++)if(this.menus[i].isShowing())return void this.menus[i].hide();if(this.funcView.smartClose&&this.funcView.getView().parentNode)return void this.funcView.hide();if(this.iconsView.getView().parentNode)return void this.iconsView.hide();if(this.tab){var U=this.tab.getView().graphView.getInteractors();U&&U.each(function(j){j.$49$&&j.$49$(t)})}}80===j?this.preview():187===j?this.zoomIn():189===j?this.zoomOut():48===j?this.zoomToFit():57===j?this.zoomReset():M(t)&&67===j?this.copy():M(t)&&86===j?this.paste():M(t)&&p(t)&&90===j?this.redo():M(t)&&90===j?this.undo():t.altKey&&M(t)&&221===j?this.bringToFront():t.altKey&&M(t)&&219===j?this.sendToBack():M(t)&&221===j?this.bringForward():M(t)&&219===j&&this.sendBackward()}}}},t.prototype.createDisplayItem=function(t,j,C,k,i){var U=this,K=function(){return U.displayView&&U.displayView.$4$()===t},y=gt(t,j,C,K);return y.visible=function(){return!!U.displayView},y.action=function(){U.displayView&&U.displayView.$5$(t,k,i)},y},t.prototype.createSymbolItem=function(t,j,C,k,i){var U=this,K=function(){return U.symbolView&&U.symbolView.$4$()===t},y=gt(t,j,C,K);return y.visible=function(){return!!U.symbolView},y.action=function(){U.symbolView&&U.symbolView.$5$(t,k,i)},y},t.prototype.showMessage=function(t,j,C){this.messageView.show(t,j,C)},t.prototype.showConfirm=function(t,j,C,k){this.confirmView.show(t,j,C,k)},t.prototype.batchConvertSVG=function(t){var j=this,C=[],k=[];t.forEach(function(t){Lt(t.url)&&(C.push(t.url),k.push(t))});var U=2*C.length,K=0,y=function(){++K===U&&j.showMessage(yj(i("editor.batchconvertsuccess"),C.length+""))};Y(C,function(t){t.forEach(function(t,C){var i=k[C],U=ht.Default.svgToShape(t,{segments:lj.config.svgSegments}),K=i.path.replace(/^assets/g,"symbols"),L=i.getName().replace(/svg$/g,"json");setTimeout(function(){j.request("upload",{path:K+"/"+L,content:s(U.output)},y),L=i.getName().replace(/svg$/g,"png"),j.request("upload",{path:K+"/"+L,content:ij(U.output)},y)},lj.config.svgWaitingTime)})})},_j(t,[{key:"editable",get:function(){return!!this.currentView&&this.currentView.editable},set:function(t){this.currentView&&(this.currentView.editable=t)}},{key:"dm",get:function(){return this.gv?this.gv.dm():null}},{key:"gv",get:function(){var t=this.mainTabView.getTabModel().sm().ld();return t?t.getView().graphView:null}},{key:"editInteractor",get:function(){return this.gv?this.gv.getEditInteractor():null}},{key:"pointsEditingMode",get:function(){return!!this.editInteractor&&this.editInteractor.pointsEditingMode},set:function(t){this.editInteractor&&(this.editInteractor.pointsEditingMode=t)}},{key:"anchorVisible",get:function(){return!!this.gv&&this.gv.getEditStyle("anchorVisible")},set:function(t){this.gv&&this.gv.setEditStyle("anchorVisible",t)}},{key:"sm",get:function(){return this.gv?this.gv.sm():null}},{key:"ld",get:function(){return this.sm?this.sm.ld():null}},{key:"selection",get:function(){var t=this,j=[];return this.gv&&this.gv.each(function(C){t.gv.isSelected(C)&&j.push(C)}),j}},{key:"tabs",get:function(){return this.mainTabView.tabs}},{key:"inspector",get:function(){return this.inspectorPane.inspector}},{key:"list",get:function(){return this.listPane.list}},{key:"tab",get:function(){return this.mainTabView.currentTab}},{key:"url",get:function(){return this.tab?this.tab.getTag():null}},{key:"explorer",get:function(){return this.leftTopTabView.getCurrentTab().getView()}},{key:"dir",get:function(){return this.explorer?this.explorer.tree.getSelectionModel().getLastData():null}},{key:"file",get:function(){return this.explorer?this.explorer.getFileListView().getSelectionModel().getLastData():null}},{key:"currentLayer",get:function(){return this.layerPane.currentLayer}},{key:"currentView",get:function(){var t=this.tab;return t?t.getView():null}},{key:"displayTree",get:function(){return this.displayView?this.displayView.displayTree:null}},{key:"displayView",get:function(){var t=this.currentView;return t instanceof dk?t:null}},{key:"symbolList",get:function(){return this.symbolView?this.symbolView.symbolList:null}},{key:"symbolView",get:function(){var t=this.currentView;return t instanceof Hk?t:null}},{key:"inspectorCompact",get:function(){return this._inspectorCompact},set:function(t){this._inspectorCompact=t,this.filterProperties(),this.inspectorTool.iv()}},{key:"inspectorInputFilter",get:function(){return this.inspectorTool.searchField.getValue()},set:function(t){this.inspectorTool.searchField.setValue(t),this.filterProperties()}}]),t}();h(si,{ms_fire:1,_rulerEnabled:lj.config.rulerEnabled,_gridEnabled:lj.config.gridEnabled}),lj.Editor=si;var ei=function(){function t(j,C){var k=this;Ij(this,t),this.editor=C,this.handler=j,this.cookie=0,this.callbacks={},this.cmds={},this.fileChangeVersion=String((new Date).getTime());var i=lj.config.host||window.location.hostname,U=lj.config.port||window.location.port,K=this.url=window.location.protocol+"//"+i+":"+U;setTimeout(function(){k.handler({type:"connected",message:K})},1),lj.config.checkForFileChanges&&lj.config.checkForFileChangesInterval&&this.fileChangedEvent()}return t.prototype.request=function(t,j,C){var k=++this.cookie;this.callbacks[k]=C,this.cmds[k]=t;var i=this.editor.sid;this[t](k,j,i||null,C);var U=t;j&&(dt(j)?U=t+": "+j:j.path&&(U=t+": "+j.path)),this.handler({type:"request",message:U,cmd:t,data:j})},t.prototype.fileChangedEvent=function(){var t=this,j=this.url+"/fileVersion";j+="/"+t.fileChangeVersion,j+="?sid="+this.editor.sid,t.send("GET",j,null,function(j){t.fileChangeVersion=String((new Date).getTime());var C=j.target.response;if(C){C=JSON.parse(C);Object.keys(C).forEach(function(j){t.handler({type:"fileChanged",path:j})})}}),setTimeout(function(){t.fileChangedEvent()},lj.config.checkForFileChangesInterval)},t.prototype.export=function(t,j,C){var k=this,i=new ht.Request,U={},K=new FormData,y=this.url+"/export";y+="?sid="+C,K.append("dir",j),U.url=encodeURI(y),U.method="POST",U.data=K,i.setResponseType("blob"),i.onload=function(j){var C=j.target;if(200==C.status||0===C.status){var i=C.response,U=C.getResponseHeader("Content-Disposition").split(";"),K=U[1].split("=")[1],y=new Blob([i],{type:"application/zip"}),L=document.createElement("a");L.href=window.URL.createObjectURL(y),L.download=decodeURI(K),L.click(),k.handleRespone(t,!0)}},i.send(U)},t.prototype.mkdir=function(t,j,C){var k=this,i=new ht.Request,U={},K=new FormData,y=this.url+"/mkdir";y+="?sid="+C,K.append("path",j),U.url=encodeURI(y),U.method="POST",U.data=K,i.onload=function(C){var i=C.target;if(200==i.status||0===i.status){var U=i.response||i.responseText;k.handleRespone(t,"true"===U),k.handler({type:"fileChanged",path:j})}},i.send(U)},t.prototype.explore=function(t,j,C){var k=this,i=new ht.Request,U={},K=this.url+"/explore";K+=j,K+="?sid="+C,U.url=encodeURI(K),i.onload=function(j){var C=j.target;if(200==C.status||0===C.status){var i=C.response||C.responseText;k.handleRespone(t,JSON.parse(i))}},i.send(U)},t.prototype.upload=function(t,j,C){var k=this,i=new FormData,U=this.url+"/upload",K=j.path;U+="?sid="+C,i.append("path",j.path),i.append("content",j.content),k.send("POST",U,i,function(j){var C=j.target;if(200==C.status||0===C.status){var i=C.response;if(k.handleRespone(t,!0),i){var U=JSON.parse(i);k.handler({type:"confirm",path:U.tempName,datas:U.paths})}else k.handler({type:"fileChanged",path:K})}})},t.prototype.rename=function(t,j,C){var k=this,i=new FormData,U=j.new,K=j.old,y=this.url+"/rename";y+="?sid="+C,i.append("newPath",U),i.append("oldPath",K),k.send("POST",y,i,function(j){var C=j.target;if(200==C.status||0===C.status){var i=C.response||C.responseText
;k.handleRespone(t,"true"===i),"true"===i&&(k.handler({type:"fileChanged",path:U}),k.handler({type:"fileChanged",path:K}))}})},t.prototype.remove=function(t,j,C){var k=this,i=new FormData,U=this.url+"/remove";U+="?sid="+C,i.append("path",j),k.send("POST",U,i,function(C){var i=C.target;if(200==i.status||0===i.status){var U=i.response||i.responseText;k.handleRespone(t,"true"===U),"true"===U&&k.handler({type:"fileChanged",path:j})}})},t.prototype.locate=function(t,j,C){var k=this,i=this.url+"/locate";i+="?dir="+j,i+="&sid="+C,k.send("GET",i,null,function(j){var C=j.target;200!=C.status&&0!=C.status||k.handleRespone(t,!0)})},t.prototype.open=function(t,j,C){var k=this,i=this.url+"/open";i+="?url="+j,i+="&sid="+C,k.send("GET",i,null,function(j){var C=j.target;200!=C.status&&0!=C.status||k.handleRespone(t,!0)})},t.prototype.source=function(t,j,C){var k=this,i=new FormData,U=this.url+"/source";U+="?sid="+C,i.append("url",j.url),i.append("encoding",j.encoding),i.append("prefix",j.prefix),k.send("POST",U,i,function(j){var C=j.target;if(200==C.status||0===C.status){var i=C.response||C.responseText;k.handleRespone(t,i)}})},t.prototype.import=function(t,j,C){var k=this,i=new FormData,U=this.url+"/import";U+="?sid="+C,i.append("path",j.path),i.append("move",j.move),k.send("POST",U,i,function(j){var C=j.target;200!=C.status&&0!==C.status||k.handleRespone(t,!0)})},t.prototype.send=function(t,j,C,k){var i=new ht.Request,U={};U.url=encodeURI(j),U.method=t,U.data=C,k&&(i.onload=k),i.send(U)},t.prototype.handleRespone=function(t,j){var C=this.callbacks[t],k=this.cmds[t];delete this.callbacks[t],delete this.cmds[t],this.handler({type:"response",message:k,cmd:k,data:j}),C&&C(j)},t}();return lj.config.logEditorInfo&&console.log("HT Editor v0.3.5 powered by HT for Web v"+ht.Default.getVersion()+" from www.hightopo.com"),!window.onbeforeunload&&lj.config.promptBeforeClosing&&(window.onbeforeunload=function(t){return t.returnValue=i("editor.closetip"),t.returnValue}),lj.version="0.3.5",lj.getString=i,lj.stringifyFunction=y,lj.parseFunction=X,lj.createButton=Vt,lj.createItem=gt,lj.layoutMainView=tj,lj.msClass=h,lj.initContext=g,lj.getInput=It,lj.trimExtension=x,lj.fileNameToDisplayName=o,lj.isJSON=Ut,lj.getter=u,lj.setter=a,lj.snapshot=ij,lj.CodeEditor=Pj,lj.DND=zi,lj.DNDFromOutside=Ti,lj.DNDTree=pC,lj.DNDIndexList=mk,lj.DisplayTree=NC,lj.DisplayView=dk,lj.MainTabView=Gk,lj.MainToolbar=sk,lj.MessageView=Ik,lj.ObjectView=pk,lj.EditView=ak,lj.FontView=Nk,lj.FunctionView=Yk,lj.InspectorTool=Zk,lj.Inspector=Wk,lj.InspectorPane=Ai,lj.Explorer=hC,lj.WebSocketService=YC,lj.HTTPService=ei,lj.CreateNodeInteractor=ck,lj.CreateEdgeInteractor=fk,lj.CreateShapeInteractor=Rk,lj.combineShapes=Xj,lj.splitShape=uj,lj.createEditor=function(t){if(window.location.host.indexOf("hightopo")>=0){var j="https:"==document.location.protocol?" https://":" http://";document.write(unescape("%3Cdiv style='display:none'%3E%3Cspan id='cnzz_stat_icon_1000279011'%3E%3C/span%3E%3Cscript src='"+j+"s23.cnzz.com/z_stat.php%3Fid%3D1000279011%26show%3Dpic' type='text/javascript'%3E%3C/script%3E%3C/div%3E")),document.body.style.margin="0px",document.body.style.padding="0px"}t&&(ht.Default.isString(t)?t={container:t}:t.tagName&&t.appendChild&&(t={container:t})),t=t||{};var C=void 0,k=void 0===t.container?lj.config.container:t.container;return null===k?C=null:k?ht.Default.isString(k)?C=document.getElementById(k):k.length?(C=ht.Default.createDiv(),C.style.left=k[0]+"px",C.style.top=k[1]+"px",C.style.width=k[2]+"px",C.style.height=k[3]+"px",document.body.appendChild(C)):C=k:C=document.body,t.$39$=C,new si(t)},lj.init=function(){lj.consts||(rj(),wj(),nj())},lj}();